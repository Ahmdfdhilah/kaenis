"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="52a9b13b-6c2c-5ecf-b803-05f0186eb5b5")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[7872,1861],{206692:(e,t,i)=>{i.r(t),i.d(t,{DesignView:()=>dz});var n=i(104076),s=i(716976),l=i(903927),r=i(65545),a=i(266808),o=i(812714),d=i(452157),x=i(394549),u=i(1188),c=i(192075),h=i(638004),p=i(795033),m=i(120440),g=i(692042),f=i(594440),y=i(748128),_=i(158042),j=i(74620),b=i(835307);function v(e){let t=C((0,p.md)(_.zy)??[],e),i=s.useMemo(()=>Math.min(25,.5*t.height),[t]);return{x:t.x+t.width+9+8,y:t.y+i}}let k=e=>(0,b.Fk)((e,t)=>{let i=t.map(t=>e.get(t)?.absoluteBoundingBox).filter(e=>void 0!==e);if(0===i.length)return{x:0,y:0,width:0,height:0};let n=i[0].x,s=i[0].y,l=i[0].x+i[0].w,r=i[0].y+i[0].h;for(let e=1;e<i.length;e++){let t=i[e];n=Math.min(n,t.x),s=Math.min(s,t.y),l=Math.max(l,t.x+t.w),r=Math.max(r,t.y+t.h)}let a=l-n,o=r-s;return{x:n,y:s,width:a,height:o}},e);function C(e,t){let i=(0,j.eY)(),n=(0,g._X)({subscribeToUpdates_expensive:t&&e.length>0}),l=k(e);return s.useMemo(()=>i?(0,g.Yb)(n,l):{x:0,y:0,width:0,height:0},[l,i,n])}var E=i(819851),S=i(944350);function T(){let e=((0,o.kc)().ai_assistant,(0,E.lg)(),(0,x.BE)(),!1),t=(0,o.kc)().ai_assistant_canvas_entrypoint||!1;return e&&t}let w=()=>{let e=T(),t=function(){let e=(0,p.md)(y.J2),t=(0,p.md)(_.zy),{isOpen:i}=(0,_.QW)();return i&&t.length>0?t:e.length>0?e:[]}(),i=(0,g._X)({subscribeToUpdates_expensive:e}),n=C(t,e),s={...n,x:n.x+i.x,y:n.y+i.y};return e&&0!==t.length?s:null};function N(){let e=w();return e?(0,n.jsx)(f.lM,{targetRect:e,positionXY:e=>[e.x-16-2,e.y-16-2],children:(0,n.jsx)("div",{className:"x1n2onr6 x9h44rk xjbqb8w x1i3ajwb xmv1q7x x19wp0b7 x9tnh73 xr7n5gi xb3r6kr",style:{width:`${e.width+32}px`,height:`${e.height+32}px`},children:(0,n.jsx)("div",{className:"x10l6tqk x1yhy09f xb5nubl x1pj540q xajor8m x48ahhv x1aerksh x7t6ubo xa4qsjk x1esw782 x1vjfegm x47corl"})})}):null}var I=i(157294),L=i(122010);function R(){let e=T(),t=(0,p.md)(_.zy).length,i=(0,l.d4)(({mirror:{appModel:e}})=>[a.QOV.DEFAULT,a.QOV.SELECTING_TEXT,a.QOV.CLICKING_TO_CHANGE_SELECTION].includes(e.activeUserAction));return!!e&&!(t<1)&&!!i}function A({isHovered:e}){return(0,n.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{zIndex:1},children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.9943 3.69049C7.34215 2.76982 8.667 2.76986 9.0149 3.69049L9.04664 3.7857L9.75056 6.25307L12.2155 6.95861C13.2624 7.25822 13.2623 8.74136 12.2155 9.04106L9.74974 9.7466L9.04664 12.214C8.74757 13.262 7.26245 13.262 6.96338 12.214L6.25865 9.74823L3.78884 9.05164C2.73979 8.75581 2.7352 7.27059 3.78233 6.96837L6.25783 6.25388L6.96338 3.7857L6.9943 3.69049Z",fill:e?"var(--color-icon-onbrand)":"var(--color-icon-brand)"})})}function O({isHovered:e,setIsHovered:t}){let{isOpen:i}=(0,_.QW)(),l=s.useCallback(()=>{i?(0,_.Sz)():(0,_._C)()},[i]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("button",{className:"x1n2onr6 x71s49j xh8yej3 x5yr21d x78zum5 xl56j7k x6s0dn4",onMouseOver:()=>{t(!0)},onMouseLeave:()=>{t(!1)},onFocus:()=>{t(!0)},onBlur:()=>{t(!1)},onClick:l,style:{cursor:"pointer",background:"transparent",border:"none",padding:0},"aria-label":(0,c.t)("ai_assistant.canvas.canvas_entrypoint_label"),"data-fullscreen-intercept":!0,"data-testid":"ai-assistant-canvas-entrypoint-button",children:[(0,n.jsx)("div",{className:"x10l6tqk xwa60dl x1nrll8i x11lhmoz x1vjfegm",children:(0,n.jsx)(A,{isHovered:e||i})}),(0,n.jsx)("div",{...{0:{className:"xh8yej3 x5yr21d x67bb7w x1iirw1x xl56j7k x6s0dn4 x1s85apg xw8ag78 xvvy8qz x1wbribv"},2:{className:"xh8yej3 x5yr21d x67bb7w xl56j7k x6s0dn4 xw8ag78 xvvy8qz x1wbribv xu5wzci x78zum5"},1:{className:"xh8yej3 x5yr21d x67bb7w xl56j7k x6s0dn4 xw8ag78 xvvy8qz x1wbribv x1r45lhc x78zum5"},3:{className:"xh8yej3 x5yr21d x67bb7w xl56j7k x6s0dn4 xw8ag78 xvvy8qz x1wbribv x1r45lhc x78zum5"}}[!!e<<1|!!i<<0]})]})})}function M(){let[e,t]=s.useState(!1);return(0,n.jsx)("div",{className:"x1n2onr6 xlup9mm x1kky2od x1sxf85j xb3r6kr x78zum5 xl56j7k x6s0dn4 x15uqio4 x1ns5uhy",children:(0,n.jsx)(O,{isHovered:e,setIsHovered:t})})}function F(){let e=R(),t=function(e){let t=v(e),i=(0,g.MG)({subscribeToUpdates_expensive:!0}),n=(0,g.TZ)({subscribeToUpdates_expensive:!0});return s.useMemo(()=>({x:t.x+i,y:t.y+n}),[t,i,n])}(e);return e?(0,n.jsx)(f.lM,{targetRect:{...t,y:t.y+8,width:0,height:0},offset:0,children:(0,n.jsx)(L.m,{role:"region","aria-label":(0,c.t)("ai_assistant.canvas.canvas_entrypoint_label"),children:(0,n.jsx)(M,{})})}):null}var z=i(276800),P=i(316862);function B(){let e=function(){let{prompt:e}=(0,_.QW)(),t=(0,p.md)(_.zy);return s.useMemo(()=>0!==e.length&&0!==t.length,[e,t])}(),t=(0,p.md)(y.J2);return e&&0===t.length}var D=i(480804),V=i(314416),G=i(52547),H=i(980852),q=i(983500),U=i(997629),$=i(641518),K=i(246144),W=i(278491),Z=i(757381),X=i(739109),Y=i(766812),Q=i(409757),J=i(710361),ee=i(774583),et=i(415567),ei=i(141330),en=i(578420),es=i(592948),el=i(605862),er=i(491821),ea=i(420680),eo=i(658704),ed=i(774056),ex=i(890373),eu=i(883765),ec=i(550209),eh=i(205084),ep=i(178623),em=i(431222);let eg="\xa0\xa0\xa0\xa0\xa0\xa0...\xa0\xa0\xa0\xa0\xa0\xa0",ef=[{short:eg,full:eg},{short:eg,full:eg},{short:eg,full:eg},{short:eg,full:eg}];function ey({jsx:e,onPromptSelect:t,visible:i,clientLifecycleId:l}){let[r,a]=s.useState(!1),{suggestions:o,isLoading:d,error:x}=function(e,t){let[i,n]=s.useState(ef),[l,r]=s.useState(!0),[a,o]=s.useState(null),d=s.useMemo(()=>{let e=(0,eh.Gq)();return e?.getPrimaryLocale(!1)||"en"},[]);return s.useEffect(()=>{if(!e){r(!1);return}(async function(){r(!0),o(null);try{let i=(await ep.Ay.shared.assistantSuggestPrompts({jsx:e,userLocale:d},(0,em.sF)({clientLifecycleId:t}))).prompts||[];for(let[e,s]of(n(i),i.entries())){let{short:n,full:l}=s;eu.az.trackDefinedEvent("ai_assistant.assistant_suggested_prompt_shown",{clientLifecycleId:t,shortPrompt:n,fullPrompt:l,rank:e+1,totalPromptsShown:i.length})}}catch(e){o(e),(0,ec.$D)(h.e.AI_ASSISTANT,e)}finally{r(!1)}})()},[e,t,d]),{suggestions:i,isLoading:l,error:a}}(e,l),u=s.useCallback(()=>{a(!r)},[r]),p=s.useCallback((e,t,i)=>{l&&eu.az.trackDefinedEvent("ai_assistant.assistant_suggested_prompt_chosen",{clientLifecycleId:l,shortPrompt:e.short,fullPrompt:e.full,rank:t+1,totalPromptsShown:o.length,source:i})},[l,o.length]),m=s.useCallback((e,i)=>{p(e,i,"pill"),t(e.full)},[t,p]),g=s.useCallback((e,i)=>{p(e,i,"dropdown"),t(e.full),a(!1)},[t,p]);return i&&0!==e.length?x?(0,n.jsx)("div",{className:"xh8yej3 x178xt8z x13fuv20 x16ufvko x1yjdb4r x1w0pl8v x1lmr5wh x1n2onr6",children:(0,n.jsx)("div",{className:"xf7z5ut x172n1ly x70tecm x1ys4hos x181hs4k x2b8uid",children:(0,c.t)("ai_assistant.canvas_prompt_suggestions.error_failed_to_load")})}):(0,n.jsxs)("div",{className:"xh8yej3 x178xt8z x13fuv20 x16ufvko x1yjdb4r x1w0pl8v x1lmr5wh x1n2onr6",children:[(0,n.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 xj9xw9b x1nfngrj xf7z5ut xz9dl7a x1n2onr6",style:{paddingBottom:r?8:12},children:[(0,n.jsx)("div",{className:"x78zum5 x1q0g3np x1nfngrj x1iyjqo2 xs83m0k x1t1x2f9 xw2csxc x1rohswg xfk6m8 xyfqnmn x1cpjm7i x1hmns74 x1y3wzot x19ie1a xv3fy29 xszcg87 x4cc4f3 xkk1bqk x18qc1j8",children:r?(0,n.jsx)("div",{className:"x3vvef7 x1iyjqo2 xs83m0k x1t1x2f9 xf67zum x17akokd x1qxcl5b xno9bf3",children:(0,c.t)("ai_assistant.canvas_prompt_suggestions.suggestions_label")}):(0,n.jsx)("div",{style:{display:"contents"},children:(0,n.jsx)(e_,{suggestions:o,onPillClick:m,shimmer:d})},"pills")}),(0,n.jsx)(ea.K,{onClick:u,"aria-label":r?(0,c.t)("ai_assistant.canvas_prompt_suggestions.collapse_suggestions"):(0,c.t)("ai_assistant.canvas_prompt_suggestions.expand_suggestions"),children:r?(0,n.jsx)(eo.r,{}):(0,n.jsx)(ed.R,{})},"real-arrow")]}),r&&!d&&(0,n.jsx)(ej,{suggestions:o,onItemClick:g})]}):null}function e_({suggestions:e,onPillClick:t,shimmer:i}){return(0,n.jsx)(n.Fragment,{children:e.map((e,s)=>(0,n.jsx)("button",{...{0:{className:"x17akokd x1qxcl5b xno9bf3 xjwf9q1 x1n0bwc9 x6c5l4p xf67zum xmkeg23 x1y0btm7 x7z60cl xixl9f9 xuxw1ft x2lah0s xv2f06h x1m5i512"},1:{className:"x17akokd x1qxcl5b xno9bf3 xjwf9q1 x1n0bwc9 x6c5l4p xf67zum xixl9f9 xuxw1ft x2lah0s x47corl x176lpz5 xmkeg23 x1y0btm7 x7z60cl xwui1ri xmg6eyc x4hg4is xa4qsjk"}}[!!i<<0],onClick:()=>t(e,s),"aria-label":i?(0,c.t)("ai_assistant.canvas_prompt_suggestions.loading_suggestion"):(0,c.t)("ai_assistant.canvas_prompt_suggestions.select_pill_prompt",{prompt:e.short}),children:!i&&e.short},s))})}function ej({suggestions:e,onItemClick:t}){return(0,n.jsx)("div",{className:"x1hkcv85 x1odjw0f xf7z5ut xexx8yu",children:e.map((e,i)=>(0,n.jsx)("button",{className:"x78zum5 x1cy8zhl xf7z5ut x19y5rnk x1akne3o x17akokd x1qxcl5b xno9bf3 x1nhvcw1 xdpxx8g xeaf4i8 xh8yej3 x65nank xt7dq6l xk4td0m xv2f06h xfn42iu xng3xce x1r7ld26",onClick:()=>t(e,i),type:"button","aria-label":(0,c.t)("ai_assistant.canvas_prompt_suggestions.select_dropdown_prompt",{prompt:e.full}),children:e.full},i))})}ex.Il.textBodyMediumFontSize,ex.Il.textBodyMediumFontWeight,ex.Il.textBodyMediumLineHeight;var eb=i(404343);let ev=()=>197+((0,o.kc)().ai_ga?26:0)-((0,o.kc)().make_edits_debug?64:0),ek="ai-assistant-canvas-prompt-box-textarea",eC=/[\r\n\u2028\u2029]/;function eE({recordingKey:e,value:t,onAction:i,onChange:l,onClose:r,wiggleCount:a,disabled:d,clientLifecycleId:x}){let u=(0,s.useRef)(null),h=(0,s.useRef)(null),p=function(){let e=(0,et.Tv)(),[t,i]=s.useState("");return s.useEffect(()=>{(()=>{if(!(0,o.kc)().assistant_on_canvas_prompt_suggestions||!(e&&e.length>0)){i("");return}setTimeout(async()=>{try{let t=(0,H.UN)().getCurrentPage();if(!t)return;let n=await (0,U.oy)(t,{includeIDs:!1,maxSerializeNodes:100,maxSerializeTimeMs:100,maxExtraContextNodes:0,focusNodeIds:e,ignoreFetchingComponentData:!0});i(n.jsxStr)}catch(e){(0,K.xi)("assistant-suggest-prompts","Failed to serialize JSX for prompt suggestions:",{error:e}),i("")}},0)})()},[e]),t}(),{isPositioned:m}=function(e,t){let i=(0,g._X)({subscribeToUpdates_expensive:!0}),[n,l]=s.useState(!1),r=v(!0),a=s.useCallback(()=>{if(!r||!e.current)return;let t=new Q.Z({top:0,bottom:(0,q.hG)(eb.u24),left:0,right:0}),n={x:24,y:-25},s={x:r.x+n.x,y:r.y+n.y},a=t.computePositionWithinInsetBounds(e.current,s,{x:0,y:0,width:i.width,height:i.height},r,n),o={x:(a.x??s.x)+i.x,y:(a.y??s.y)+i.y};e.current.style.left=`${o.x}px`,e.current.style.top=`${o.y}px`,l(!0)},[i,l,r,e]);return s.useEffect(()=>{n&&t.current?.focus()},[n,t]),s.useEffect(()=>{a()},[a]),s.useEffect(()=>{if(!e.current)return;let t=new ResizeObserver(()=>{a()});return t.observe(e.current),()=>{t.disconnect()}},[a,e]),{isPositioned:n}}(u,h),f=(0,_.V8)(),y=(0,X.IQ)(),{FirstPartyExplanationPointer:j}=(0,el.i7)(m,ek),[b,k]=s.useState(!1),C=s.useCallback(({clonedTextArea:e,singleLineHeight:t,value:i,getCalculatedScrollHeight:n})=>{let s,l="large";return eC.test(i)||(e.style.width=`${ev()}px`,s=Math.max(n(),t??0),l=0===i.length||t===s?"small":"large"),(void 0===s||"large"===l)&&(e.style.width="284px",s=n()),s=Math.min(s,200),"small"===l?k(!1):k(!0),s},[k]),E=s.useCallback(()=>{h.current?.focus()},[h]),S=s.useCallback(e=>{l(e),h.current?.focus()},[l]);return(0,n.jsxs)(er.Q,{dataFullscreenIntercept:!1,children:[(0,n.jsx)(Y.p,{forceNoScroll:!0,children:(0,n.jsxs)("div",{ref:u,style:{position:"absolute",visibility:m?"visible":"hidden"},className:W.Dm,children:[f&&(0,n.jsx)(er.Q,{dataFullscreenIntercept:!1,children:(0,n.jsx)("div",{className:"xixxii4 x1ey2m1c x78zum5 xl56j7k x6s0dn4 xh8yej3 x1q2oy4v xpezlj7",style:y,children:(0,n.jsx)(G.bL,{timeout:3e3,variant:"danger",onClose:()=>(0,_._k)(),children:(0,n.jsx)(G.QB,{children:"Please wait for the current prompt to complete before submitting another."})})})}),(0,n.jsx)(ee.c,{wiggleCount:a,onWiggle:E,children:(0,n.jsxs)("div",{className:"xdzyupr x137qmg1 xbxdop8 x4zv5z4","data-testid":"ai-assistant-canvas-prompt-box",children:[(0,n.jsxs)("div",{className:"xu97haq x78zum5 x1q0g3np x167g77z xe8ttls x6s0dn4","data-onboarding-key":ek,children:[(0,n.jsx)(Z.v,{bypassModifiers:!0,calculateAdjustedHeightOnResize:C,dataTestId:"ai-assistant-canvas-prompt-box-textarea",disableBorderStyles:!1,focusOnMount:!1,innerRef:h,maxHeight:200,minHeight:24,onChange:e=>{l(e.currentTarget.value)},onEscape:r,placeholder:(0,c.t)("ai_assistant.canvas_prompt_box.placeholder"),preventSubmitOnBlur:!0,recordingKey:e,rows:1,submit:i,value:t,className:"x1tsovho x1uhom3u x1g2ur6q x1qvfvcx"}),!b&&(0,n.jsx)(eS,{onAction:i,disabled:d,recordingKey:e})]}),b&&(0,n.jsx)("div",{className:"x78zum5 x1q0g3np x13a6bvl x167g77z xe8ttls x6s0dn4 x178xt8z x13fuv20 x16ufvko",children:(0,n.jsx)(eS,{onAction:i,disabled:d,recordingKey:e})}),(0,n.jsx)(ey,{visible:!!(m&&(0,o.kc)().assistant_on_canvas_prompt_suggestions&&!b),jsx:p,onPromptSelect:S,clientLifecycleId:x})]})})]})}),(0,n.jsx)(j,{})]})}function eS({onAction:e,disabled:t,recordingKey:i}){let s=(0,o.kc)().make_edits_debug;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(en.y,{helpUrlVariant:ei.JT.MAKE_EDITS}),s&&(0,n.jsx)(es.Nv,{}),(0,n.jsx)(J.CommentsSubmitButton,{disabled:t,onClick:e,recordingKey:$.Pt(i,"generate")})]})}function eT(){let{isOpen:e,prompt:t}=(0,_.QW)(),i=B(),l=(0,_.I)(),{submitPrompt:r,clientLifecycleId:a}=function(){let{showChat:e}=(0,V.U)(),{prompt:t}=(0,_.QW)(),i=(0,p.md)(_.zy),n=(0,p.md)(y.J2),l=function(){let e=(0,s.useRef)("");return e.current||(e.current=(0,P.g)()),e.current}(),r=B();return{submitPrompt:s.useCallback(()=>{if(!r){n.length>0&&(0,_.h2)(),(0,_.GB)();return}p.zl.set(y.J2,i),e(),(0,D.i)({userInput:{plainText:t,selectedNodeIds:i},clientLifecycleId:l}),(0,_.Sz)()},[e,r,t,i,n,l]),clientLifecycleId:l}}();return e?(0,n.jsx)(eE,{clientLifecycleId:a,disabled:!i,duplicateAndRun:!1,onAction:r,onChange:_.l,onClose:_.Sz,recordingKey:"ai_assistant_prompt_box_view",setDuplicateAndRun:z.lQ,value:t,wiggleCount:l}):null}function ew(){return(0,n.jsx)(u.tH,{boundaryKey:"AiAssistantCanvasView",fallback:u.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:h.e.AI_ASSISTANT},children:(0,n.jsx)(I.T.Provider,{value:{recordingKey:"aiAssistantCanvasView"},children:(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(eN,{})})})})}function eN(){let e=R(),{isOpen:t}=(0,_.QW)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N,{}),e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F,{}),t&&(0,n.jsx)(eT,{})]})]})}var eI=i(58212),eL=i(21791),eR=i(249586),eA=i(54092),eO=i(211862),eM=i(4460);let eF="send_to_buzz_from_design";function ez(){return!function(){let e=(0,l.wA)(),t=(0,eA.Zr)("paste-selection-into-buzz-from-design"),i=(0,s.useRef)(t),[n,r]=(0,s.useState)(!1),a=(0,l.d4)(eO.tB),o=(0,l.d4)(eM.vx),d=(0,l.d4)(e=>e.selectedView),x=(0,l.d4)(e=>{let t=e.selectedView;return"sendToBuzzFileKey"in t?t.sendToBuzzFileKey:void 0});(0,s.useEffect)(()=>{let s=!i.current&&t,l=i.current&&!t;if(!x){i.current=t;return}s&&!n&&((0,eR.qD)({name:"Send to Buzz Toast"}),e(eI.F.enqueue({type:eF,message:(0,c.t)("cooper.templates.use_in_buzz.visual_bell.title"),timeoutOverride:1/0,onDismiss:()=>((0,eR.Cu)({trackingContext:"Send to Buzz Toast",text:"Dismiss"}),r(!0),!1),button:{text:(0,c.t)("cooper.templates.use_in_buzz.visual_bell.button"),action:()=>((0,eR.Cu)({trackingContext:"Send to Buzz Toast",text:"Send to Buzz"}),(0,eL.q_)({previousBuzzFileKey:x,openFile:a,fileVersion:o,selectedView:d,dispatch:e}))}}))),l&&e(eI.F.dequeue({matchType:eF})),i.current=t},[t,e,d,a,o,x,n])}(),null}var eP=i(715858),eB=i(271909),eD=i(755444),eV=i(248518),eG=i(549571),eH=i(913772),eq=i(459494),eU=i(244205),e$=i(90844),eK=i(422872),eW=i(863154),eZ=i(381059),eX=i(472955),eY=i(143277),eQ=i(765516),eJ=i(226492),e0=i(909342),e1=i(19877),e2=i(441030);let e5=(0,p.eU)(!1);function e3(){let e=(0,p.md)(eW.LZ),t=(0,eG._I)(),i=(0,eG.U4)(),r=(0,eH.J)(),a=(0,e1.U)("upsell"),o=(0,p.Xr)(e5),{show:d,complete:x,exportId:u,activeId:h,showing:m}=function(){let e=(0,p.md)(eZ.NT),t=(0,eq.lS)(),{show:i,complete:n,isShowing:s,uniqueId:l}=(0,eK.e)({overlay:e2.Nh9,priority:eY.N.DEFAULT_MODAL,experiment:{check:t,predicate:e=>e,postCheck:()=>!0}},[e]),{show:r,complete:a,isShowing:o,uniqueId:d}=(0,eK.e)({overlay:e2.L6E,priority:eY.N.DEFAULT_MODAL,experiment:{check:t,predicate:e=>e,postCheck:()=>!0}},[e]);return{show:e=>"export"===e?r:i,complete:()=>s?n():a(),measureId:l,exportId:d,activeId:o?l:d,showing:o?"export":s?"measure":void 0}}();!function(e,t){let i=s.useRef(t);s.useEffect(()=>{i.current=t},[t]);let n=(0,l.d4)(e=>e.usedKeyboardShortcuts["measure-to-selection"]||0),r=s.useRef(n);s.useEffect(()=>{let e=t=>{t.key&&(window.removeEventListener("keyup",e),i.current("measure"))};n>r.current&&window.addEventListener("keyup",e)},[n]),(0,e$.E)(e,"copy_as_completed",e=>{t("export")}),(0,e$.E)(e,"export_completed",e=>{t("export")})}(u,n=>{d(n)({canShow:n=>!t&&i&&r&&e&&"developer"===(0,eV.HB)(n),onShow:()=>{(0,eX.o9)()}})}),(0,e$.E)(h,"Enter Inspect Mode",()=>{m&&x()});let g="export"===m?(0,c.tx)("upsell.dev_mode.contextual_overlay.export_title"):(0,c.tx)("upsell.dev_mode.contextual_overlay.measure_title"),f="export"===m?(0,c.tx)("upsell.dev_mode.contextual_overlay.export_description"):(0,c.tx)("upsell.dev_mode.contextual_overlay.measure_description");return(0,n.jsx)(eJ.X,{description:f,forceEditorTheme:"dev-handoff",isShowing:!!m,media:(0,n.jsx)(eQ.y,{src:"export"===m?(0,eD.ck)("2ec45ec3c5b501ef6e755fde6a2edfb39d2218cb"):(0,eD.ck)("dc592aac8a3238672f1f3eb8711f656496538b15"),alt:"",aspectRatio:480/270}),onClose:x,position:e0.Q.BOTTOM_RIGHT,primaryCta:{label:(0,c.tx)("upsell.dev_mode.contextual_overlay.cta"),onClick:()=>{a("handoff"),o(!0),x()},ctaTrackingDescriptor:eU.c.OPEN_DEV_MODE,type:"button"},testId:"dev-mode-contextual-upsell-tooltip",title:g,trackingContextName:"Dev Mode Contextual Upsell Tooltip",width:240})}var e4=i(406790),e7=i(929302),e8=i(91478),e6=i(268389),e9=i(66554),te=i(790009),tt=i(190028),ti=i(236631),tn=i(202913),ts=i(432777),tl=i(514549),tr=i(760848),ta=i(404898),to=i(260745),td=i(111297),tx=i(141524),tu=i(6449),tc=i(144638);function th(){let e=(0,ta.w_)(),t=(0,j.aV)(),[i,l]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!t){let e=function(){let e;let t=(0,H.UN)(),i=t=>{if(t)for(let n of t.childrenNodes)(n.isTopLevelFrame()||"CANVAS"===n.type)&&(n.hasReadyStatus?e?e.getStatusInfo().lastUpdateUnixTimestamp<n.getStatusInfo().lastUpdateUnixTimestamp&&(e=n):e=n:("SECTION"===n.type||"CANVAS"===n.type)&&i(n))};return i(t?.getRoot()),e?.getStatusInfo()}();e&&l(e)}},[t]);let r=(0,tx.wW)(i&&"userId"in i?i.userId:null),a=!!i&&tt.A.unix(i.lastUpdateUnixTimestamp).isAfter((0,tt.A)().subtract(60,"day")),o=(0,e1.U)("upsell"),d=(0,p.md)(eW.LZ),x=(0,eG._I)(),u=(0,eG.U4)(),h=(0,p.md)(eZ.NT),m=(0,eH.J)(),{show:g,complete:f,isShowing:y,uniqueId:_}=(0,eK.e)({overlay:e2.koo,priority:eY.N.OVERRIDING_MODAL},[h]);(0,s.useEffect)(()=>{g({canShow:i=>m&&d&&!x&&!e.loading&&!e.hasPendingRequest&&a&&u&&!t&&"developer"===(0,eV.HB)(i),onShow:()=>{(0,eX.o9)()}})},[g,x,u,d,t,h,m,e,a]),(0,e$.E)(_,"Enter Inspect Mode",()=>{y&&f()});let{primaryButtonProps:b,secondaryButtonProps:v}=(0,ta.BC)({entryPoint:to.i$.Upsell,dismissModal:f,onRequestAccess:()=>{o("handoff")}}),k=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:tc.XQ,children:(0,n.jsx)(e9.O,{})}),(0,n.jsx)("span",{className:ti.s.textBodyMediumStrong.$,children:(0,c.tx)("dev_handoff.status.mark_status_sentence_part.ready_for_dev")})]}),{imgSrc:C,modalContent:E}=(0,tl.L)(),S=(0,ts.W)(),T=e7.hS({open:!0,onClose:z.lQ,preventUserClose:!0,recordingKey:"dev-mode-paywall-modal"});return(0,n.jsx)(tu.M,{testId:"rfd-upsell-upsell",isShowing:y,children:(0,n.jsxs)(te.J,{brand:"dev-handoff",children:[(0,n.jsx)(tn.OM,{}),(0,n.jsx)(td.fu,{name:"RFD Upsell Modal",properties:{...S,primaryCtaTrackingDescriptor:b?.trackingDescriptor,secondaryCtaTrackingDescriptor:v?.trackingDescriptor},enabled:S?.gracePeriod!==void 0,children:(0,n.jsx)(e8.bL,{width:392,manager:T,children:(0,n.jsxs)(e6.Wk,{children:[(0,n.jsx)("div",{className:tc.XV,children:(0,n.jsx)("div",{className:"xh8yej3 xysyzu8 x1xk1jr8 x1sdyfia",children:r.loading?"":(0,c.tx)("dev_handoff.upsell.user_marked_a design",{userName:(0,n.jsx)("span",{className:"xb3r6kr xlyipyv xuxw1ft",children:r.user?.name||r.user?.handle}),status:k})})}),(0,n.jsx)("div",{className:ti.s.py8.px16.$,children:(0,n.jsx)(tr.E,{imgSrc:C,content:E,modalType:"RFD Upsell Modal",primaryButtonProps:{...b,type:"request_access"},secondaryButtonProps:v?{...v,type:"not_now"}:void 0})})]})})})]})})}var tp=i(449572),tm=i(742549),tg=i(847282),tf=i(59849),ty=i(59975),t_=i(61102),tj=i(643330),tb=i(337726);function tv(){let e=(0,tm.X0)(),t=(0,eO.tS)(),i=(0,e1.U)("upsell"),s=(0,tp.Rs)(tf.ErZ,{key:t||""},{enabled:!!t}),{show:l,isShowing:r,complete:a,uniqueId:o}=(0,eK.e)({overlay:e2.wRw,priority:eY.N.OVERRIDING_MODAL-1},[s]);(0,e$.E)(o,"ui3_finished_entering_design_mode",()=>{(0,tg.QL)("rfd-notif")&&l({canShow:e=>!e.file?.hasPermission,onShow:()=>{(0,eX.o9)()}})});let d=e?{targetKey:ty.o5,arrowPosition:tj.F_.LEFT_TITLE}:{targetKey:tb.oR,arrowPosition:tj.F_.BOTTOM};return(0,n.jsx)(t_.rq,{...d,description:(0,c.tx)("upsell.view_only_developer_notifications.tooltip_description"),forceEditorTheme:"dev-handoff",isShowing:r,media:(0,n.jsx)(eQ.y,{src:(0,eD.ck)("dc592aac8a3238672f1f3eb8711f656496538b15"),alt:"",aspectRatio:480/270}),onClose:a,testId:"viewer-dev-mode-status-changed-tooltip",primaryCta:{ctaTrackingDescriptor:eU.c.TRY_DEV_MODE,label:(0,c.tx)("upsell.view_only_developer_notifications.tooltip_cta"),onClick:()=>{a(),i("handoff")},type:"button"},title:(0,c.tx)("upsell.view_only_developer_notifications.tooltip_title"),trackingContextName:"viewer_dev_mode_status_changed_tooltip"})}var tk=i(598626),tC=i(285626),tE=i(239223),tS=i(968169),tT=i(772523),tw=i(508011),tN=i(962212),tI=i(521255),tL=i(587277),tR=i(490499),tA=i(411916),tO=i(331497),tM=i(40452),tF=i(176203),tz=i(375380),tP=i(945064),tB=i(299117),tD=i(219199),tV=i(484495),tG=i(248043),tH=i(904017),tq=i(816565),tU=i(352630),t$=i(219532);function tK({onClick:e,complete:t}){return(0,n.jsx)(te.J,{brand:"dev-handoff",children:(0,n.jsxs)("div",{"data-testid":"dev-mode-demo-file-entrypoint-popup",className:"x6sy6il x1dgp85l xqyf9gi x1mxnbhz x1xtplfa x10l6tqk xrv6xtj x9f619 x1p3pnes x1tk3asg x78zum5 xdt5ytf x1dipnxa xbj06nx xl56j7k x1i71x30",children:[(0,n.jsx)("div",{className:"x10l6tqk x1psp13h xbyvkye",children:(0,n.jsx)(t$.Jn,{emphasized:!0,onClick:t})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"x13saxwh xg4jxnz x1h94l6n x1uvdjgy x39l7i4 x1ihwiht",children:(0,c.tx)("dev_mode_playground_file.still_curious_about_dev_mode")}),(0,n.jsx)("div",{children:(0,c.tx)("dev_mode_demo_file.check_out_our_interactive_test")})]}),(0,n.jsx)(tU.e6,{trackingProperties:{trackingDescriptor:eU.c.DEMO_FILE_THUMBNAIL},onClick:e,className:"x11g6tue xzjbwwf x3w9dv2",children:(0,n.jsx)(tq.oW,{className:"xb3r6kr",alt:"A graphic showing the demo file thumbnail",src:(0,eD.ck)("eab479b46c1a94910464200211143d64fe917ae1")})}),(0,n.jsx)("div",{children:(0,n.jsx)(tU.e6,{trackingProperties:{trackingDescriptor:eU.c.CHECK_IT_OUT},onClick:e,className:"x1iakgj3 x19y5rnk x78zum5 xx99whi xl56j7k x6s0dn4 x4wtjwi x11g6tue x1qxcl5b x1tk3asg",children:(0,c.tx)("dev_mode_playground_file.check_it_out")})})]})})}function tW(){let e=(0,tH.No)().unwrapOr(null),t=e?.tier===S.Ag.STARTER,i=(0,eG._I)(),l=(0,eG.U4)(),r=(0,tV.w)(),a=(0,p.md)(tn.YU),o=(0,ta.w_)(),d=(0,eD.tl)().dev_mode_demo_file_key,{isShowing:x,show:u,complete:c}=(0,eK.e)({overlay:e2.E5y,priority:eY.N.DEFAULT_MODAL});return(s.useEffect(()=>{u({canShow:()=>!!(!o.loading&&!o.hasPendingRequest&&l&&!i&&a&&"developer"===r&&!t&&d)})},[i,l,d,o,x,r,a,t,u]),x)?(0,n.jsx)(tu.M,{isShowing:x,children:(0,n.jsx)(td.fu,{name:"DevModeDemoFileEntryPoint",children:(0,n.jsx)(tK,{onClick:()=>{d&&tD.Ay.redirect((0,tG.jN)({file:{key:d},isDevHandoff:!0}),"_blank"),c()},complete:c})})}):null}var tZ=i(221602),tX=i(915707),tY=i(373547),tQ=i(381643),tJ=i(235711),t0=i(299640);function t1(e,t){let i=Date.now();return e.getTime()<=i-864e5*t}let t2=(0,tQ.J9)([(0,tJ.Fu)("seen_figmake_promo_overlay"),(0,tJ.Fu)("seen_figmake_file_creation_tooltip")],([e,t])=>!!(e&&t1(new Date(e.updatedAt),14))&&(!t||t1(new Date(t.updatedAt),3))),t5=(0,tJ.r1)("has_created_figma_make_file");function t3(){let e=(0,p.md)(t2),t=(0,p.md)(t5),i=(0,tH.No)(),l=(0,tH.px)(),r=l.unwrapOr(null)?.draftsFolderId??void 0,a=(0,tZ.nt)(r),d="dark"===(0,tY.DP)(),x=d?(0,eD.ck)("1a369818117cc7e77826ee246da5938968f29e43"):(0,eD.ck)("c427705996f20b17615206adc93b3171f6646529"),{isShowing:u,show:h,complete:m}=(0,eK.e)({overlay:e2.qiY,priority:eY.N.DEFAULT_MODAL},[e,t,i,a]);s.useEffect(()=>{r&&h({canShow:(e,t,i,n)=>{let s=i.tier===S.Ag.STARTER&&!(0,o.kc)().bake_starter_limit;return e&&!t&&!s&&null!==n&&(0,tZ.d6)(n,S._Y.FIGMAKE)}})},[h,r]);let g=(0,tX.$)({folderId:r,isDraftsFolder:!0,editorType:S._Y.FIGMAKE,forceOpenNewTab:!0,newFileFrom:t0.f6.FIGMAKE_POPOUT_UPSELL_IN_DESIGN_EDITOR,contextClicked:"figmake_popout_upsell_in_design_editor_created"});return(0,n.jsx)(tu.M,{isShowing:u,children:(0,n.jsx)(td.fu,{name:"FigmaMakeUpsellInDesignEditor",children:(0,n.jsx)(te.J,{brand:"seascape",children:(0,n.jsxs)("div",{"data-testid":"figma-make-upsell-in-design-editor-overlay",className:"x10l6tqk x1g84rlc x1u31bsw xqyf9gi x9f619 xrv6xtj xgk9eko x1mxnbhz xu5wzci x1tk3asg xho2vqm xdz8niu x1bw29jc xshklg3 xskzprw x78zum5 xdt5ytf xl56j7k x1i71x30 x1dipnxa x1vamu9a",children:[(0,n.jsx)("div",{className:"x10l6tqk x1psp13h xbyvkye",children:(0,n.jsx)(t$.Jn,{onClick:m,trackingProperties:{action:"close"},emphasized:!0,dataTestId:"figma-make-upsell-in-design-editor-overlay-close"})}),(0,n.jsxs)("div",{className:"x78zum5 xdt5ytf xg2d0mh",children:[(0,n.jsx)("div",{className:"x1l3kr2 x1mnx3iv xo8tsow xeefxrb xdjnq2g",children:(0,c.tx)("upsell.figma_make_upsell_in_design_editor.title")}),(0,n.jsx)("div",{children:(0,c.tx)("upsell.figma_make_upsell_in_design_editor.description")})]}),(0,n.jsx)(tU.e6,{"data-testid":"figma-make-upsell-in-design-editor-overlay-asset",trackingProperties:{trackingDescriptor:eU.c.FIGMA_MAKE_UPSELL_ASSET},onClick:g,...{0:{className:"x1ypdohk x18dl8mb x78zum5 xl56j7k x6s0dn4 xm3q4nm xb3r6kr x168yufr xgk9eko xsks9tx x1ailfhc"},1:{className:"x1ypdohk x18dl8mb x78zum5 xl56j7k x6s0dn4 xm3q4nm xb3r6kr x168yufr xgk9eko xsks9tx x1oa4r"}}[!!d<<0],children:(0,n.jsx)("video",{className:"x5yr21d xl1xv1r",src:x,"aria-label":(0,c.t)("upsell.figma_make_upsell_in_design_editor.image_alt"),autoPlay:!0,loop:!0,muted:!0})}),(0,n.jsx)(te.J,{brand:"seascape",mode:"dark",children:(0,n.jsx)(tU.e6,{"data-testid":"figma-make-upsell-in-design-editor-overlay-cta",trackingProperties:{trackingDescriptor:eU.c.TRY_IT_NOW},onClick:g,className:"xi0y1te xvzdmf2 x19y5rnk xx99whi x4wtjwi xeq5yr9 xpvyfi4 xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up",children:(0,c.tx)("upsell.figma_make_upsell_in_design_editor.button_title")})})]})})})})}var t4=i(450259),t7=i(443192),t8=i(719097),t6=i(643077),t9=i(592726),ie=i(174730),it=i(615782),ii=i(423128),is=i(511570),il=i.n(is),ir=i(653899),ia=i(833805),io=i(101880),id=i(967782),ix=i(504307),iu=i(141773),ic=i(373235),ih=i(395556),ip=i(289050),im=i(383310),ig=i(566905),iy=i(834524),i_=i(875997),ij=i(768300);let ib="starting_points_templates_modal--templateOption--qYXkm",iv="starting_points_templates_modal--templateOptionTitle--DmVPR",ik="starting_points_templates_modal--verticalTemplateImage--kAzQz";var iC=(e=>(e.DESKTOP="desktop",e.MOBILE="mobile",e.WEBSITE="website",e))(iC||{});let iE={x:0,y:0},iS={website:{x:0,y:1600},mobile:{x:0,y:300},desktop:{x:0,y:300}},iT={website:.1,mobile:.225,desktop:.1};function iw({onClose:e}){let t=(0,l.wA)(),i=s.useRef(null),[r,d]=s.useState(!1),[x,u]=s.useState(!1),[h,m]=s.useState(!1),[g,f]=s.useState(!1),[y,_]=s.useState(window.innerWidth),[j,b]=s.useState({website:"",mobile:"",desktop:""}),v=(0,ic.q)(),k=(0,eO.tS)(),C=(0,l.d4)(e=>e.fileVersion),E=(0,l.d4)(e=>e.mirror.sceneGraph),S=v&&(0,iy.Qf)(E),T=!!S&&0===S.childCount,[w]=(0,ia.IT)((0,ix.Dz)({})),{inProductHelpViewType:N}=(0,ip.A5)(),I=(0,tO.ut)(a.Ez5?.uiState().inProductHelpSidePanelWidth,0),L="side_panel"===N?I:0,{insertTemplate:R}=(0,iu.Fz)(),A=(0,i_.g)(),O=(0,p.Xr)(ij.Yq),M=(0,p.Xr)(ij.bj),[F,z]=s.useState(!1),P=(0,im.GQ)(),B=(0,ig.P)();(0,ir.h)(()=>{let e=()=>{_(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),s.useEffect(()=>{f(P+50>y/2-257||y-B-L-50<y/2+257),m(P+50>y/2-365||y-B-L-50<y/2+365)},[L,P,B,y]);let D=s.useCallback(()=>{if("loaded"!==w.status||!w.data)return;let e=[];for(let t of Object.values(iC)){let i=w.data[t]?.files;if(!i)return;let n={type:ih.n.HubFile,template:i};e.push(n)}Promise.all(e.map(e=>p.zl.get((0,ij.Re)({fileKey:k,fileVersion:C,template:e})))).then(()=>{z(!0)}).catch(e=>{console.error("Failed to load template buffers",e),z(!0)})},[k,C,w]);if(s.useEffect(()=>{if("loaded"===w.status)for(let e of Object.values(iC)){let t=w.data[e]?.preview_img_id;t&&b(i=>({...i,[e]:t}))}},[w]),s.useEffect(()=>{"loaded"!==w.status||F||D()},[w,F,D]),s.useEffect(()=>{v&&S&&!T&&!x&&e()},[v,S,T,x,e]),!(0,o.kc)().starting_points_modal)return null;let V=async i=>{if("loaded"!==w.status)return;d(!0);let n=w.data[i]?.files;n&&("basics"!==i?await (0,iu.Zg)({insert:()=>M({selectTemplateAfterCommit:!1,moveViewportAfterCommit:!1,priority:"user-visible",editScopeType:a.zkO.USER}),template:{template:n,type:ih.n.HubFile},fileKey:k,dispatch:t,triggeredFrom:"starting-points",userTriggered:!1}):await R({template:{template:n,type:ih.n.HubFile},userTriggered:!1,editScopeType:a.zkO.ONBOARDING,triggeredFrom:"starting-points",templateInsertionDirection:a.hKj.RIGHT}),"basics"===i?(0,id.YQ)({id:"starting_points_basics_template_inserted"}):(0,id.YQ)({id:"starting_points_template_inserted"}),e(),d(!1))},G=(0,n.jsx)(td.$z,{onClick:()=>V("basics"),trackingProperties:{trackingDescriptor:eU.c.LEARN_THE_BASICS},children:(0,c.tx)("starting_points.learn_the_basics")}),H=e=>{if((0,eu.sx)("Starting Points Template Option Hover",{template:e}),!w.data)return;let i=w.data[e]?.files;if(!i)return;let n={type:ih.n.HubFile,template:i},s=iT[e];window.innerWidth>1700&&(s*=1.5),(0,iu.Zg)({insert:()=>A(n,{moveViewportAfterPreview:!0,priority:"user-visible",previewManager:{nodeType:a.Z6A.CANVAS},position:iE,viewportOptions:{position:iS[e],scale:s,duration:0}}),template:n,fileKey:k,dispatch:t,triggeredFrom:"starting-points",userTriggered:!1,isPreview:!0})};return(0,n.jsx)(td.fu,{name:"Starting Points Modal",children:(0,n.jsx)("div",{className:"starting_points_templates_modal--startingPointsTemplatesModalPositioner--R8g3u",style:{marginRight:`${L}px`},children:(0,n.jsx)(io.x,{isLoading:r,className:"starting_points_templates_modal--loadingSpinner--UOrjg",children:()=>(0,n.jsxs)("div",{className:il()({"starting_points_templates_modal--startingPointsTemplatesModal--dUQte":!0,"starting_points_templates_modal--isHidden--jVN1L":g,"starting_points_templates_modal--isCondensedView--3tVz6":h}),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),ref:i,children:[(0,n.jsxs)("div",{className:"starting_points_templates_modal--modalInstructions--ZtdTL",children:[(0,n.jsx)("div",{className:"starting_points_templates_modal--modalTitle--HT3eZ",children:(0,c.t)("starting_points.what_do_you_want_to_make_today")}),(0,n.jsx)("div",{className:"starting_points_templates_modal--modalLearnMore--g-GWo",children:(0,c.tx)("starting_points.or_learn_the_basics",{learnTheBasicsLink:G})})]}),(0,n.jsxs)("div",{className:"starting_points_templates_modal--optionContainer--mYEsG",children:[(0,n.jsxs)(td.$z,{className:ib,onClick:()=>V("website"),onMouseEnter:()=>H("website"),onMouseLeave:O,trackingProperties:{trackingDescriptor:eU.c.WEBSITE_TEMPLATES},children:[(0,n.jsx)("div",{className:iv,children:(0,c.t)("starting_points.website")}),(0,n.jsx)(tq.oW,{className:ik,src:(0,eD.ck)(j.website),alt:"Website template"})]}),(0,n.jsxs)(td.$z,{className:ib,onClick:()=>V("mobile"),onMouseEnter:()=>H("mobile"),onMouseLeave:O,trackingProperties:{trackingDescriptor:eU.c.MOBILE_APP_TEMPLATES},children:[(0,n.jsx)("div",{className:iv,children:(0,c.t)("starting_points.mobile_app")}),(0,n.jsx)(tq.oW,{className:ik,src:(0,eD.ck)(j.mobile),alt:"Mobile app template"})]}),(0,n.jsxs)(td.$z,{className:ib,onClick:()=>V("desktop"),onMouseEnter:()=>H("desktop"),onMouseLeave:O,trackingProperties:{trackingDescriptor:eU.c.DESKTOP_APP_TEMPLATES},children:[(0,n.jsx)("div",{className:iv,children:(0,c.t)("starting_points.desktop_app")}),(0,n.jsx)(tq.oW,{className:"starting_points_templates_modal--desktopTemplateImage--3kplg",src:(0,eD.ck)(j.desktop),alt:"Desktop app template"})]})]}),(0,n.jsx)("div",{className:"starting_points_templates_modal--modalLearnMoreFooter--pSvfX",children:(0,c.tx)("starting_points.or_learn_the_basics",{learnTheBasicsLink:G})}),(0,n.jsx)("div",{className:"starting_points_templates_modal--closeButton--io-14",children:(0,n.jsx)(ea.K,{onClick:e,"aria-label":(0,c.t)("general.close"),htmlAttributes:{"data-testid":"close-button"},children:(0,n.jsx)(ii.A,{})})})]})})})})}let iN=(0,tJ.r1)("dismissed_starting_points_templates_modal");function iI(){let e=(0,l.wA)(),t=!!(0,o.kc)().starting_points_modal,i=(0,tg.QL)(tb.E_.key)===tb.E_.value,r=(0,j.aV)(),a=(0,l.d4)(e=>e.mirror.appModel.currentPage),d=(0,b.Fk)((e,t)=>(0,t6.zC)(e,t),a),x=(0,tg.QL)(it.pt.KEY)===it.pt.VALUE,u=(0,eO.q5)(),c=(0,t9.TA)(),h=u?.creatorId===c,m=(0,p.md)(eZ.Fy),g=(0,p.md)(t8.UQ),f=!(0,ie.f)("not_gen_0"),y=(0,p.md)(iN),_=(0,eD.Ay)().starting_points,{show:v,isShowing:k,complete:C}=(0,eK.e)({overlay:e2.EYw,priority:eY.N.OVERRIDING_MODAL+1},[m,y]);return(s.useEffect(()=>{t&&h&&!x&&!r&&d&&!k&&(i?v():f&&g&&_&&v({canShow:(e,t)=>!e&&!t}))},[t,h,r,d,k,i,f,g,x,_,y,v]),k)?(0,n.jsx)(iw,{onClose:()=>{y.data||e(t7.b({dismissed_starting_points_templates_modal:!0})),C()}}):null}var iL=i(482996),iR=i(850701),iA=i(296831),iO=i(475961),iM=i(339619),iF=i(957128),iz=i(413358),iP=i(440819);let iB=(0,iP.Op)({initial:"ready_to_show",states:[{id:"ready_to_show",transitions:[(0,iP.nr)("curator_content_shown","ui3_onboarding_was_shown_in_current_session",{condition:({event:e})=>e.properties.shown===e2.KTt.id})]},{id:"ui3_onboarding_was_shown_in_current_session",terminal:!0}]}),iD=(0,iP.rn)("track_ui3_onboarding_shown",iB);var iV=i(193317);function iG(){let{isShowing:e,complete:t,show:i,uniqueId:r}=(0,eK.e)({overlay:e2.l_p,priority:eY.N.SECONDARY_MODAL}),o=(0,l.wA)(),d=(0,j.aV)(),x=(0,eO.q5)(),u=(0,t9.iZ)(),h=(0,iL.te)(),m=!!(0,ie.f)(iF.bo),g="ui3_onboarding_was_shown_in_current_session"===(0,iA.zl)(iD).currentState,f="no_figma_basics_onboarding_was_shown_in_current_session"===(0,iA.zl)(iz.j).currentState,y=(0,p.md)(iM.dL),_=(0,iO.jO)(),b=x?.canEdit,v=(0,l.d4)(e=>e.leftPanel.activeTab===a.xae.LAYERS);if((0,e$.E)(r,["Reset Visual Assets Tooltips",iF.io],()=>{u&&x&&o(t7.b(iV.g))}),(0,s.useEffect)(()=>{!h()||!b||y||m||g||f||!_||d||!v||e||i()},[i,h,b,m,_,d,g,f,e,y,v]),(0,s.useEffect)(()=>{!v&&e&&t()},[v,e,t]),!e)return null;let k=(0,n.jsx)("strong",{style:{display:"contents"},children:(0,c.tx)("design_systems.assets_panel.assets")});return(0,n.jsx)(eJ.X,{isShowing:e,title:(0,c.tx)("rcs.visual_assets.elevate_your_designs"),description:(0,c.tx)("rcs.visual_assets.grab_visual_assets",{strongAssets:k}),primaryCta:{label:(0,c.tx)("rcs.presets_baseline.try_it"),type:"button",onClick:()=>{o(iR.FP({tab:a.xae.ASSETS})),t()},ctaTrackingDescriptor:eU.c.PRESETS_TRY_IT},trackingContextName:"Visual Assets Intro Tooltip",userFlagOnShow:iF.bo,position:e0.Q.UI3_EDITOR_TOP_LEFT,onClose:t})}var iH=i(903545),iq=i(873289),iU=i(846696),i$=i(18978),iK=i(825947),iW=i(878604),iZ=i(293422),iX=i(828339),iY=i(67256),iQ=i(513122),iJ=i(494366),i0=i(894210),i1=i(390452),i2=i(338052),i5=i(582789),i3=i(724744),i4=i(354114),i7=i(315790);function i8(){i6()?p.zl.set(i7._M,i$.FR.ALL_VISUAL_GROUPS_VIEW):p.zl.set(i7._M,i$.FR.SELECTED_VISUAL_GROUP_VIEW)}function i6(){return!(0,o.kc)().aip_flower_garden_no_vg_list}function i9(){return(0,n.jsxs)("svg",{width:"56",height:"57",viewBox:"0 0 56 57",fill:"none",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_9897_16689)",children:[(0,n.jsx)("path",{d:"M0 5.5C0 2.73858 2.23858 0.5 5 0.5H51C53.7614 0.5 56 2.73858 56 5.5V51.5C56 54.2614 53.7614 56.5 51 56.5H5C2.23858 56.5 0 54.2614 0 51.5V5.5Z",fill:"#E4CCFF"}),(0,n.jsxs)("g",{filter:"url(#filter0_d_9897_16689)",children:[(0,n.jsx)("rect",{x:"9.5",y:"23",width:"24",height:"24",rx:"3",fill:"white",shapeRendering:"crispEdges"}),(0,n.jsx)("path",{d:"M20.6165 36.5908C21.1046 36.1028 21.8959 36.1028 22.384 36.5908L23.7629 37.9697C24.251 38.4579 24.251 39.2492 23.7629 39.7373L22.384 41.1162L22.2893 41.2021C21.8311 41.5758 21.1694 41.5758 20.7112 41.2021L20.6165 41.1162L19.2375 39.7373C18.78 39.2797 18.7512 38.5554 19.1516 38.0645L19.2375 37.9697L20.6165 36.5908ZM21.677 37.2979C21.5794 37.2003 21.4211 37.2003 21.3235 37.2979L19.9446 38.6768C19.8471 38.7744 19.8471 38.9327 19.9446 39.0303L21.3235 40.4092C21.4211 40.5067 21.5794 40.5067 21.677 40.4092L23.0559 39.0303C23.1534 38.9327 23.1534 38.7744 23.0559 38.6768L21.677 37.2979ZM16.7629 32.7373C17.2511 32.2493 18.0424 32.2493 18.5305 32.7373L19.9094 34.1162C20.3975 34.6043 20.3975 35.3957 19.9094 35.8838L18.5305 37.2627L18.4358 37.3486C17.9776 37.7223 17.3159 37.7223 16.8577 37.3486L16.7629 37.2627L15.384 35.8838C14.9265 35.4262 14.8977 34.7019 15.2981 34.2109L15.384 34.1162L16.7629 32.7373ZM24.47 32.7373C24.9581 32.2493 25.7494 32.2493 26.2375 32.7373L27.6165 34.1162C28.1045 34.6043 28.1045 35.3957 27.6165 35.8838L26.2375 37.2627L26.1428 37.3486C25.6846 37.7223 25.0229 37.7223 24.5647 37.3486L24.47 37.2627L23.0911 35.8838C22.6335 35.4262 22.6047 34.7019 23.0051 34.2109L23.0911 34.1162L24.47 32.7373ZM17.8235 33.4443C17.7259 33.3468 17.5676 33.3468 17.47 33.4443L16.0911 34.8232C15.9936 34.9208 15.9936 35.0792 16.0911 35.1768L17.47 36.5557C17.5676 36.6532 17.7259 36.6532 17.8235 36.5557L19.2024 35.1768C19.2999 35.0792 19.2999 34.9208 19.2024 34.8232L17.8235 33.4443ZM25.5305 33.4443C25.4329 33.3468 25.2746 33.3468 25.177 33.4443L23.7981 34.8232C23.7006 34.9208 23.7006 35.0792 23.7981 35.1768L25.177 36.5557C25.2746 36.6532 25.4329 36.6532 25.5305 36.5557L26.9094 35.1768C27.0069 35.0792 27.0069 34.9208 26.9094 34.8232L25.5305 33.4443ZM20.6165 28.8838C21.1046 28.3958 21.8959 28.3958 22.384 28.8838L23.7629 30.2627C24.251 30.7508 24.251 31.5421 23.7629 32.0303L22.384 33.4092L22.2893 33.4951C21.8311 33.8688 21.1694 33.8688 20.7112 33.4951L20.6165 33.4092L19.2375 32.0303C18.78 31.5726 18.7512 30.8484 19.1516 30.3574L19.2375 30.2627L20.6165 28.8838ZM21.677 29.5908C21.5794 29.4933 21.4211 29.4933 21.3235 29.5908L19.9446 30.9697C19.8471 31.0673 19.8471 31.2256 19.9446 31.3232L21.3235 32.7021C21.4211 32.7997 21.5794 32.7997 21.677 32.7021L23.0559 31.3232C23.1534 31.2256 23.1534 31.0673 23.0559 30.9697L21.677 29.5908Z",fill:"#D9B8FF"})]}),(0,n.jsxs)("g",{filter:"url(#filter1_d_9897_16689)",children:[(0,n.jsx)("rect",{x:"22.5",y:"10",width:"24",height:"24",rx:"3",fill:"white",shapeRendering:"crispEdges"}),(0,n.jsx)("path",{d:"M33.6165 23.5908C34.1046 23.1028 34.8959 23.1028 35.384 23.5908L36.7629 24.9697C37.251 25.4579 37.251 26.2492 36.7629 26.7373L35.384 28.1162L35.2893 28.2021C34.8311 28.5758 34.1694 28.5758 33.7112 28.2021L33.6165 28.1162L32.2375 26.7373C31.78 26.2797 31.7512 25.5554 32.1516 25.0645L32.2375 24.9697L33.6165 23.5908ZM34.677 24.2979C34.5794 24.2003 34.4211 24.2003 34.3235 24.2979L32.9446 25.6768C32.8471 25.7744 32.8471 25.9327 32.9446 26.0303L34.3235 27.4092C34.4211 27.5067 34.5794 27.5067 34.677 27.4092L36.0559 26.0303C36.1534 25.9327 36.1534 25.7744 36.0559 25.6768L34.677 24.2979ZM29.7629 19.7373C30.2511 19.2493 31.0424 19.2493 31.5305 19.7373L32.9094 21.1162C33.3975 21.6043 33.3975 22.3957 32.9094 22.8838L31.5305 24.2627L31.4358 24.3486C30.9776 24.7223 30.3159 24.7223 29.8577 24.3486L29.7629 24.2627L28.384 22.8838C27.9265 22.4262 27.8977 21.7019 28.2981 21.2109L28.384 21.1162L29.7629 19.7373ZM37.47 19.7373C37.9581 19.2493 38.7494 19.2493 39.2375 19.7373L40.6165 21.1162C41.1045 21.6043 41.1045 22.3957 40.6165 22.8838L39.2375 24.2627L39.1428 24.3486C38.6846 24.7223 38.0229 24.7223 37.5647 24.3486L37.47 24.2627L36.0911 22.8838C35.6335 22.4262 35.6047 21.7019 36.0051 21.2109L36.0911 21.1162L37.47 19.7373ZM30.8235 20.4443C30.7259 20.3468 30.5676 20.3468 30.47 20.4443L29.0911 21.8232C28.9936 21.9208 28.9936 22.0792 29.0911 22.1768L30.47 23.5557C30.5676 23.6532 30.7259 23.6532 30.8235 23.5557L32.2024 22.1768C32.2999 22.0792 32.2999 21.9208 32.2024 21.8232L30.8235 20.4443ZM38.5305 20.4443C38.4329 20.3468 38.2746 20.3468 38.177 20.4443L36.7981 21.8232C36.7006 21.9208 36.7006 22.0792 36.7981 22.1768L38.177 23.5557C38.2746 23.6532 38.4329 23.6532 38.5305 23.5557L39.9094 22.1768C40.0069 22.0792 40.0069 21.9208 39.9094 21.8232L38.5305 20.4443ZM33.6165 15.8838C34.1046 15.3958 34.8959 15.3958 35.384 15.8838L36.7629 17.2627C37.251 17.7508 37.251 18.5421 36.7629 19.0303L35.384 20.4092L35.2893 20.4951C34.8311 20.8688 34.1694 20.8688 33.7112 20.4951L33.6165 20.4092L32.2375 19.0303C31.78 18.5726 31.7512 17.8484 32.1516 17.3574L32.2375 17.2627L33.6165 15.8838ZM34.677 16.5908C34.5794 16.4933 34.4211 16.4933 34.3235 16.5908L32.9446 17.9697C32.8471 18.0673 32.8471 18.2256 32.9446 18.3232L34.3235 19.7021C34.4211 19.7997 34.5794 19.7997 34.677 19.7021L36.0559 18.3232C36.1534 18.2256 36.1534 18.0673 36.0559 17.9697L34.677 16.5908Z",fill:"#9747FF"})]})]}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("filter",{id:"filter0_d_9897_16689",x:"1.5",y:"17",width:"40",height:"40",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{dy:"2"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,n.jsx)("feBlend",{mode:"multiply",in2:"BackgroundImageFix",result:"effect1_dropShadow_9897_16689"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_9897_16689",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter1_d_9897_16689",x:"14.5",y:"4",width:"40",height:"40",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{dy:"2"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,n.jsx)("feBlend",{mode:"multiply",in2:"BackgroundImageFix",result:"effect1_dropShadow_9897_16689"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_9897_16689",result:"shape"})]}),(0,n.jsx)("clipPath",{id:"clip0_9897_16689",children:(0,n.jsx)("path",{d:"M0 5.5C0 2.73858 2.23858 0.5 5 0.5H51C53.7614 0.5 56 2.73858 56 5.5V51.5C56 54.2614 53.7614 56.5 51 56.5H5C2.23858 56.5 0 54.2614 0 51.5V5.5Z",fill:"white"})})]})]})}function ne(){return(0,n.jsxs)("svg",{width:"56",height:"57",viewBox:"0 0 56 57",fill:"none",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_9897_16676)",children:[(0,n.jsx)("path",{d:"M0 5.5C0 2.73858 2.23858 0.5 5 0.5H51C53.7614 0.5 56 2.73858 56 5.5V51.5C56 54.2614 53.7614 56.5 51 56.5H5C2.23858 56.5 0 54.2614 0 51.5V5.5Z",fill:"#FFBDF2"}),(0,n.jsxs)("g",{filter:"url(#filter0_d_9897_16676)",children:[(0,n.jsx)("rect",{x:"7",y:"8.5",width:"24",height:"18",rx:"3",fill:"white",shapeRendering:"crispEdges"}),(0,n.jsx)("path",{d:"M13.3983 21H11.9842L14.8319 13H16.4217L19.2694 21H17.8553L15.6561 14.5469H15.5936L13.3983 21ZM13.5272 17.8672H17.7147V18.9531H13.5272V17.8672ZM22.7736 23.375C22.2814 23.375 21.8582 23.3099 21.5041 23.1797C21.1525 23.0495 20.8673 22.875 20.6486 22.6563C20.4298 22.4375 20.2723 22.1979 20.1759 21.9375L21.3127 21.5781C21.3778 21.6927 21.4676 21.8112 21.5822 21.9336C21.6968 22.056 21.8517 22.1589 22.047 22.2422C22.2423 22.3281 22.491 22.3711 22.7931 22.3711C23.215 22.3711 23.564 22.2682 23.84 22.0625C24.116 21.8594 24.2541 21.5286 24.2541 21.0703V19.9141H24.1798C24.1095 20.0521 24.0067 20.1992 23.8713 20.3555C23.7358 20.5091 23.5535 20.6406 23.3244 20.75C23.0952 20.8568 22.8035 20.9102 22.4494 20.9102C21.9832 20.9102 21.5614 20.8008 21.1838 20.582C20.8088 20.3607 20.5106 20.0326 20.2892 19.5977C20.0679 19.1628 19.9572 18.6224 19.9572 17.9766C19.9572 17.3307 20.0666 16.7799 20.2853 16.3242C20.5041 15.8685 20.8022 15.5208 21.1798 15.2812C21.5574 15.0417 21.9832 14.9219 22.4572 14.9219C22.8192 14.9219 23.1134 14.9831 23.34 15.1055C23.5692 15.2253 23.7502 15.3685 23.883 15.5352C24.0158 15.6992 24.1173 15.8477 24.1877 15.9805H24.2658V15H25.5353V21.1172C25.5353 21.6302 25.4142 22.0534 25.172 22.3867C24.9324 22.7201 24.6043 22.9674 24.1877 23.1289C23.771 23.293 23.2996 23.375 22.7736 23.375ZM22.7775 19.8711C23.0952 19.8711 23.3647 19.7956 23.5861 19.6445C23.8074 19.4935 23.9754 19.276 24.09 18.9922C24.2072 18.7057 24.2658 18.3646 24.2658 17.9687C24.2658 17.5755 24.2085 17.2318 24.0939 16.9375C23.9793 16.6432 23.8114 16.4141 23.59 16.25C23.3686 16.0833 23.0978 16 22.7775 16C22.4442 16 22.1655 16.0859 21.9416 16.2578C21.7176 16.4297 21.5496 16.6641 21.4377 16.9609C21.3257 17.2578 21.2697 17.5937 21.2697 17.9687C21.2697 18.349 21.327 18.6823 21.4416 18.9687C21.5561 19.2526 21.7241 19.474 21.9455 19.6328C22.1694 19.7917 22.4468 19.8711 22.7775 19.8711Z",fill:"#FF24BD"}),(0,n.jsx)("path",{d:"M47.584 13.2226C47.7372 12.9929 48.0476 12.9308 48.2773 13.084C48.5071 13.2371 48.5692 13.5476 48.416 13.7773L43.416 21.2773C43.3329 21.402 43.1979 21.4833 43.0488 21.498C42.8999 21.5126 42.7523 21.4593 42.6465 21.3535L39.6465 18.3535C39.4513 18.1582 39.4512 17.8417 39.6465 17.6465C39.8173 17.4756 40.0813 17.4539 40.2754 17.582L40.3535 17.6465L42.9219 20.2148L47.584 13.2226Z",fill:"white"})]}),(0,n.jsxs)("g",{filter:"url(#filter1_d_9897_16676)",children:[(0,n.jsx)("rect",{x:"7",y:"30.5",width:"24",height:"18",rx:"3",fill:"white",shapeRendering:"crispEdges"}),(0,n.jsx)("path",{d:"M13.3983 43H11.9842L14.8319 35H16.4217L19.2694 43H17.8553L15.6561 36.5469H15.5936L13.3983 43ZM13.5272 39.8672H17.7147V40.9531H13.5272V39.8672ZM22.7736 45.375C22.2814 45.375 21.8582 45.3099 21.5041 45.1797C21.1525 45.0495 20.8673 44.875 20.6486 44.6563C20.4298 44.4375 20.2723 44.1979 20.1759 43.9375L21.3127 43.5781C21.3778 43.6927 21.4676 43.8112 21.5822 43.9336C21.6968 44.056 21.8517 44.1589 22.047 44.2422C22.2423 44.3281 22.491 44.3711 22.7931 44.3711C23.215 44.3711 23.564 44.2682 23.84 44.0625C24.116 43.8594 24.2541 43.5286 24.2541 43.0703V41.9141H24.1798C24.1095 42.0521 24.0067 42.1992 23.8713 42.3555C23.7358 42.5091 23.5535 42.6406 23.3244 42.75C23.0952 42.8568 22.8035 42.9102 22.4494 42.9102C21.9832 42.9102 21.5614 42.8008 21.1838 42.582C20.8088 42.3607 20.5106 42.0326 20.2892 41.5977C20.0679 41.1628 19.9572 40.6224 19.9572 39.9766C19.9572 39.3307 20.0666 38.7799 20.2853 38.3242C20.5041 37.8685 20.8022 37.5208 21.1798 37.2812C21.5574 37.0417 21.9832 36.9219 22.4572 36.9219C22.8192 36.9219 23.1134 36.9831 23.34 37.1055C23.5692 37.2253 23.7502 37.3685 23.883 37.5352C24.0158 37.6992 24.1173 37.8477 24.1877 37.9805H24.2658V37H25.5353V43.1172C25.5353 43.6302 25.4142 44.0534 25.172 44.3867C24.9324 44.7201 24.6043 44.9674 24.1877 45.1289C23.771 45.293 23.2996 45.375 22.7736 45.375ZM22.7775 41.8711C23.0952 41.8711 23.3647 41.7956 23.5861 41.6445C23.8074 41.4935 23.9754 41.276 24.09 40.9922C24.2072 40.7057 24.2658 40.3646 24.2658 39.9687C24.2658 39.5755 24.2085 39.2318 24.0939 38.9375C23.9793 38.6432 23.8114 38.4141 23.59 38.25C23.3686 38.0833 23.0978 38 22.7775 38C22.4442 38 22.1655 38.0859 21.9416 38.2578C21.7176 38.4297 21.5496 38.6641 21.4377 38.9609C21.3257 39.2578 21.2697 39.5937 21.2697 39.9687C21.2697 40.349 21.327 40.6823 21.4416 40.9687C21.5561 41.2526 21.7241 41.474 21.9455 41.6328C22.1694 41.7917 22.4468 41.8711 22.7775 41.8711Z",fill:"#FF99E0"}),(0,n.jsx)("path",{d:"M44 33.5C40.6863 33.5 38 36.1863 38 39.5C38 42.8137 40.6863 45.5 44 45.5C47.3137 45.5 50 42.8137 50 39.5C50 36.1863 47.3137 33.5 44 33.5ZM47.8721 36.335C48.5775 37.1969 49 38.2993 49 39.5C49 42.2614 46.7614 44.5 44 44.5C42.7994 44.5 41.6979 44.0764 40.8359 43.3711L47.8721 36.335ZM44 34.5C45.2007 34.5 46.3031 34.9225 47.165 35.6279L40.1289 42.6641C39.4236 41.8021 39 40.7006 39 39.5C39 36.7386 41.2386 34.5 44 34.5Z",fill:"white"})]})]}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("filter",{id:"filter0_d_9897_16676",x:"-1",y:"2.5",width:"61",height:"34",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{dy:"2"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,n.jsx)("feBlend",{mode:"multiply",in2:"BackgroundImageFix",result:"effect1_dropShadow_9897_16676"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_9897_16676",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter1_d_9897_16676",x:"-1",y:"24.5",width:"61",height:"34",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{dy:"2"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,n.jsx)("feBlend",{mode:"multiply",in2:"BackgroundImageFix",result:"effect1_dropShadow_9897_16676"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_9897_16676",result:"shape"})]}),(0,n.jsx)("clipPath",{id:"clip0_9897_16676",children:(0,n.jsx)("path",{d:"M0 5.5C0 2.73858 2.23858 0.5 5 0.5H51C53.7614 0.5 56 2.73858 56 5.5V51.5C56 54.2614 53.7614 56.5 51 56.5H5C2.23858 56.5 0 54.2614 0 51.5V5.5Z",fill:"white"})})]})]})}function nt(){return(0,n.jsxs)("svg",{width:"56",height:"57",viewBox:"0 0 56 57",fill:"none",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_10049_1824)",children:[(0,n.jsx)("path",{d:"M0 5.5C0 2.73858 2.23858 0.5 5 0.5H51C53.7614 0.5 56 2.73858 56 5.5V51.5C56 54.2614 53.7614 56.5 51 56.5H5C2.23858 56.5 0 54.2614 0 51.5V5.5Z",fill:"#BDE3FF"}),(0,n.jsxs)("g",{filter:"url(#filter0_d_10049_1824)",children:[(0,n.jsx)("rect",{x:"8",y:"8.5",width:"40",height:"40",rx:"3",fill:"white",shapeRendering:"crispEdges"}),(0,n.jsx)("path",{d:"M26 16C26 15.1716 26.6716 14.5 27.5 14.5H41.5C42.3284 14.5 43 15.1716 43 16C43 16.8284 42.3284 17.5 41.5 17.5H27.5C26.6716 17.5 26 16.8284 26 16Z",fill:"#BDE3FF"}),(0,n.jsx)("path",{d:"M26 29C26 28.1716 26.6716 27.5 27.5 27.5H41.5C42.3284 27.5 43 28.1716 43 29C43 29.8284 42.3284 30.5 41.5 30.5H27.5C26.6716 30.5 26 29.8284 26 29Z",fill:"#BDE3FF"}),(0,n.jsx)("path",{d:"M26 40C26 39.1716 26.6716 38.5 27.5 38.5H41.5C42.3284 38.5 43 39.1716 43 40C43 40.8284 42.3284 41.5 41.5 41.5H27.5C26.6716 41.5 26 40.8284 26 40Z",fill:"#BDE3FF"}),(0,n.jsx)("path",{d:"M14.9375 16.4902C15.248 16.4904 15.4999 16.7423 15.5 17.0527C15.4999 17.3632 15.2479 17.615 14.9375 17.6152C14.6273 17.615 14.3755 17.3638 14.375 17.0537C14.375 16.7431 14.6269 16.4904 14.9375 16.4902Z",fill:"#0D99FF"}),(0,n.jsx)("path",{d:"M19.0625 15.375C19.3731 15.3751 19.625 15.6279 19.625 15.9385C19.6245 16.2485 19.3726 16.4998 19.0625 16.5C18.7521 16.4997 18.5 16.248 18.5 15.9375C18.5 15.6269 18.752 15.3751 19.0625 15.375Z",fill:"#0D99FF"}),(0,n.jsx)("path",{d:"M15.3125 14.25C15.6231 14.2501 15.875 14.5019 15.875 14.8125C15.875 15.1231 15.6231 15.3749 15.3125 15.375C15.0019 15.3749 14.75 15.1231 14.75 14.8125C14.75 14.5019 15.0019 14.2501 15.3125 14.25Z",fill:"#0D99FF"}),(0,n.jsx)("path",{d:"M17.5625 13.876C17.8731 13.876 18.125 14.1269 18.125 14.4375C18.1249 14.7481 17.8731 15 17.5625 15C17.2519 14.9999 17.0001 14.7481 17 14.4375C17 14.1269 17.2519 13.876 17.5625 13.876Z",fill:"#0D99FF"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 12C19.4853 12 21.5 14.0147 21.5 16.5C21.5 16.728 21.4833 16.9525 21.4502 17.1719C21.2884 18.2437 20.2918 18.75 19.4551 18.75H17.75C17.75 19.366 17.4927 19.9576 17.0518 20.3467C16.5911 20.753 15.924 20.932 15.2471 20.6455C13.634 19.9627 12.5 18.3647 12.5 16.5C12.5 14.0147 14.5147 12 17 12ZM17 12.75C14.9289 12.75 13.25 14.4289 13.25 16.5C13.25 18.0529 14.1937 19.3855 15.5391 19.9551C16.302 20.278 17 19.5784 17 18.75C17 18.3358 17.3358 18 17.75 18H19.4551C20.0512 18 20.6191 17.649 20.708 17.0596C20.7355 16.877 20.75 16.6902 20.75 16.5C20.75 14.4289 19.0711 12.75 17 12.75Z",fill:"#0D99FF"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.498 27.1146C19.739 27.1146 19.935 27.1552 20.0859 27.2367C20.2387 27.3165 20.3597 27.4127 20.4482 27.5238C20.5367 27.633 20.6045 27.7322 20.6514 27.8206H20.7031V27.1663H21.5498V31.2445C21.5498 31.5865 21.469 31.8689 21.3076 32.0911C21.1479 32.3134 20.9291 32.4786 20.6514 32.5863C20.3737 32.6956 20.0595 32.7503 19.709 32.7503C19.3809 32.7503 19.0984 32.7063 18.8623 32.6195C18.628 32.5327 18.4378 32.4166 18.292 32.2708C18.1462 32.125 18.0408 31.965 17.9766 31.7913L18.7344 31.5521C18.7778 31.6285 18.8377 31.7078 18.9141 31.7894C18.9904 31.871 19.0944 31.9389 19.2246 31.9945C19.3548 32.0517 19.5204 32.0804 19.7217 32.0804C20.0029 32.0804 20.2359 32.0125 20.4199 31.8753C20.6039 31.7399 20.6953 31.5187 20.6953 31.2132V30.4427H20.6465C20.5996 30.5347 20.5306 30.6326 20.4404 30.7367C20.3502 30.839 20.2288 30.9274 20.0762 31.0003C19.9234 31.0715 19.7283 31.1068 19.4922 31.1068C19.1815 31.1067 18.9001 31.0338 18.6484 30.888C18.3986 30.7405 18.2003 30.5216 18.0527 30.2318C17.9052 29.9418 17.8311 29.5813 17.8311 29.1507C17.8311 28.7203 17.904 28.3529 18.0498 28.0492C18.1956 27.7455 18.3948 27.5135 18.6465 27.3538C18.8981 27.1943 19.1823 27.1146 19.498 27.1146ZM19.7109 27.8333C19.4889 27.8334 19.3035 27.8908 19.1543 28.0052C19.005 28.1198 18.893 28.2761 18.8184 28.474C18.7437 28.6719 18.7061 28.8958 18.7061 29.1458C18.7061 29.3993 18.7439 29.6219 18.8203 29.8128C18.8967 30.0019 19.0088 30.1494 19.1562 30.2552C19.3055 30.3611 19.4905 30.4144 19.7109 30.4144C19.9227 30.4144 20.1025 30.3637 20.25 30.263C20.3975 30.1624 20.5096 30.0175 20.5859 29.8285C20.6641 29.6375 20.7031 29.4097 20.7031 29.1458C20.7031 28.8837 20.6652 28.6545 20.5889 28.4583C20.5125 28.2623 20.4004 28.1097 20.2529 28.0003C20.1054 27.8892 19.9245 27.8333 19.7109 27.8333Z",fill:"#0D99FF"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.3721 31.1663H16.4297L15.9648 29.8021H13.9219L13.458 31.1663H12.5156L14.4141 25.8333H15.4736L17.3721 31.1663ZM14.1689 29.0785H15.7178L14.9639 26.8646H14.9219L14.1689 29.0785Z",fill:"#0D99FF"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.8379 42.748C16.0439 42.7685 16.2274 42.6181 16.248 42.4121L16.2891 42H17.4111L17.377 42.3379C17.3565 42.5439 17.5069 42.7274 17.7129 42.748C17.9189 42.7685 18.1024 42.6181 18.123 42.4121L18.1641 42H18.875C19.0821 42 19.25 41.8321 19.25 41.625C19.25 41.4179 19.0821 41.25 18.875 41.25H18.2393L18.3896 39.75H18.875C19.0821 39.75 19.25 39.5821 19.25 39.375C19.25 39.1679 19.0821 39 18.875 39H18.4639L18.498 38.6621C18.5185 38.4561 18.3681 38.2726 18.1621 38.252C17.9561 38.2315 17.7726 38.3819 17.752 38.5879L17.7109 39H16.5889L16.623 38.6621C16.6435 38.4561 16.4931 38.2726 16.2871 38.252C16.0811 38.2315 15.8976 38.3819 15.877 38.5879L15.8359 39H15.125C14.9179 39 14.75 39.1679 14.75 39.375C14.75 39.5821 14.9179 39.75 15.125 39.75H15.7607L15.6104 41.25H15.125C14.9179 41.25 14.75 41.4179 14.75 41.625C14.75 41.8321 14.9179 42 15.125 42H15.5361L15.502 42.3379C15.4815 42.5439 15.6319 42.7274 15.8379 42.748ZM16.3643 41.25L16.5146 39.75H17.6357L17.4854 41.25H16.3643Z",fill:"#0D99FF"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.625 44.25C20.2463 44.2499 20.75 43.7463 20.75 43.125V37.875C20.75 37.2537 20.2463 36.7501 19.625 36.75H14.375C13.7537 36.75 13.25 37.2537 13.25 37.875V43.125C13.25 43.7463 13.7537 44.25 14.375 44.25H19.625ZM14.375 43.5C14.1679 43.5 14 43.3321 14 43.125V37.875C14 37.6679 14.1679 37.5 14.375 37.5H19.625C19.832 37.5001 20 37.6679 20 37.875V43.125C20 43.3321 19.832 43.4999 19.625 43.5H14.375Z",fill:"#0D99FF"})]})]}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("filter",{id:"filter0_d_10049_1824",x:"0",y:"2.5",width:"56",height:"56",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{dy:"2"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,n.jsx)("feBlend",{mode:"multiply",in2:"BackgroundImageFix",result:"effect1_dropShadow_10049_1824"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_10049_1824",result:"shape"})]}),(0,n.jsx)("clipPath",{id:"clip0_10049_1824",children:(0,n.jsx)("path",{d:"M0 5.5C0 2.73858 2.23858 0.5 5 0.5H51C53.7614 0.5 56 2.73858 56 5.5V51.5C56 54.2614 53.7614 56.5 51 56.5H5C2.23858 56.5 0 54.2614 0 51.5V5.5Z",fill:"white"})})]})]})}function ni(){return(0,n.jsxs)("svg",{width:"288",height:"173",viewBox:"0 0 288 173",fill:"none",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_10088_1793)",children:[(0,n.jsx)("rect",{y:"0.5",width:"288",height:"172",rx:"5",fill:"#F5F5F5"}),(0,n.jsx)("g",{filter:"url(#filter0_d_10088_1793)",children:(0,n.jsx)("rect",{x:"50",y:"26",width:"56",height:"120",rx:"4",fill:"#D9D9D9"})}),(0,n.jsx)("g",{filter:"url(#filter1_d_10088_1793)",children:(0,n.jsx)("rect",{x:"-22",y:"26",width:"56",height:"120",rx:"4",fill:"#D9D9D9"})}),(0,n.jsx)("g",{filter:"url(#filter2_d_10088_1793)",children:(0,n.jsx)("rect",{x:"122",y:"26",width:"56",height:"120",rx:"4",fill:"#D9D9D9"})}),(0,n.jsx)("rect",{x:"121.5",y:"25.5",width:"57",height:"120",stroke:"#0D99FF"}),(0,n.jsx)("rect",{x:"118.5",y:"22.5",width:"7",height:"7",fill:"white",stroke:"#0D99FF",strokeLinecap:"square"}),(0,n.jsx)("rect",{x:"118.5",y:"141.5",width:"7",height:"7",fill:"white",stroke:"#0D99FF",strokeLinecap:"square"}),(0,n.jsx)("rect",{x:"174.5",y:"22.5",width:"7",height:"7",fill:"white",stroke:"#0D99FF",strokeLinecap:"square"}),(0,n.jsx)("rect",{x:"174.5",y:"141.5",width:"7",height:"7",fill:"white",stroke:"#0D99FF",strokeLinecap:"square"}),(0,n.jsx)("g",{filter:"url(#filter3_d_10088_1793)",children:(0,n.jsx)("rect",{x:"194",y:"26",width:"56",height:"120",rx:"4",fill:"#D9D9D9"})}),(0,n.jsx)("rect",{x:"193.5",y:"25.5",width:"57",height:"120",stroke:"#0D99FF"}),(0,n.jsx)("rect",{x:"190.5",y:"22.5",width:"7",height:"7",fill:"white",stroke:"#0D99FF",strokeLinecap:"square"}),(0,n.jsx)("rect",{x:"190.5",y:"141.5",width:"7",height:"7",fill:"white",stroke:"#0D99FF",strokeLinecap:"square"}),(0,n.jsx)("rect",{x:"246.5",y:"22.5",width:"7",height:"7",fill:"white",stroke:"#0D99FF",strokeLinecap:"square"}),(0,n.jsx)("rect",{x:"246.5",y:"141.5",width:"7",height:"7",fill:"white",stroke:"#0D99FF",strokeLinecap:"square"}),(0,n.jsx)("g",{filter:"url(#filter4_d_10088_1793)",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M237.409 97.4091C238.033 96.7852 238.964 96.5835 239.79 96.8933L256.29 103.081C257.212 103.427 257.802 104.332 257.746 105.316C257.69 106.299 257.001 107.131 256.046 107.37L249.105 109.105L247.37 116.046C247.131 117.001 246.299 117.69 245.316 117.746C244.332 117.802 243.427 117.212 243.081 116.29L236.893 99.7901C236.584 98.9639 236.785 98.033 237.409 97.4091Z",fill:"white"})}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M239.263 98.2978C238.988 98.1945 238.678 98.2617 238.47 98.4697C238.262 98.6777 238.195 98.988 238.298 99.2634L244.485 115.763C244.601 116.071 244.902 116.267 245.23 116.249C245.558 116.23 245.835 116 245.915 115.682L247.868 107.868L255.682 105.915C256 105.835 256.23 105.558 256.249 105.23C256.267 104.902 256.071 104.601 255.763 104.485L239.263 98.2978Z",fill:"black"})]}),(0,n.jsx)("rect",{x:"0.5",y:"1",width:"287",height:"171",rx:"4.5",stroke:"#E6E6E6"}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("filter",{id:"filter0_d_10088_1793",x:"42",y:"20",width:"72",height:"136",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{dy:"2"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_10088_1793"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_10088_1793",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter1_d_10088_1793",x:"-30",y:"20",width:"72",height:"136",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{dy:"2"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_10088_1793"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_10088_1793",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter2_d_10088_1793",x:"114",y:"20",width:"72",height:"136",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{dy:"2"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_10088_1793"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_10088_1793",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter3_d_10088_1793",x:"186",y:"20",width:"72",height:"136",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{dy:"2"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_10088_1793"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_10088_1793",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter4_d_10088_1793",x:"232.25",y:"93.75",width:"30.0001",height:"30.0001",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{dy:"1.5"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"2.25"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_10088_1793"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_10088_1793",result:"shape"})]}),(0,n.jsx)("clipPath",{id:"clip0_10088_1793",children:(0,n.jsx)("rect",{y:"0.5",width:"288",height:"172",rx:"5",fill:"white"})})]})]})}let nn="16px",ns="design-linter-landing-page";function nl(){let{hasNoSelectedNodes:e,doesExceedLimit:t}=nd(),i=(0,iK.Hl)(),l=(0,iK.bk)(),r=(0,p.md)(i7._M),a=(0,p.md)(iU.Ut),d=(0,ie.f)("seen_linter_home_view"),[x,u]=s.useState(!1),h=(0,im.GQ)(),m=(0,iQ.am)(),[g,f]=s.useState(()=>r===i$.FR.LANDING_PAGE_NO_SELECTION?"noNodesSelected":r===i$.FR.LANDING_PAGE_LIMIT_EXCEEDED?"layerLimitExceeded":"welcome"),y="welcome"===g,{isButtonDisabled:_,shouldShowLayerCount:j}={isButtonDisabled:s.useMemo(()=>{let i=e||t;return("noNodesSelected"===g||"layerLimitExceeded"===g)&&i},[g,e,t]),shouldShowLayerCount:s.useMemo(()=>{let e="noNodesSelected"===g,i=t||x;return"layerLimitExceeded"===g||e&&i},[g,t,x])},b=s.useCallback(()=>!!m&&(0===m.getDirectlySelectedNodes().length?(f("noNodesSelected"),!1):!t||(f("layerLimitExceeded"),!1)),[t,m]),v=s.useCallback(async()=>{b()&&((0,o.kc)().aip_flower_garden_auto_library_select?(i8(),a&&await l()):(p.zl.set(i7.E,!1),a?(i8(),await l()):p.zl.set(i7._M,i$.FR.LIBRARY_SELECTOR_INITIAL)))},[l,b,a]);if(s.useEffect(()=>{j&&!x&&u(!0)},[j,x]),s.useEffect(()=>{d&&y&&v()},[d,y,v]),d&&y)return null;let k=h+(0,q.jz)(nn),C=(0,q.jz)(nn);return(0,o.kc)().aip_flower_garden_auto_library_select||(k=(window.innerWidth-400)/2,C=(window.innerHeight-496)/2),(0,n.jsx)(iW.bL,{width:400,onClose:({source:e})=>{"outside"!==e&&i(i$.FR.LANDING_PAGE_WELCOME)},defaultPosition:{x:k,y:C},children:(0,n.jsxs)(e6.vo,{children:[(0,n.jsx)(e6.Y9,{children:(0,n.jsx)(e6.hE,{children:(0,n.jsxs)("div",{className:"x78zum5 x167g77z x6s0dn4",children:[(0,c.tx)("design_linter.title"),(0,n.jsx)(i1.E,{children:(0,c.tx)("general.beta")})]})})}),(0,n.jsxs)(e6.nB,{children:[y&&(0,n.jsx)(na,{}),"noNodesSelected"===g&&(0,n.jsx)(nu,{}),"layerLimitExceeded"===g&&(0,n.jsx)(nc,{})]}),(0,n.jsx)(e6.wi,{children:j?(0,n.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 xh8yej3",children:[j&&(0,n.jsx)(nx,{}),(0,n.jsx)(nr,{onContinue:v,step:g,hasNoSelectedNodes:e,doesExceedLimit:t,isButtonDisabled:_})]}):(0,n.jsx)(e6.jk,{children:(0,n.jsx)(nr,{onContinue:v,step:g,hasNoSelectedNodes:e,doesExceedLimit:t,isButtonDisabled:_})})})]})})}function nr({onContinue:e,step:t,hasNoSelectedNodes:i,doesExceedLimit:s,isButtonDisabled:l}){return(0,n.jsx)(iZ.$n,{recordingKey:$.Pt(ns,"continue-button"),"data-testid":`${ns}-continue-button`,onClick:e,htmlAttributes:{"data-tooltip":function({step:e,hasNoSelectedNodes:t,doesExceedLimit:i}){return"welcome"===e?"":t?(0,c.t)("design_linter.landing_page.no_nodes_selected.button_tooltip"):i?(0,c.t)("design_linter.landing_page.layer_limit_exceeded.title"):""}({step:t,hasNoSelectedNodes:i,doesExceedLimit:s}),"data-tooltip-type":i0.Ib.TEXT},disabled:l,children:(0,c.tx)("general.continue")})}function na(){return(0,n.jsxs)("div",{className:"x1g8o3q3 xboal0k x78zum5 xdt5ytf xl56j7k x6s0dn4 x2lah0s xkh2ocl x87ps6o x1665zp3","data-testid":`${ns}-welcome`,children:[(0,n.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x2b8uid",children:[(0,n.jsx)("span",{className:"xor4psk x1ncjjhx xaoa4km x2i041 x14terfx xiuzu7u",children:(0,c.tx)("design_linter.landing_page.title")}),(0,n.jsx)("span",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xv1l7n4",children:(0,c.tx)("design_linter.landing_page.subheader")})]}),(0,n.jsxs)("div",{className:"x78zum5 xdt5ytf xou54vl",children:[(0,n.jsx)(nh,{headerText:(0,c.t)("design_linter.landing_page.feature_tokens_header"),subheaderText:(0,c.t)("design_linter.landing_page.feature_tokens_subheader"),children:(0,n.jsx)(nt,{})}),(0,n.jsx)(nh,{headerText:(0,c.t)("design_linter.landing_page.feature_contrast_header"),subheaderText:(0,c.t)("design_linter.landing_page.feature_contrast_subheader"),children:(0,n.jsx)(ne,{})}),(0,n.jsx)(nh,{headerText:(0,c.t)("design_linter.landing_page.feature_incorrect_assets_header"),subheaderText:(0,c.t)("design_linter.landing_page.feature_incorrect_assets_subheader"),children:(0,n.jsx)(i9,{})})]})]})}let no=(0,i2.n)(()=>{let e=(0,iQ.am)();return e?.layerLimit??iQ.W3});function nd(){let{layerCount:e,didExceedCountMax:t}=function(){let e=1.5*no();return(0,b.Fk)(t=>{let i=t.getDirectlySelectedNodes(),n=0,s=!1;for(let t of i){if(s)break;(0,iJ.eA)(t,()=>{if((n+=1)>=e)return s=!0,"stop"})}return{layerCount:n,didExceedCountMax:s}})}(),i=no(),n=t||e>i,s=0===e;return{layerCount:e,maxLayerCount:i,hasIssue:n||s,hasNoSelectedNodes:s,doesExceedLimit:n,didExceedCountMax:t}}function nx(){let{layerCount:e,maxLayerCount:t,hasIssue:i,didExceedCountMax:s,hasNoSelectedNodes:l}=nd(),r=`${e.toLocaleString()}${s?"+":""}`,a=t.toLocaleString(),o=s?" \xb7 "+(0,c.t)("design_linter.landing_page.layer_limit_exceeded.title"):"",d=`${r} / ${a}${o}`;return l&&(d=(0,c.t)("design_linter.landing_page.no_nodes_selected.error_footer")),(0,n.jsxs)("div",{className:"x78zum5 x1ib1h6n xl56j7k x6s0dn4 x1jnr06f xkh2ocl",children:[(0,n.jsx)("div",{children:i?(0,n.jsx)(iX.w,{style:np}):(0,n.jsx)(iY.W,{style:nm})}),(0,n.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xv1l7n4 x2b8uid x87ps6o xss6m8b",children:d})]})}function nu(){return(0,n.jsxs)("div",{className:"x1g8o3q3 xboal0k x78zum5 xdt5ytf xl56j7k x6s0dn4 x2lah0s xkh2ocl x87ps6o","data-testid":`${ns}-no-nodes-selected`,children:[(0,n.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x2b8uid x1ib1h6n",children:[(0,n.jsx)("span",{className:"xor4psk x1ncjjhx xaoa4km x2i041 x14terfx xiuzu7u",children:(0,c.tx)("design_linter.landing_page.no_nodes_selected.title")}),(0,n.jsx)("span",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xv1l7n4",children:(0,c.tx)("design_linter.landing_page.no_nodes_selected.subheader")})]}),(0,n.jsx)("div",{className:"x1ib1h6n",children:(0,n.jsx)(ni,{})})]})}function nc(){return(0,n.jsxs)("div",{className:"x1g8o3q3 xboal0k x78zum5 xdt5ytf xl56j7k x6s0dn4 x2lah0s xkh2ocl x87ps6o","data-testid":`${ns}-layer-limit-exceeded`,children:[(0,n.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x2b8uid x1ib1h6n",children:[(0,n.jsx)("span",{className:"xor4psk x1ncjjhx xaoa4km x2i041 x14terfx xiuzu7u",children:(0,c.tx)("design_linter.landing_page.layer_limit_exceeded.title")}),(0,n.jsx)("span",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xv1l7n4",children:(0,c.tx)("design_linter.landing_page.layer_limit_exceeded.subheader")})]}),(0,n.jsx)("div",{className:"x1ib1h6n",children:(0,n.jsx)(ni,{})})]})}function nh({children:e,headerText:t,subheaderText:i}){return(0,n.jsxs)("div",{className:"x78zum5 xxmtint x6s0dn4 x1v2ro7d xkh2ocl",children:[e,(0,n.jsxs)("div",{className:"x78zum5 xdt5ytf xl56j7k x1cy8zhl x5mp9sv",children:[(0,n.jsx)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l xiuzu7u",children:t}),(0,n.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xv1l7n4",children:i})]})]})}let np={"--color-icon":"var(--color-icon-warning)"},nm={"--color-icon":"var(--color-icon-success)"};var ng=i(385446),nf=i.n(ng),ny=i(492210),n_=i(795161),nj=i(842013),nb=i(325721),nv=i(383698),nk=i(564914),nC=i(288054);function nE(){let{isLibraryModalShown:e,onToggleLibraryModal:t}=(0,nv.u)({entrypoint:nC.r6.DESIGN_LINTER,modalType:"editor",initialTab:nk.Wv.LIBRARIES}),i=(0,iK.Hl)(),l=(0,s.useCallback)(()=>{i(i$.FR.ALL_VISUAL_GROUPS_VIEW),e||t()},[e,t,i]);return(0,n.jsx)("div",{className:"x78zum5 xilkfi8 x1cmmqis",children:(0,n.jsxs)("div",{className:"x78zum5 x1bz8wuu xdp593z x1nfngrj x1sxf85j x1v8gsql xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up",children:[(0,c.tx)("design_linter.library_selector.no_libraries"),(0,n.jsx)(iZ.$n,{onClick:l,children:(0,c.tx)("design_linter.library_selector.manage_libraries")})]})})}var nS=i(772963),nT=i(326985),nw=i(22106),nN=i(680692),nI=i(418160),nL=i(453499),nR=i(847964);function nA(){let e=(0,nN.$)(),t=(0,nT.e)(),i=(0,nL.$)(e,t);return(0,s.useMemo)(()=>({subscribedLibraries:e,usedInFileLibraries:i}),[e,i])}function nO(e){return(0,s.useMemo)(()=>{if("loaded"===e.status)return 0===e.data.length?i$.oV.EMPTY:i$.oV.CONTENT;if("errors"===e.status||"disabled"===e.status);else if("loading"===e.status)return i$.oV.LOADING;return i$.oV.ERROR},[e])}function nM(e){return(0,s.useMemo)(()=>new Set(Object.keys(e).filter(t=>e[t])),[e])}function nF(e){let t=(0,nk.P2)(e),i=!t||null!==e.thumbnail_guid,s=t?e.team_name:e.community_author_name;return{key:e.library_key.toString(),thumbnailUrl:e.thumbnail_url??null,name:e.library_name,headerComponent:(0,n.jsx)(nI.C,{publishedLibrary:e}),coverThumbnail:i,subheaderText:s,libraryIfPublished:e}}function nz(e,t){let i=e.openFileTeamName??(0,c.t)("fullscreen.filename_view.drafts");if(!e.openFile||!e.openFileKey)return null;let s=e.hasLocalAssets&&e.isOpenFilePublished;return!t||s||(0,n_.PN)()?{key:e.openFileKey,thumbnailUrl:e.localUrl??null,name:e.openFileName,headerComponent:(0,n.jsx)(nS.G,{text:e.openFileName}),coverThumbnail:e.localCoverThumbnail,subheaderText:i}:null}function nP(){let e=(0,eO.q5)(),{url:t,shouldCover:i}=(0,nw.t)(),n=(0,p.md)(eO.ze),s=e?.name??"",l=e?.teamLimitedInfo?.name;return{openFile:e,openFileKey:n,openFileName:s,openFileTeamName:l,localUrl:t,localCoverThumbnail:i,hasLocalAssets:(0,p.md)(nj.$c),isOpenFilePublished:(0,p.md)(nj.qN)}}function nB(){let{subscribedLibraries:e}=nA(),t=nP(),i=nD(),n=nz(t,!0);return{libraryData:[...n?[n]:[],...(e?.data??[]).map(e=>nF(e))],availableLibraryKeys:i,hasLoaded:"loaded"===e.status&&"loaded"===i.status}}function nD(){let{subscribedLibraries:e,usedInFileLibraries:t}=nA(),i=nO(e),n=nO(t),s=nP();if([i,n].includes(i$.oV.LOADING))return{status:"loading",data:{}};let l=new Set;return e.data&&e.data.forEach(e=>l.add(e.library_key)),t.data&&t.data.forEach(e=>l.add(e.library_key)),s.openFile&&s.openFileKey&&l.add(s.openFileKey),{status:"loaded",data:l}}function nV(e,t,i){let[n,l]=(0,p.fp)(iU.Ut),r=(0,p.Xr)(iU.W0),a=(0,iK.bk)();(0,s.useEffect)(()=>{!async function(){i&&!n&&(l(new Set(e.map(e=>e.key))),r(t),await a())}()},[i,e,n,l,r,t,a])}function nG({currentCheckedKeys:e,availableLibraryKeys:t,checkedLibraryData:i,uncheckedLibraryData:n,subscribeCallbacks:l}){let r=(0,p.Xr)(i7._M),a=(0,nb.sf)(),o=(0,iQ.am)();return(0,s.useCallback)(async()=>{for(let[t,i]of Object.entries(l))e.has(t)&&i();let s=i.length+n.length;(0,nR.U_)(!0,s,e.size),a(),o?.resetStateForLibrarySelection(),p.zl.set(iU.Ut,e),i8(),"loaded"===t.status&&p.zl.set(iU.W0,t);try{p.zl.set(i7.E,!1),p.zl.set(i7.HC,null),await o?.refreshDetection()}catch(e){console.error("Error detecting from libraries modal:",e),e instanceof ny.yU?r(i$.FR.LANDING_PAGE_LIMIT_EXCEEDED):e instanceof ny.F7&&r(i$.FR.LANDING_PAGE_NO_SELECTION)}},[i,a,e,t,r,l,n,o])}var nH=i(623411),nq=i(419541),nU=i(365889),n$=i(282794),nK=i(88314),nW=i(284467);let nZ={opacity:50,animationType:nW.JR.SHIMMER};function nX({numPlaceholderLibraries:e,type:t}){let i=!!(0,o.kc)().aip_flower_garden_auto_library_select;return(0,n.jsx)(n.Fragment,{children:(0,nK.y1)(e).map(e=>"confirm"===t?(0,n.jsx)(nJ,{},e):i?(0,n.jsx)(nQ,{},e):(0,n.jsx)(nY,{},e))})}function nY(){return(0,n.jsxs)("div",{className:"x1q0g3np x78zum5 x6s0dn4 x9f619 x1ef8nbk x17f4yl9 x1bamp8i x19y5rnk xh8yej3 x1nfngrj",children:[(0,n.jsx)(nW.Qp,{className:"xehbxol x19y5rnk x1exxlbk xnnlda6",...nZ}),(0,n.jsxs)("div",{className:"x98rzlu x78zum5 xdt5ytf x1nfngrj",children:[(0,n.jsx)(nW.Wi,{className:"xygnafs",...nZ}),(0,n.jsx)(nW.Wi,{className:"x1dmp6jm",...nZ})]}),(0,n.jsx)(nq.W,{id:"loading",disabled:!0})]})}function nQ(){return(0,n.jsxs)("div",{className:"x78zum5 x6s0dn4 x1q0g3np x167g77z x14pk0dq xhpnuu7",children:[(0,n.jsx)(nW.Qp,{className:"xehbxol x19y5rnk xni59qk x1vqgdyp",...nZ}),(0,n.jsxs)("div",{className:"x98rzlu x78zum5 xdt5ytf x1nfngrj",children:[(0,n.jsx)(nW.Wi,{className:"xygnafs",...nZ}),(0,n.jsx)(nW.Wi,{className:"x1dmp6jm",...nZ})]}),(0,n.jsx)(nq.W,{id:"loading",disabled:!0})]})}function nJ(){return(0,n.jsxs)("div",{className:"x78zum5 x6s0dn4 x1q0g3np x1v2ro7d",children:[(0,n.jsx)(nW.Qp,{className:"xehbxol x19y5rnk xeepkih x90ne7k",...nZ}),(0,n.jsxs)("div",{className:"x98rzlu x78zum5 xdt5ytf x1nfngrj",children:[(0,n.jsx)(nW.Wi,{className:"xygnafs",...nZ}),(0,n.jsx)(nW.Wi,{className:"x1fu8urw",...nZ})]})]})}function n0({subscribedLibraries:e,usedInThisFile:t,subscribedLibrariesStatus:i,usedInThisFileStatus:l,checkedStates:r,setCheckedStates:a,setSubscribeCallbacks:o}){let d=s.useCallback((e,t)=>{a(i=>({...i,[e]:t}))},[a]),x=s.useCallback((e,t)=>{o(i=>({...i,[e]:t}))},[o]),u=l===i$.oV.LOADING||i===i$.oV.LOADING;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(n1,{subscribedLibraries:e,subscribedLibrariesStatus:i,checkedStates:r,setLibraryCheckedState:d}),u?null:(0,n.jsx)(n5,{checkedStates:r,setLibraryCheckedState:d}),(0,n.jsx)(n2,{usedInThisFile:t,usedInThisFileStatus:l,checkedStates:r,setLibraryCheckedState:d,setLibrarySubscribeCallback:x})]})}function n1({subscribedLibraries:e,subscribedLibrariesStatus:t,checkedStates:i,setLibraryCheckedState:s}){return t===i$.oV.LOADING?(0,n.jsx)(nX,{numPlaceholderLibraries:2,type:"selector"}):t===i$.oV.CONTENT?(0,n.jsx)(n.Fragment,{children:e?.data?.map((e,t)=>n.jsx("div",{"data-testid":`design-linter-subscribed-library-item-${t}`,children:n.jsx(n3,{itemRecordingKey:`subscribed-${t}`,library:e,checked:i[e.library_key]||!1,setChecked:t=>s(e.library_key,t)})},e.library_key))}):null}function n2({usedInThisFile:e,usedInThisFileStatus:t,checkedStates:i,setLibraryCheckedState:s,setLibrarySubscribeCallback:l}){return t===i$.oV.LOADING?(0,n.jsx)(nX,{numPlaceholderLibraries:1,type:"selector"}):t===i$.oV.CONTENT?(0,n.jsx)(n.Fragment,{children:e.data?.map((e,t)=>n.jsx("div",{"data-testid":`design-linter-in-file-library-item-${t}`,children:n.jsx(n3,{itemRecordingKey:`in-file-${t}`,library:e,checked:i[e.library_key]||!1,setChecked:t=>s(e.library_key,t),setLibrarySubscribeCallback:l})},e.library_key))}):null}function n5({checkedStates:e,setLibraryCheckedState:t}){let i=(0,eO.q5)(),{url:s,shouldCover:l}=(0,nw.t)(),r=(0,p.md)(nj.$c);return i&&r?(0,n.jsx)("div",{"data-testid":"design-linter-local-library-item",children:(0,n.jsx)(n8,{id:i.key,itemRecordingKey:"local-0",checked:e[i.key]||!1,setChecked:t.bind(null,i.key),contentComponent:(0,n.jsx)(n4,{thumbnailUrl:s,name:i.name,headerComponent:(0,n.jsx)("span",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1oysuqx",children:i.name}),subheader:i.teamLimitedInfo?.name??(0,c.t)("fullscreen.filename_view.drafts"),coverThumbnail:l})})},i.key):null}function n3({itemRecordingKey:e,library:t,checked:i,setChecked:s,setLibrarySubscribeCallback:l}){let{subscribe:r}=(0,nU._)(t);return(0,n.jsx)(n8,{id:t.library_key,checked:i,itemRecordingKey:e,setChecked:s,contentComponent:(0,n.jsx)(n7,{library:t}),subscribeCallback:r,setLibrarySubscribeCallback:l})}function n4({thumbnailUrl:e,name:t,subheader:i,headerComponent:s,coverThumbnail:l=!0}){return(0,n.jsxs)("div",{className:"x78zum5 x6s0dn4 x1nfngrj",children:[(0,n.jsx)(n$.D,{thumbnailUrl:e??null,coverThumbnail:l,name:t}),(0,n.jsxs)("div",{className:"x98rzlu x78zum5 xdt5ytf",children:[(0,n.jsx)("span",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1oysuqx",children:s}),i&&(0,n.jsx)(nS.G,{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9 x1oysuqx",text:i})]})]})}function n7({library:e}){let t=(0,nk.P2)(e),i=!t||null!==e.thumbnail_guid,s=t?e.team_name:e.community_author_name;return(0,n.jsx)(n4,{thumbnailUrl:e.thumbnail_url,name:e.library_name,subheader:s,headerComponent:(0,n.jsx)(nI.C,{publishedLibrary:e}),coverThumbnail:i})}function n8({id:e,itemRecordingKey:t,checked:i,setChecked:s,contentComponent:l,subscribeCallback:r,setLibrarySubscribeCallback:a}){return(0,n.jsxs)("div",{...{0:{className:"x78zum5 x1n2onr6 x6s0dn4 xdpxx8g x1akne3o x9f619 x1ef8nbk x17f4yl9 x1bamp8i x19y5rnk x1yjdb4r xv2f06h"},1:{className:"x78zum5 x1n2onr6 x6s0dn4 xdpxx8g x1akne3o x9f619 x1ef8nbk x17f4yl9 x1bamp8i x19y5rnk x1yjdb4r xv2f06h x1va2ikv"}}[!!i<<0],children:[(0,n.jsx)(nH.J,{className:"xgqk73l",htmlFor:e,children:l}),(0,n.jsx)("div",{className:"x8x9d4c",children:(0,n.jsx)(nq.W,{id:e,checked:i,onChange:t=>{s(t),r&&a&&a(e,r)},recordingKey:$.Pt("design-linter-library-list",t)})})]})}var n6=i(30520);function n9(){let e="design-linter-library-selector",[t,i]=(0,p.fp)(i7._M),l=(0,iQ.am)(),r=(0,s.useCallback)(()=>{t===i$.FR.LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW?i8():t===i$.FR.LIBRARY_SELECTOR_FROM_SELECTED_GROUP_VIEW?i(i$.FR.SELECTED_VISUAL_GROUP_VIEW):(l?.teardownLinter(),i(i$.FR.LANDING_PAGE_WELCOME))},[t,l,i]),a=e7.hS({open:!0,onClose:r}),{subscribedLibraries:o,usedInFileLibraries:d}=nA(),[x,u]=(0,s.useState)((0,n6.Bx)()),[h,m]=(0,s.useState)({}),g=nM(x),f=nD(),y=(0,p.md)(iU.Ut),_=nO(o),j=nO(d),b=(0,nb.sf)(),v=0===g.size,k=(0,p.md)(nj.$c),C=_!==i$.oV.CONTENT&&j!==i$.oV.CONTENT&&!k,E=_===i$.oV.ERROR||j===i$.oV.ERROR,S=nf()(g,y),T=(C||E||v||S)&&!(0,n_.PN)(),w=t===i$.FR.LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW||t===i$.FR.LIBRARY_SELECTOR_FROM_SELECTED_GROUP_VIEW,N=(0,s.useCallback)(async()=>{for(let[e,t]of Object.entries(h))g.has(e)&&t();(0,nR.U_)(w,o.data?.length??0,g.size),b(),l?.resetStateForLibrarySelection(),p.zl.set(iU.Ut,g),p.zl.set(iU.W0,f),i8();try{w?(p.zl.set(i7.E,!1),await l?.refreshDetection()):await l?.requestDetection()}catch(e){console.error("Error detecting from libraries modal:",e),e instanceof ny.yU?i(i$.FR.LANDING_PAGE_LIMIT_EXCEEDED):e instanceof ny.F7&&i(i$.FR.LANDING_PAGE_NO_SELECTION)}},[f,b,g,i,h,o,w,l]);return!function(e,t,i,n){let l=(0,s.useRef)(t.status),r=e===i$.FR.LIBRARY_SELECTOR_INITIAL,a="loaded"===t.status&&"loaded"!==l.current,o=(0,s.useRef)(!0),d=(0,p.md)(nj.qN),x=(0,p.md)(eO.ze);(0,s.useEffect)(()=>{if(r&&(a||"loaded"===t.status&&o.current)){let e={...i};t.data.forEach(t=>{e[t.library_key]=!0}),d&&x&&(e[x]=!0),n(t=>({...t,...e}))}l.current=t.status,o.current=!1},[r,t,i,n,a,d,x])}(t,o,x,u),(0,nR.PV)(w),(0,n.jsx)(e8.bL,{manager:a,width:385,children:(0,n.jsxs)(e6.vo,{children:[(0,n.jsx)(e6.Y9,{children:(0,n.jsx)(e6.hE,{children:(0,n.jsxs)("div",{className:"x78zum5 x6s0dn4 x167g77z",children:[(0,c.tx)("design_linter.title"),(0,n.jsx)(i1.E,{children:(0,c.tx)("general.beta")})]})})}),(0,n.jsx)(e6.nB,{children:(0,n.jsx)(se,{subscribedLibraries:o,usedInThisFile:d,subscribedLibrariesStatus:_,usedInThisFileStatus:j,checkedStates:x,setCheckedStates:u,setSubscribeCallbacks:m,hasLocalAssets:k})}),(0,n.jsx)(e6.wi,{children:(0,n.jsxs)(e6.jk,{children:[w&&(0,n.jsx)(iZ.$n,{variant:"secondary",onClick:r,children:(0,c.tx)("general.cancel")}),(0,n.jsx)(iZ.$n,{recordingKey:$.Pt(e,"continue-button"),"data-testid":`${e}-continue-button`,disabled:T,onClick:N,children:w?(0,c.tx)("general.save"):(0,c.tx)("general.continue")})]})})]})})}function se({subscribedLibraries:e,usedInThisFile:t,subscribedLibrariesStatus:i,usedInThisFileStatus:s,checkedStates:l,setCheckedStates:r,setSubscribeCallbacks:a,hasLocalAssets:o}){if(i===i$.oV.ERROR||s===i$.oV.ERROR)return(0,n.jsx)("div",{className:"x78zum5 xl56j7k xxt28ha xi4wr45 xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:(0,c.tx)("design_linter.library_selector.error")});let d=i===i$.oV.EMPTY&&s===i$.oV.EMPTY&&!o;return(0,n.jsxs)("div",{"data-testid":"design-linter-library-selector",className:"x1b21aiw",children:[(0,n.jsx)(st,{}),d?(0,n.jsx)(nE,{}):(0,n.jsx)(n0,{subscribedLibraries:e,usedInThisFile:t,subscribedLibrariesStatus:i,usedInThisFileStatus:s,checkedStates:l,setCheckedStates:r,setSubscribeCallbacks:a})]})}function st(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"x7hzu26 x1ef8nbk x1nfngrj x78zum5 xdt5ytf",children:[(0,n.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up",children:(0,c.tx)("design_linter.library_selector.instructions")}),(0,n.jsx)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,c.tx)("design_linter.library_selector.header")})]})})}var si=i(383424),sn=(e=>(e.LIBRARY_SELECTOR_FROM_EDIT="LIBRARY_SELECTOR_FROM_EDIT",e.LIBRARY_SELECTOR_FROM_OPEN_LIBRARIES_BUTTON="LIBRARY_SELECTOR_FROM_OPEN_LIBRARIES_BUTTON",e))(sn||{}),ss=i(753984);function sl(){let[e,t]=(0,p.fp)(i7.HC),{checkedLibraryData:i,uncheckedLibraryData:l,status:r}=function(){let e;let{subscribedLibraries:t,usedInFileLibraries:i}=nA(),n=nO(t),s=nO(i),l=(0,p.md)(iU.Ut),r=nP(),a=[],o=[],d=e=>{l?.has(e.key)?a.push(e):o.push(e)};for(let e of t?.data??[])d(nF(e));let x=nz(r,!1);for(let e of(x&&d(x),i?.data??[]))d(nF(e));return e=[n,s].includes(i$.oV.LOADING)?i$.oV.LOADING:[n,s].includes(i$.oV.ERROR)?i$.oV.ERROR:0===a.length&&0===o.length?i$.oV.EMPTY:i$.oV.CONTENT,{checkedLibraryData:a,uncheckedLibraryData:o,status:e}}(),[a,o]=(0,s.useState)((0,n6.Bx)()),[d,x]=(0,s.useState)({}),u=nM(a),h=nD(),m=(0,p.md)(iU.Ut),g=r!==i$.oV.CONTENT,f=0===u.size,y=nf()(u,m),_=g||f||y,j=[i$.oV.LOADING,i$.oV.ERROR].includes(r),b={currentCheckedKeys:u,availableLibraryKeys:h,checkedLibraryData:i,uncheckedLibraryData:l,subscribeCallbacks:d},v=nG(b),k=function(e,t){let i=(0,p.Xr)(i7.E),n=nG(t),l=t.availableLibraryKeys;return(0,s.useCallback)(async()=>{e?(p.zl.set(i7.E,!1),p.zl.set(i7.HC,null),"loaded"===l.status&&p.zl.set(iU.W0,l),i(!1)):await n()},[e,n,l,i])}(y,b);(0,nR.PV)(!0);let C=function(){let e=(0,p.md)(i7.Qq);return(0,s.useMemo)(()=>{if(e){let t=e.getBoundingClientRect();return{x:t.left+t.width/2-160,y:t.bottom+4}}return{x:(window.innerWidth-320)/2,y:(window.innerHeight-493)/2}},[e])}();return(0,n.jsx)(iW.bL,{width:320,onClose:()=>{t(null)},defaultPosition:C,children:(0,n.jsxs)(e6.vo,{children:[(0,n.jsx)(e6.Y9,{children:(0,n.jsx)(e6.hE,{children:(0,n.jsx)("div",{className:"x78zum5 x6s0dn4 x167g77z",children:(0,c.tx)("design_linter.library.header")})})}),(0,n.jsx)(e6.nB,{padding:0,children:(0,n.jsx)(si.P,{children:(0,n.jsx)(sr,{status:r,checkedLibraryData:i,uncheckedLibraryData:l,checkedStates:a,setCheckedStates:o,setSubscribeCallbacks:x})})}),(0,n.jsx)(e6.wi,{children:e===sn.LIBRARY_SELECTOR_FROM_OPEN_LIBRARIES_BUTTON?(0,n.jsxs)(e6.jk,{children:[(0,n.jsx)(iZ.$n,{variant:"secondary",onClick:()=>t(null),children:(0,c.tx)("general.cancel")}),(0,n.jsx)(iZ.$n,{disabled:_,onClick:v,children:(0,c.tx)("general.save")})]}):(0,n.jsx)(e6.jk,{children:(0,n.jsx)(iZ.$n,{disabled:j,onClick:k,children:(0,c.tx)("general.confirm")})})})]})})}function sr({status:e,checkedLibraryData:t,uncheckedLibraryData:i,checkedStates:s,setCheckedStates:l,setSubscribeCallbacks:r}){if(e===i$.oV.ERROR)return(0,n.jsx)("div",{className:"x78zum5 xl56j7k xxt28ha xi4wr45 xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:(0,c.tx)("design_linter.library_selector.error")});let a=e===i$.oV.EMPTY,o=e===i$.oV.CONTENT||e===i$.oV.EMPTY;return(0,n.jsxs)("div",{className:"x3gbvt0 xtxiqt8",children:[(0,n.jsx)("div",{className:"xkib98w x78zum5 xdt5ytf xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up",children:(0,c.tx)("design_linter.library_selector_v2.instructions")}),a?(0,n.jsx)(nE,{}):(0,n.jsx)(sa,{hasLoaded:o,checkedLibraryData:t,uncheckedLibraryData:i,checkedStates:s,setCheckedStates:l,setSubscribeCallbacks:r})]})}function sa({hasLoaded:e,checkedLibraryData:t,uncheckedLibraryData:i,checkedStates:l,setCheckedStates:r,setSubscribeCallbacks:a}){let o=s.useCallback((e,t)=>{r(i=>({...i,[e]:t}))},[r]),d=s.useCallback((e,t)=>{a(i=>({...i,[e]:t}))},[a]),x=[...t,...i];return(0,n.jsx)(n.Fragment,{children:e?(0,n.jsx)("div",{className:"x78zum5 xdt5ytf x1aciehi",children:x.map((e,t)=>(0,n.jsx)("div",{children:(0,n.jsx)(so,{library:e,checked:l[e.key]||!1,setChecked:t=>o(e.key,t),setLibrarySubscribeCallback:d})},t))}):(0,n.jsx)("div",{className:"x78zum5 xdt5ytf x1aciehi",children:(0,n.jsx)(nX,{numPlaceholderLibraries:6,type:"selector"})})})}function so({library:e,checked:t,setChecked:i,setLibrarySubscribeCallback:s}){let{subscribe:l}=(0,nU._)(e.libraryIfPublished??null);return(0,n.jsxs)("div",{className:"x78zum5 x6s0dn4 xyfqnmn xhpnuu7 x12tve8b",children:[(0,n.jsxs)(nH.J,{htmlFor:e.key,className:"x78zum5 x6s0dn4 x167g77z xulhscn xh8yej3",children:[(0,n.jsx)(ss.B,{className:"xni59qk x1vqgdyp xehbxol x19y5rnk",thumbnailUrl:e.thumbnailUrl,coverThumbnail:e.coverThumbnail,name:e.name}),(0,n.jsxs)("div",{className:"x78zum5 xdt5ytf x12mrbbr x87ps6o x98rzlu xeuugli x15y2ynn",children:[e.headerComponent,e.subheaderText&&(0,n.jsx)(nS.G,{className:"x1n0bwc9",text:e.subheaderText})]})]}),(0,n.jsx)("div",{className:"x8x9d4c",children:(0,n.jsx)(nq.W,{id:e.key,checked:t,onChange:t=>{i(t),l&&s&&s(e.key,l)}})})]})}var sd=i(357524),sx=i(222357),su=i(769845),sc=i(361170),sh=i(958208),sp=i(156774),sm=i(764354),sg=(e=>(e.ALL_GROUPS_VIEW="all_groups_view",e.SIDEBAR="sidebar",e.PREVIEW="preview",e))(sg||{}),sf=(e=>(e.COLOR="color",e.IMAGE="image",e))(sf||{});function sy(){return{bg:"var(--color-bg-secondary)",type:"color"}}function s_(e,t){let i=(0,sd.ei)(e),n=(0,n6.wg)(i),[l,r]=(0,s.useState)(sy());return(0,s.useEffect)(()=>{let i=(0,H.UN)().get(e);if(!i)return;let s=i.parentNode;for(;s;){let e=s.guid,i=(0,su.kl)(s.fills).paint;if(i){let s=i.type;if("SOLID"===s){r(function(e){let t=e.color;if(!t)return sy();let i=e.opacity??1,{hex:n}=(0,sh.XF)(t),s=Math.floor(255*i).toString(16);return{bg:`#${n}${s}`,type:"color"}}(i));return}if("IMAGE"===s){r(sj(e,"preview"===t?8:2,n));return}if("VIDEO"!==s&&"EMOJI"!==s){r(sj(e,2,n));return}r(sy());return}s=s.parentNode}let l=a.Egt?.getNodePageBackgroundColor(e);r(l?{bg:l,type:"color"}:sy())},[n,e,t]),l}function sj(e,t,i){let n=`${e}-${t}`,s=p.zl.get(iU.g7),l=s.get(n),r=l?.lastEditedAtTime!==i;if(l&&!r)return{bg:l.src,type:"image"};let o=function(e,t){let i=a.mHF?.copyNodeToLinterScene(e);if(!i)return null;let n=new H.qo(a.juq.LINTER).get(i);if(!n)return null;for(let e of n.childrenNodes)e.removeSelfAndChildren();n.cornerRadius=0,n.effects=[];let s=(0,sm.L6)(i,t);return s?(0,sp.Pv)(s.image,new sc.Mi(s.width,s.height)):null}(e,t);if(!o)return sy();if(i>0){let e=new Map(s);e.set(n,{src:o,lastEditedAtTime:i}),p.zl.set(iU.g7,e)}return{bg:o,type:"image"}}let sb=s.memo(function({rootNodeId:e,reason:t,thumbnailWidth:i,thumbnailHeight:s,thumbnailPadding:l,source:r}){let a=(0,sd.ei)(e),o=(0,n6.wg)(a),d=(0,sx.yh)({nodeId:e,width:i,height:s,shouldSkip:!1,version:o,reason:t,regenerateAfterImagesLoaded:!0,isDevModeBlendedSection:!1,shouldCache:o>0}),{bg:x,type:u}=s_(e,r),h=u===sf.COLOR,p=u===sf.IMAGE;return d?(0,n.jsx)("div",{...{0:{className:"x9f619 x78zum5 xl56j7k xb3r6kr xehbxol x19y5rnk"},1:{className:"x9f619 x78zum5 xl56j7k xb3r6kr xehbxol x19y5rnk xiy17q3 x18d0r48 x1xsqp64 x1v8gsql"}}[!!p<<0],style:{width:i,height:s,padding:l,...h&&{backgroundColor:x},...p&&{backgroundImage:`url(${x})`}},children:(0,n.jsx)(tq.oW,{src:d.src,className:"x19kjcj4 x193iq5w xmz0i5r",alt:(0,c.t)("design_linter.penalty_box.thumbnail_alt")})}):(0,n.jsx)(nW.Qp,{className:"xehbxol x19y5rnk x9f619",style:{width:i,height:s,padding:l},animationType:nW.JR.LIGHT_SHIMMER})}),sv=s.memo(function(){let{rootNodeId:e}=(0,p.md)(i7.xX),t=(0,p.md)(i7.yO),i=(0,p.md)(i7.NM),s=(0,p.md)(i7.xo),l=(0,p.md)(i7.P$);if(!t||!l||t.id===i&&e===s)return null;let r=e??(0,n6.ac)(t);if(!r)return null;let a=l.x-216-4,o=l.y+l.height/2-83-4;return(0,n.jsx)("div",{className:"xixxii4 x9h44rk xe8ttls x1yjdb4r xgpcbez xfo81ep",style:{top:o,left:a},children:(0,n.jsx)(sb,{rootNodeId:r,reason:"design-linter.hovered-group-thumbnail",thumbnailWidth:200,thumbnailHeight:150,thumbnailPadding:13,source:sg.SIDEBAR})})});var sk=i(926653),sC=i(7718),sE=i(140948),sS=i(624155),sT=i(746309),sw=i(504474);let sN=(0,s.memo)(function(){let e=function(){let e=(0,sw.dG)(sC.s4.TEXT,null),t=(0,p.md)(iU.Ut);return(0,s.useMemo)(()=>{let i=e.libraries.filter(e=>e.numStylesText>0&&t?.has(e.libraryKey));return{...e,libraries:i}},[e,t])}();return(function({status:e,libraries:t}){let[i,n]=(0,p.fp)(iU.jq),l=(0,p.md)(iU.Ut),r=(0,p.md)(eO.yV),a=function(){let e=(0,p.md)(sI);return(0,p.md)(iU.qp)?e:[]}(),{status:o,stylesByFileKey:d}=(0,sw.Zk)({styleType:sC.s4.TEXT,initialSelectedSubscribedStyle:null,selectedLibraries:t.filter(e=>e.numStylesText>0)}),x=(0,s.useMemo)(()=>{if("loading"===o||"loading"===e)return{status:"loading",subscribedStylesByFileKey:{},allStyles:[],localStyles:null};if((0,n_.PN)())return{status:"loaded",subscribedStylesByFileKey:{},allStyles:[],localStyles:null};if("invalidated"===i.status||"loaded"===o){let e=Object.entries(d).reduce((e,[t,i])=>(l?.has(i.libraryKey)&&(e[t]=i),e),{}),t=Object.values(e).flatMap(e=>e.styles),i=null;return a.length>0&&r?.key&&r?.libraryKey&&(i={fileKey:r.key,styles:a,libraryKey:(0,sk.l)(r.libraryKey)},t.push(...a)),{status:"loaded",subscribedStylesByFileKey:e,allStyles:t,localStyles:i}}return i},[o,e,i,d,a,l,r?.key,r?.libraryKey]);(0,s.useEffect)(()=>{(x.status!==i.status||x.allStyles.length!==i.allStyles.length)&&n(x)},[x,i,n])}(e),e.libraries.length)?(0,n.jsx)(sT.MM,{inheritStyleKey:null,inheritStyleID:null,styleType:sC.s4.TEXT,selectedLibraries:e.libraries}):null}),sI=(0,sE.bt)(e=>(0,sS.ti)(e.library.local.styles,sC.s4.TEXT));var sL=i(667693),sR=i(436991),sA=i(684742),sO=i(544373),sM=i(149073),sF=i(719423),sz=i(8931),sP=i(550527),sB=i.n(sP),sD=i(666875),sV=i(222714),sG=i(216940),sH=i(350019),sq=i(848561),sU=i(748703),s$=i(445306),sK=i(106271),sW=i(303647),sZ=i(205917);function sX(){return(0,p.md)(sW.aW)?(0,n.jsx)(sY,{}):null}function sY(){let[e,t]=(0,s.useState)(""),[i,l]=(0,s.useState)(""),r=(0,p.md)(sW.uw),a=(0,p.md)(sW.iO)??{title:"",blockType:null,display:"GRID",items:[]},o=(0,nb.sf)(),d=r?.current?.getBoundingClientRect()??{x:0,y:0,width:0,height:0},x=(0,s.useMemo)(()=>({x:d.x+("LIST"===a.display?d.width:0),y:d.y+("GRID"===a.display?d.height:0)}),[d.y,d.x,d.height,d.width,a.display]),u=(0,s.useMemo)(()=>sB()(e=>{l(e)},150),[]);(0,s.useEffect)(()=>(u(e),()=>{u.cancel()}),[u,e]);let h=(0,c.t)("design_linter.dropdown.search_placeholder"),m=(0,s.useRef)(null);return(0,n.jsx)(iW.bL,{width:260,maxHeight:320,onClose:o,defaultPosition:x,children:(0,n.jsxs)(e6.vo,{children:[(0,n.jsxs)(sQ,{children:[(0,n.jsx)(e6.hE,{children:a.title}),(0,n.jsx)(sG.p,{type:"search",size:"md",placeholder:h,ref:m,id:h,value:e,onChange:e=>t(e)})]}),(0,n.jsx)(e6.nB,{scrolling:"none",padding:0,children:(0,n.jsx)(sJ,{blockId:a.blockType,items:a.items,display:a.display,searchQuery:i})})]})})}function sQ({children:e}){return(0,n.jsx)("div",{className:"design_linter_suggestions_modal--header--XSpwy","data-fpl-header":!0,children:e})}function sJ({blockId:e,items:t,display:i,searchQuery:s}){let l=(0,p.md)(sW.rg)??z.lQ,r=(0,p.md)(sW.jV)??(()=>!1);return"GRID"===i?(0,n.jsx)(s2,{items:t,onSelection:l,checkIsSelected:r}):(0,n.jsx)(s0,{blockId:e,items:t,searchQuery:s,onSelection:l,checkIsSelected:r})}function s0({blockId:e,items:t,searchQuery:i,onSelection:l,checkIsSelected:r}){let a="design-linter-dropdown",o=(0,s.useRef)(null),[d,x]=(0,s.useState)(null),u=(0,p.Xr)(nR.dd),h=(0,s.useCallback)(e=>{x(e)},[x]),m=(0,s.useCallback)(e=>{d===e&&x(null)},[d,x]),g=(0,nb.sf)(),f=(0,s.useCallback)((e,t,n)=>{l&&(u({selectedNewOption:e.length>0,hadSearchTerm:i.length>0}),l({node_id:e,rankPosition:t,isFromSuggestedList:n}))},[l,i,u]),y=!0,_=(0,nb.bV)(t,i),j=(0,s.useCallback)(e=>{let t=_[e];return t?`${e}-${t.id}`:""},[_]),b=(0,s.useCallback)(()=>o.current,[o]),v=(0,sH.Te)({count:_.length,estimateSize:e=>_[e]?.type==="LIST_SEPARATOR"?16:32,getItemKey:j,getScrollElement:b,overscan:5});return(0,s.useEffect)(()=>{let e=_.findIndex(e=>r(e))??-1;e>=0&&v.scrollToIndex(e,{align:"center"})},[r,_,v]),(0,sZ.Dm)({blockId:e,checkIsSelected:r,filteredItems:_,searchQuery:i}),(0,n.jsxs)(sq.dP,{recordingKey:a,children:[_.length>0?(0,n.jsx)("div",{ref:o,className:"xysyzu8",style:{height:`${Math.min(v.getTotalSize()+8,248)}px`},children:(0,n.jsx)("div",{className:"x1n2onr6",style:{height:`${v.getTotalSize()+8}px`},children:v.getVirtualItems().map(e=>{let{index:t}=e,i=[1,t],s=_[t];if(!s)return null;y=!1;let l=!!r&&r(s);return(0,n.jsx)("div",{className:"x10l6tqk x13vifvy xu96u03 xh8yej3 x78zum5 x6s0dn4",style:{height:`${e.size}px`,transform:`translateY(${e.start}px)`},children:(0,n.jsx)(s1,{isHighlighted:!v.isScrolling&&d===t,isSelected:l,keyboardNavigationPath:i,listItem:s,onItemHighlight:()=>{h(t)},onItemMouseLeave:()=>{m(t)},onItemSelect:()=>{if("variable"in s){let e=_.slice(0,t).filter(e=>"LIST"===e.type&&"variable"in e).length;f(s.variable.node_id,e,s.isSuggestion)}if("style"in s){let e=_.slice(0,t).filter(e=>"TEXT_STYLE_LIST"===e.type).length;f(s.style.node_id,e,s.isSuggestion)}g()},recordingKey:$.Pt(a,`${"variable"in s?s.variable.id:t}`)})},e.key)})})}):null,y?(0,n.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4 x84pvj6 x87ps6o",style:{height:(0,sK.Ih)({layout:"list"})},children:(0,c.t)("variables.binding_ui.no_search_results")}):null]})}let s1=s.memo(function({isHighlighted:e,isSelected:t,keyboardNavigationPath:i,listItem:s,onItemHighlight:l,onItemMouseLeave:r,onItemSelect:a,recordingKey:o}){let d=(0,p.md)(sW.Ue)??null;switch(s.type){case"LIST":return(0,n.jsx)("div",{className:"x1sxf85j xb3r6kr xet2fuk x1db2dqx x1iyjqo2",children:(0,n.jsx)(s$._J,{disabledVariableIds:new Set,isHighlighted:e,isLinterItem:!0,isSelected:t,keyboardNavigationPath:i,onItemHighlight:l,onItemMouseLeave:r,onItemSelect:a,pickerType:"fields",recordingKey:o,valuePreview:d?d(s):null,variable:s.variable,variableSet:s.variableSet},s.id)});case"TEXT_STYLE_LIST":return(0,n.jsx)("div",{className:"x1sxf85j xb3r6kr xet2fuk x1db2dqx x1iyjqo2",children:(0,n.jsx)(sU.m3,{dsStyle:s.style,additionalClassName:ti.s.h24.flex.wFull.$,children:(0,n.jsx)(s$.DL,{dsStyle:s.style,hideContextMenu:!0,isHighlighted:e,isLinterItem:!0,isSelected:t,keyboardNavigationPath:i,onItemContextMenu:r,onItemHighlight:l,onItemMouseLeave:r,onItemSelect:a,recordingKey:o})})});case"LIST_SEPARATOR":return(0,n.jsx)("div",{className:"xjm9jq1 x1m4xfpy xh8yej3"});case"LIST_SECTION_HEADER":return(0,n.jsx)(s$.KL,{groupName:s.name,fileName:s.fileName,secondaryText:s.secondaryText});case"LIST_HIERARCHY_PATH":return(0,n.jsx)(s$.Tg,{groupName:s.label});default:return null}});function s2({items:e,onSelection:t,checkIsSelected:i}){let l=(0,nb.sf)(),r=(0,s.useCallback)((e,i,n)=>{t({node_id:e,rankPosition:i,isFromSuggestedList:n})},[t]),a=ti.s.flex.justifyCenter.itemsCenter.colorBgSecondary.selectNone.bRadius5.$,o=ti.s.b2.colorBorderSelected.$;return(0,n.jsx)("div",{className:ti.s.grid.borderBox.gridTemplateColumns2.mt8.mb8.ml16.$,children:e.map((t,s)=>{let d=!!i&&i(t),x="isSuggestion"in t&&t.isSuggestion;return"GRID"===t.type?(0,n.jsxs)("div",{className:ti.s.textBodyMedium.colorText.truncate.selectNone.mt8.mr16.mb8.$,children:[(0,n.jsx)(sA.E,{className:il()("design_linter_suggestions_modal--thumbnailContainer--mBL-q",a,d?o:null),onClick:()=>{let i=e.slice(0,s).filter(e=>"GRID"===e.type||"LIST"===e.type&&("variable"in e||"style"in e)||"TEXT_STYLE_LIST"===e.type).length;r(t.id,i,x),l()},children:(0,n.jsx)(tq.oW,{src:t.thumbnail_url,alt:t.name})}),(0,n.jsx)("h3",{className:ti.s.truncate.mt2.$,children:t.name})]},t.id):null})})}var s5=i(827695),s3=i(498349),s4=i(892073),s7=i(89312),s8=i(632416),s6=i(681958),s9=i(347900),le=i(170627);function lt({title:e,getItems:t,getItemName:i}){let[n,l]=(0,s.useState)(!1),r=(0,s.useCallback)(async()=>{n||(l(!0),await s());async function s(){try{let n;let s=[];(0,le.l7)(a.zkO.USER,"debug-linter-visual-groups",()=>{let t=(0,H.UN)(),i=t.getCurrentPage();(n=t.createNode("SECTION")).fills=[{type:"SOLID",color:{r:.9,g:.9,b:.9,a:0},opacity:1}],n.name=e;let s=0;for(let e of i?.childrenNodes??[])e.x+e.size.x>s&&(s=e.x+e.size.x);n.x=s+100,n.y=0});let l=0,r=40,o=t();for(let[e,[t,d]]of Array.from(o.entries()).entries()){let o;(0,le.l7)(a.zkO.USER,"debug-linter-visual-groups",()=>{let a=(0,H.UN)();if(e>0){let e=a.createNode("RECTANGLE");e.fills=[{type:"SOLID",color:{r:.3,g:.3,b:.3,a:1},opacity:1}],e.size={x:l,y:12},e.y=r+40,e.x=40,n.appendChild(e),r+=e.size.y+80,s.push(e.guid)}(o=a.createNode("FRAME")).visible=!1,o.name=i(t),o.x=40,o.y=r,o.fills=[{type:"SOLID",color:{r:.7,g:.7,b:.7,a:1},opacity:1}],o.stackMode="HORIZONTAL",o.stackSpacing=40,o.stackCounterSizing="RESIZE_TO_FIT_WITH_IMPLICIT_SIZE",o.stackTopPadding=40,o.stackBottomPadding=40,o.stackLeftPadding=40,o.stackRightPadding=40,o.frameMaskDisabled=!0});let x=0,u=0,c=0;for(let[e,t]of d.entries())await new Promise(e=>setTimeout(e,0)),(0,le.l7)(a.zkO.USER,"debug-linter-visual-groups",()=>{let i;let s=(0,H.UN)(),l=s.get(t);if(!l)return;if("DOCUMENT"===l.type)i=s.createNode("FRAME").guid;else{if("CANVAS"===l.type)return;i=l.clone()}if(e>0){let e=s.createNode("RECTANGLE");e.fills=[{type:"SOLID",color:{r:.6,g:.2,b:.6,a:1},opacity:1}],e.size={x:4,y:u+40},e.y=40,e.x=x,o.appendChild(e),x+=e.size.x+40}let a=s.get(i);a&&(a.y=40,a.x=x,a.stackPositioning="AUTO",x+=a.size.x+40,u=Math.max(u,a.size.y),c=Math.max(c,a.size.x),"SECTION"===l.type?(n.appendChild(a),a.y=r):o.appendChild(a))});l=Math.max(l,x),r=r+u+120,(0,le.l7)(a.zkO.USER,"debug-linter-visual-groups",()=>{if(n.size={x:l+40,y:r},0===o.childCount){o.removeSelfAndChildren();return}o.size={x:x,y:u+40},n.appendChild(o),o.visible=!0})}let d=(0,H.UN)().getCurrentPage();(0,le.l7)(a.zkO.USER,"debug-linter-visual-groups",()=>{n&&(d?.appendChild(n),function(e,t){let i=(0,H.UN)();for(let n of e){let e=i.get(n);e&&(e.size={x:t,y:e.size.y})}}(s,n.size.x-80),a.Egt?.replaceSelection([n.guid],!0),i4.Y5.triggerAction("goto-layer",{args:{nodeId:n.guid}}))})}catch(e){console.error(e)}finally{l(!1)}}},[n,t,i,e]);return{isRunning:n,handleClick:r}}function li(){let e=(0,p.md)(i7.Bd),{isRunning:t,handleClick:i}=lt({title:"Visual groups",getItems:(0,s.useCallback)(()=>{let t=new Map;return e.forEach(e=>{let i=`${e.id} | ${e.type}`;t.set(i,Array.from(e.rootNodeIdToViolatingNodeIdSet.keys()))}),t},[e]),getItemName:(0,s.useCallback)(e=>e,[])});return(0,n.jsx)("div",{className:"xz9dl7a",children:(0,n.jsx)(iZ.$n,{disabled:t,onClick:i,iconPrefix:t?(0,n.jsx)(s5.k,{}):void 0,children:"Inspect groups"})})}function ln(){let e=(0,p.md)(iU.fY),{isRunning:t,handleClick:i}=lt({title:"Visual Hashes",getItems:(0,s.useCallback)(()=>(function(e){let t=new Map,i=(0,H.UN)();return e.forEach(e=>{let n=i.get(e);n&&(0,s6.hV)(n,e=>{let i=String(a.mHF?.getVisualGroupFieldsHash(e.guid)??0),n=t.get(i)??[];t.set(i,[...n,e.guid])})}),t})(e?.guids??[]),[e]),getItemName:(0,s.useCallback)(e=>`Hash: ${e}`,[])});return(0,n.jsx)("div",{className:"xz9dl7a",children:(0,n.jsx)(iZ.$n,{disabled:t,onClick:i,iconPrefix:t?(0,n.jsx)(s5.k,{}):void 0,children:"Inspect Vis. G Field Hashes"})})}function ls(){let e=(0,p.md)(iU.u2),t=(0,p.md)(iU.fY),i=t?.guids??[],l=function(){let e=(0,p.md)(iU.fY),[t,i]=(0,s.useState)(0);return(0,s.useEffect)(()=>{let t=0;if(e){let i=(0,H.UN)();e.guids.forEach(e=>{let n=i.get(e);n&&(0,s6.hV)(n,()=>{t++})})}i(t)},[e]),t}(),r=(0,p.md)(s9.yd),a=(0,p.md)(iU.Iy),{status:o}=(0,p.md)(iU.v4),d=function(){let e=(0,p.md)(iU.m7);return(0,s.useMemo)(()=>Array.from(e.values()).reduce((e,t)=>e+t.size,0),[e])}(),x=function(){let[e,t]=(0,s.useState)(0),i=(0,p.md)(iU.Iy),n=(0,p.md)(iU.m7);return(0,s.useEffect)(()=>{let e=new Set;for(let t of i.values())for(let i of t.violatingNodeIdToRootNodeId.keys())e.add(i);let s=new Set;for(let t of n.values())for(let i of t.values())for(let t of i)e.has(t.guid)||s.add(t.guid);t(s.size)},[n,i]),e}(),u=function(){let e=(0,p.md)(iU.m7);return(0,s.useMemo)(()=>{let t={};for(let i of e.values())for(let e of i.values())for(let i of e){let{ruleId:e}=i;t[e]=t[e]||[],t[e].push(i)}return Object.entries(t).map(([e,t])=>({rule:e,count:t.length}))},[e])}(),c=(0,p.md)(i7._M);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:ti.s.grid.gridTemplateColumns2.gap2.py8.$,children:[(0,n.jsx)("div",{className:ti.s.textHeadingSmall.mr1.$,children:"Linter status:"}),(0,n.jsx)("div",{className:ti.s.textBodyMedium.$,children:e}),(0,n.jsx)("div",{className:ti.s.textHeadingSmall.mr1.$,children:"Current linter view:"}),(0,n.jsx)("div",{className:ti.s.textBodyMedium.$,children:c}),(0,n.jsx)("div",{className:ti.s.textHeadingSmall.mr1.$,children:"Variable context status:"}),(0,n.jsx)("div",{className:ti.s.textBodyMedium.$,children:o}),(0,n.jsx)("div",{className:ti.s.textHeadingSmall.mr1.$,children:"Linting target:"}),(0,n.jsx)("div",{className:ti.s.textBodyMedium.maxW200.overflowAuto.$,children:`${i.join(",")}`}),(0,n.jsx)("div",{className:ti.s.textHeadingSmall.mr1.$,children:"Linting target nodes:"}),(0,n.jsx)("div",{className:ti.s.textBodyMedium.$,children:l}),(0,n.jsx)("div",{className:ti.s.textHeadingSmall.mr1.$,children:"Lintable nodes:"}),(0,n.jsx)("div",{className:ti.s.textBodyMedium.$,children:r}),(0,n.jsx)("div",{className:ti.s.textHeadingSmall.mr1.$,children:"Visual groups:"}),(0,n.jsx)("div",{className:ti.s.textBodyMedium.$,children:a.size}),(0,n.jsx)("div",{className:ti.s.textHeadingSmall.mr1.$,children:"Violations:"}),(0,n.jsx)("div",{className:ti.s.textBodyMedium.$,children:d}),(0,n.jsx)("div",{className:ti.s.textHeadingSmall.mr1.$,children:"Ungrouped violations:"}),(0,n.jsx)("div",{className:ti.s.textBodyMedium.$,children:x}),(0,n.jsx)("div",{className:ti.s.textHeadingSmall.pb4.$,children:"Violations per rule:"}),(0,n.jsx)("ol",{children:u.map(({rule:e,count:t})=>(0,n.jsxs)("span",{className:ti.s.textBodyMedium.block.$,children:[(0,n.jsx)("strong",{children:e}),": ",t]},e))})]})})}function ll(e){if(!e)return"loading";let t=e.toFixed(3);return e<1e3?`${t}ms`:e<6e4?`${(e/1e3).toFixed(2)}s (${t}ms)`:`${(e/6e4).toFixed(2)}min (${t}ms)`}function lr({label:e,value:t,isHeader:i=!1}){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:il()(ti.s.textHeadingSmall.mr1.$,{[ti.s.textHeadingMedium.$]:i}),children:e}),(0,n.jsx)("div",{className:ti.s.textBodyMedium.$,children:ll(t)})]})}function la({items:e}){return(0,n.jsx)("div",{className:ti.s.flex.flexColumn.overflowAuto.$,children:(0,n.jsx)("table",{children:(0,n.jsx)("tbody",{children:e.map(([e,t])=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:ti.s.textBodyMedium.pr2.italic.noWrap.$,children:(0,n.jsx)("strong",{children:e})}),(0,n.jsx)("td",{className:ti.s.textBodyMedium.alignLeft.$,children:ll(t)})]},e))})})})}function lo(){let e=(0,p.md)(s9.eF),t=(0,p.md)(s9.L2)??[],i=t.reduce((e,{duration:t})=>e+t,0),s=(0,p.md)(s9.rT)??new Map,l=(0,p.md)(s9.KV)??new Map,r=(0,p.md)(s9.zZ)??new Map;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:ti.s.textHeadingSmall.mr1.textHeadingMedium.$,children:"Overall latency info:"}),(0,n.jsxs)("div",{className:ti.s.grid.gridTemplateColumns2.gap2.py8.$,children:[(0,n.jsx)(lr,{label:"Time until first group:",value:e}),(0,n.jsx)(lr,{label:"Total loading time:",value:i}),(0,n.jsx)("div",{className:ti.s.textHeadingSmall.mr1.$,children:"Time per status:"}),(0,n.jsx)(la,{items:t.map(({status:e,duration:t})=>[e,t])}),(0,n.jsx)("div",{className:ti.s.textHeadingSmall.pb4.$,children:"Detection time per rule:"}),(0,n.jsx)(la,{items:Array.from(s)}),(0,n.jsx)("div",{className:ti.s.textHeadingSmall.pb4.$,children:"Avg detection time per rule per node:"}),(0,n.jsx)(la,{items:Array.from(l)}),(0,n.jsx)("div",{className:ti.s.textHeadingSmall.pb4.$,children:"P95 detection time per rule:"}),(0,n.jsx)(la,{items:Array.from(r).filter(([e,t])=>null!==t).map(([e,t])=>[e,t])})]})]})}function ld(){let e=(0,p.md)(i7.E$),t=e?.rootNodeIdToViolatingNodeIdSet.size,i=(0,p.md)(s9.Op),s=(0,p.md)(s9.iS),l=(0,p.md)(s9.ky);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:ti.s.textHeadingSmall.italic.mt8.$,children:"For current group:"}),(0,n.jsxs)("div",{className:ti.s.grid.gridTemplateColumns2.gap2.py8.$,children:[(0,n.jsx)("div",{className:ti.s.textHeadingSmall.mr1.$,children:"Group id:"}),(0,n.jsx)("div",{className:ti.s.textBodyMedium.$,children:e?.id??"none"}),(0,n.jsx)("div",{className:ti.s.textHeadingSmall.mr1.$,children:"Group size (nodes):"}),(0,n.jsx)("div",{className:ti.s.textBodyMedium.$,children:t}),(0,n.jsx)(lr,{label:"Fix loading time:",value:i}),(0,n.jsx)(lr,{label:"Current thumbnail loading time:",value:s}),(0,n.jsx)(lr,{label:"Suggested thumbnail loading time:",value:l})]})]})}function lx(){let e=(0,iQ.am)();return(0,n.jsxs)("div",{className:ti.s.flex.flexColumn.gap4.py8.w150.$,children:[(0,n.jsx)(iZ.$n,{onClick:()=>{e?.debugLinterState()},children:"Copy linter state"}),(0,n.jsx)(li,{}),(0,n.jsx)(ln,{})]})}function lu(){let[e,t]=(0,s.useState)(!1);return(0,n.jsx)("div",{className:ti.s.colorBg.mx16.mt16.flex.flexColumn.b2.bRadius4.colorBorder.p4.wAuto.$,children:(0,n.jsxs)("div",{className:ti.s.p4.$,children:[(0,n.jsxs)(sA.E,{className:ti.s.colorBg.wFull.$,onClick:()=>t(!e),children:[(0,n.jsx)("span",{children:e?"\u25BC":"\u25B6"}),(0,n.jsx)("span",{className:ti.s.ml2.textHeadingMedium.$,children:"Linter debug view"})]}),e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ls,{}),(0,n.jsx)(lo,{}),(0,n.jsx)(ld,{}),(0,n.jsx)(lx,{})]})]})})}var lc=i(384658);function lh(){let{libraryData:e,availableLibraryKeys:t,hasLoaded:i}=nB();return nV(e,t,i),(0,n.jsxs)("div",{"data-testid":"design-linter-library-confirm-view",className:"xtfzhjo",children:[(0,n.jsx)(lp,{libraryData:e,hasLoaded:i}),(0,n.jsx)(lm,{libraryData:e,hasLoaded:i})]})}function lp({libraryData:e,hasLoaded:t}){return(0,n.jsx)(si.P,{theme:{rootStyle:{height:168,border:`1px solid ${ex.Tj.border}`,borderBottom:"none",backgroundColor:ex.Tj.bgSecondary,borderRadius:"8px 8px 0 0",...t?{}:{pointerEvents:"none"}}},children:(0,n.jsxs)("div",{className:"x1iwkndl",children:[(0,n.jsxs)("div",{className:"x87ps6o",children:[(0,n.jsx)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,c.t)("design_linter.library.header")}),(0,n.jsx)("div",{children:(0,c.t)("design_linter.library_confirmation_view.instructions")})]}),t?(0,n.jsx)("div",{"data-testid":"design-linter-library-confirm-list",className:"x78zum5 xdt5ytf x1v2ro7d x14vqqas",children:e.map((e,t)=>(0,n.jsx)("div",{"data-testid":`design-linter-library-confirm-item-${t}`,children:(0,n.jsx)(lg,{thumbnailUrl:e.thumbnailUrl,name:e.name,headerComponent:e.headerComponent,subheaderText:e.subheaderText,coverThumbnail:e.coverThumbnail})},t))}):(0,n.jsx)("div",{className:"x78zum5 xdt5ytf x1v2ro7d x14vqqas",children:(0,n.jsx)(nX,{numPlaceholderLibraries:3,type:"confirm"})})]})})}function lm({libraryData:e,hasLoaded:t}){let i=(0,p.Xr)(i7._M),l=(0,p.Xr)(i7.E),r=(0,p.Xr)(i7.Dg),a=(0,p.Xr)(i7.HC),o=(0,s.useCallback)(()=>{i(i$.FR.LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW),a(sn.LIBRARY_SELECTOR_FROM_EDIT)},[i,a]),d=(0,s.useCallback)(()=>{l(!1),r(!0)},[l,r]);return(0,n.jsxs)("div",{className:"x1bamp8i xsnxyj8 xiqviz9 x78zum5 x6s0dn4 x1qughib",children:[(0,n.jsx)("div",{className:"x78zum5 x6s0dn4 xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x87ps6o",children:t?(0,c.t)("design_linter.library_confirmation_view.num_libraries",{numLibraries:e.length}):(0,n.jsx)(lc.N,{noWrap:!1,children:(0,c.t)("design_linter.library_confirmation_view.loading")})}),(0,n.jsxs)("div",{className:"x78zum5 x167g77z x2lah0s x6wrskw",children:[(0,n.jsx)("div",{className:"xfawy5m",children:(0,n.jsx)(iZ.$n,{variant:"link",onClick:o,disabled:!t,children:(0,c.t)("general.edit")})}),(0,n.jsx)(iZ.$n,{onClick:d,disabled:!t,children:(0,c.t)("general.confirm")})]})]})}function lg({thumbnailUrl:e,name:t,headerComponent:i,subheaderText:s,coverThumbnail:l}){return(0,n.jsxs)("div",{className:"x78zum5 x6s0dn4 x1v2ro7d xh8yej3",children:[(0,n.jsx)(ss.B,{className:"xeepkih x90ne7k xehbxol x19y5rnk",thumbnailUrl:e,coverThumbnail:l,name:t}),(0,n.jsxs)("div",{className:"x78zum5 xdt5ytf x12mrbbr x87ps6o x98rzlu xeuugli",children:[i,s&&(0,n.jsx)(nS.G,{className:"x1n0bwc9",text:s})]})]})}let lf=s.memo(function(){let e=(0,iK._i)(),t=(0,p.md)(i7.E),i=(0,p.md)(i7.$H),l=(0,o.kc)().aip_flower_garden_auto_library_select?520:435,r=i?i.y-s8.u2:l,a=(0,s.useRef)(null);return(0,n.jsx)(si.P,{ref:a,children:(0,n.jsxs)("div",{className:"x8rdmch xctkrei x78zum5 xdt5ytf",style:{height:r},children:[t&&(0,n.jsx)(lh,{}),(0,n.jsx)("div",{className:"x78zum5 xdt5ytf x98rzlu",children:e?(0,n.jsx)(ly,{}):(0,n.jsx)(l_,{ref:a})})]})})}),ly=s.memo(function(){return(0,n.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k x1nfngrj x98rzlu",children:[(0,n.jsx)(s5.k,{}),(0,n.jsx)("span",{className:"x1n0bwc9 xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l xrybvsa x17qaar8 x2b8uid x87ps6o",children:(0,c.tx)("design_linter.modal.loading")}),(0,o.kc)().aip_flower_garden_debug&&(0,n.jsx)(lu,{})]})}),l_=s.forwardRef(function(e,t){let i=(0,p.md)(i7.Bd),s=(0,sH.Te)({count:i?.length??0,getScrollElement:()=>t?.current,overscan:15,estimateSize:()=>88});return(0,n.jsxs)("div",{"data-testid":"design-linter-groups-list",children:[(0,n.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xrybvsa xehsoiq x87ps6o",children:(0,c.t)("design_linter.modal.description")}),(0,n.jsx)("div",{className:"x1n2onr6",style:{height:s.getTotalSize()},children:(0,n.jsx)("div",{className:"x13vifvy xu96u03 x1n2onr6",style:{height:`${s.getTotalSize()+16}px`},children:(0,n.jsx)(s3.i,{children:s.getVirtualItems().map(e=>{let t=i[e.index];return t?(0,n.jsx)(lj,{group:t,virtualRow:e},e.index):null})})})})]})}),lj=s.memo(function({group:e,virtualRow:t}){let i=(0,p.Xr)(i7._M),[l,r]=(0,p.fp)(i7.Dg),[a,o]=(0,s7.M)(),d=(0,iK.Wo)(),x=(0,iK.Vz)(),u=(0,iK.HE)(),h=(0,s.useCallback)(()=>{l&&r(!1),d(e.id),x(),u(e.id),i(i$.FR.SELECTED_VISUAL_GROUP_VIEW),(0,nR.JT)(e,"ALL_GROUPS_VIEW")},[e,i,d,x,u,r,l]),m=(0,n6.ac)(e);return m?(0,n.jsxs)(sA.E,{recordingKey:$.Pt("design-linter-all-groups-view",`item-${t.index}`),"data-testid":`design-linter-group-item-${t.index}`,onClick:h,"data-index":t.index,...{0:{className:"x78zum5 x7hzu26 x1ef8nbk xf7z5ut xt7dq6l x10l6tqk x13vifvy xu96u03 xh8yej3 x1qughib x1cmt63n x157llzd"},1:{className:"x78zum5 x7hzu26 x1ef8nbk xf7z5ut xt7dq6l x10l6tqk x13vifvy xu96u03 xh8yej3 x1qughib x1cmt63n x157llzd x1v8gsql x19y5rnk"}}[!!o<<0],style:{height:`${t.size}px`,transform:`translateY(${t.start}px)`},ref:a,children:[(0,n.jsxs)("div",{className:"x78zum5 x6s0dn4",children:[(0,n.jsx)(sb,{rootNodeId:m,reason:"design-linter.all-groups-view",thumbnailWidth:120,thumbnailHeight:72,thumbnailPadding:8,source:sg.ALL_GROUPS_VIEW}),(0,n.jsx)("div",{className:"xrybvsa x78zum5 xdt5ytf",children:(0,n.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1akne3o",children:(0,c.t)("design_linter.visual_group_row.title",{count:e?.rootNodeIdToViolatingNodeIdSet.size})})})]}),(0,n.jsx)("div",{...{0:{className:"xg01cxk xxk0z11 xvy4d1p xlshs6z"},1:{className:"xxk0z11 xvy4d1p x1hc1fzr xnpuxes"}}[!!o<<0],children:(0,n.jsx)(s4.e,{})})]},m):null}),lb=(0,p.eU)(null,async e=>{p.zl.set(s9.Op,null);let t=performance.now(),i=e(i7.E7),n=(0,iQ.X5)();if(!n)return;let s=Object.values(i);await Promise.allSettled(s.map(e=>n.requestFix(e))),p.zl.set(s9.Op,performance.now()-t)});var lv=i(30532),lk=i(892572);let lC={sidebarWidth:"var(--x5rzc0s)",suggestionsViewWidth:"var(--x1uvavt)",suggestionsModalHeaderHeight:"var(--x1vqszz8)",previewHeaderHeight:"var(--xkgaxnv)"};var lE=(e=>(e.GROUP="group",e.ROOT="root",e))(lE||{});let lS=s.memo(function(){var e;let t=(0,s.useRef)(null),i=(0,p.md)(i7.Bd),l=(0,p.md)(i7.$H),r=(e=(0,p.md)(i7.W_),(0,s.useMemo)(()=>{if(!i)return[];let t=[];return i.forEach(i=>{let n=e.has(i.id),s=n?(0,n6.zr)(i):[],l=s.length>1,r=1+(l?s.length:0);t.push({type:"group",group:i,isFirstInGroup:!0,isLastInGroup:1===r}),n&&l&&s.forEach((e,n)=>{let l=H.UN().get(e)?.name;t.push({type:"root",group:i,rootNodeId:e,rootName:l,isFirstInGroup:!1,isLastInGroup:n===s.length-1})})}),t},[i,e])),a=(0,sH.Te)({count:r.length,getScrollElement:()=>t.current,overscan:24,estimateSize:e=>{let t=r[e];return(t?.type==="root"?24:32)+8}}),o=l?l.y-s8.u2:480;return(0,n.jsx)(si.P,{ref:t,children:(0,n.jsx)("div",{"data-testid":"design-linter-groups-sidebar",className:"x1qn71ht",style:{height:o},children:(0,n.jsx)("div",{className:"x1n2onr6 xh8yej3",style:{height:`${a.getTotalSize()}px`,paddingTop:4,paddingBottom:4},children:a.getVirtualItems().map(e=>{let t=r[e.index];if(!t)return null;let i="group"===t.type,s=i?`group-${t.group.id}`:`root-${t.group.id}-${t.rootNodeId}`,l={position:"absolute",top:0,left:4,right:4,height:`${e.size}px`,transform:`translateY(${e.start+4}px)`};return(0,n.jsx)("div",{style:l,"data-testid":`sidebar-row-${e.index}`,children:(0,n.jsx)(lT,{group:t.group,virtualRow:e,isGroupItem:i,rootNodeId:t.rootNodeId,rootName:t.rootName,isFirstInGroup:t.isFirstInGroup,isLastInGroup:t.isLastInGroup})},s)})})})})}),lT=s.memo(function({group:e,virtualRow:t,isGroupItem:i,rootNodeId:l,rootName:r,isFirstInGroup:a,isLastInGroup:o}){let d=(0,s.useRef)(null),x=(0,nb.sf)(),u=(0,iK.Wo)(),{isSelectedGroup:h,isHoveredGroup:m,isSelectedGroupRow:g}=function(e,t,i){let n=(0,p.md)(i7.NM),s=(0,p.md)(i7.xo),l=(0,p.md)(i7.xX),r=t===n;return{isSelectedGroup:r,isHoveredGroup:t===l.groupId,isSelectedGroupRow:e?r&&null===s:i===s}}(i,e.id,l),f=function(e,t,i){let n=(0,p.Xr)(i7.xX),s=(0,p.Xr)(i7.P$);return{onMouseEnter:()=>{i.current&&s(i.current.getBoundingClientRect()),n({groupId:e,rootNodeId:t??null})},onMouseLeave:()=>{s(null),n({groupId:null,rootNodeId:null})}}}(e.id,l,d),y=(0,p.md)(i7.JQ),_=(0,iK.Vz)(),j=(0,iK.OI)(),b=(0,iK.Ci)(),v=(0,iK.HE)(),k=(0,s.useCallback)(()=>{x(),u(e.id),i?(_(),g?b(e.id):v(e.id)):l&&j(l)},[x,u,e.id,i,_,g,b,v,l,j]),C=e.rootNodeIdToViolatingNodeIdSet.size,E=i&&!y.has(e.id),S=i?(0,n6.ac)(e):l;if(!S)return null;let T=i?32:24;return(0,n.jsx)(sA.E,{...{0:{className:"x78zum5 x1n2onr6 xh8yej3 x5yr21d xb3r6kr"},2:{className:"x78zum5 x1n2onr6 xh8yej3 x5yr21d xb3r6kr x1k1lpwg x5omr3n"},1:{className:"x78zum5 x1n2onr6 xh8yej3 x5yr21d xb3r6kr xabvvm4 xeyy32k"},3:{className:"x78zum5 x1n2onr6 xh8yej3 x5yr21d xb3r6kr x1k1lpwg x5omr3n xabvvm4 xeyy32k"}}[!!a<<1|!!o<<0],ref:d,"data-index":t.index,onClick:k,htmlAttributes:f,children:(0,n.jsxs)("div",{...{0:{className:"x78zum5 xfawy5m xd3ty66 x6s0dn4 xh8yej3 xeuugli x5yr21d"},8:{className:"xfawy5m x78zum5 x6s0dn4 xh8yej3 xeuugli x5yr21d"},4:{className:"x78zum5 xfawy5m xd3ty66 x6s0dn4 xh8yej3 xeuugli x5yr21d x1v8gsql"},12:{className:"xfawy5m x78zum5 x6s0dn4 xh8yej3 xeuugli x5yr21d x1v8gsql"},2:{className:"x78zum5 xfawy5m xd3ty66 x6s0dn4 xh8yej3 xeuugli x5yr21d xcr9a89"},10:{className:"xfawy5m x78zum5 x6s0dn4 xh8yej3 xeuugli x5yr21d xcr9a89"},6:{className:"x78zum5 xfawy5m xd3ty66 x6s0dn4 xh8yej3 xeuugli x5yr21d xcr9a89"},14:{className:"xfawy5m x78zum5 x6s0dn4 xh8yej3 xeuugli x5yr21d xcr9a89"},1:{className:"x78zum5 xfawy5m xd3ty66 x6s0dn4 xh8yej3 xeuugli x5yr21d xkg04fo"},9:{className:"xfawy5m x78zum5 x6s0dn4 xh8yej3 xeuugli x5yr21d xkg04fo"},5:{className:"x78zum5 xfawy5m xd3ty66 x6s0dn4 xh8yej3 xeuugli x5yr21d xkg04fo"},13:{className:"xfawy5m x78zum5 x6s0dn4 xh8yej3 xeuugli x5yr21d xkg04fo"},3:{className:"x78zum5 xfawy5m xd3ty66 x6s0dn4 xh8yej3 xeuugli x5yr21d xkg04fo"},11:{className:"xfawy5m x78zum5 x6s0dn4 xh8yej3 xeuugli x5yr21d xkg04fo"},7:{className:"x78zum5 xfawy5m xd3ty66 x6s0dn4 xh8yej3 xeuugli x5yr21d xkg04fo"},15:{className:"xfawy5m x78zum5 x6s0dn4 xh8yej3 xeuugli x5yr21d xkg04fo"}}[!!i<<3|!!m<<2|!!h<<1|!!g<<0],children:[(0,n.jsx)(sb,{rootNodeId:S,reason:"design-linter.sidebar-thumbnail",thumbnailWidth:T,thumbnailHeight:T,thumbnailPadding:4,source:sg.SIDEBAR}),i?(0,n.jsxs)("div",{className:"x78zum5 x6s0dn4 x1qughib x98rzlu xet2fuk x1db2dqx xeuugli",children:[(0,n.jsx)("div",{className:"x98rzlu xb3r6kr xlyipyv xuxw1ft xeuugli",children:(0,c.tx)("design_linter.sidebar.item_title",{count:C})}),E&&(0,n.jsx)(lw,{})]}):(0,n.jsx)("div",{className:"xet2fuk xb3r6kr xlyipyv xuxw1ft x98rzlu",children:r})]})})}),lw=s.memo(function(){return(0,n.jsx)("div",{className:"x51ohtg xqu0tyb x16rqkct xu5wzci xet2fuk x2lah0s"})});var lN=i(608608),lI=i(271849),lL=i(648526),lR=i(4865),lA=i(312387),lO=i(240803),lM=i(779491);let lF=[2,3,6,13,25,50,75,100,200,300,1e3];var lz=(e=>(e.CURRENT="current",e.SUGGESTED="suggested",e))(lz||{});function lP(e){let t=(0,p.md)(i7.$H),i=!!(0,o.kc)().aip_flower_garden_sidebar,n=s_(e,sg.PREVIEW),s=l0(e,"suggested");return{modalSize:t,showSidebar:i,background:n,suggestedHighlightInfo:function(e,t){if(!e)return null;let{activeToLinterGuidsMap:i,linterToActiveGuidsMap:n,linterGuidsToNodeInfoMap:s}=function(e){let t=p.zl.get(iU.qL).get(lX(e,lz.SUGGESTED));return{activeToLinterGuidsMap:t?.activeToLinterGuidsMap,linterToActiveGuidsMap:t?.linterToActiveGuidsMap,linterGuidsToNodeInfoMap:t?.linterGuidsToNodeInfoMap}}(e);return lG(t,i?.get(e)??"-1:-1",n,s)}(e,s)}}function lB({children:e,modalSize:t,showSidebar:i}){return(0,n.jsx)(lO.o,{eventListeners:["onPointerDown"],children:(0,n.jsxs)("div",{...m.xk(lW.previewContainer(t?.x,t?.y,i)),children:[(0,n.jsx)(lU,{}),e]})})}function lD({shouldShow:e}){return(0,n.jsx)("div",{className:"x87ps6o x10l6tqk xfr5jun x19up5dg x11uqc5h",children:e&&(0,n.jsx)(lM.UN,{})})}function lV(e,t){let{thumbnail:i,status:s}=e,l=!!(0,o.kc)().aip_flower_garden_sidebar,r=(0,n.jsx)("div",{className:"x78zum5 x5yr21d xh8yej3 x6s0dn4 xl56j7k x1v8gsql",children:(0,n.jsx)(s5.k,{size:"md"})});return i&&"loaded"===s?(0,n.jsx)(lM.Nf,{image:i,paddingPixels:30,Overlay:t,customLoadingIndicator:r,resetEnhancedOnBaseChange:l,clearBaseBeforeDrawing:l}):"loading"===s?r:(0,n.jsx)("div",{className:"x78zum5 x5yr21d xh8yej3 x6s0dn4 xl56j7k x1v8gsql",children:(0,c.tx)("design_linter.preview.thumbnail_unavailable")})}function lG(e,t,i,n){let s=n?.get(t)?.absoluteRenderBounds;if(!s)return null;let l=[];for(let{guid:t,ruleId:r,detectionContext:a}of e){let o=n?.get(t);if(!o)continue;let{absoluteCornerPoints:d,unrotatedBoundingBox:x,childrenUnrotatedBoundingBoxesMap:u,cornerRadiusValues:c,absoluteTransform:h,stackTopPadding:p,stackBottomPadding:m,stackLeftPadding:g,stackRightPadding:f,stackSpacing:y,gridColumnGap:_,gridRowGap:j,gridColumnCount:b,gridRowCount:v,gridRowComputedSizesInOrder:k,gridColumnComputedSizesInOrder:C}=o,E=x?lH(x,s):null,S=d?{topLeft:lq(d.topLeft,s),topRight:lq(d.topRight,s),bottomLeft:lq(d.bottomLeft,s),bottomRight:lq(d.bottomRight,s)}:null,T=new Map;for(let[e,t]of u)if(t){let i=lH(t,s);T.set(e,i)}let w=function(e,t,i){let n=(0,H.UN)(),s=i?.get(e);if(!s)return!1;for(let l of t){if(l.guid===e)continue;let t=i?.get(l.guid);if(t&&(0,s6.rV)(n,t,s))return!0}return!1}(t,e,i);l.push({guid:t,ruleId:r,detectionContext:a,isNested:w,unrotatedBounds:E,childrenUnrotatedBoundsMap:T,cornerRadiusValues:c,cornerPoints:S,absoluteTransform:h,stackTopPadding:p,stackBottomPadding:m,stackLeftPadding:g,stackRightPadding:f,stackSpacing:y,gridColumnGap:_,gridRowGap:j,gridColumnCount:b,gridRowCount:v,gridRowComputedSizesInOrder:k,gridColumnComputedSizesInOrder:C})}return{overlayInfoList:l}}function lH(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function lq(e,t){return{x:e.x-t.x,y:e.y-t.y}}let lU=s.memo(function(){let e=function(){let e=(0,p.md)(i7.xo),t=(0,p.md)(i7.vu);return e?1:t.length}(),t=0===(0,p.md)(lk.QU).violationCount;return(0,n.jsx)("div",{className:"x78zum5 xdt5ytf x1yjdb4r xso031l x1y0btm7 x7z60cl x1vp34bk xl56j7k xb3r6kr x9f619",children:(0,n.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x87ps6o xiqviz9 x78zum5 xuxw1ft xb3r6kr xlyipyv",children:t?null:(0,n.jsx)("span",{children:(0,c.tx)("design_linter.preview_header.title",{count:e})})})})});function l$({title:e}){return(0,n.jsx)("div",{className:"xuuh30 x10l6tqk x1ey2m1c x1vjfegm x87ps6o x1y1aw1k xwib8y2 x1nrll8i",children:(0,n.jsx)("span",{className:"x4oah1p xewu7z0 x2ua9qx x1dnis8n xawads1 x1akne3o x2b8uid xldgpng x9cpjcd xur7f20",children:e})})}let lK={kzqmXN:"x5lhr3w",k7Eaqz:"xkj4a21",kZKoxP:"x16ye13r",kZ1KPB:"xe0pwq",k2ei4v:"",ke9TFa:"",ksu8eU:"x1y0btm7",kJRH4f:"",kVhnKS:"",k4WBpm:"",k8ry5P:"",kSWEuD:"",kDUl1X:"",kPef9Z:"",kfdmCh:"",kVAM5u:"x7z60cl",kzOINU:"",kGJrpR:"",kaZRDh:"",kBCPoo:"",k26BEO:"",k5QoK5:"",kLZC3w:"",kL6WhQ:"",$$css:!0},lW={previewContainer:(e,t,i)=>[lK,{"--x-width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`calc(${e??(0,n6.O$)().width}px - ${lC.suggestionsViewWidth} - ${i?lC.sidebarWidth:"0px"})`),"--x-minWidth":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`calc(${e??(0,n6.O$)().width}px - ${lC.suggestionsViewWidth} - ${i?lC.sidebarWidth:"0px"})`),"--x-height":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`calc(${t??(0,n6.O$)().height}px - ${lC.suggestionsModalHeaderHeight} - ${lC.previewHeaderHeight})`)}]};function lZ(e,t,i){let[n,l]=(0,s.useState)(!1),r=(0,iQ.am)();(0,s.useEffect)(()=>{l(!0)},[]);let[o,d]=(0,s.useState)({thumbnail:null,status:"loading"}),x=(0,s.useRef)(null),{violationsWithFixes:u,areFixesReady:c}=function(e){let t=function(e){let t=(0,p.md)(i7.IZ);return(0,s.useMemo)(()=>{if(!e)return[];let i=(0,H.UN)();return t.filter(t=>t.guid===e||(0,s6.rV)(i,e,t.guid))},[e,t])}(e),i=(0,p.md)(i7.$C),[n,l]=(0,s.useState)(!1);return{violationsWithFixes:(0,s.useMemo)(()=>{if(!i)return[];let e=!0,n=t.map(t=>{let n=i.get(t.groupKey);return n?.status==="loading"&&(e=!1),{violation:t,selectedFix:n?.fix||null}});return l(e),n},[i,t]),areFixesReady:n}}(t);return(0,s.useEffect)(()=>{if(!n)return;let s=e===lz.SUGGESTED,l=async()=>{let n=performance.now();s?p.zl.set(s9.ky,null):p.zl.set(s9.iS,null);let l=new AbortController;x.current=l;try{let n;if(!t)return;let o=lX(t,e),x=p.zl.get(iU.qL).get(o),c=i<=0,h=x?.lastEditedAtTime!==i||c,m=h,g="";if(s){g=function(e){let t=JSON.stringify(e.map(e=>(function({violation:e,selectedFix:t}){var i;return t?.fixContext?`${e.guid}_${e.groupKey}_${i=t.fixContext,JSON.stringify(i,(e,t)=>t&&"object"==typeof t&&!Array.isArray(t)?Object.keys(t).sort().reduce((e,i)=>(e[i]=t[i],e),{}):t)}`:`${e.guid}_${e.groupKey}`})(e)).sort());return(0,lR.F)(t)}(u);let e=x?.violationsStateHash!==g;m=h||e}if(x&&!m){d({thumbnail:x.thumbnail,status:"loaded"});return}let f=()=>{d({thumbnail:null,status:"error"}),console.error("Error generating thumbnail: Called showError on delegate")};if((n=s?await lY(r,t,i,g,u,f,l.signal):function(e,t,i,n){let s=a.mHF?.copyNodeToLinterScene(e);if(!s)throw Error("Current linter scene guid not found");let l=(0,H.UN)().get(e);if(!l)throw Error("Original node not found");if(n.aborted)throw new ny.Cu;let r=new H.qo(a.juq.LINTER).get(s);if(!r)throw Error("Current linter scene node not found");let{activeToLinterGuidsMap:o,linterToActiveGuidsMap:d}=lQ(l,r);return{thumbnail:(0,lA.SI)({nodeId:s,linterScene:!0,showError:i})(),activeToLinterGuidsMap:o,linterToActiveGuidsMap:d,linterGuidsToNodeInfoMap:lJ(r),lastEditedAtTime:t}}(t,i,f,l.signal)).thumbnail){d({thumbnail:n.thumbnail,status:"loaded"}),function(e,t){let i=new Map(p.zl.get(iU.qL));i.set(e,t),p.zl.set(iU.qL,i)}(o,n);return}console.error("Error generating thumbnail: Thumbnail delegate does not exist"),d({thumbnail:null,status:"error"})}catch(e){console.error("Error generating thumbnail:",e),d({thumbnail:null,status:"error"})}finally{let e=performance.now()-n;s?p.zl.set(s9.ky,e):p.zl.set(s9.iS,e)}};if(s&&!c){d({thumbnail:null,status:"loading"});return}return l(),()=>{x.current?.abort()}},[t,i,e,u,c,n,r]),o}function lX(e,t){return`${e}-${t}`}async function lY(e,t,i,n,s,l,r){let o=a.mHF?.copyNodeToLinterScene(t);if(!o)throw Error("Suggested linter scene guid not found");let d=(0,H.UN)().get(t);if(!d)throw Error("Original node not found");if(r.aborted)throw new ny.Cu;let x=new H.qo(a.juq.LINTER).get(o);if(!x)throw Error("Suggested linter scene node not found");let{activeToLinterGuidsMap:u,linterToActiveGuidsMap:c}=lQ(d,x);await e?.applyFixesToThumbnailNode(s,u,r);let h=(0,lA.SI)({nodeId:o,linterScene:!0,showError:l})();if(r.aborted)throw new ny.Cu;return a.mHF?.applyPendingLinterNodeUpdates(o),{thumbnail:h,activeToLinterGuidsMap:u,linterToActiveGuidsMap:c,linterGuidsToNodeInfoMap:lJ(x),lastEditedAtTime:i,violationsStateHash:n}}function lQ(e,t){let i=new Map,n=new Map,s=[],l=[];return(0,iJ.eA)(e,e=>{s.push(e.guid)}),(0,iJ.eA)(t,e=>{l.push(e.guid)}),s.forEach((e,t)=>{let s=l[t];s&&(i.set(e,s),n.set(s,e))}),{activeToLinterGuidsMap:i,linterToActiveGuidsMap:n}}function lJ(e){let t=new Map;return(0,iJ.eA)(e,e=>{let i=null,n=new Map;try{let t=a.mHF?.getUnrotatedLinterNodeBounds(e.guid);if(!t)throw Error("Result is undefined or null");let s=t.bounds;i={x:s.origin.x,y:s.origin.y,width:s.size.x,height:s.size.y},t.childrenGuids.forEach((e,i)=>{let s=t.childrenBounds[i];s&&n.set(e,{x:s.origin.x,y:s.origin.y,width:s.size.x,height:s.size.y})})}catch(t){console.error(`Failed to get unrotated bounds for linter node ${e.guid}, error:`,t)}t.set(e.guid,{absoluteRenderBounds:function(e,t){let i=t?e.absoluteRenderBounds:e.absoluteBoundingBox;return i?{x:i.x,y:i.y,width:i.w,height:i.h}:null}(e,!0),unrotatedBoundingBox:i,childrenUnrotatedBoundingBoxesMap:n,cornerRadiusValues:e.cornerRadiusValues,absoluteCornerPoints:a.mHF?.getLinterNodeAbsoluteCornerPoints(e.guid)??null,absoluteTransform:e.absoluteTransform,stackTopPadding:e.stackTopPadding,stackBottomPadding:e.stackBottomPadding,stackLeftPadding:e.stackLeftPadding,stackRightPadding:e.stackRightPadding,stackSpacing:e.stackSpacing,gridColumnGap:e.gridColumnGap,gridRowGap:e.gridRowGap,gridColumnCount:e.gridColumnCount,gridRowCount:e.gridRowCount,gridRowComputedSizesInOrder:e.gridRowSizesInOrder.map(e=>e.computedSize),gridColumnComputedSizesInOrder:e.gridColumnSizesInOrder.map(e=>e.computedSize)})}),t}function l0(e,t){let i=(0,p.md)(iU.hx);return(0,s.useMemo)(()=>{if(!e)return[];let n=(0,H.UN)(),s=i.filter(t=>t.guid===e||(0,s6.rV)(n,e,t.guid)),l=p.zl.get(iU.qL).get(lX(e,t)),r=l?.activeToLinterGuidsMap;return s.reduce((e,t)=>{let{guid:i,ruleId:n,detectionContext:s,nodeType:l}=t,a=r?.get(i);return a&&e.push(new lL.U({ruleId:n,guid:a,detectionContext:s,nodeType:l})),e},[])},[e,t,i])}var l1=i(700170),l2=i(779319);function l5(e){return"assetType"in e?e.assetType:""}function l3(e,t){let i=e.transformRect(new i5.r(new i3.M(t.x,t.y),new i3.M(t.width,t.height)));return{x:i.left(),y:i.top(),width:i.width(),height:i.height()}}function l4(e,t){let i=new i3.M(t.x,t.y),n=e.transformPoint(i);return{x:n.x,y:n.y}}function l7(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function l8(e,t){let i=l7(e.topRight,e.topLeft),n=l7(e.bottomLeft,e.topLeft),s={topLeft:l4(t,e.topLeft),topRight:l4(t,e.topRight),bottomRight:l4(t,e.bottomRight),bottomLeft:l4(t,e.bottomLeft)},l=l7(s.topRight,s.topLeft),r=l7(s.bottomLeft,s.topLeft),a=Math.min(l/i,r/n);return{transformedPoints:s,width:l,height:r,scale:a}}function l6(e){let t=l2.s.fromFigMatrix(e);return{normalizedRotation:(t.toDegrees()%360+360)%360,isFlipped:0>t.determinant()}}let l9={blueBorderHover:{kVAEAm:"x10l6tqk",kVAM5u:"x1va2ikv",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,ksu8eU:"x1y0btm7",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,$$css:!0},pinkBgHover:{kVAEAm:"x10l6tqk",kWkggS:"x6zv46q",kSiTet:"xuzhngd",$$css:!0}};function re({overlayInfo:e,imageTransform:t}){let i,s,l;let{ruleId:r,detectionContext:a,cornerRadiusValues:o,cornerPoints:d,absoluteTransform:x}=e;if(!d)return null;let{transformedPoints:u,width:c,height:h,scale:p}=l8(d,t),g=Math.max(16*p,16),f=l5(a);if(f in l1.tY){if(!(f in l1.tY))return null;i=l1.tY[f].toLowerCase()}else i=l1.SF[r].toLowerCase();let y=i.includes("right"),_=i.includes("bottom"),j=function(e,t,i,n,s){let l=Math.min(t/(e.topLeft+e.topRight),1),r=Math.min(i/(e.topRight+e.bottomRight),1),a=Math.min(t/(e.bottomLeft+e.bottomRight),1),o=Math.min(i/(e.topLeft+e.bottomLeft),1),d=e.topLeft*Math.min(l,o);return{topLeft:d*n+2,topRight:e.topRight*Math.min(l,r)*n+2,bottomRight:e.bottomRight*Math.min(a,r)*n+s,bottomLeft:e.bottomLeft*Math.min(a,o)*n+s}}(o,c/p,h/p,p,2);y&&_?(s=j.bottomRight,l=u.bottomRight):y&&!_?(s=j.topRight,l=u.topRight):!y&&_?(s=j.bottomLeft,l=u.bottomLeft):(s=j.topLeft,l=u.topLeft);let{borderWidth:b,borderLength:v}=function(e,t,i,n,s,l,r,a){let o=s?"bottom":"top",d=n?"Right":"Left",x=n?l[`${o}Left`]:l[`${o}Right`];return{borderWidth:Math.max(Math.min(i+(e+2-x-i)/2-2,a),i),borderLength:Math.max(Math.min(i+(t+2-(s?l[`top${d}`]:l[`bottom${d}`])-i)/2-2,a),i)}}(c,h,s,y,_,j,2,g),k=y?l.x-b:l.x-1,C=_?l.y-v:l.y-1,{normalizedRotation:E,isFlipped:S}=l6(x),T=l.x-k,w=l.y-C,N={width:b,height:v,transformOrigin:`${T}px ${w}px`,transform:`translate(${k}px, ${C}px) rotate(${E}deg)${S?" scaleY(-1)":""}`,[`border${_?"Bottom":"Top"}Width`]:2,[`border${y?"Right":"Left"}Width`]:2,[`border${_?"Bottom":"Top"}${y?"Right":"Left"}Radius`]:s};return(0,n.jsx)("div",{...m.Ay.props(l9.blueBorderHover),style:N})}function rt({overlayInfo:e,imageTransform:t}){let{ruleId:i,unrotatedBounds:l,cornerPoints:r,gridColumnGap:a,gridRowGap:o,gridColumnCount:d,gridRowCount:x,gridRowComputedSizesInOrder:u,gridColumnComputedSizesInOrder:c,absoluteTransform:h}=e;if(!l||!r)return null;let p=l3(t,l),g=i===lv.C.REQUIRE_GRID_COLUMN_GAP_VARIABLES,f=(g?d:x)-1,y=g?c:u,{width:_,height:j,scale:b}=l8(r,t),v=(g?a:o)*b,{normalizedRotation:k,isFlipped:C}=l6(h),E=[],S=g?e.stackLeftPadding*b:e.stackTopPadding*b;for(let e=0;e<f;e++){let t=y[e];if(!t)continue;S+=t*b;let i=g?S+p.x:p.x,n=g?p.y:S+p.y,l=g?v:_,r=g?j:v,a=p.x-i,o=C?p.y+p.height-n:p.y-n;E.push((0,s.createElement)("div",{...m.Ay.props(l9.pinkBgHover),key:`hover-grid-${e}`,style:{transformOrigin:`${a}px ${o}px`,transform:`translate(${i}px, ${n}px) rotate(${k}deg)`,width:l,height:r}})),S+=v}return(0,n.jsx)(n.Fragment,{children:E})}var ri=i(110973);function rn({overlayInfo:e,imageTransform:t}){let i;let{ruleId:s,detectionContext:l,cornerPoints:r,absoluteTransform:a}=e;if(!r)return null;let{transformedPoints:o,width:d,height:x,scale:u}=l8(r,t),c=l5(l);if(c in ri.N3){if(!(c in ri.N3))return null;i=ri.N3[c]}else i=ri.QX[s];let h=e[({paddingTop:"stackTopPadding",paddingBottom:"stackBottomPadding",paddingLeft:"stackLeftPadding",paddingRight:"stackRightPadding"})[i]]*u,p={paddingTop:o.topLeft,paddingBottom:o.bottomLeft,paddingLeft:o.topLeft,paddingRight:o.topRight}[i],{translateX:g,translateY:f,highlightWidth:y,highlightHeight:_}={paddingTop:{translateX:p.x,translateY:p.y,highlightWidth:d,highlightHeight:h},paddingBottom:{translateX:p.x,translateY:p.y-h,highlightWidth:d,highlightHeight:h},paddingLeft:{translateX:p.x,translateY:p.y,highlightWidth:h,highlightHeight:x},paddingRight:{translateX:p.x-h,translateY:p.y,highlightWidth:h,highlightHeight:x}}[i],{normalizedRotation:j,isFlipped:b}=l6(a),v=p.x-g,k=p.y-f,C=`translate(${g}px, ${f}px) rotate(${j}deg)${b?" scaleY(-1)":""}`;return(0,n.jsx)("div",{...m.Ay.props(l9.pinkBgHover),style:{transformOrigin:`${v}px ${k}px`,transform:C,width:y,height:_}})}function rs({overlayInfo:e,imageTransform:t}){let{ruleId:i,detectionContext:l,unrotatedBounds:r,childrenUnrotatedBoundsMap:a,cornerPoints:o,stackSpacing:d,absoluteTransform:x}=e;if(!r||!o||0===a.size)return null;let u=l3(t,r),c=Array.from(a.entries()).map(([e,i])=>({guid:e,bounds:l3(t,i)})),h=l5(l),p=i===lv.C.REQUIRE_HORIZONTAL_SPACING_VARIABLES||"STACK_SPACING_HORIZONTAL"===h,g=c.sort((e,t)=>p?e.bounds.x-t.bounds.x:e.bounds.y-t.bounds.y),{width:f,height:y,scale:_}=l8(o,t),j=d*_,{normalizedRotation:b,isFlipped:v}=l6(x),k=[];for(let e=0;e<g.length-1;e++){let t=g[e];if(!t)continue;let i=`${t.guid}`;if(p){let e=t.bounds.x+t.bounds.width,n=u.y,l=u.x-e,r=v?u.y+u.height-n:u.y-n;k.push((0,s.createElement)("div",{...m.Ay.props(l9.pinkBgHover),key:i,style:{transformOrigin:`${l}px ${r}px`,transform:`translate(${e}px, ${n}px) rotate(${b}deg)`,width:j,height:y}}))}else{let e=t.bounds.y+t.bounds.height,n=u.x,l=u.x-n,r=v?u.y+u.height-e:u.y-e;k.push((0,s.createElement)("div",{...m.Ay.props(l9.pinkBgHover),key:i,style:{transformOrigin:`${l}px ${r}px`,transform:`translate(${n}px, ${e}px) rotate(${b}deg)`,width:f,height:j}}))}}return(0,n.jsx)(n.Fragment,{children:k})}let rl=(0,s.createContext)(null);function rr({children:e,value:t}){return(0,n.jsx)(rl.Provider,{value:t,children:e})}function ra(e){let t=(0,s.useContext)(rl);return t?(0,n.jsx)(ro,{...e,...t}):null}let ro=s.memo(function(e){let{overlayInfoList:t,transform:i}=e;return(0,n.jsx)(n.Fragment,{children:t.map((e,t)=>(0,n.jsx)("div",{children:(0,n.jsx)(rd,{overlayInfo:e,imageTransform:i})},t))})});function rd({overlayInfo:e,imageTransform:t}){switch(e.ruleId){case lv.C.REQUIRE_BOTTOM_LEFT_CORNER_RADIUS_VARIABLES:case lv.C.REQUIRE_BOTTOM_RIGHT_CORNER_RADIUS_VARIABLES:case lv.C.REQUIRE_TOP_LEFT_CORNER_RADIUS_VARIABLES:case lv.C.REQUIRE_TOP_RIGHT_CORNER_RADIUS_VARIABLES:return(0,n.jsx)(re,{overlayInfo:e,imageTransform:t});case lv.C.REQUIRE_HORIZONTAL_SPACING_VARIABLES:case lv.C.REQUIRE_VERTICAL_SPACING_VARIABLES:return(0,n.jsx)(ru,{overlayInfo:e,imageTransform:t});case lv.C.REQUIRE_GRID_COLUMN_GAP_VARIABLES:case lv.C.REQUIRE_GRID_ROW_GAP_VARIABLES:return(0,n.jsx)(rc,{overlayInfo:e,imageTransform:t});case lv.C.REQUIRE_TOP_PADDING_VARIABLES:case lv.C.REQUIRE_BOTTOM_PADDING_VARIABLES:case lv.C.REQUIRE_LEFT_PADDING_VARIABLES:case lv.C.REQUIRE_RIGHT_PADDING_VARIABLES:return(0,n.jsx)(rh,{overlayInfo:e,imageTransform:t});case lv.C.REQUIRE_ASSETS_FROM_SELECTED_LIBRARIES:let{detectionContext:i}=e;if(!("assetType"in i))return null;switch(i.assetType){case"RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS":case"RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS":case"RECTANGLE_TOP_LEFT_CORNER_RADIUS":case"RECTANGLE_TOP_RIGHT_CORNER_RADIUS":return(0,n.jsx)(re,{overlayInfo:e,imageTransform:t});case"STACK_SPACING_HORIZONTAL":case"STACK_SPACING_VERTICAL":return(0,n.jsx)(ru,{overlayInfo:e,imageTransform:t});case"STACK_PADDING_TOP":case"STACK_PADDING_BOTTOM":case"STACK_PADDING_LEFT":case"STACK_PADDING_RIGHT":return(0,n.jsx)(rh,{overlayInfo:e,imageTransform:t});default:return(0,n.jsx)(rx,{overlayInfo:e,imageTransform:t})}default:return(0,n.jsx)(rx,{overlayInfo:e,imageTransform:t})}}function rx({overlayInfo:e,imageTransform:t}){let{cornerPoints:i,absoluteTransform:s}=e;if(!i)return null;let{transformedPoints:l,width:r,height:a}=l8(i,t),{normalizedRotation:o,isFlipped:d}=l6(s),x=l.topLeft.x-2,u=l.topLeft.y-2,c=l.topLeft.x-x,h=l.topLeft.y-u,p=`translate(${x}px, ${u}px) rotate(${o}deg)${d?" scaleY(-1)":""}`;return(0,n.jsx)("div",{...m.Ay.props(l9.blueBorderHover),style:{transformOrigin:`${c}px ${h}px`,transform:p,borderWidth:2,width:r,height:a}})}function ru({overlayInfo:e,imageTransform:t}){return(0,n.jsxs)(n.Fragment,{children:[!e.isNested&&(0,n.jsx)(rx,{overlayInfo:e,imageTransform:t}),(0,n.jsx)(rs,{overlayInfo:e,imageTransform:t})]})}function rc({overlayInfo:e,imageTransform:t}){return(0,n.jsxs)(n.Fragment,{children:[!e.isNested&&(0,n.jsx)(rx,{overlayInfo:e,imageTransform:t}),(0,n.jsx)(rt,{overlayInfo:e,imageTransform:t})]})}function rh({overlayInfo:e,imageTransform:t}){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(rx,{overlayInfo:e,imageTransform:t}),(0,n.jsx)(rn,{overlayInfo:e,imageTransform:t})]})}function rp({rootNodeId:e,lastEditedAtTime:t}){let i=lZ(lz.SUGGESTED,e,t);return(0,n.jsx)(rm,{nodeId:e,suggestedImage:i})}function rm({nodeId:e,suggestedImage:t}){let{modalSize:i,showSidebar:s,background:l,suggestedHighlightInfo:r}=lP(e),a=!!t.thumbnail&&"loaded"===t.status;return(0,n.jsx)(lB,{modalSize:i,showSidebar:s,children:(0,n.jsx)("div",{className:"x5yr21d x78zum5 xdt5ytf",children:(0,n.jsx)("div",{className:"x1n2onr6 xh8yej3 x98rzlu",children:(0,n.jsxs)(lM.ao,{zoomPercentageOptions:lF,zoomOnMousePointer:!0,canFitZoomExceed100:!0,resetStateOnChangeValue:e,children:[(0,n.jsx)(rg,{image:t,highlightInfo:r,background:l,title:(0,c.t)("design_linter.preview.suggested")}),(0,n.jsx)(lD,{shouldShow:a})]})})})})}function rg({image:e,highlightInfo:t,background:i,title:s}){let l=lV(e,ra);return(0,n.jsx)(rr,{value:t,children:(0,n.jsx)(rf,{title:s,background:i,children:l})})}function rf({title:e,children:t,background:i}){let{bg:s,type:l}=i,r=l===sf.COLOR,a=l===sf.IMAGE;return(0,n.jsxs)("div",{...{0:{className:"x10l6tqk xh8yej3 x3nfvp2 xdt5ytf x5yr21d xb3r6kr x1iyjqo2"},1:{className:"x10l6tqk xh8yej3 x3nfvp2 xdt5ytf x5yr21d xb3r6kr x1iyjqo2 xiy17q3 x18d0r48 x1xsqp64 x1v8gsql"}}[!!a<<0],style:{...r&&{backgroundColor:s},...a&&{backgroundImage:`url(${s})`}},children:[(0,n.jsx)(l$,{title:e}),t]})}let ry=s.memo(function(){let{rootNodeId:e}=function(){let e=(0,p.md)(i7.E$),t=(0,p.md)(i7.Bp)??"",i=(0,s.useMemo)(()=>e&&t?e.rootNodeIdToViolatingNodeIdSet.get(t)??new Set:new Set,[t,e]),n=(0,p.md)(i7.xo);return n?{rootNodeId:n,violatingNodeIdSet:new Set([n]),hasValidGroup:!0}:{rootNodeId:t,violatingNodeIdSet:i,hasValidGroup:!!e}}(),t=(0,sd.ei)(e),i=(0,n6.wg)(t);return(0,o.kc)().aip_flower_garden_no_current?(0,n.jsx)(rp,{lastEditedAtTime:i,rootNodeId:e}):(0,n.jsx)(r_,{lastEditedAtTime:i,rootNodeId:e})});function r_({rootNodeId:e,lastEditedAtTime:t}){let{modalSize:i,showSidebar:s,background:l,suggestedHighlightInfo:r}=lP(e),a=l0(e,lz.CURRENT),o=function(e,t){if(!e)return null;let{activeToLinterGuidsMap:i,linterToActiveGuidsMap:n,linterGuidsToNodeInfoMap:s}=function(e){let t=p.zl.get(iU.qL).get(lX(e,lz.CURRENT));return{activeToLinterGuidsMap:t?.activeToLinterGuidsMap,linterToActiveGuidsMap:t?.linterToActiveGuidsMap,linterGuidsToNodeInfoMap:t?.linterGuidsToNodeInfoMap}}(e);return lG(t,i?.get(e)??"-1:-1",n,s)}(e,a),d=lZ(lz.CURRENT,e,t),x=lZ(lz.SUGGESTED,e,t),u=!!d.thumbnail&&!!x.thumbnail&&"loaded"===d.status&&"loaded"===x.status;return(0,n.jsx)(lB,{modalSize:i,showSidebar:s,children:(0,n.jsxs)(lN.qW,{zoomPercentageOptions:lF,zoomOnMousePointer:!0,canFitZoomExceed100:!0,resetStateOnChangeValue:e,compareThumbnailSource:lI.FO.LINTER,children:[(0,n.jsx)(rj,{image:d,highlightInfo:o,background:l,title:(0,c.t)("design_linter.preview.current"),thumbnailType:lz.CURRENT}),(0,n.jsx)(rj,{image:x,highlightInfo:r,background:l,title:(0,c.t)("design_linter.preview.suggested"),thumbnailType:lz.SUGGESTED}),(0,n.jsx)(lD,{shouldShow:u})]})})}function rj({image:e,highlightInfo:t,background:i,title:s,thumbnailType:l}){let r=lV(e,ra),a=l===lz.CURRENT,o=l===lz.SUGGESTED,{bg:d,type:x}=i,u=x===sf.COLOR,c=x===sf.IMAGE;return(0,n.jsx)(rr,{value:t,children:(0,n.jsxs)("div",{...{0:{className:"x10l6tqk x3hqpx7 x3nfvp2 xdt5ytf x5yr21d xb3r6kr x1iyjqo2"},4:{className:"x10l6tqk x3hqpx7 x3nfvp2 xdt5ytf x5yr21d xb3r6kr x1iyjqo2 xu96u03"},2:{className:"x10l6tqk x3hqpx7 x3nfvp2 xdt5ytf x5yr21d xb3r6kr x1iyjqo2 x3m8u43 xe0pwq x1y0btm7 x7z60cl"},6:{className:"x10l6tqk x3hqpx7 x3nfvp2 xdt5ytf x5yr21d xb3r6kr x1iyjqo2 xu96u03 x3m8u43 xe0pwq x1y0btm7 x7z60cl"},1:{className:"x10l6tqk x3hqpx7 x3nfvp2 xdt5ytf x5yr21d xb3r6kr x1iyjqo2 xiy17q3 x18d0r48 x1xsqp64 x1v8gsql"},5:{className:"x10l6tqk x3hqpx7 x3nfvp2 xdt5ytf x5yr21d xb3r6kr x1iyjqo2 xu96u03 xiy17q3 x18d0r48 x1xsqp64 x1v8gsql"},3:{className:"x10l6tqk x3hqpx7 x3nfvp2 xdt5ytf x5yr21d xb3r6kr x1iyjqo2 x3m8u43 xe0pwq x1y0btm7 x7z60cl xiy17q3 x18d0r48 x1xsqp64 x1v8gsql"},7:{className:"x10l6tqk x3hqpx7 x3nfvp2 xdt5ytf x5yr21d xb3r6kr x1iyjqo2 xu96u03 x3m8u43 xe0pwq x1y0btm7 x7z60cl xiy17q3 x18d0r48 x1xsqp64 x1v8gsql"}}[!!a<<2|!!o<<1|!!c<<0],style:{...u&&{backgroundColor:d},...c&&{backgroundImage:`url(${d})`}},children:[(0,n.jsx)(l$,{title:s}),r]})})}var rb=i(949701),rv=i(727612),rk=i(50593),rC=i(207291),rE=i(469603),rS=i(288747),rT=i(754039),rw=i(751831),rN=i(844152),rI=i(474627),rL=i(708669),rR=i(602755);function rA(){return(0,n.jsxs)("svg",{width:"14",height:"11",viewBox:"0 0 14 11",fill:"none",children:[(0,n.jsx)("path",{d:"M12.8174 2.72266C12.9706 2.49294 13.281 2.43082 13.5107 2.58398C13.7404 2.73717 13.8025 3.04762 13.6494 3.27734L8.98242 10.2773C8.89938 10.4018 8.76513 10.4832 8.61621 10.498C8.46714 10.5128 8.31881 10.4594 8.21289 10.3535L5.41309 7.55371L5.34863 7.47461C5.22088 7.28062 5.24248 7.01739 5.41309 6.84668C5.58398 6.67579 5.8479 6.65399 6.04199 6.78223L6.12012 6.84668L8.48828 9.21484L12.8174 2.72266Z",fill:"var(--color-icon)"}),(0,n.jsx)("path",{d:"M3.5 8C3.77614 8 4 8.22386 4 8.5C4 8.77614 3.77614 9 3.5 9H0.5C0.223858 9 0 8.77614 0 8.5C0 8.22386 0.223858 8 0.5 8H3.5Z",fill:"var(--color-icon)"}),(0,n.jsx)("path",{d:"M6.5 4C6.77614 4 7 4.22386 7 4.5C7 4.77614 6.77614 5 6.5 5H0.5C0.223858 5 0 4.77614 0 4.5C0 4.22386 0.223858 4 0.5 4H6.5Z",fill:"var(--color-icon)"}),(0,n.jsx)("path",{d:"M10.5 0C10.7761 9.66382e-08 11 0.223858 11 0.5C11 0.776142 10.7761 1 10.5 1H0.5C0.223858 1 0 0.776142 0 0.5C0 0.223858 0.223858 8.05319e-09 0.5 0H10.5Z",fill:"var(--color-icon)"})]})}function rO(){return(0,n.jsxs)("svg",{width:"14",height:"11",viewBox:"0 0 14 11",fill:"none",children:[(0,n.jsx)("path",{d:"M12.6465 2.64648C12.8417 2.45122 13.1583 2.45122 13.3535 2.64648C13.5488 2.84175 13.5488 3.15825 13.3535 3.35352L10.207 6.5L13.3535 9.64648L13.418 9.72461C13.5461 9.91869 13.5244 10.1827 13.3535 10.3535C13.1827 10.5244 12.9187 10.5461 12.7246 10.418L12.6465 10.3535L9.5 7.20703L6.35352 10.3535C6.15825 10.5488 5.84175 10.5488 5.64648 10.3535C5.45122 10.1583 5.45122 9.84175 5.64648 9.64648L8.79297 6.5L5.64648 3.35352C5.45122 3.15825 5.45122 2.84175 5.64648 2.64648C5.84175 2.45122 6.15825 2.45122 6.35352 2.64648L9.5 5.79297L12.6465 2.64648Z",fill:"var(--color-icon)"}),(0,n.jsx)("path",{d:"M3.5 8C3.77614 8 4 8.22386 4 8.5C4 8.77614 3.77614 9 3.5 9H0.5C0.223858 9 0 8.77614 0 8.5C0 8.22386 0.223858 8 0.5 8H3.5Z",fill:"var(--color-icon)"}),(0,n.jsx)("path",{d:"M3.5 4C3.77614 4 4 4.22386 4 4.5C4 4.77614 3.77614 5 3.5 5H0.5C0.223858 5 0 4.77614 0 4.5C0 4.22386 0.223858 4 0.5 4H3.5Z",fill:"var(--color-icon)"}),(0,n.jsx)("path",{d:"M10.5 0C10.7761 9.66382e-08 11 0.223858 11 0.5C11 0.776142 10.7761 1 10.5 1H0.5C0.223858 1 0 0.776142 0 0.5C0 0.223858 0.223858 8.05319e-09 0.5 0H10.5Z",fill:"var(--color-icon)"})]})}let rM=(0,p.eU)(null),rF=(0,p.eU)(e=>{let t=e(rM),i=e(i7.$C);if(!t||!i)return new Set;let n=new Set;for(let[e,s]of i){let i=s?.status==="loaded"&&!!s?.fix?.fixContext;"apply"===t.actionType&&i?n.add(e):"ignore"!==t.actionType||i||n.add(e)}return n}),rz=(0,s.createContext)(new Map);function rP({children:e,allGroupKeys:t,blockId:i}){let l=(0,p.md)(rF),r=(0,p.md)(rM),a=(0,s.useMemo)(()=>r&&r.blockId===i?function(e,t){let i=new Map;for(let t of e)i.set(t,"none");if(0===t.size)return i;let n=0;for(;n<e.length;){let s=e[n];if(!s||!t.has(s)){n++;continue}let l=n,r=function(e,t,i){let n=i;for(;n+1<e.length;){let i=e[n+1];if(i&&t.has(i))n++;else break}return n}(e,t,l);!function(e,t,i,n){let s=t[i],l=t[n];if(s&&l){if(i===n)e.set(s,"only");else{e.set(s,"first"),e.set(l,"last");for(let s=i+1;s<n;s++){let i=t[s];i&&e.set(i,"middle")}}}}(i,e,l,r),n=r+1}return i}(t,l):new Map,[t,l,r,i]);return(0,n.jsx)(rz.Provider,{value:a,children:e})}var rB=i(683794),rD=i(638641);function rV(e){let t=(0,p.md)(i7.$C);return t?.get(e)??{fix:null,status:"loading"}}function rG(e){return(0,p.md)(iU.VG).get(e)??{fix:null,status:"loading"}}var rH=i(24034);function rq({ignoreViolationRow:e}){return(0,n.jsx)(ea.K,{htmlAttributes:{"data-tooltip-type":i0.Ib.TEXT,"data-tooltip":(0,c.t)("design_linter.penalty_box.ignore_suggestion_tooltip")},onClick:e,"aria-label":(0,c.t)("design_linter.penalty_box.ignore_suggestion_tooltip"),children:(0,n.jsx)(ii.A,{})})}function rU({applyFixToRow:e,hasFix:t}){return(0,n.jsx)(ea.K,{htmlAttributes:t?{"data-tooltip-type":i0.Ib.TEXT,"data-tooltip":(0,c.t)("design_linter.penalty_box.apply_suggestion_tooltip")}:{},onClick:e,"aria-label":t?(0,c.t)("design_linter.penalty_box.apply_suggestion_tooltip"):"",disabled:!t,children:(0,n.jsx)(rH.r,{})})}let r$=(0,s.createContext)(null);function rK(){return(0,s.useContext)(r$)||""}function rW({blockConfig:e,children:t,violationsByGroupKey:i,blockId:l,shouldShowActionButtons:r=!0}){let{getLabel:a,id:o}=e,{applyFixToBlock:d,isApplying:x}=function(e){let[t,i]=(0,s.useState)("idle"),n=(0,iQ.am)();return{applyFixToBlock:(0,s.useCallback)(()=>{"running"!==t&&(p.zl.set(iU.hx,[]),p.zl.set(rM,null),i("running"),setTimeout(async()=>{try{let t;if(!n)throw Error("Design linter not available");let s=0,l=0,r=0,a=p.zl.get(i7.$C),o=[],d=[];for(let i in e){let n=e[i]??[],x=a?.get(i);if(!x?.fix?.fixContext){r++;continue}t=x.fix.ruleId,s+=n.length,l++,x.fix.ruleId===lv.C.EXTENSIBILITY_RULE?d.push(...n):o.push({violations:n,fixContext:x.fix.fixContext})}await n.applyFixContextToViolations({violationsWithFixContexts:o,customRuleViolations:d}),(0,nR.DC)(s,l,r,t),i("applied")}catch{(0,n6.Lt)({message:(0,c.t)("design_linter.penalty_box.fix_failed_bell"),icon:rD.zX.EXCLAMATION,type:"fix error"}),(0,nR.av)(),i("error")}},0))},[t,e,n]),isApplying:"running"===t}}(i),{ignoreRowsWithNoSuggestions:u}=function(e){let[t,i]=(0,s.useState)("idle"),n=(0,iQ.am)();return{ignoreRowsWithNoSuggestions:(0,s.useCallback)(()=>{if("running"!==t)try{if(i("running"),!n)return;let t=Object.values(e).flat().map(e=>e.violationId);n?.markViolationsAsPendingIgnored(t,()=>{let t,s=0,l=0,r=0,a=p.zl.get(i7.$C);for(let[i,o]of Object.entries(e)){let e=a?.get(i);if(e?.fix?.fixContext){r++;continue}t=e?.fix?.ruleId,s++,l+=o.length;let d=o.map(e=>e.guid);n.ignoreViolationsForGuidsWithGroupKey(d,i)}i("applied"),nR.h5(s,l,r,t)})}catch{i("error"),(0,nR.Gj)()}},[t,e,n]),status:t}}(i),h=function(e){let t=(0,p.md)(i7.$C);return(Object.keys(e)||[]).every(e=>{let i=t?.get(e);return i?.status!=="loading"})}(i),m=function(e){let t=(0,p.md)(i7.$C);return(Object.keys(e)||[]).every(e=>{let i=t?.get(e);return!i?.fix?.fixContext&&i?.status!=="loading"})}(i),[g,f]=(0,s.useState)(!1),y=Object.keys(i),_=(0,p.md)(lk.kR),j=l||o,b=(0,s.useCallback)(()=>{if(!g){p.zl.set(rM,null),p.zl.set(iU.hx,[]),f(!0);try{u()}catch(e){f(!1)}}},[g,u]);if(!i||0===Object.keys(i).length||g)return null;let v=!!_||x;return(0,n.jsx)(r$.Provider,{value:j,children:(0,n.jsx)(rP,{allGroupKeys:y,blockId:j,children:(0,n.jsx)(r5,{label:a(),isApplying:v,isReady:h,onApply:d,onIgnore:b,shouldShowActionButtons:r,shouldShowIgnore:m,children:t(v)},o)})})}function rZ({children:e,showHover:t,hoverSequencePosition:i,isBlockActionButtonHovered:s,hoveredActionType:l,ignoreViolationRow:r,applyFixToRow:a,hasFix:o,customContainerStyle:d,neverShowApplyButton:x=!1,neverShowIgnoreButton:u=!1}){let c=!s&&t,h=(c||s&&"ignore"===l&&t)&&!u,p=(c||s&&"apply"===l&&t)&&!x;return(0,n.jsx)("div",{...m.Ay.props(r9.violationRowContainer,d),children:(0,n.jsxs)("div",{...m.Ay.props(r9.violationRowContent,(()=>{if(!t)return null;switch(i){case"first":return r9.hoveredViolationRowContentFirst;case"middle":return r9.hoveredViolationRowContentMiddle;case"last":return r9.hoveredViolationRowContentLast;default:return r9.hoveredViolationRowContent}})()),children:[e,t?(0,n.jsxs)("div",{className:"x78zum5 x6s0dn4 x1jnr06f x8x9d4c",children:[h&&(0,n.jsx)(rq,{ignoreViolationRow:r}),p&&a&&(0,n.jsx)(rU,{applyFixToRow:a,hasFix:o??!1})]}):null]})})}function rX({applyFixToRow:e,children:t,fixStatus:i,isApplying:s,showHover:l,ignoreViolationRow:r,hoverSequencePosition:a,isBlockActionButtonHovered:o,hoveredActionType:d}){return(0,n.jsxs)(rZ,{showHover:l,hoverSequencePosition:a,isBlockActionButtonHovered:o,hoveredActionType:d,ignoreViolationRow:r,applyFixToRow:e,hasFix:"loaded"===i,children:[(0,n.jsxs)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x78zum5 x1n0bwc9 x6s0dn4",children:[(0,n.jsx)("div",{...{0:{className:"xlyipyv xuxw1ft xb3r6kr x6wrskw x29ncy0 xwrg52n"},1:{className:"xlyipyv xuxw1ft xb3r6kr x6wrskw x29ncy0 xwrg52n x3vvef7"}}[!!s<<0],children:t.currentValue}),(0,n.jsx)("div",{className:"x78zum5 x6s0dn4 xl56j7k xvy4d1p xxk0z11",children:(0,n.jsx)(rN.o,{className:"xe5c7bq"})})]}),(0,n.jsx)(rQ,{fixStatus:i,children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{...{0:{className:"xxbzjz2 x1l2q4c8 x78zum5 x6s0dn4"},2:{className:"x1l2q4c8 x78zum5 x6s0dn4 x1lb4e5t"},1:{className:"x1l2q4c8 x78zum5 x6s0dn4 x1uq5s0v"},3:{className:"x1l2q4c8 x78zum5 x6s0dn4 x1uq5s0v"}}[!!(l&&!o)<<1|!!(l&&o)<<0],children:t.suggestedValue})})})]})}function rY({children:e,fixStatus:t,groupKey:i,violations:l,isApplying:r}){let[a,o]=(0,s.useState)(!1),[d,x]=(0,s.useState)(!1),u=(0,p.md)(i7.E7),h=rK(),m=(0,p.md)(rM),g=(0,s.useContext)(rz),f=(0,iQ.am)(),y=(0,s.useCallback)(()=>{if(!a){x(!1),p.zl.set(iU.hx,[]),p.zl.set(rM,null),o(!0);try{let e=l.map(e=>e.violationId);f?.markViolationsAsPendingIgnored(e,()=>{let e=l.map(e=>e.guid);f?.ignoreViolationsForGuidsWithGroupKey(e,i);let t=u[i];nR.dg(e.length,t?.ruleId)})}catch(e){o(!1)}}},[l,i,u,a,f]),{applyFixToRow:_,isApplying:j}=function(e,t){let[i,n]=(0,s.useState)("idle"),l=(0,iQ.am)();return{applyFixToRow:(0,s.useCallback)(()=>{"running"!==i&&(p.zl.set(iU.hx,[]),p.zl.set(rM,null),n("running"),setTimeout(async()=>{let i=e[0]?.ruleId;try{if(!l)throw Error("Design linter not available");let i=p.zl.get(i7.$C),s=[],r=[],a=i?.get(t);if(!a?.fix?.fixContext)throw Error("No fix context available");a.fix.ruleId===lv.C.EXTENSIBILITY_RULE?r.push(...e):s.push({violations:e,fixContext:a.fix.fixContext}),await l.applyFixContextToViolations({violationsWithFixContexts:s,customRuleViolations:r}),n("applied"),(0,nR.lX)(e.length,a.fix.ruleId)}catch{(0,n6.Lt)({message:(0,c.t)("design_linter.penalty_box.fix_failed_bell"),icon:rD.zX.EXCLAMATION,type:"fix error"}),(0,nR.Yu)(i),n("error")}},0))},[i,e,t,l]),isApplying:"running"===i}}(l,i),b=g.get(i)??"none",v=m?.blockId===h&&"none"!==b;return!l||0===l.length||a||j?null:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{onMouseEnter:()=>{x(!0),p.zl.set(iU.hx,l)},onMouseLeave:()=>{x(!1),p.zl.set(iU.hx,[])},children:e.suggestionRowContent({showHover:(v||d)&&!r,isApplying:r,ignoreViolationRow:y,fixStatus:t,applyFixToRow:_,hoverSequencePosition:b,isBlockActionButtonHovered:v,hoveredActionType:m?.actionType||null})})})}function rQ({fixStatus:e,children:t}){return"loading"===e?(0,n.jsx)("div",{className:"x78zum5 x6s0dn4 x19y5rnk x7z60cl xmkeg23 x1y0btm7 x1yjdb4r xxbzjz2 x1l2q4c8",children:(0,n.jsx)(nW.Wi,{className:"x5yr21d xh8yej3",opacity:33,animationType:nW.JR.SHIMMER})}):(0,n.jsx)("div",{className:"xxbzjz2 x1l2q4c8 x78zum5 x6s0dn4 x1jnr06f",children:t})}let rJ=s.forwardRef(function({onClick:e,type:t},i){return(0,n.jsx)(r2,{ref:i,onClick:e,children:e=>(0,n.jsx)("div",{...m.Ay.props(r9.noSuggestionFound(e)),children:(0,n.jsx)(r0,{type:t})})})});function r0({type:e}){let t=(0,c.t)("design_linter.penalty_box.no_suggestion_found");return e===rB.kQ.TEXT?t=(0,c.t)("design_linter.suggestion_block.select_style"):(e===rB.kQ.COLOR||e===rB.kQ.NUMBER)&&(t=(0,c.t)("design_linter.suggestion_block.select_variable")),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r4,{children:(0,n.jsx)(rI.G,{})}),(0,n.jsx)(nS.G,{text:t})]})}function r1({label:e,value:t,isApplying:i}){let s=void 0!==t;return(0,n.jsxs)("span",{...{0:{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xrvj5dj xju1xpo xh8yej3 x87ps6o"},1:{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xrvj5dj xju1xpo xh8yej3 x87ps6o x167g77z"}}[!!s<<0],"data-tooltip":e,"data-tooltip-type":i0.Ib.TEXT,children:[(0,n.jsx)("div",{...{0:{className:"xlyipyv xuxw1ft xb3r6kr"},1:{className:"xlyipyv xuxw1ft xb3r6kr x3vvef7"}}[!!i<<0],children:e}),s&&(0,n.jsx)("div",{...{0:{className:"x1n0bwc9"},1:{className:"x3vvef7"}}[!!i<<0],children:t})]})}let r2=s.forwardRef(function({children:e,onClick:t,tooltip:i,disabled:s=!1},l){let[r,a]=(0,s7.M)();return(0,n.jsx)("div",{ref:e=>{r(e),l&&("function"==typeof l?l(e):l.current=e)},...{0:{className:"xh8yej3 xgqtt45 x78zum5 x6s0dn4 x19y5rnk x7z60cl x87ps6o xmkeg23 x1y0btm7 x1yjdb4r x98rzlu xmzs88n x9f619"},1:{className:"xh8yej3 xgqtt45 x78zum5 x6s0dn4 x19y5rnk x7z60cl x87ps6o xmkeg23 x1y0btm7 x98rzlu xmzs88n x9f619 x1oqziki"}}[!!a<<0],children:(0,n.jsx)(sA.E,{onClick:t,className:"x78zum5 x6s0dn4 xjbqb8w xh8yej3 x1l2q4c8 x98rzlu","data-tooltip":i,"data-tooltip-type":i0.Ib.TEXT,disabled:s,children:e(a)})})});function r5({children:e,label:t,isApplying:i,isReady:s,onApply:l,onIgnore:r,shouldShowActionButtons:a,shouldShowIgnore:o}){return(0,n.jsxs)("div",{"data-testid":"design-linter-suggestion-block-container",className:"x78zum5 xdt5ytf x87ps6o xwib8y2",children:[(0,n.jsxs)("div",{className:"x78zum5 x6s0dn4 x10w6t97 x1qughib xnm25rq xnuq7ks",children:[(0,n.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x78zum5",children:t}),a&&(0,n.jsx)("div",{onMouseLeave:()=>{p.zl.set(rM,null)},className:"x78zum5 x6s0dn4",children:(0,n.jsx)(r3,{label:"string"==typeof t?t:"",onApply:l,onIgnore:r,isApplying:i,isReady:s,shouldShowIgnore:o})})]}),e]})}function r3({label:e,isApplying:t,isReady:i,onApply:s,onIgnore:l,shouldShowIgnore:r}){let a="design-linter-suggestion-block",o=rK();return i?r?(0,n.jsx)("div",{className:"x1iog12x xg2d0mh",onMouseEnter:()=>{p.zl.set(rM,{blockId:o,actionType:"ignore"})},children:(0,n.jsx)(ea.K,{recordingKey:$.Pt(a,`ignore-${o}`),onClick:l,"data-tooltip":(0,c.t)("design_linter.suggestion_block.ignore_tooltip",{section:e.toLowerCase()}),"aria-label":(0,c.t)("design_linter.suggestion_block.ignore_tooltip",{section:e.toLowerCase()}),"data-tooltip-type":i0.Ib.TEXT,children:(0,n.jsx)(rO,{})})}):(0,n.jsx)("div",{className:"x1iog12x xg2d0mh",onMouseEnter:()=>{p.zl.set(rM,{blockId:o,actionType:"apply"})},children:(0,n.jsx)(ea.K,{recordingKey:$.Pt(a,`apply-${o}`),onClick:s,"data-tooltip":(0,c.t)("design_linter.suggestion_block.apply_tooltip",{section:e.toLowerCase()}),"aria-label":(0,c.t)("design_linter.suggestion_block.apply_tooltip",{section:e.toLowerCase()}),"data-tooltip-type":i0.Ib.TEXT,disabled:t,children:t?(0,n.jsx)(s5.k,{size:"sm"}):(0,n.jsx)(rA,{})})}):(0,n.jsxs)("div",{className:"x1iog12x xg2d0mh xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x78zum5 x6s0dn4 x1n0bwc9","data-testid":"design-linter-loading-action-button",children:[(0,n.jsx)(s5.k,{size:"sm"}),(0,c.t)("design_linter.suggestion_block.loading")]})}function r4({children:e,isDisabled:t}){return(0,n.jsx)("div",{...{0:{className:"x78zum5 x6s0dn4 xl56j7k xxk0z11 xvy4d1p xnei2rj"},1:{className:"x78zum5 x6s0dn4 xl56j7k xxk0z11 xvy4d1p xnei2rj x1ksfsxq"}}[!!t<<0],children:e})}function r7({items:e,header:t,suggestionBlock:i,rowListId:l="row-list"}){let[r,a]=(0,s.useState)(!1),[o,d]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:"x78zum5 xdt5ytf",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[t&&(0,n.jsxs)(sA.E,{onClick:()=>a(e=>!e),className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly xp41m2r xyfqnmn x78zum5 x6s0dn4 x5mp9sv x87ps6o","aria-label":r?(0,c.t)("design_linter.suggestion_block.expand_list_aria"):(0,c.t)("design_linter.suggestion_block.collapse_list_aria"),children:[(0,n.jsx)("div",{className:"xmauxvm x15kz4h8 x1hshjfz x78zum5 x6s0dn4 xl56j7k",children:o&&(r?(0,n.jsx)(rL.k,{}):(0,n.jsx)(rR.O,{}))}),(0,n.jsx)("div",{className:"x78zum5 x6s0dn4 x1jnr06f",children:t})]}),!r&&e.filter(Boolean).map((e,t)=>(0,n.jsx)("div",{children:e},`${i}-${l}-${t}`))]})}function r8(){return(0,n.jsx)("div",{className:"xjm9jq1 xbpqucl"})}let r6={k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kUk6DE:"x98rzlu",kzQI83:"",kmuXW:"",kCS8Yb:"",$$css:!0},r9={violationRowContainer:{k1xSpc:"x78zum5",kmVPX3:"x1xq1gxn",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,kzqmXN:"x144ku6",kZKoxP:"x10w6t97",kB7OPa:"x9f619",$$css:!0},violationRowContent:{kB7OPa:"x9f619",k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kmVPX3:"xfawy5m",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,kzqmXN:"xe3gq44",kOIVth:"x1jnr06f",khm7nJ:null,k1C7PZ:null,$$css:!0},hoveredViolationRowContent:{kWkggS:"x30nh5c",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,$$css:!0},hoveredViolationRowContentFirst:{kWkggS:"x30nh5c",kIxVMA:"x5uboqo",ksF3WI:"xq61x4o",krdFHd:null,kfmiAY:null,kqGeR4:"xfrllxf",kYm2EN:"xjppbhk",kVL7Gh:null,kT0f0o:null,$$css:!0},hoveredViolationRowContentMiddle:{kWkggS:"x30nh5c",kaIpWk:"x2u8bby",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,$$css:!0},hoveredViolationRowContentLast:{kWkggS:"x30nh5c",kIxVMA:"x1ia1hqs",ksF3WI:"x1a2w583",krdFHd:null,kfmiAY:null,kqGeR4:"x1ym3s57",kYm2EN:"x1kz06h0",kVL7Gh:null,kT0f0o:null,$$css:!0},noSuggestionFound:e=>[r6,{kMwMTN:(e?ex.Tj.text:ex.Tj.textSecondary)!=null?"x14rh7hd":e?ex.Tj.text:ex.Tj.textSecondary,"--color-icon":(e?ex.Tj.iconFs:ex.Tj.iconSecondary)!=null?"x1g56j85":e?ex.Tj.iconFs:ex.Tj.iconSecondary,$$css:!0},{"--x-color":(e?ex.Tj.text:ex.Tj.textSecondary)!=null?e?ex.Tj.text:ex.Tj.textSecondary:void 0,"--x---color-icon":(e?ex.Tj.iconFs:ex.Tj.iconSecondary)!=null?e?ex.Tj.iconFs:ex.Tj.iconSecondary:void 0}]};var ae=i(760800),at=i(568383),ai=i(959345);function an(e){return"libraryKey"in e&&"checkpointId"in e}function as(){let{blocks:e,totalViolations:t}=(0,p.md)(lk.Q6),i=s.useMemo(()=>{let t=e.flatMap(e=>Object.entries(e.violationsByGroupKey).flatMap(([t,i])=>i.map(i=>({groupKey:t,violation:i,blockConfig:e.blockConfig})))).reduce((e,{blockConfig:t,groupKey:i,violation:n})=>{let{detectionContext:s}=n;if(!an(s))return e;let{checkpointId:l}=s,r=s.libraryKey;return e[r]||(e[r]={blockConfig:t,violationsByCheckpoint:{}}),e[r].violationsByCheckpoint[l]||(e[r].violationsByCheckpoint[l]={violationLists:[],violationsByGroupKey:{}}),e[r].violationsByCheckpoint[l].violationsByGroupKey[i]||(e[r].violationsByCheckpoint[l].violationsByGroupKey[i]=[],e[r].violationsByCheckpoint[l].violationLists.push({groupKey:i,violation:n})),e[r].violationsByCheckpoint[l].violationsByGroupKey[i].push(n),e},{});return Object.keys(t).sort().map(e=>({libraryKey:e,blockConfig:t[e].blockConfig,violationsByCheckpoint:t[e].violationsByCheckpoint}))},[e]);return t?(0,n.jsx)(n.Fragment,{children:i.map(({libraryKey:e,blockConfig:t,violationsByCheckpoint:i},l)=>(0,n.jsxs)(s.Fragment,{children:[l>0&&(0,n.jsx)(r8,{}),(0,n.jsx)(al,{libraryKey:e,blockConfig:t,violationsByCheckpoint:i})]},`library-${e}`))}):null}function al({libraryKey:e,blockConfig:t,violationsByCheckpoint:i}){let l=function(e){let{checkpoints:t}=(0,p.md)(rw._);return s.useMemo(()=>Object.entries(e).filter(([e,{violationLists:i}])=>i.length>0||!t?.find(t=>t.id===e)).map(([e,{violationLists:i,violationsByGroupKey:n}])=>{let s=t?.find(t=>t.id===e);return s&&null!==s.publishDate?{violationLists:i,violationsByGroupKey:n,publishDate:s.publishDate,checkpointId:e,description:s.description}:null}).filter(e=>null!==e).sort((e,t)=>new Date(t.publishDate).getTime()-new Date(e.publishDate).getTime()).map(({checkpointId:e,description:t,publishDate:i,violationLists:n,violationsByGroupKey:s})=>({checkpointId:e,description:t,publishDate:i,violationLists:n,violationsByGroupKey:s})),[t,e])}(i);return(0,n.jsx)("div",{children:(0,n.jsx)(r7,{suggestionBlock:rB.pZ.ASSET_UPDATES,header:(0,n.jsxs)("div",{className:"x87ps6o",children:[(0,n.jsx)("div",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:(0,c.t)("design_linter.suggestion_block_headers.update_assets")}),(0,n.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x78zum5 x6s0dn4 x1n0bwc9",children:(0,c.tx)("design_linter.suggestion_block.assets_outside_selected_libraries",{name:(0,n.jsx)(ar,{libraryKey:e})})})]}),items:l.map(i=>(0,n.jsx)(ao,{libraryKey:e,blockConfig:t,violationSubblockData:i},i.checkpointId))})})}function ar({libraryKey:e}){let{subscribedLibraries:t,usedInFileLibraries:i}=nA(),s="loaded"===t.status?t.data.find(t=>t.library_key===e):void 0,l="loaded"===i.status?i.data.find(t=>t.library_key===e):void 0,r=s?.library_name||l?.library_name;return r?(0,n.jsx)(aa,{libraryName:r,libraryKey:e}):null}function aa({libraryName:e,libraryKey:t}){let i=(0,rS.sZ)(),s=(0,rT.Oe)(i),l=(0,rv.fV)(t),r=(0,p.md)(at.V9),a=t?r[t]?.hubFileId??null:null;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"x10gc95e",children:e}),s&&l&&(0,n.jsx)(rk.KP,{libraryKey:t}),a&&(0,n.jsx)(rC.E,{libraryKey:t,showTooltip:!0})]})}function ao({libraryKey:e,blockConfig:t,violationSubblockData:i}){let l=i.violationLists[0]?.violation.detectionContext??null,r=l&&an(l),a=r?l.assetId:void 0,o=r&&l?.assetType==="COMPONENT"?nk.PW.COMPONENT:r&&l?.assetType==="STATE_GROUP"?nk.PW.STATE_GROUP:nk.PW.STYLE,d=(0,rE.R8)({assetKey:a,type:o}),x=s.useMemo(()=>{if("loaded"!==d.status)return;let e=(0,rb.oA)(d.data?.assetAttribution);return e?.type===S.GC.TEAM?e.handle:e?.type===S.GC.COMMUNITY?e.name:void 0},[d]);return(0,n.jsx)(rW,{blockConfig:{...t,getLabel:()=>(0,n.jsxs)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x78zum5 xdt5ytf",children:[x&&(0,n.jsx)("div",{children:(0,ai.U)(x,i.publishDate)}),x&&i.description&&(0,n.jsx)("div",{className:"x1n0bwc9",children:i.description})]})},blockId:`${t.id}-${e}-${i.checkpointId}`,violationsByGroupKey:i.violationsByGroupKey,shouldShowActionButtons:!1,children:e=>(0,n.jsx)(ad,{violationLists:i.violationLists,violationsByGroupKey:i.violationsByGroupKey,isApplying:e})},i.checkpointId)}function ad({violationLists:e,isApplying:t,violationsByGroupKey:i}){return(0,n.jsx)(n.Fragment,{children:e.map(({groupKey:e,violation:s})=>{let{detectionContext:l}=s;return an(l)?(0,n.jsx)(ax,{groupKey:e,violations:i[s.groupKey]??[],isApplying:t},e):null})})}function ax({groupKey:e,violations:t,isApplying:i}){let s=t[0],{status:l}=rV(e),r=(0,p.md)(rw.m);if(!s?.detectionContext)return null;let{detectionContext:a}=s;if(!an(a))return null;let o="completed"===r[a.assetType+a.checkpointId]&&"loaded"===l?"loaded":"loading",d="COMPONENT"===a.assetType||"STATE_GROUP"===a.assetType,x="TEXT_STYLE"===a.assetType;return(0,n.jsx)(rY,{fixStatus:o,groupKey:e,violations:t,isApplying:i,children:{suggestionRowContent:e=>(0,n.jsx)(rZ,{...e,customContainerStyle:ah.assetRowContainer,hasFix:"loaded"===o,neverShowIgnoreButton:!0,children:d?(0,n.jsx)(ac,{context:a,...e}):x?(0,n.jsx)(au,{context:a,...e}):null})}})}function au({context:e}){let{checkpoints:t}=(0,p.md)(rw._),{assetId:i,checkpointId:s}=e,l=t?.find(e=>e.id===s);if(!l)return null;let r=l.styles.find(e=>e.key===i);return r?(0,n.jsxs)("div",{className:"x78zum5 x6s0dn4 xcuk4bc xe3gq44",children:[(0,n.jsx)("div",{className:"x6s0dn4 xkawg4k xsb15dp x1sxf85j x78zum5 x2lah0s xl56j7k xyo1k6t x187nhsf xn3w4p2",children:(0,n.jsx)(ae.M,{item:r,localThumbnailGenerationBehavior:"default",draggable:!1,style:{maxHeight:"70%",maxWidth:"70%"}})}),(0,n.jsx)("span",{className:"x1iyjqo2 xb3r6kr xlyipyv xuxw1ft x1nx2rwh","data-tooltip":r.name,"data-tooltip-type":i0.Ib.TEXT,children:r.name})]}):null}function ac({context:e}){let t=(0,sS.eS)(sS.aD.CURRENT),{assetId:i}=e;if(!t[i])return null;let s=t[i];return(0,n.jsxs)("div",{className:"x78zum5 x6s0dn4 xcuk4bc xe3gq44",children:[(0,n.jsx)("div",{className:"x6s0dn4 xkawg4k xsb15dp x1sxf85j x78zum5 x2lah0s xl56j7k xyo1k6t x187nhsf xn3w4p2",children:(0,n.jsx)(ae.M,{item:s,localThumbnailGenerationBehavior:"default",draggable:!1,style:{maxHeight:"90%",maxWidth:"90%"}})}),(0,n.jsx)("span",{className:"x1iyjqo2 xb3r6kr xlyipyv xuxw1ft x1nx2rwh","data-tooltip":s.name,"data-tooltip-type":i0.Ib.TEXT,children:s.name})]})}let ah={assetRowContainer:{k1xSpc:"x78zum5",kmVPX3:"x1xq1gxn",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,kZKoxP:"xng8ra",$$css:!0}};var ap=i(675841),am=i(491488),ag=i(979850),af=i(185411),ay=i(930612),a_=i(322839),aj=i(391145),ab=i(31786);function av(e){return"libraryKey"in e&&"assetType"in e}function ak(e){return!!e&&"resolvedValue"in e&&e.resolvedValue.type===a.Z_n.FLOAT}function aC(e){return!!e&&"resolvedValue"in e&&e.resolvedValue.type===a.Z_n.COLOR}function aE(e){return!!e&&"type"in e&&e.type===ab.PW.STYLE}let aS="suggestion_rule_blocks--chit--zCpjn";function aT(){let{blocks:e,totalViolations:t}=(0,p.md)(lk.LG),i=s.useMemo(()=>{let t=e.flatMap(e=>Object.entries(e.violationsByGroupKey).flatMap(([t,i])=>i.map(i=>({groupKey:t,violation:i,blockConfig:e.blockConfig})))).reduce((e,{blockConfig:t,groupKey:i,violation:n})=>{let{detectionContext:s}=n;if(!av(s))return e;let l=((e,t)=>{let i=["FRAME","TEXT"].includes(e)?n.nodeType:"SHAPE";return["RECTANGLE_TOP_LEFT_CORNER_RADIUS","RECTANGLE_TOP_RIGHT_CORNER_RADIUS","RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS","RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS"].includes(t)?"SHAPE-CORNER_RADIUS":["STACK_PADDING_LEFT","STACK_PADDING_RIGHT","STACK_PADDING_TOP","STACK_PADDING_BOTTOM"].includes(t)?`${i}-PADDING`:"TEXT_STYLE"===t?`${i}-STYLE`:`${i}-${t}`})(n.nodeType,s.assetType),r=s.libraryKey;return e[r]||(e[r]={blockConfig:t,violationsByType:{"FRAME-FILL":{violationLists:[],violationsByGroupKey:{}},"FRAME-STROKE":{violationLists:[],violationsByGroupKey:{}},"FRAME-STACK_SPACING_HORIZONTAL":{violationLists:[],violationsByGroupKey:{}},"FRAME-STACK_SPACING_VERTICAL":{violationLists:[],violationsByGroupKey:{}},"FRAME-PADDING":{violationLists:[],violationsByGroupKey:{}},"TEXT-FILL":{violationLists:[],violationsByGroupKey:{}},"TEXT-STROKE":{violationLists:[],violationsByGroupKey:{}},"TEXT-STYLE":{violationLists:[],violationsByGroupKey:{}},"SHAPE-FILL":{violationLists:[],violationsByGroupKey:{}},"SHAPE-STROKE":{violationLists:[],violationsByGroupKey:{}},"SHAPE-COMPONENT":{violationLists:[],violationsByGroupKey:{}},"SHAPE-CORNER_RADIUS":{violationLists:[],violationsByGroupKey:{}}}}),e[r].violationsByType[l]&&(e[r].violationsByType[l].violationsByGroupKey[i]||(e[r].violationsByType[l].violationsByGroupKey[i]=[],e[r].violationsByType[l].violationLists.push({groupKey:i,violation:n})),e[r].violationsByType[l].violationsByGroupKey[i].push(n)),e},{});return Object.keys(t).sort().map(e=>({libraryKey:e,blockConfig:t[e].blockConfig,violationsByType:t[e].violationsByType}))},[e]);return t?(0,n.jsx)(n.Fragment,{children:i.map(({libraryKey:e,blockConfig:t,violationsByType:i},l)=>(0,n.jsxs)(s.Fragment,{children:[l>0&&(0,n.jsx)(r8,{}),(0,n.jsx)(aw,{libraryKey:e,blockConfig:t,violationsByType:i})]},`library-${e}`))}):null}function aw({libraryKey:e,blockConfig:t,violationsByType:i}){let l=s.useMemo(()=>Object.entries(i).filter(([e,{violationLists:t}])=>t.length>0).map(([e,{violationLists:t,violationsByGroupKey:i}])=>{let n={violationLists:t,violationsByGroupKey:i};switch(e){case"FRAME-FILL":return{...n,key:"frameFill",priority:1,label:(0,c.t)("design_linter.suggestion_block.fill_colors.background_colors")};case"FRAME-STROKE":return{...n,key:"frameStroke",priority:2,label:(0,c.t)("design_linter.suggestion_block.stroke_colors.stroke_color")};case"SHAPE-FILL":return{...n,key:"shapeFill",priority:3,label:(0,c.t)("design_linter.suggestion_block.fill_colors.shape_colors")};case"SHAPE-STROKE":return{...n,key:"shapeStroke",priority:4,label:(0,c.t)("design_linter.suggestion_block.stroke_colors.shape_stroke_colors")};case"TEXT-FILL":return{...n,key:"textFill",priority:5,label:(0,c.t)("design_linter.suggestion_block.fill_colors.text_color")};case"TEXT-STROKE":return{...n,key:"textStroke",priority:6,label:(0,c.t)("design_linter.suggestion_block.stroke_colors.text_stroke_color")};case"TEXT-STYLE":return{...n,key:"textStyle",priority:7,label:(0,c.t)("design_linter.suggestion_block.text_style")};case"SHAPE-CORNER_RADIUS":return{...n,key:"shapeCornerRadius",priority:8,label:(0,c.t)("design_linter.suggestion_block.corner_radius")};case"FRAME-STACK_SPACING_HORIZONTAL":return{...n,key:"frameStackSpacingHorizontal",priority:9,label:(0,c.t)("design_linter.suggestion_block.horizontal_spacing")};case"FRAME-STACK_SPACING_VERTICAL":return{...n,key:"frameStackSpacingVertical",priority:10,label:(0,c.t)("design_linter.suggestion_block.vertical_spacing")};case"FRAME-PADDING":return{...n,key:"framePadding",priority:11,label:(0,c.t)("design_linter.suggestion_block.padding")};case"SHAPE-COMPONENT":return{...n,key:"component",priority:12,label:(0,c.t)("design_linter.suggestion_block.library_assets.components")};default:return null}}).filter(e=>null!==e).sort((e,t)=>e.priority-t.priority),[i]);return(0,n.jsx)("div",{children:(0,n.jsx)(r7,{rowListId:e,suggestionBlock:rB.pZ.ASSETS_OUTSIDE_SELECTED_LIBRARIES,header:(0,n.jsxs)("div",{className:"x87ps6o",children:[(0,n.jsx)("div",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:(0,c.t)("design_linter.suggestion_block_headers.unexpected_assets")}),(0,n.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x78zum5 x6s0dn4 x1n0bwc9",children:(0,c.tx)("design_linter.suggestion_block.assets_outside_selected_libraries",{name:(0,n.jsx)(aN,{libraryKey:e})})})]}),items:l.map(i=>(0,n.jsx)(rW,{blockConfig:{...t,getLabel:()=>i.label},blockId:`${t.id}-${e}-${i.key}`,violationsByGroupKey:i.violationsByGroupKey,children:e=>(0,n.jsx)(aL,{violationLists:i.violationLists,violationsByGroupKey:i.violationsByGroupKey,isApplying:e})},i.key))})})}function aN({libraryKey:e}){let{subscribedLibraries:t,usedInFileLibraries:i}=nA(),s="loaded"===t.status?t.data.find(t=>t.library_key===e):void 0,l="loaded"===i.status?i.data.find(t=>t.library_key===e):void 0,r=s?.library_name||l?.library_name;return r?(0,n.jsx)(aI,{libraryName:r,libraryKey:e}):null}function aI({libraryName:e,libraryKey:t}){let i=(0,rS.sZ)(),s=(0,rT.Oe)(i),l=(0,rv.fV)(t),r=(0,p.md)(at.V9),a=t?r[t]?.hubFileId??null:null;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"x10gc95e",children:e}),s&&l&&(0,n.jsx)(rk.KP,{libraryKey:t}),a&&(0,n.jsx)(rC.E,{libraryKey:t,showTooltip:!0})]})}function aL({violationLists:e,isApplying:t,violationsByGroupKey:i}){return(0,n.jsx)(n.Fragment,{children:e.map(({groupKey:e,violation:s})=>{let{detectionContext:l}=s;return av(l)?(0,n.jsx)(aR,{groupKey:e,violations:i[s.groupKey]??[],ruleId:s.ruleId,isApplying:t},e):null})})}function aR({groupKey:e,violations:t,ruleId:i,isApplying:s}){let l=t[0],{fix:r,status:a}=rV(e);if(!l?.detectionContext)return null;let{detectionContext:o,guid:d,nodeType:x}=l;if(!av(o))return null;let u="TEXT_STYLE"===o.assetType,c="COMPONENT"===o.assetType,h=ay.P.includes(o.assetType);return c?(0,n.jsx)(aM,{detectionContext:o,fixStatus:a,groupKey:e,violations:t,isApplying:s}):(0,n.jsx)(rY,{fixStatus:a,groupKey:e,violations:t,isApplying:s,children:{suggestionRowContent:t=>(0,n.jsx)(rX,{...t,children:{currentValue:u?(0,n.jsx)(aA,{context:o}):(0,n.jsx)(aO,{context:o}),suggestedValue:u?(0,n.jsx)(az,{fix:r,groupKey:e,isApplying:s,ruleId:i,violatingNodeId:d}):h?(0,n.jsx)(aP,{fix:r,groupKey:e,ruleId:i,violatingNodeId:d,assetType:o.assetType,isApplying:s}):(0,n.jsx)(aB,{fix:r,groupKey:e,ruleId:i,violatingNodeId:d,nodeType:x,assetType:o.assetType,isApplying:s})}})}})}function aA({context:e}){let t=e?.assetId??null,i=(0,a_.Fj)(t);if(!e||!i)return null;let s=i.name;return(0,n.jsx)("span",{"data-tooltip":s,"data-tooltip-type":i0.Ib.TEXT,children:s})}function aO({context:e}){let t=(0,p.md)(iU.nE);if(!e)return null;let{assetId:i}=e,s=am.sD.fromString(i);if(!s)return null;let l=t[s],r=l?.name;if(l||(r=ag.D(s)?.name),!r)return null;let a=r;return(0,n.jsx)("span",{"data-tooltip":a,"data-tooltip-type":i0.Ib.TEXT,children:a})}function aM({detectionContext:e,fixStatus:t,groupKey:i,violations:s,isApplying:l}){let r=(0,sS.eS)(sS.aD.CURRENT)[e.assetId];return r?(0,n.jsx)(rY,{fixStatus:t,groupKey:i,violations:s,isApplying:l,children:{suggestionRowContent:e=>(0,n.jsx)(rZ,{...e,customContainerStyle:aD.componentRowContainer,neverShowApplyButton:!0,children:(0,n.jsx)(aF,{item:r,...e})})}}):null}function aF({item:e}){return(0,n.jsxs)("div",{className:"x78zum5 x6s0dn4 xe8ttls xe3gq44",children:[(0,n.jsx)("div",{className:"x6s0dn4 xkawg4k xsb15dp x1sxf85j x78zum5 x2lah0s xl56j7k xyo1k6t x187nhsf xn3w4p2",children:(0,n.jsx)(ae.M,{className:"thumbClassName",item:e,localThumbnailGenerationBehavior:"default",draggable:!1,style:{maxHeight:"90%",maxWidth:"90%"}})}),(0,n.jsx)("span",{className:"x1iyjqo2 xb3r6kr xlyipyv xuxw1ft x1nx2rwh","data-tooltip":e.name,"data-tooltip-type":i0.Ib.TEXT,children:e.name})]})}function az({fix:e,groupKey:t,isApplying:i,ruleId:l,violatingNodeId:r}){let{fixContext:a,valid:o}=e??{},d=(0,s.useRef)(null),[x,u]=(0,p.fp)(sW.uw),h=(0,p.Xr)(sW.aW),m=(0,p.Xr)(sW.iO),g=(0,p.Xr)(sW.rg),f=(0,p.Xr)(sW.jV),y=(0,nb.sf)(),{fix:_}=rG(t),{fixContext:j}=_??{},b=a?.fixes,v=j?.fixes,{allStyles:k,listItems:C,styleNodeIdToStyle:E}=(0,nb.td)({selectedStyles:b?.fixes??[],cachedStyles:(v?.fixes??[]).slice(0,nb.lz)}),S=b?.fixes.length?b?.fixes[0]:k[0],T=(0,s.useCallback)(e=>!!(e?.id&&aE(b?.fixes[0]))&&e.id===b?.fixes[0].node_id,[b]),w=(0,s.useCallback)(({node_id:e,rankPosition:i,isFromSuggestedList:n})=>{let s=E[e];if(!s)return;let o={...a,fixes:{suggestionId:(0,P.g)(),fixes:[s],selectedItemRankPosition:i,selectedItemIsFromSuggestedList:n}};p.zl.set(i7.Sg,{groupKey:t,selectedFixItem:{fix:{ruleId:l,guid:r??"",valid:!0,fixContext:o},status:"loaded"}})},[E,t,a,l,r]),N=(0,s.useCallback)(()=>{if(i)return;let e=!!x?.current&&!!d.current,t=x?.current===d.current;if(e&&t){y();return}f(()=>T),g(()=>w),m({title:(0,c.t)("design_linter.rules.text_styles.dropdown_title"),blockType:rB.pZ.ASSETS_OUTSIDE_SELECTED_LIBRARIES,display:"LIST",items:C}),u(d),h(!0)},[y,x,i,T,C,w,u,h,f,m,g]);return e&&o&&a&&aE(S)?(0,n.jsx)(r2,{ref:d,onClick:N,tooltip:S.name,children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r4,{isDisabled:i,children:(0,n.jsx)(aj.J,{fillStyle:S,className:aS})}),(0,n.jsx)(r1,{label:S.name,isApplying:i})]})}):(0,n.jsx)(rJ,{ref:d,onClick:N,type:rB.kQ.TEXT})}function aP({ruleId:e,fix:t,groupKey:i,violatingNodeId:l,assetType:r,isApplying:o}){let{fixContext:d,valid:x}=t??{},u=(0,s.useRef)(null),h=(0,nb.sf)(),[m,g]=(0,p.fp)(sW.uw),f=(0,p.Xr)(sW.aW),y=(0,p.Xr)(sW.iO),_=(0,p.Xr)(sW.rg),j=(0,p.Xr)(sW.jV),{fix:b}=rG(i),{fixContext:v}=b??{},k=d?.fixes,C=v?.fixes,E=(0,af.d$)({ruleId:e,assetType:r}),{fixes:S,listItems:T,allResolvedVariables:w,variableMap:N}=(0,nb.Dt)({selectedFixes:k?.fixes??[],cachedFixes:(C?.fixes??[]).slice(0,nb.OL),violatingNodeId:l,type:a.rXF.FLOAT,scopes:E}),I=(0,s.useMemo)(()=>{if(!ak(k?.fixes[0]))return S[0];let e=k?.fixes[0].variableId;if(!e||!w)return S[0];let t=w.libraryVariables[e]?.resolvedValue??w.localVariables[e]?.resolvedValue;return t?{variableId:e,resolvedValue:t}:S[0]},[k,w,S]),L=(0,s.useCallback)(e=>!!(e?.id&&ak(k?.fixes[0]))&&e.id===k?.fixes[0].variableId,[k]),R=(0,s.useCallback)(({node_id:t,rankPosition:n,isFromSuggestedList:s})=>{if(!w)return;let r=w.libraryVariables[t]?.resolvedValue??w.localVariables[t]?.resolvedValue;if(!r)return;let a={...d,fixes:{suggestionId:(0,P.g)(),fixes:[{variableId:t,resolvedValue:r}],selectedItemRankPosition:n,selectedItemIsFromSuggestedList:s}};p.zl.set(i7.Sg,{groupKey:i,selectedFixItem:{fix:{ruleId:e,guid:l??"",valid:!0,fixContext:a},status:"loaded"}})},[w,e,i,l,d]),A=(0,s.useCallback)(()=>{let e=!!m?.current&&!!u.current,t=m?.current===u.current;if(e&&t){h();return}g(u),f(!0),j(()=>L),_(()=>R),y({title:(0,c.t)("design_linter.rules.number_rules.dropdown_title"),blockType:rB.pZ.ASSETS_OUTSIDE_SELECTED_LIBRARIES,display:"LIST",items:T})},[m,g,f,j,L,_,R,y,T,h]);if(!t||!x||!d||!S||0===S.length||!I||!l)return(0,n.jsx)(rJ,{ref:u,onClick:A,type:rB.kQ.NUMBER});let{variableId:O,resolvedValue:M}=I,F=(N??{})[O]?.name,z=M.value;return z&&F?(0,n.jsx)(r2,{ref:u,onClick:A,tooltip:F,disabled:o,children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r4,{isDisabled:o,children:(0,n.jsx)(ap.O,{})}),(0,n.jsx)(r1,{label:F,value:z,isApplying:o})]})}):(0,n.jsx)(rJ,{ref:u,onClick:A,type:rB.kQ.NUMBER})}function aB({ruleId:e,fix:t,groupKey:i,violatingNodeId:l,nodeType:r,assetType:o,isApplying:d}){let{fixContext:x,valid:u}=t??{},h=(0,s.useRef)(null),m=(0,nb.sf)(),[g,f]=(0,p.fp)(sW.uw),y=(0,p.Xr)(sW.aW),_=(0,p.Xr)(sW.iO),j=(0,p.Xr)(sW.rg),b=(0,p.Xr)(sW.jV),{fix:v}=rG(i),{fixContext:k}=v??{},C=x?.fixes,E=k?.fixes,S=(0,af.d$)({ruleId:e,nodeType:r,assetType:o}),{fixes:T,listItems:w,allResolvedVariables:N,variableMap:I}=(0,nb.Dt)({selectedFixes:C?.fixes??[],cachedFixes:(E?.fixes??[]).slice(0,nb.EN),violatingNodeId:l,type:a.rXF.COLOR,scopes:S}),L=(0,s.useMemo)(()=>{if(!aC(C?.fixes[0]))return T[0];let e=C?.fixes[0].variableId;if(!e||!N)return T[0];let t=N.libraryVariables[e]?.resolvedValue??N.localVariables[e]?.resolvedValue;return t?{variableId:e,resolvedValue:t}:T[0]},[C,N,T]),R=(0,s.useCallback)(e=>!!(e?.id&&aC(C?.fixes[0]))&&e.id===C?.fixes[0].variableId,[C]),A=(0,s.useCallback)(({node_id:t,rankPosition:n,isFromSuggestedList:s})=>{if(!N)return;let r=N.libraryVariables[t]?.resolvedValue??N.localVariables[t]?.resolvedValue;if(!r)return;let a={...x,fixes:{suggestionId:(0,P.g)(),fixes:[{variableId:t,resolvedValue:r}],selectedItemRankPosition:n,selectedItemIsFromSuggestedList:s}};p.zl.set(i7.Sg,{groupKey:i,selectedFixItem:{fix:{ruleId:e,guid:l??"",valid:!0,fixContext:a},status:"loaded"}})},[N,e,x,i,l]),O=(0,s.useCallback)(()=>{let e=!!g?.current&&!!h.current,t=g?.current===h.current;if(e&&t){m();return}f(h),y(!0),b(()=>R),j(()=>A),_({title:(0,c.t)("design_linter.rules.color_rules.dropdown_title"),blockType:rB.pZ.ASSETS_OUTSIDE_SELECTED_LIBRARIES,display:"LIST",items:w})},[g,f,y,b,R,j,A,_,w,m]);if(!t||!u||!x||!T||0===T.length||!L||!l)return(0,n.jsx)(rJ,{ref:h,onClick:O,type:rB.kQ.COLOR});let{variableId:M,resolvedValue:F}=L,z=(I??{})[M]?.name,B=F.value;return B&&z?(0,n.jsx)(r2,{ref:h,onClick:O,tooltip:z,disabled:d,children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r4,{isDisabled:d,children:(0,n.jsx)(aj.J,{color:B,opacity:B.a,className:aS})}),(0,n.jsx)(r1,{label:z,isApplying:d})]})}):(0,n.jsx)(rJ,{ref:h,onClick:O,type:rB.kQ.COLOR})}let aD={componentRowContainer:{k1xSpc:"x78zum5",kmVPX3:"x1xq1gxn",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,kZKoxP:"xng8ra",$$css:!0}};var aV=i(41076),aG=i(435049);function aH(){let{blocks:e,totalViolations:t}=(0,p.md)(lk.r0);return t?(0,n.jsx)(r7,{suggestionBlock:rB.sE.COLOR_VARIABLES,header:(0,c.t)("design_linter.suggestion_block_headers.color"),items:e.map(({blockConfig:e,violationsByGroupKey:t})=>(0,n.jsx)(rW,{blockConfig:e,violationsByGroupKey:t,children:i=>(0,n.jsx)(n.Fragment,{children:Object.entries(t).map(([t,s])=>{let l=s[0];return(0,n.jsx)(aq,{blockId:e.id,violations:s,groupKey:t,ruleId:l?.ruleId,isApplying:i},t)})})},e.id))}):null}function aq({blockId:e,groupKey:t,violations:i,ruleId:s,isApplying:l}){let r=i[0],{fix:a,status:o}=rV(t);if(!r?.detectionContext)return null;let{detectionContext:d,guid:x,nodeType:u}=r;return(0,n.jsx)(rY,{fixStatus:o,groupKey:t,violations:i,isApplying:l,children:{suggestionRowContent:i=>(0,n.jsx)(rX,{...i,children:{currentValue:(0,n.jsx)(aU,{context:d}),suggestedValue:(0,n.jsx)(a$,{blockId:e,fix:a,groupKey:t,ruleId:s,violatingNodeId:x,nodeType:u,isApplying:l})}})}})}function aU({context:e}){if(!e)return null;let t=e.color,i=e.opacity,s=`${aV.z5.format(t)}${i&&i<1?` \xb7 ${function(e){let t=new aG.t6({min:0,max:100});return`${t.format(100*e)}%`}(i)}`:""}`;return(0,n.jsx)("span",{"data-tooltip":s,"data-tooltip-type":i0.Ib.TEXT,children:s})}function a$({blockId:e,ruleId:t,fix:i,groupKey:l,violatingNodeId:r,nodeType:o,isApplying:d}){let{fixContext:x,valid:u}=i??{},h=s.useRef(null),m=(0,nb.sf)(),[g,f]=(0,p.fp)(sW.uw),y=(0,p.Xr)(sW.aW),_=(0,p.Xr)(sW.iO),j=(0,p.Xr)(sW.rg),b=(0,p.Xr)(sW.jV),{fix:v}=rG(l),{fixContext:k}=v??{},C=x?.fixes,E=k?.fixes,S=(0,af.d$)({ruleId:t,nodeType:o}),{fixes:T,listItems:w,allResolvedVariables:N,variableMap:I}=(0,nb.Dt)({selectedFixes:C??[],cachedFixes:(E??[]).slice(0,nb.EN),violatingNodeId:r,type:a.rXF.COLOR,scopes:S}),L=(0,s.useMemo)(()=>{if(!C?.length)return T[0];let e=C[0]?.variableId;if(!e||!N)return T[0];let t=N.libraryVariables[e]?.resolvedValue??N.localVariables[e]?.resolvedValue;return t?{variableId:e,resolvedValue:t}:T[0]},[C,N,T]),R=(0,s.useCallback)(e=>!!(e?.id&&C?.length)&&e.id===C[0]?.variableId,[C]),A=(0,s.useCallback)(({node_id:e,rankPosition:i,isFromSuggestedList:n})=>{if(!N||!t)return;let s=N.libraryVariables[e]?.resolvedValue??N.localVariables[e]?.resolvedValue;if(!s)return;let a={...x,fixes:[{variableId:e,resolvedValue:s}],selectedItemRankPosition:i,selectedItemIsFromSuggestedList:n};p.zl.set(i7.Sg,{groupKey:l,selectedFixItem:{fix:{ruleId:t,guid:r??"",valid:!0,fixContext:a},status:"loaded"}})},[N,t,l,r,x]),O=(0,s.useCallback)(()=>{let t=!!g?.current&&!!h.current,i=g?.current===h.current;if(t&&i){m();return}f(h),y(!0),b(()=>R),j(()=>A),_({title:(0,c.t)("design_linter.rules.color_rules.dropdown_title"),blockType:e,display:"LIST",items:w})},[e,g,f,y,b,R,j,A,_,w,m]);if(!i||!u||!x||!T||0===T.length||!L||!r)return(0,n.jsx)(rJ,{ref:h,onClick:O,type:rB.kQ.COLOR});let{variableId:M,resolvedValue:F}=L,z=(I??{})[M]?.name,P=F.value;return P&&z?(0,n.jsx)(r2,{ref:h,onClick:O,tooltip:z,disabled:d,children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r4,{isDisabled:d,children:(0,n.jsx)(aj.J,{color:P,opacity:P.a,className:aS})}),(0,n.jsx)(r1,{label:z,isApplying:d})]})}):(0,n.jsx)(rJ,{ref:h,onClick:O,type:rB.kQ.COLOR})}function aK(){let{blocks:e,totalViolations:t}=(0,p.md)(lk.yU),i=(0,p.md)(iU.d$),l=s.useMemo(()=>{let t=e.flatMap(e=>Object.entries(e.violationsByGroupKey).flatMap(([t,i])=>i.map(i=>({groupKey:t,violation:i,blockConfig:e.blockConfig})))),i={};return t.forEach(({blockConfig:e,groupKey:t,violation:n})=>{let{detectionContext:s}=n,l=s?.pluginId,r=s?.rule?.name;l&&r&&(i[l]||(i[l]={}),i[l][r]||(i[l][r]={blockConfig:e,violationsByGroupKey:{},ruleName:r}),i[l][r].violationsByGroupKey[t]||(i[l][r].violationsByGroupKey[t]=[]),i[l][r].violationsByGroupKey[t].push(n))}),Object.keys(i).sort().map(e=>({pluginId:e,rules:Object.values(i[e])}))},[e]);return t?(0,n.jsx)(n.Fragment,{children:l.map(({pluginId:e,rules:t},l)=>(0,n.jsxs)(s.Fragment,{children:[l>0&&(0,n.jsx)(r8,{}),(0,n.jsx)(r7,{suggestionBlock:rB.pZ.EXTENSIBILITY_RULE,header:(0,c.t)("design_linter.rules.plugin_rules.header",{pluginName:i?.get(e)?.name??""}),items:t.map(({blockConfig:t,violationsByGroupKey:i,ruleName:s})=>(0,n.jsx)(rW,{blockConfig:{...t,getLabel:()=>(0,n.jsx)("span",{children:s})},blockId:`${t.id}-${e}-${s}`,violationsByGroupKey:i,children:e=>(0,n.jsx)(n.Fragment,{children:Object.entries(i).map(([t,i])=>(0,n.jsx)(aW,{groupKey:t,violations:i,isApplying:e},t))})},`${t.id}-${e}-${s}`))})]},`plugin-${e}`))}):null}let aW=s.memo(function({groupKey:e,violations:t,isApplying:i}){return(0,n.jsx)("div",{children:(0,n.jsx)(aZ,{violations:t,groupKey:e,isApplying:i})},e)});function aZ({violations:e,groupKey:t,isApplying:i}){let[l]=(0,s.useState)(!1),{status:r}=rV(t),a=e[0],o=a?.detectionContext;return!l&&o?.explanation&&e.length?(0,n.jsx)(rY,{fixStatus:"loaded"===r?"loaded":"loading",groupKey:t,violations:e,isApplying:i,children:{suggestionRowContent:e=>(0,n.jsx)(rZ,{...e,hasFix:!0,children:(0,n.jsx)("div",{className:"x1akne3o x37zpob x98rzlu xilkfi8 x1vvkbs x1mzt3pk xeuugli",children:o.explanation})})}}):null}function aX(){let{blocks:e,totalViolations:t}=(0,p.md)(lk.d9);return t?(0,n.jsx)(r7,{suggestionBlock:rB.sE.NUMBER_VARIABLES,header:(0,c.t)("design_linter.suggestion_block_headers.number"),items:e.map(({blockConfig:e,violationsByGroupKey:t})=>(0,n.jsx)(rW,{blockConfig:e,violationsByGroupKey:t,children:i=>(0,n.jsx)(n.Fragment,{children:Object.entries(t).map(([t,s])=>{let l=s[0];return(0,n.jsx)(aY,{blockId:e.id,violations:s,groupKey:t,ruleId:l?.ruleId,isApplying:i},t)})})},e.id))}):null}function aY({blockId:e,groupKey:t,violations:i,ruleId:s,isApplying:l}){let r=i[0],{fix:a,status:o}=rV(t);if(!r?.detectionContext)return null;let{detectionContext:d,guid:x}=r;return(0,n.jsx)(rY,{fixStatus:o,groupKey:t,violations:i,isApplying:l,children:{suggestionRowContent:i=>(0,n.jsx)(rX,{...i,children:{currentValue:(0,n.jsx)(aQ,{context:d}),suggestedValue:(0,n.jsx)(aJ,{blockId:e,fix:a,groupKey:t,ruleId:s,violatingNodeId:x,isApplying:l})}})}})}function aQ({context:e}){if(!e)return null;let t=parseFloat(e.numericValue.toFixed(2)).toString();return(0,n.jsx)("span",{"data-tooltip":t,"data-tooltip-type":i0.Ib.TEXT,children:t})}function aJ({blockId:e,ruleId:t,fix:i,groupKey:l,violatingNodeId:r,isApplying:o}){let{fixContext:d,valid:x}=i??{},u=(0,s.useRef)(null),h=(0,nb.sf)(),[m,g]=(0,p.fp)(sW.uw),f=(0,p.Xr)(sW.aW),y=(0,p.Xr)(sW.iO),_=(0,p.Xr)(sW.rg),j=(0,p.Xr)(sW.jV),{fix:b}=rG(l),{fixContext:v}=b??{},k=d?.fixes,C=v?.fixes,E=(0,af.d$)({ruleId:t}),{fixes:S,listItems:T,allResolvedVariables:w,variableMap:N}=(0,nb.Dt)({selectedFixes:k??[],cachedFixes:(C??[]).slice(0,nb.OL),violatingNodeId:r,type:a.rXF.FLOAT,scopes:E}),I=s.useMemo(()=>{if(!k?.length)return S[0];let e=k[0]?.variableId;if(!e||!w)return S[0];let t=w.libraryVariables[e]?.resolvedValue??w.localVariables[e]?.resolvedValue;return t?{variableId:e,resolvedValue:t}:S[0]},[k,w,S]),L=(0,s.useCallback)(e=>!!(e?.id&&k?.length)&&e.id===k[0]?.variableId,[k]),R=(0,s.useCallback)(({node_id:e,rankPosition:i,isFromSuggestedList:n})=>{if(!w||!t)return;let s=w.libraryVariables[e]?.resolvedValue??w.localVariables[e]?.resolvedValue;if(!s)return;let a={...d,fixes:[{variableId:e,resolvedValue:s}],selectedItemRankPosition:i,selectedItemIsFromSuggestedList:n};p.zl.set(i7.Sg,{groupKey:l,selectedFixItem:{fix:{ruleId:t,guid:r??"",valid:!0,fixContext:a},status:"loaded"}})},[w,t,l,r,d]),A=(0,s.useCallback)(()=>{let t=!!m?.current&&!!u.current,i=m?.current===u.current;if(t&&i){h();return}g(u),f(!0),j(()=>L),_(()=>R),y({title:(0,c.t)("design_linter.rules.number_rules.dropdown_title"),blockType:e,display:"LIST",items:T})},[e,m,g,f,j,L,_,R,y,T,h]);if(!i||!x||!d||!S||0===S.length||!I||!r)return(0,n.jsx)(rJ,{ref:u,onClick:A,type:rB.kQ.NUMBER});let{variableId:O,resolvedValue:M}=I,F=(N??{})[O]?.name,z=M.value;return F?(0,n.jsx)(r2,{ref:u,onClick:A,tooltip:F,disabled:o,children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r4,{isDisabled:o,children:(0,n.jsx)(ap.O,{})}),(0,n.jsx)(r1,{label:F,value:z,isApplying:o})]})}):(0,n.jsx)(rJ,{ref:u,onClick:A,type:rB.kQ.NUMBER})}var a0=i(987405),a1=i(684572),a2=i(467202);function a5(){let{blocks:e,totalViolations:t}=(0,p.md)(lk.qQ);return t?(0,n.jsx)(r7,{suggestionBlock:rB.pZ.TEXT_BACKGROUND_CONTRAST_AA,header:(0,c.t)("design_linter.suggestion_block_headers.accessibility_standards"),items:e.map(({blockConfig:e,violationsByGroupKey:t})=>(0,n.jsx)(rW,{blockConfig:e,violationsByGroupKey:t,children:i=>(0,n.jsx)(n.Fragment,{children:Object.entries(t).map(([t,s])=>{let l=s[0];return(0,n.jsx)(a3,{blockId:e.id,violations:s,groupKey:t,ruleId:l?.ruleId,isApplying:i},t)})})},e.id))}):null}function a3({blockId:e,groupKey:t,violations:i,ruleId:s,isApplying:l}){let r=i[0],{fix:a,status:o}=rV(t);if(!r?.detectionContext)return null;let{detectionContext:d,guid:x}=r;return(0,n.jsx)(rY,{fixStatus:o,groupKey:t,violations:i,isApplying:l,children:{suggestionRowContent:i=>(0,n.jsx)(rX,{...i,children:{currentValue:(0,n.jsx)(a4,{context:d}),suggestedValue:(0,n.jsx)(a7,{blockId:e,fix:a,groupKey:t,ruleId:s,violatingNodeId:x,isApplying:l,detectionContext:d})}})}})}function a4({context:e}){if(!e)return null;let t=e.fillColor,i=e.fillOpacity,s=`${aV.z5.format(t)}${i&&i<1?` \xb7 ${function(e){let t=new aG.t6({min:0,max:100});return`${t.format(100*e)}%`}(i)}`:""}`;return(0,n.jsx)("span",{"data-tooltip":s,"data-tooltip-type":i0.Ib.TEXT,children:s})}function a7({blockId:e,ruleId:t,fix:i,groupKey:l,violatingNodeId:r,isApplying:o,detectionContext:d}){let{fixContext:x,valid:u}=i??{},h=s.useRef(null),m=(0,nb.sf)(),[g,f]=(0,p.fp)(sW.uw),y=(0,p.Xr)(sW.aW),_=(0,p.Xr)(sW.iO),j=(0,p.Xr)(sW.rg),b=(0,p.Xr)(sW.jV),v=(0,p.Xr)(sW.Ue),{fix:k}=rG(l),{fixContext:C}=k??{},E=x?.fixes,S=C?.fixes,{fixes:T,listItems:w,allResolvedVariables:N,variableMap:I}=(0,nb.Dt)({selectedFixes:E??[],cachedFixes:(S??[]).slice(0,nb.EN),violatingNodeId:r,type:a.rXF.COLOR,scopes:(0,af.d$)({ruleId:t})}),L=s.useMemo(()=>{if(!E?.length)return T[0];let e=E[0]?.variableId;if(!e||!N)return T[0];let t=N.libraryVariables[e]?.resolvedValue??N.localVariables[e]?.resolvedValue;return t?{variableId:e,resolvedValue:t}:T[0]},[E,N,T]),R=s.useCallback(e=>!!(e?.id&&E?.length)&&e.id===E[0]?.variableId,[E]),A=s.useCallback(({node_id:e,rankPosition:i,isFromSuggestedList:n})=>{if(!N||!t)return;let s=N.libraryVariables[e]?.resolvedValue??N.localVariables[e]?.resolvedValue;if(!s)return;let a={...x,fixes:[{variableId:e,resolvedValue:s}],selectedItemRankPosition:i,selectedItemIsFromSuggestedList:n};p.zl.set(i7.Sg,{groupKey:l,selectedFixItem:{fix:{ruleId:t,guid:r??"",valid:!0,fixContext:a},status:"loaded"}})},[N,t,l,r,x]),O=s.useCallback(()=>{let t=!!g?.current&&!!h.current,i=g?.current===h.current;if(t&&i){m();return}let{backgroundColor:s,contrastRatios:l}=d,r=function(e){if("LIST"!==e.type||!e.variable||!N)return null;let t=e.variable.node_id,i=N.libraryVariables[t]?.resolvedValue??N.localVariables[t]?.resolvedValue;if(!i?.value)return null;let r=i.value;return(0,n.jsx)(a8,{backgroundColor:s,selectedColor:r,contrastRatios:l})};f(h),y(!0),b(()=>R),j(()=>A),v(()=>r),_({title:(0,c.t)("design_linter.rules.color_rules.dropdown_title"),blockType:e,display:"LIST",items:w})},[e,g,f,y,b,R,j,A,v,_,w,m,d,N]);if(!i||!u||!x||!T||0===T.length||!L||!r)return(0,n.jsx)(rJ,{ref:h,onClick:O,type:rB.kQ.COLOR});let{variableId:M,resolvedValue:F}=L,z=(I??{})[M]?.name,P=F.value;return P&&z?(0,n.jsx)(r2,{ref:h,onClick:O,tooltip:z,disabled:o,children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r4,{isDisabled:o,children:(0,n.jsx)(aj.J,{color:P,opacity:P.a,className:aS})}),(0,n.jsx)(r1,{label:z,isApplying:o}),(0,n.jsx)(a8,{backgroundColor:d.backgroundColor,selectedColor:F.value,contrastRatios:d.contrastRatios})]})}):(0,n.jsx)(rJ,{ref:h,onClick:O,type:rB.kQ.COLOR})}function a8({backgroundColor:e,selectedColor:t,contrastRatios:i}){let l=s.useMemo(()=>{let{aaPass:n}=(0,a2.Ef)((0,su.Hu)(t),e,i?.AA,i?.AAA);return!!n},[e,t,i]);return(0,n.jsxs)("div",{...{0:{className:"x78zum5 x6s0dn4 x195vfkc x87ps6o x1n0bwc9 xmauxvm"},1:{className:"x78zum5 x6s0dn4 x195vfkc x87ps6o xq6u9c4 x11vm0g5"}}[!!l<<0],children:[l?(0,n.jsx)(a0.l,{}):(0,n.jsx)(a1.X,{}),(0,c.t)("design_linter.suggestion_block.text_background_contrast_aa.aaStandard")]})}function a6(){let{blocks:e,totalViolations:t}=(0,p.md)(lk.GM);return t?(0,n.jsx)(r7,{suggestionBlock:rB.pZ.TEXT_STYLE,header:(0,c.t)("design_linter.suggestion_block_headers.styles"),items:e.map(({blockConfig:e,violationsByGroupKey:t})=>(0,n.jsx)(rW,{blockConfig:e,violationsByGroupKey:t,children:i=>(0,n.jsx)(n.Fragment,{children:Object.entries(t).map(([t,s])=>(0,n.jsx)(a9,{blockId:e.id,violations:s,groupKey:t,isApplying:i},t))})},e.id))}):null}function a9({blockId:e,groupKey:t,violations:i,isApplying:s}){let l=i[0],{fix:r,status:a}=rV(t);return l?.detectionContext?(0,n.jsx)(rY,{fixStatus:a,groupKey:t,violations:i,isApplying:s,children:{suggestionRowContent:i=>(0,n.jsx)(rX,{...i,children:{currentValue:(0,n.jsx)(oe,{context:l.detectionContext}),suggestedValue:(0,n.jsx)(ot,{blockId:e,fix:r,groupKey:t,isApplying:s})}})}}):null}function oe({context:e}){let{fontFamily:t,fontSize:i,lineHeight:s}=e,l=parseFloat(i.toFixed(2)).toString(),r=parseFloat(s.toFixed(2)).toString(),a=`${t} ${l}, ${r}`;return(0,n.jsx)("span",{"data-tooltip":a,"data-tooltip-type":i0.Ib.TEXT,children:a})}function ot({blockId:e,fix:t,groupKey:i,isApplying:l}){let{fixContext:r,valid:a}=t??{},o=s.useRef(null),[d,x]=(0,p.fp)(sW.uw),u=(0,p.Xr)(sW.aW),h=(0,p.Xr)(sW.iO),m=(0,p.Xr)(sW.rg),g=(0,p.Xr)(sW.jV),f=(0,nb.sf)(),{fix:y}=rG(i),{fixContext:_}=y??{},j=r?.fixes,b=_?.fixes,{allStyles:v,listItems:k,styleNodeIdToStyle:C}=(0,nb.td)({selectedStyles:j??[],cachedStyles:(b??[]).slice(0,nb.lz)}),E=j?.length?j[0]:v[0],S=s.useCallback(e=>!!(e?.id&&j?.length)&&e.id===j?.[0]?.node_id,[j]),T=s.useCallback(({node_id:e,rankPosition:n,isFromSuggestedList:s})=>{let l=C[e];if(!l)return;let a={...r,fixes:[l],selectedItemRankPosition:n,selectedItemIsFromSuggestedList:s};p.zl.set(i7.Sg,{groupKey:i,selectedFixItem:{fix:{ruleId:lv.C.REQUIRE_TEXT_STYLES,guid:t?.guid??"",valid:!0,fixContext:a},status:"loaded"}})},[C,i,t?.guid,r]),w=s.useCallback(()=>{if(l)return;let t=!!d?.current&&!!o.current,i=d?.current===o.current;if(t&&i){f();return}g(()=>S),m(()=>T),h({title:(0,c.t)("design_linter.rules.text_styles.dropdown_title"),blockType:e,display:"LIST",items:k}),x(o),u(!0)},[e,f,d,l,S,k,T,x,u,g,h,m]);return t&&a&&r&&E?(0,n.jsx)(r2,{ref:o,onClick:w,tooltip:E.name,children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r4,{isDisabled:l,children:(0,n.jsx)(aj.J,{fillStyle:E,className:aS})}),(0,n.jsx)(r1,{label:E.name,isApplying:l})]})}):(0,n.jsx)(rJ,{ref:o,onClick:w,type:rB.kQ.TEXT})}let oi="design-linter-group-view-next-button",on=s.memo(function(){let[e,t]=s.useState(!1),i=(0,nb.sf)(),l=(0,sZ.gx)(),r=function(){let e=function(){let{blocks:e,totalViolations:t}=(0,p.md)(lk.r0);return!!e.length&&!!t}(),t=function(){let{blocks:e,totalViolations:t}=(0,p.md)(lk.GM);return!!e.length&&!!t}(),i=function(){let{blocks:e,totalViolations:t}=(0,p.md)(lk.d9);return!!e.length&&!!t}(),l=function(){let{blocks:e,totalViolations:t}=(0,p.md)(lk.qQ);return!!e.length&&!!t}(),r=function(){let{blocks:e,totalViolations:t}=(0,p.md)(lk.Q6);return!!e.length&&!!t}(),a=function(){let{blocks:e,totalViolations:t}=(0,p.md)(lk.LG);return!!e.length&&!!t}(),o=function(){let{blocks:e,totalViolations:t}=(0,p.md)(lk.yU);return!!e.length&&!!t}();return s.useMemo(()=>{let s=[];return e&&s.push({key:rB.pZ.BACKGROUND_COLOR,block:(0,n.jsx)(aH,{})}),t&&s.push({key:rB.pZ.TEXT_STYLE,block:(0,n.jsx)(a6,{})}),i&&s.push({key:rB.pZ.CORNER_RADIUS,block:(0,n.jsx)(aX,{})}),l&&s.push({key:rB.pZ.TEXT_BACKGROUND_CONTRAST_AA,block:(0,n.jsx)(a5,{})}),r&&s.push({key:rB.pZ.ASSET_UPDATES,block:(0,n.jsx)(as,{})}),a&&s.push({key:rB.pZ.ASSETS_OUTSIDE_SELECTED_LIBRARIES,block:(0,n.jsx)(aT,{})}),o&&s.push({key:rB.pZ.EXTENSIBILITY_RULE,block:(0,n.jsx)(aK,{})}),s},[r,e,t,i,l,a,o])}(),a=(0,p.md)(i7.NM),d=(0,p.md)(i7.xo),{next:x,hasNext:u}=function(e,t){let i=(0,p.md)(i7.NM),n=(0,p.md)(i7.xo),l=(0,p.md)(i7.Bd),r=(0,p.md)(iU.Iy),a=(0,s.useRef)(null),o=(0,s.useRef)(null),d=(0,s.useRef)(null),x=(0,s.useRef)(null),u=(0,iK.Wo)(),c=(0,iK.OI)(),h=(0,iK.Vz)(),m=(0,iK.HE)();(0,s.useEffect)(()=>{if(!(o.current!==i))return;o.current=i;let e=l.map(e=>e.id),t=e.findIndex(e=>e===i);a.current=-1!==t?e.slice(t+1):e},[i,l]),(0,s.useEffect)(()=>{let e=x.current!==n,t=o.current!==i;if(!e&&!t)return;if(x.current=n,!i){d.current=null;return}let s=r.get(i);if(!s){d.current=null;return}let l=(0,n6.zr)(s);if(!n){d.current=l;return}let a=l.findIndex(e=>e===n);d.current=-1!==a?l.slice(a+1):l},[n,i,r]);let g=(0,s.useCallback)(e=>{c(e),t?.()},[c,t]),f=(0,s.useCallback)(e=>{let i=r.get(e);i&&(0,nR.JT)(i,"NEXT"),u(e),h(),m(e),p.zl.set(lb),t?.()},[r,h,m,u,t]),y=(0,s.useCallback)(()=>{let e=d.current?.[0];if(e)return g(e),!0;if(!i)return!1;let t=r.get(i);if(!t)return!1;let s=(0,n6.ac)(t);return!!s&&s!==n&&(g(s),!0)},[g,i,n,r]),_=(0,s.useCallback)(()=>{if(!a.current||!l.length)return;let e=l.reduce((e,t)=>(e.add(t.id),e),new Set),t="";for(let i=0;i<a.current.length;i++){let n=a.current[i]??"";if(e.has(n)){t=n;break}}if(!t){let e=l[0]?.id??"";if(!e){i8();return}t=e}f(t)},[l,f]);return{next:(0,s.useCallback)(()=>{if(e){_();return}y()||_()},[e,y,_]),hasNext:l.length>0}}(null===d,(0,s.useCallback)(()=>{t(!1)},[])),h=l||e,m=!!(0,o.kc)().aip_flower_garden_sidebar;return(!function({isEnabled:e,selectedGroupId:t,selectedRootId:i,shouldNavigate:n,next:l}){let r=(0,s.useRef)(!1);(0,s.useEffect)(()=>{e&&(r.current=!1)},[e,t,i]),(0,s.useEffect)(()=>{e&&n&&!r.current&&(r.current=!0,l())},[e,n,l])}({isEnabled:m,selectedGroupId:a,selectedRootId:d,shouldNavigate:h&&u,next:x}),(0,sZ.fR)(),m?h&&!u:h)?(0,n.jsxs)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9 x78zum5 xl56j7k x6s0dn4 x87ps6o xdt5ytf x1i71x30 x5yr21d",children:[(0,c.tx)("design_linter.modal.group_suggestions_completed"),!m&&u?(0,n.jsx)(iZ.$n,{variant:"primary","data-testid":oi,recordingKey:oi,onClick:x,children:(0,c.tx)("general.next")}):null]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(si.P,{children:(0,n.jsx)("div",{className:"x78zum5 xdt5ytf x5yr21d xp6roeo x1iyjqo2",onScroll:i,children:(0,n.jsx)("div",{className:"x78zum5 x1iyjqo2 xdt5ytf x1gskr33",children:r.map(({key:e,block:t},i)=>(0,n.jsxs)(s.Fragment,{children:[i>0&&(0,n.jsx)(r8,{}),t]},`suggestion-block-${e}-${a}`))})})}),!!(0,o.kc)().aip_flower_garden_group_footer&&(0,n.jsx)(or,{setDidIgnore:t})]})}),os="design-linter-ignore-all-group",ol="design-linter-apply-all-group";function or({setDidIgnore:e}){let t=(0,iK.rL)(e),{applyAllFixes:i}=function(){let e=(0,iQ.am)();return{applyAllFixes:(0,s.useCallback)(async()=>{if(!e)throw Error("Design linter not available");p.zl.set(lk.kR,!0),await new Promise(e=>requestAnimationFrame(()=>e()));let t=!1,i=0,n=0,s=0,l=e.linterAbortSignal;try{let r=p.zl.get(i7.DJ);for(let a of Object.values(r)){if(l.aborted)break;try{let r=[],o=[];for(let e in a){let t=a[e]??[],s=p.zl.get(i7.$C)?.get(e);s?.fix?.fixContext&&(s.fix.ruleId===lv.C.EXTENSIBILITY_RULE?o.push(...t):r.push({violations:t,fixContext:s.fix.fixContext}),i+=t.length,n+=1)}await e.applyFixContextToViolations({violationsWithFixContexts:r,customRuleViolations:o,shouldSkipCommit:!0,abortSignal:l}),t=!0,s+=1}catch{(0,nR.m7)()}finally{p.zl.set(lk.kR,!1)}}t&&(0,nR.i7)({numViolationsFixed:i,numRowsFixed:n,numBlocksFixed:s})}catch{(0,nR.Rz)()}finally{t&&i4.Y5.commit()}},[e])}}(),l=(0,p.md)(lk.kR),r=!(0,p.md)(i7.mE)||l;return(0,n.jsx)("div",{className:"x78zum5 x13a6bvl xv42yna xr1yuqi","data-testid":"design-linter-group-view-footer",children:(0,n.jsxs)("div",{className:"xe8ttls x78zum5 x13a6bvl x883omv x2lah0s xxk0z11 xjwf9q1 xqo8coc x1obevfs",children:[(0,n.jsx)(iZ.$n,{onClick:t,variant:"secondary",htmlAttributes:{"data-testid":os},recordingKey:os,children:(0,c.tx)("design_linter.suggestion_block.ignore_all")}),(0,n.jsx)(iZ.$n,{onClick:i,variant:"primary",htmlAttributes:{"data-testid":ol},recordingKey:ol,disabled:r,children:(0,n.jsxs)("div",{className:"x78zum5 x6s0dn4 x1jnr06f",children:[l&&(0,n.jsx)(s5.k,{size:"sm"}),(0,c.tx)("design_linter.suggestion_block.apply_all_btn")]})})]})})}let oa=(0,s.memo)(function(){let e=!!(0,o.kc)().aip_flower_garden_sidebar;return!function(){let e=(0,p.md)(i7.vu),t=(0,p.md)(i7.Bp),i=(0,p.md)(i7.xo);(0,s.useEffect)(()=>{let n=i?[i]:e;if(!n.length||(a.Egt?.replaceSelection(n,!0),!(0,o.kc)().aip_flower_garden_zoom_to_node))return;let s=i??t;if(!s)return;let l=function(){let e=p.zl.get(i7.$H),t=p.zl.get(i7.r4);if(!e||!t)return null;let i=i4.Y5.getViewportInfo(),n=(0,g.Nd)(i,t),s=(0,g.Nd)(i,{x:t.x+e.x,y:t.y+e.y});return new i5.r(new i3.M(n.x,n.y),new i3.M(s.x-n.x,s.y-n.y))}();l&&a.mHF?.zoomToNodeAvoidingModalBounds(s,l)},[e,i,t])}(),(0,ir.h)(()=>{p.zl.set(lb)}),(0,n.jsxs)("div",{className:"x78zum5 x5yr21d",children:[e&&(0,n.jsx)("div",{className:"xspf3my",children:(0,n.jsx)(lS,{})}),(0,n.jsxs)("div",{className:"x78zum5 x1v8gsql x5yr21d xh8yej3",children:[(0,n.jsxs)("div",{className:"x78zum5 xdt5ytf x1iyjqo2 xqo8coc xuhaxrz x1obevfs x1yjdb4r",children:[(0,o.kc)().aip_flower_garden_debug&&(0,n.jsx)(lu,{}),(0,n.jsx)(on,{})]}),(0,n.jsx)(ry,{})]})]})});function oo(){let{libraryData:e,availableLibraryKeys:t,hasLoaded:i}=nB();return nV(e,t,i),null}function od(){let e=(0,iK._i)(),t=(0,iK.l2)()&&!e,i=(0,p.md)(i7._M);return(!function(e){let t=(0,l.wA)(),i=(0,ie.f)("seen_linter_home_view");(0,s.useEffect)(()=>{i||e||t(t7.b({seen_linter_home_view:!0}))},[i,t,e])}(e),(0,sZ._9)(),(0,sZ.p6)(),(0,iK.Y0)(),!i6()&&e)?(0,n.jsxs)("div",{className:"x78zum5 xh8yej3 x5yr21d xdt5ytf x6s0dn4 xl56j7k",children:[(0,n.jsx)(oo,{}),(0,n.jsx)(ly,{})]}):i===i$.FR.SELECTED_VISUAL_GROUP_VIEW?(0,n.jsx)(oa,{}):t?(0,n.jsx)("div",{"data-testid":"design-linter-container-no-violations",className:"x1n0bwc9 xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x78zum5 xh8yej3 x5yr21d xdt5ytf xl56j7k",children:(0,n.jsxs)("div",{className:"x78zum5 xl56j7k x87ps6o xdt5ytf x6s0dn4",children:[(0,n.jsx)("span",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh x1ah0xmj x1akne3o",children:(0,c.tx)("design_linter.modal.suggestions_completed_title")}),(0,n.jsx)("span",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:(0,c.tx)("design_linter.modal.suggestions_completed_subtitle")}),(0,o.kc)().aip_flower_garden_debug&&(0,n.jsx)(lu,{})]})}):(0,n.jsx)(lf,{})}let ox=(0,q.jz)(nn);function ou(){let e=sR.ox(),t=function(){let e=(0,im.GQ)(),t=(0,p.md)(i7._M),i=(0,s.useMemo)(()=>new sc.Mi(e+(0,q.jz)(nn),(0,q.jz)(nn)),[e]),[{windowInnerHeight:n,windowInnerWidth:l}]=(0,sD.A)((0,sV.l)(),300,{equalityFn:sL.c2}),{width:r,height:a}=(0,n6.O$)();return t===i$.FR.ALL_VISUAL_GROUPS_VIEW&&((0,o.kc)().aip_flower_garden_auto_library_select?(r=360,a=560):(r=336,a=475)),{initialPosition:i,maxHeight:n-2*ox,minHeight:250,minWidth:400,initialHeight:a,initialWidth:Math.min(l-2*ox,r)}}(),i=function(){let e=(0,p.Xr)(i7.$H);return(0,s.useMemo)(()=>sB()(t=>{e(t)},100),[e])}(),l=function(){let e=(0,p.Xr)(i7.r4);return(0,s.useMemo)(()=>sB()(t=>{e(t)},100),[e])}(),r=(0,iK.Hl)(),a=(0,p.md)(i7._M),d=(0,p.Xr)(i7.$H),x=s.useCallback(e=>{e.size&&i(e.size),l(e.position)},[l,i]);return(0,ir.h)(()=>{let e={x:t.initialWidth,y:t.initialHeight};i(e),d(e),l({x:t.initialPosition.x,y:t.initialPosition.y})}),(0,s.useLayoutEffect)(()=>{let t=(0,o.kc)().aip_flower_garden_auto_library_select?560:475,n=(0,o.kc)().aip_flower_garden_auto_library_select?360:336;if(a===i$.FR.SELECTED_VISUAL_GROUP_VIEW){let e=(0,n6.O$)();n=e.width,t=e.height}let s=new sc.Mi(n,t);e.setSize(s),i(s),d(s)},[a,d,i,e]),(0,nR.ZE)(),(0,n.jsxs)(iW._L,{defaultWidth:t.initialWidth,defaultHeight:t.initialHeight,defaultPosition:{left:t.initialPosition.x,top:t.initialPosition.y},constraints:{maxHeight:t.maxHeight},manager:e,onClose:({source:e})=>{"outside"!==e&&((0,nR.Zz)(e),r(i6()?i$.FR.ALL_VISUAL_GROUPS_VIEW:i$.FR.SELECTED_VISUAL_GROUP_VIEW))},onTransform:x,children:[(0,n.jsxs)(e6.vo,{children:[(0,n.jsx)(e6.Y9,{children:(0,n.jsx)(oc,{})}),(0,n.jsx)(e6.nB,{padding:0,scrolling:"none",className:"xb3r6kr",children:(0,n.jsx)(od,{})})]}),(0,n.jsx)(sX,{})]})}function oc(){let e=(0,p.md)(i7._M),t=(0,iQ.am)();if(e===i$.FR.SELECTED_VISUAL_GROUP_VIEW){let e=i6();return(0,n.jsx)("div",{className:"xt0e3qv x87ps6o xh8yej3",children:(0,n.jsx)(oh,{showBackButton:e,onBackClick:()=>{t?.clearLinterVisualBells(),i8()}})})}return(0,n.jsx)("div",{className:"xt0e3qv x87ps6o xh8yej3 x8rdmch",children:(0,n.jsx)(oh,{})})}function oh({showBackButton:e=!1,onBackClick:t}){let i=(0,iK._i)();return(0,n.jsxs)("div",{className:"x78zum5 x1qughib x6s0dn4",children:[(0,n.jsxs)("div",{...m.Ay.props(of.modalHeaderTitleContent(e)),children:[e&&t&&(0,n.jsxs)(sA.E,{onClick:t,recordingKey:"design-linter-back-button",children:[(0,n.jsx)(sM.C,{}),(0,n.jsx)("div",{className:"x78zum5 x1g2dr8m xiqqdae xkezfkh x1giz659 x14kxzw3 xb3r6kr xlyipyv xuxw1ft",children:i?(0,c.tx)("design_linter.title"):(0,c.tx)("design_linter.review_title")})]}),!e&&(0,n.jsx)("div",{className:"x78zum5 x1g2dr8m xiqqdae xkezfkh x1giz659 x14kxzw3 xb3r6kr xlyipyv xuxw1ft",children:i?(0,c.tx)("design_linter.title"):(0,c.tx)("design_linter.review_title")}),(0,n.jsx)("div",{className:"x2lah0s",children:(0,n.jsx)(i1.E,{children:(0,c.tx)("general.beta")})})]}),(0,n.jsxs)("div",{className:"x78zum5 xg2d0mh x1057jvv",children:[(0,n.jsx)(om,{}),(0,n.jsx)(op,{})]})]})}function op(){let e=(0,s.useRef)(null),[t,i]=(0,p.fp)(i7._M),[r,a]=(0,p.fp)(i7.HC),[d,x]=(0,p.fp)(i7.Dg),u=!(0,ie.f)("seen_linter_libraries_callout")&&d;!function(e){let t=(0,l.wA)();(0,s.useEffect)(()=>{if(!e)return;let i=()=>{t(t7.b({seen_linter_libraries_callout:!0}))};return window.addEventListener("beforeunload",i),()=>{i(),window.removeEventListener("beforeunload",i)}},[t,e])}(u);let h=(0,p.Xr)(i7.Qq),{getTriggerProps:m,manager:g}=sO.gR({isOpen:u,onOpenChange:x,placement:"bottom",type:"tooltip"});return(0,s.useEffect)(()=>{h(e.current)},[h]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{...{0:{},1:{className:"x1ghs5zp x7dmbmb x19y5rnk"}}[!!r<<0],ref:e,children:(0,n.jsx)(ea.K,{...m(),onClick:()=>{(0,o.kc)().aip_flower_garden_auto_library_select?(d&&x(!1),r?a(null):a(sn.LIBRARY_SELECTOR_FROM_OPEN_LIBRARIES_BUTTON)):t===i$.FR.SELECTED_VISUAL_GROUP_VIEW?i(i$.FR.LIBRARY_SELECTOR_FROM_SELECTED_GROUP_VIEW):i(i$.FR.LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW)},"aria-label":(0,c.t)("design_linter.penalty_box.open_library_selector_aria"),children:(0,n.jsx)(sF.l,{})})}),(0,n.jsx)(sO.bL,{manager:g,variant:"strong",children:(0,n.jsxs)(e6.vo,{className:"xafpxmx x1y1aw1k",children:[(0,n.jsx)(e6.nB,{children:(0,c.t)("design_linter.library_selector.callout.description")}),(0,n.jsx)(sO.wi,{children:(0,n.jsx)(e6.jk,{children:(0,n.jsx)(iZ.$n,{onClick:()=>x(!1),children:(0,c.t)("design_linter.library_selector.callout.button")})})})]})})]})}function om(){let e=(0,p.Xr)(i7._M),t=(0,iK._i)(),i=(0,iQ.am)(),l=(0,s.useCallback)(async()=>{try{(0,nR.il)(),i8(),await i?.refreshDetection()}catch(t){console.error("Error refreshing design linter:",t),t instanceof ny.yU?e(i$.FR.LANDING_PAGE_LIMIT_EXCEEDED):t instanceof ny.F7&&e(i$.FR.LANDING_PAGE_NO_SELECTION)}},[e,i]);return(0,n.jsx)("div",{className:"x1n2onr6 x1rg5ohu",children:(0,n.jsx)(ea.K,{onClick:l,"aria-label":(0,c.t)("design_linter.modal.penalty_box.refresh_button_tooltip"),disabled:t,recordingKey:"design-linter-refresh-button",children:(0,n.jsx)(sz.T,{})})})}let og={keTefX:"",k71WvV:"",k1xSpc:"x78zum5",kOIVth:"x167g77z",khm7nJ:"",k1C7PZ:"",kGNEyG:"x6s0dn4",$$css:!0},of={modalHeaderTitleContent:e=>[og,{koQZXg:(e?"0":ex.jH.spacer1)!=null?"x1ntlw0l":e?"0":ex.jH.spacer1,$$css:!0},{"--x-marginLeft":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e?"0":ex.jH.spacer1)}]};function oy(){return(0,iU.L4)()?(0,n.jsxs)(n.Fragment,{children:[!!(0,o.kc)().aip_flower_garden_ts&&(0,n.jsx)(sN,{}),!!(0,o.kc)().aip_flower_garden_on_copy&&(0,n.jsx)(ob,{}),(0,n.jsx)(o_,{})]}):null}let o_=s.memo(()=>{let e=(0,tO.ut)(a.Ez5?.uiState()?.showDesignLinter,!1),t=(0,p.md)(i7.pR),i=(0,iK.VK)(),l=(0,iK.PM)(),r=!!(0,o.kc)().aip_flower_garden_auto_library_select,d=(0,o.kc)().aip_flower_garden_component_update,x=(0,o.kc)().aip_flower_garden_sidebar;return((0,s.useEffect)(()=>()=>{a.Ez5?.uiState()?.showDesignLinter?.set(!1)},[]),(0,iK.mr)(),(0,iK.vP)(),(0,iK.xg)(),(0,nR.fx)(e,t),e)?l?d?(0,n.jsx)(oj,{children:(0,n.jsx)(nl,{})}):(0,n.jsx)(nl,{}):!r&&i?d?(0,n.jsx)(oj,{children:(0,n.jsx)(n9,{})}):(0,n.jsx)(n9,{}):d?(0,n.jsx)(oj,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ou,{}),x&&(0,n.jsx)(sv,{}),r&&i&&(0,n.jsx)(sl,{})]})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ou,{}),x&&(0,n.jsx)(sv,{}),r&&i&&(0,n.jsx)(sl,{})]}):null});function oj({children:e}){return(0,iK.zO)(),(0,n.jsx)(n.Fragment,{children:e})}function ob(){return!function(){let e=(0,l.wA)(),t=(0,p.md)(iU.ui),i=(0,l.d4)(e=>e.mirror.sceneGraphSelection),n=1===Object.keys(i).length?Object.keys(i)[0]:null;(0,s.useEffect)(()=>{t&&(n&&n===t||(e(eI.F.dequeue({matchType:i$.xp})),p.zl.set(iU.ui,null)))},[t,n,e])}(),null}var ov=i(382256),ok=i(142996),oC=i(513833),oE=i(776968),oS=i(660698),oT=i(896784),ow=i(512038),oN=i(582689),oI=i(307966);function oL({children:e}){return(0,n.jsx)(oI.G.Provider,{value:{loggerEventName:"design_navigate"},children:(0,n.jsx)(ow.s.Provider,{value:{allowLibraryPublish:!0},children:(0,n.jsx)(oN.y0.Provider,{value:oN.X,children:e})})})}var oR=i(55029),oA=i(551037),oO=i(83202),oM=i(530299),oF=i(443208),oz=i(375627),oP=i(693330),oB=i(754446),oD=i(390669),oV=i(861671),oG=i(64004);function oH({dropdownShown:e,pickerShown:t,saveAsState:i,sceneGraphSelection:s}){let r=(0,l.wA)(),a=(0,eO.q5)(),o=(0,j.p8)("currentPage"),d=(0,j.p8)("isReadOnly"),x=(0,j.p8)("currentSelectedProperty"),u=(0,E.m0)(),h=d&&!u,p=(0,oB.Gt)("numSelected"),{exportSettings:m}=(0,oB.pw)("exportSettings"),g=(0,oV.Wd)();return(0,n.jsx)(oD.VF,{isVisible:!0,children:()=>(0,n.jsx)(oV.LI,{currentPage:o,currentSelectedProperty:x,dispatch:r,dropdownShown:e,exportSettings:m,isSelectionRenamable:oV.LI.isSelectionRenamable(Object.keys(s)),numSelected:p,openFile:a,panelWidth:oG.iP,pickerShown:t,recordingKey:"exportsPanel",saveAsState:i,sceneGraphSelection:s,singleNodeName:g,standalone:!0,title:h?(0,c.t)("fullscreen.properties_panel.export"):(0,c.t)("fullscreen.properties_panel.presets")},"export")})}var oq=i(510314),oU=i(512810),o$=i(219636),oK=i(167151),oW=i(88393),oZ=i(800354),oX=i(890719),oY=i(682944);function oQ({dropdownShown:e,pickerShown:t,sceneGraphSelection:i,shownPanels:s,userFlags:l}){let r=(0,eO.q5)(),d=(0,oK.cJ)(),x=(0,oB.tN)("containsSiteWebpages"),u=!s[a.ibQ.FRAME_PRESETS]&&!s[a.ibQ.PENCIL_TOOL]&&!x;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(oD.VF,{isVisible:s[a.ibQ.FRAME_PRESETS],children:()=>(0,n.jsx)(oW.nl,{recordingKey:"framePresetPanel"},"frame-presets")}),!d&&(0,n.jsx)(oD.VF,{isVisible:s[a.ibQ.PENCIL_TOOL],children:()=>(0,n.jsx)(oX.q,{id:"pencilToolPanel",recordingKey:"pencilToolPanel",openFile:r},"pencilToolPanel")}),(0,n.jsx)(oD.VF,{isVisible:u,children:()=>(0,n.jsx)(oY.Z0,{recordingKey:"prototypePanel",dropdownShown:e,pickerShown:t,sceneGraphSelection:i,shouldUseSelectedStyleProperties:!0,userFlags:l},"prototype")}),(0,o.kc)().jsx_debugging&&(0,n.jsx)(oZ.Ay,{recordingKey:"jsxDebugPanel"})]})}function oJ({scrollContainer:e,refMainScrollContainer:t,...i}){(0,oq.S2)();let s=(0,oA.k)(),l=i.propertiesPanelTab,r=(0,j.p8)("topLevelMode"),o=(0,oG.Dj)(i.user),d=r!==a.lyf.PREVIEW&&(r!==a.lyf.BRANCHING||!o)&&r!==a.lyf.DEV_HANDOFF&&l===a.FAf.DESIGN,x=r!==a.lyf.PREVIEW&&r!==a.lyf.BRANCHING&&l===a.FAf.PROTOTYPE,u=r===a.lyf.PREVIEW&&!i.userStateLoaded&&!s||l===a.FAf.INSPECT,c=l===a.FAf.EXPORT,h=l===a.FAf.COMMENT;return(0,n.jsxs)(n.Fragment,{children:[d&&(0,n.jsx)(oP.Y,{scrollContainer:e,...i}),x&&(0,n.jsx)(oQ,{dropdownShown:i.dropdownShown,pickerShown:i.pickerShown,sceneGraphSelection:i.sceneGraphSelection,shownPanels:i.shownPanels,userFlags:i.userFlags}),u&&(0,n.jsx)(oU.q,{scrollContainer:e}),c&&(0,n.jsx)(oH,{dropdownShown:i.dropdownShown,pickerShown:i.pickerShown,saveAsState:i.saveAsState,sceneGraphSelection:i.sceneGraphSelection}),h&&(0,n.jsx)(i.commentsPanel,{})]})}function o0(e){!function(){let{isPropertiesPanelCollapsed:e,setPropertiesPanelCollapsed:t}=(0,oz.iT)(),i=(0,im.Ye)(),n=(0,E.ow)(),r=(0,j.ax)(),o=(0,j.dH)(),d=o===a.NLJ.FRAME||o===a.NLJ.COMMENTS||o===a.NLJ.VECTOR_PENCIL,x=(0,l.d4)(e=>e.mirror.appModel.activeUserAction===a.QOV.DEFAULT),u=(0,oz.ys)();(0,s.useEffect)(()=>{x&&!n&&e&&(d||r)&&t(!1)},[r,x,o,t,e,i,d,n]),(0,s.useEffect)(()=>{u&&t(!0)},[u,t,e])}();let t=(0,j.p8)("showUi");if((0,o.kc)().dont_render_ui&&!t)return(0,n.jsx)(n.Fragment,{});let i=null,r=e=>{i=e};return(0,n.jsx)(o$.j,{recordingKey:e.recordingKey,activeTab:e.propertiesPanelTab,refMainScrollContainer:r,shouldDeferCanvasUpdateOnPanelResize:!0,children:(0,n.jsx)(oJ,{...e,scrollContainer:i,refMainScrollContainer:r})})}var o1=i(831330),o2=i(454903),o5=i(190764);let o3=s.memo(function(){let e=(0,j.aV)(),t=(0,l.d4)(e=>e.loadingState),i=(0,H.UN)(),r=(0,l.d4)(e=>e.mirror.sceneGraphSelection),o=(0,l.d4)(e=>e.currentUserOrgId),d=(0,l.d4)(e=>e.dropdownShown),x=(0,l.d4)(e=>e.fonts),u=(0,l.d4)(e=>e.fileVersion),c=(0,l.d4)(e=>e.installedPluginVersions),h=(0,l.d4)(e=>e.library),p=(0,l.d4)(e=>e.localPlugins),m=(0,l.d4)(e=>e.modalShown),g=(0,l.d4)(e=>e.openFile),f=(0,l.d4)(e=>e.pickerShown),y=(0,l.d4)(e=>e.pickerInStyleCreationShown),_=(0,l.d4)(e=>e.publishedPlugins),b=(0,l.d4)(e=>e.saveAsState),v=(0,l.d4)(e=>e.selectedView),k=(0,l.d4)(e=>e.voice.showWidget),C=(0,l.d4)(e=>e.stylePickerListLayout),S=(0,l.d4)(e=>e.stylePickerShown),T=(0,l.d4)(e=>e.stylePreviewShown),w=(0,l.d4)(e=>e.styleSets),N=(0,l.d4)(e=>e.usedKeyboardShortcuts),I=(0,l.d4)(e=>e.user),L=(0,l.d4)(e=>e.userFlags),R=(0,l.d4)(e=>e.userStateLoaded),A=(0,l.d4)(e=>e.repos),O=(0,l.d4)(e=>e.folders),M=(0,l.d4)(e=>e.teams),F=(0,l.d4)(e=>e.orgById),z=(0,l.d4)(e=>e.orgUsersByOrgId),P=(0,l.d4)(e=>e.userEduGracePeriods),B=(0,l.d4)(e=>e.licenseGroups),D=(0,E.my)()===tF.nT.Design,V=(0,oA.k)(),G=(0,oM.VP)(t,"edit_button_upgrading_to_edit"),q=e||G,U=(0,tO.ut)((0,tT.aY)(),a.FAf.DESIGN),$=(0,tO.J2)(a.Ez5.propertiesPanelState().shownPropertiesPanels),K=(0,tS.Ku)(),W=(0,tS.qw)(),Z=(0,tw.s_)(),X=!(0,oR.Oo)()&&Z,Y=(0,tO.J2)((0,tS.UK)().renderRulers),{isRightPanelCollapsed:Q}=(0,s.useContext)(oF.t),{inProductHelpViewType:J}=(0,ip.A5)(),ee=(0,tw.yO)(),et=(0,oO.T)(),ei=(0,oO.q)(),en=(0,s.useMemo)(()=>V?a.FAf.COMMENT:U,[U,V]);return(0,s.useEffect)(()=>{en!==U&&tT.aY()?.set(en)},[en,U]),(0,n.jsxs)(o5.o,{boundaryKey:"PropertiesPanel",loggedOutDesktopRevampExpAvaialable:D,children:[(0,n.jsx)(o0,{allSavedPlugins:c,colorFormat:K,commentsPanel:o2.L,currentUserOrgId:o,dropdownShown:d,fileVersion:u,folders:O,fonts:x,hasMergedDimensionsAndAutolayout:!0,inProductHelpSidePanelWidth:ee,inProductHelpViewType:J,isCollapsed:Q,isLoading:q,isUIMinimized:ei,justChangedMinimizeUIValue:et,library:h,licenseGroups:B,localPlugins:p,modalShown:m,openFile:g,orgById:F,orgUsersByOrgId:z,pickerInStyleCreationShown:y,pickerShown:f,propertiesPanelSplitPosition:W,propertiesPanelTab:en,publishedPlugins:_,recordingKey:"propertiesPanel",repos:A,rulersVisible:Y,saveAsState:b,sceneGraph:i,sceneGraphSelection:r,selectedView:v,shouldAnimateLoadingState:e,shouldShowBackgroundGradient:X,showVoiceWidget:k,shownPanels:$,stylePickerListLayout:C,stylePickerShown:S,stylePreviewShown:T,styleSets:w,teams:M,usedKeyboardShortcuts:N,user:I,userEduGracePeriods:P,userFlags:L,userStateLoaded:R},(0,n_.tw)()??void 0),(0,n.jsx)(o1.tZ,{})]})});var o4=i(308308),o7=i(495766),o8=i(7331),o6=i(605251),o9=i(389276),de=i(738849),dt=i(998873),di=i(980931),dn=i(917145),ds=i(521348),dl=i(432099),dr=i(171660),da=i(739801),dd=i(10411),dx=i(781018);function du(){let e=(0,eK.e)({overlay:e2.Dqt,priority:eY.N.DEFAULT_MODAL});(0,e$.E)(e.uniqueId,"commentThreadMobileAnnouncementClicked",()=>{(0,eu.sx)("sidebar_announcement_mobile_app_download_prompt_modal_shown"),e.show({})});let t=(0,s.useCallback)(async()=>{(0,eu.sx)("sidebar_announcement_mobile_app_download_prompt_email_me_cta_clicked"),await dl.Ay.post("/api/send_mobile_download_email"),e.complete()},[e]);return(0,n.jsx)(da.h,{isShowing:e.isShowing,modalType:dd.q3.FEATURE_UPDATE,closeButtonStyle:dd.M_.ON_DARK,element:()=>(0,n.jsx)(dc,{onEmailClick:t}),trackingContextName:"mobile_comment_announcement",onClickPrimaryCta:e.complete,onClose:e.complete,onManualDismiss:e.complete})}function dc(e){return(0,n.jsxs)("div",{className:"modal_comment_sidebar_announcement--container--5oh-p",children:[(0,n.jsxs)("div",{className:"modal_comment_sidebar_announcement--imageContainer--Vuo-V",children:[(0,n.jsx)("img",{alt:"Background",src:(0,eD.ck)("e19f2f58bc09414847ad59ff9228e07032e8842c"),className:"modal_comment_sidebar_announcement--image--lyA61"}),(0,n.jsx)("div",{className:"modal_comment_sidebar_announcement--spacer--m02YT"}),(0,n.jsx)(dx.T,{})]}),(0,n.jsxs)("div",{className:"modal_comment_sidebar_announcement--textContainer--btaTy",children:[(0,n.jsx)("div",{className:"modal_comment_sidebar_announcement--title--eiyLq",children:(0,n.jsx)(dr.E,{fontSize:24,fontWeight:"semi-bold",children:(0,c.t)("rcs.mobile_comment_announcement.title")})}),(0,n.jsx)("div",{className:"modal_comment_sidebar_announcement--description--Y8AJE",children:(0,n.jsx)(dr.E,{fontSize:14,children:(0,c.t)("rcs.mobile_comment_announcement.description")})})]}),(0,n.jsxs)("div",{className:"modal_comment_sidebar_announcement--buttonsContainer--UTcgc",children:[(0,n.jsx)(iZ.$n,{variant:"secondary",onClick:e.onEmailClick,iconPrefix:(0,n.jsx)(dn.f,{}),children:(0,c.t)("rcs.mobile_comment_announcement.email_download_link")}),(0,n.jsx)(iZ.$n,{variant:"primary",onClick:()=>{(0,eu.sx)("sidebar_announcement_mobile_app_download_prompt_learn_more_cta_clicked"),tD.Ay.unsafeRedirect("https://help.figma.com/hc/articles/1500007537281-Guide-to-the-Figma-mobile-app#download","_blank")},iconPrefix:(0,n.jsx)(ds.b,{}),children:(0,c.t)("rcs.rcs_shared.learn_more")})]})]})}var dh=i(722850),dp=i(716755);let dm=(0,s.memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M14 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2zm5.5 9a.5.5 0 0 1 .5.5v.5a2 2 0 0 1-2 2h-.5a.5.5 0 0 1 0-1h.5a1 1 0 0 0 1-1v-.5a.5.5 0 0 1 .5-.5M5 17.707V18l.005.102a1 1 0 0 0 .892.893L6 19h7.293L8.5 14.207zm.897-8.702A1 1 0 0 0 5 10v6.293l3.146-3.147.077-.062a.5.5 0 0 1 .63.062l5.69 5.69a1 1 0 0 0 .452-.734L15 18v-8a1 1 0 0 0-.898-.995L14 9H6zM19.5 14a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0v-1a.5.5 0 0 1 .5-.5M12 11a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7.5 0a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0v-1a.5.5 0 0 1 .5-.5m0-3a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0v-1a.5.5 0 0 1 .5-.5m-13-4a.5.5 0 1 1 0 1H6a1 1 0 0 0-1 1v.5a.5.5 0 0 1-1 0V6a2 2 0 0 1 2-2zm12.515-1.56c.126-.505.844-.505.97 0L20.3 3.7l1.26.314c.505.127.505.845 0 .971L20.3 5.3l-.315 1.26c-.126.504-.844.504-.97 0L18.7 5.3l-1.26-.315c-.505-.126-.505-.844 0-.97L18.7 3.7zM9.5 4a.5.5 0 1 1 0 1h-1a.5.5 0 0 1 0-1zm3 0a.5.5 0 0 1 0 1h-1a.5.5 0 0 1 0-1zm3.1.01a.5.5 0 0 1 0 .98l-.1.01h-1a.5.5 0 0 1 0-1h1z"})})});function dg(){let e=(0,tO.ut)(a.ruz?.expandState().dragTarget,null);return e?(0,n.jsx)(u.tH,{boundaryKey:"ExpandImageOverlay",fallback:u.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:h.e.AI_PRODUCTIVITY},children:(0,n.jsx)(df,{dragTarget:e})}):null}function df({dragTarget:e}){let t=C([e.guid],!0),i=(0,g.MG)({subscribeToUpdates_expensive:!0}),l=(0,g.TZ)({subscribeToUpdates_expensive:!0}),r=(0,s.useCallback)((t,i,n)=>{let s=t.x+n,l=t.x+t.width/2-i.width/2,r=t.x+t.width-i.width-n,o=t.y+n,d=t.y+t.height/2-i.height/2,x=t.y+t.height-i.height-n;switch(e.direction){case a._ns.TOP:return[l,o];case a._ns.BOTTOM:return[l,x];case a._ns.LEFT:return[s,d];case a._ns.RIGHT:return[r,d];case a._ns.TOP_LEFT:return[s,o];case a._ns.TOP_RIGHT:return[r,o];case a._ns.BOTTOM_LEFT:return[s,x];case a._ns.BOTTOM_RIGHT:return[r,x]}},[e.direction]),o=(0,s.useCallback)(()=>{a.ruz&&a.ruz.expandState().dragTarget.set(null)},[]);return(0,n.jsx)(f.lM,{targetRect:{...t,x:t.x+i,y:t.y+l},positionXY:r,children:(0,n.jsx)(L.m,{role:"region","aria-label":(0,c.t)("image_ai.expand.label"),children:(0,n.jsx)("div",{className:"x71s49j",children:(0,n.jsx)(ea.K,{"aria-label":(0,c.t)("image_ai.expand.label"),variant:"primaryCircle",onClick:o,size:"lg",children:(0,n.jsx)(dm,{})})})})})}var dy=i(508504),d_=i(57712),dj=i(991263),db=i(470875),dv=i(871052),dk=i(5175),dC=i(877578),dE=i(735652),dS=i(866810);let dT=function(){return null};var dw=i(996981),dN=i(897024),dI=i(681075),dL=i(11216),dR=i(12480),dA=i(446071);let dO=s.memo(function({shouldShowDragAndDropBorder:e}){let t=(0,j.p8)("isReadOnly"),i=(0,l.d4)(e=>e.progressBarState),h=(0,j.p8)("loadingEmbeds"),p=(0,tw.L3)(),m=(0,tM.Lk)(),g=(0,s.useRef)(null),f=(0,l.d4)(e=>e.userFlags),y=!!(0,o.kc)().internal_only_debug_tools||!!f.has_cursor_bot_onboarding_v2,_=(0,l.d4)(e=>e.openFile),b=_?_.key:"";(0,tC.Gb)(b),(0,tA.W)(),(0,tz.qh)();let v=(0,tI.BI)(),k=(0,tk.e)(),C=(0,tm.l7)(),E=(0,tO.ut)((0,tS.UK)().enableCodegenMcpServer,!1),S=T(),w=(0,x.BE)(),N=(0,tR.o3)(tR.nt.collabToolsInDesign),I=(0,l.d4)(e=>e.multiplayerEmoji),R=(0,n.jsx)(L.m,{role:"region","aria-label":(0,c.t)("fullscreen_actions.left_sidebar_label"),children:C?(0,n.jsx)(u.tH,{boundaryKey:"DevModeLeftPanel",fallback:u.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:r.eBU.DEVELOPER_TOOLS},children:(0,n.jsx)(eB.O,{})}):(0,n.jsx)(o6.m,{})});return(0,n.jsxs)(oL,{children:[(0,n.jsx)(tE.ED,{}),(0,n.jsxs)(o4.sk,{children:[i.mode!==a.Oin.OFF&&(0,n.jsx)("div",{className:dA._q}),(0,n.jsxs)(iq.pO,{initialFilterState:{currentPage:!1},children:[h.map(e=>(0,n.jsx)(oE._,{nodeId:e},`loading-embed-${e}`)),w&&(0,o.kc)().aip_expand_image&&(0,n.jsx)(dg,{}),w&&S&&(0,n.jsx)(ew,{}),(0,n.jsx)(o7.qn,{}),(0,n.jsx)(dw.u,{}),(0,o.kc)().aip_mw_video&&(0,n.jsx)(d_.H,{}),p&&(0,n.jsx)(di.n,{}),(0,o.kc)().ce_al_experiments_on&&(0,n.jsx)(di.n,{}),(0,n.jsx)(oC.G,{}),(0,n.jsx)(oC.b,{}),(0,n.jsx)(dy.J,{}),!C&&!k&&(0,n.jsx)(iH.b,{}),(0,o.kc)().dt_mcp_auto_resources&&E&&(0,n.jsx)(d.y6,{}),(0,n.jsx)(o7.XI,{commentsDetailContainerRef:g}),(0,n.jsx)(dR.Z,{}),(0,o.kc)().cursor_bot&&y&&(0,n.jsx)(de.S,{}),(0,n.jsx)(o8.X,{}),N&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(dj.c7,{}),(0,n.jsx)(oS.S4,{multiplayerEmoji:I})]}),(0,n.jsx)(ov.J,{}),(0,n.jsx)(o9.Nz,{}),(0,n.jsx)("div",{ref:g}),!(0,tN.T)()&&R,!t&&(0,n.jsx)(dh.E,{}),(0,n.jsx)(ok.G,{children:C?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(dM,{}),!!v?.shouldOptimizeForIpadApp&&(0,n.jsx)(dE.K,{}),!!v?.shouldOptimizeForIpadApp&&(0,n.jsx)(dS.t,{})]})}),(0,o.kc)().bake_canvas&&(0,n.jsx)(dv.tX,{}),e&&(0,n.jsx)(o9.X5,{}),(0,o.kc)().aip_flower_garden&&(0,n.jsx)(oy,{})]}),(0,n.jsx)(tP.A,{editorType:tF.nT.Design,openFile:_}),(0,n.jsx)(dp.l,{defaultViewTabsAvailable:!0,defaultViewAssetsTabVisible:!0}),(0,n.jsx)(dT,{})]}),m&&(0,n.jsx)(dt.K,{className:dA.PA,children:(0,n.jsx)(dC.s,{})})]})}),dM=s.memo(function(){let e=(0,j.p8)("topLevelMode"),t=(0,j.ax)(),i=(0,j.dH)();return(0,tL.z)({topLevelMode:a.lyf.PREVIEW,eventName:"Preview Mode Selection Changed",teamFilesOnly:!0}),s.useEffect(()=>{t&&e===a.lyf.PREVIEW&&i!==a.NLJ.COMMENTS&&(0,tT.NT)(a.FAf.INSPECT)},[t,e,i]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o3,{}),(0,n.jsx)(dF,{})]})}),dF=s.memo(function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tB.p,{children:(0,n.jsx)(t4.NuxOnboardingOverlay,{entryPoint:dk.C5.Design})}),(0,n.jsx)(tB.p,{featureFlag:"starting_points_modal",children:(0,n.jsx)(iI,{})}),(0,n.jsx)(tB.p,{children:(0,n.jsx)(t3,{})}),(0,n.jsx)(tB.p,{children:(0,n.jsx)(th,{})}),(0,n.jsx)(tB.p,{children:(0,n.jsx)(tv,{})}),(0,n.jsx)(tB.p,{children:(0,n.jsx)(db.e,{})}),(0,n.jsx)(tB.p,{featureFlag:"mobile_prompt_sidebar_modal",children:(0,n.jsx)(du,{})}),(0,n.jsx)(tB.p,{children:(0,n.jsx)(e4.S,{})}),(0,n.jsx)(tB.p,{children:(0,n.jsx)(iG,{})}),(0,n.jsx)(tB.p,{children:(0,n.jsx)(e3,{})}),(0,n.jsx)(tB.p,{children:(0,n.jsx)(tW,{})}),(0,n.jsx)(tB.p,{featureFlag:"cheddar",children:(0,n.jsx)(dN.Ab,{})}),(0,n.jsxs)(tB.p,{featureFlag:"buzz_import_from_design",children:[(0,n.jsx)(eP.Hm,{}),(0,n.jsx)(ez,{})]}),(0,n.jsx)(tB.p,{featureFlag:"bob_template_gen",children:(0,n.jsx)(dI.E,{})})]})});function dz(){let[e,t]=(0,s.useState)(!1);return(0,n.jsx)(oT.c,{loadedCommentsProvider:!1,children:(0,n.jsx)(dL.v,{setShouldShowDragAndDropBorder:t,isDragTarget:!1,children:(0,n.jsx)(dO,{shouldShowDragAndDropBorder:e})})})}},73632:(e,t,i)=>{i.d(t,{D:()=>a,G:()=>r});var n=i(754446),s=i(510314),l=i(64004);function r(){let e=(0,s.GV)();return(0,l.M0)(e)}function a(e){let t=(0,s.GV)(),{stateGroupSelectionInfo:i}=(0,n.fC)("stateGroupSelectionInfo");return(0,l.tV)(t,i)&&1===e}},760893:(e,t,i)=>{i.d(t,{f:()=>c});var n=i(104076),s=i(951002),l=i(641518),r=i(390036),a=i(933688),o=i(449387),d=i(188665),x=i(67282),u=i(128962);function c({action:e}){switch(e.type){case d.ZU.FLYOUT:return(0,n.jsx)(a.E,{name:"selection_actions_button",alsoTrack:()=>({layerButtonAction:`open_flyout_${(0,r.uc)(e.dropdownKey)}`}),children:(0,n.jsx)(u.F,{flyoutConfig:e,recordingKey:l.Pt(o.If,e.flyoutRecordingKey)})},e.dropdownKey);case d.ZU.ACTION:return(0,n.jsx)(a.E,{name:"selection_actions_button",alsoTrack:()=>({layerButtonAction:`${(0,r.uc)(e.action)}`}),children:(0,n.jsx)(x.QE,{item:e,numUnreadComments:0,recordingKey:o.If})},e?.reactKey??e?.recordingKey);case d.ZU.CUSTOM_ACTION:return(0,n.jsx)(o.XS,{item:e},e.recordingKey);case d.ZU.ACTION_SUBMENU:return(0,n.jsx)(a.E,{name:"selection_actions_button",alsoTrack:()=>({layerButtonAction:`open_submenu_${(0,r.uc)(e.getTitle())}`}),children:(0,n.jsx)(x.QE,{item:e,numUnreadComments:0,recordingKey:l.Pt(o.If,e.recordingKey)})},e.recordingKey);default:(0,s.xb)(e)}}},908258:(e,t,i)=>{i.d(t,{P:()=>p});var n=i(104076),s=i(716976),l=i(382629),r=i(120440),a=i(933688),o=i(449387),d=i(55470),x=i(188665),u=i(350081),c=i(760893),h=i(250828);let p=s.memo(e=>{let t=s.useMemo(()=>e.actions.map(e=>e.filter(e=>(0,l.Vq)(e))),[e.actions]),i=(0,u.U)(t),p=function(e){let t=(0,o.fJ)();return(0,s.useMemo)(()=>{let i=!1,n=e.flat().filter(e=>("preventHoisting"in e&&e.preventHoisting&&(i=!0),!("preventHoisting"in e)||!e.preventHoisting));return(0,o.b_)(t,n,i)},[e,t])}(i),m=(0,o.yG)(i,p),g=m.reduce((e,t)=>e+t.length,0)>0;return(0,n.jsxs)("div",{...r.xk(h.R.selectionActionsButtons),children:[p.map(e=>{let t=e.type===x.ZU.FLYOUT?e.flyoutRecordingKey:"reactKey"in e?e.reactKey:e.recordingKey;return(0,n.jsx)(c.f,{action:e},t)}),g&&(0,n.jsx)(a.E,{name:"selection_actions_overflow_menu",children:(0,n.jsx)(d.S,{enabledToolbarItems:m,recordingKey:"selectionActionsButtons"})})]})});p.displayName="SelectionActionsButtons"},143307:(e,t,i)=>{i.d(t,{W:()=>o});var n=i(104076),s=i(120440),l=i(737139),r=i(962326),a=i(250828);function o(e){let t=(0,r.w)();return(0,n.jsxs)(l.Zk,{style:{paddingBottom:0},ref:t,children:[(0,n.jsxs)("div",{...s.xk(a.R.nameAndActionsContainer),children:[e.selectionName,e.selectionActionsButtons]}),(0,n.jsx)("div",{...s.xk(a.R.selectionActionsChildren),children:e.children})]})}},418204:(e,t,i)=>{i.d(t,{Y:()=>p});var n=i(104076),s=i(716976),l=i(120440),r=i(192075),a=i(978526),o=i(328996),d=i(881754),x=i(894210),u=i(691201);function c({nodeTypeString:e}){let t=s.useRef(null),[i,l]=s.useState(!1),r=s.useCallback(()=>{t.current&&l(t.current.offsetWidth<t.current.scrollWidth)},[]);return s.useLayoutEffect(()=>{r();let e=new ResizeObserver(r);return t.current&&e.observe(t.current),()=>{e.disconnect()}},[e,r]),(0,n.jsx)("div",{ref:t,className:u.aj,"data-tooltip-type":i?x.Ib.TEXT:void 0,"data-tooltip":i?e:void 0,"data-testid":"node-type-display",children:e})}var h=i(250828);let p=s.memo(e=>{let{nodeCount:t,nodeType:i,nodeTypeString:s}=e,x=(0,d.g)();return i?(0,n.jsx)("div",{ref:x,...l.xk(h.R.selectionName),children:(()=>{switch(i){case"MIXED":return(0,n.jsx)("div",{className:u.Zp,children:(0,n.jsx)("span",{children:(0,r.t)("fullscreen.properties_panel.layer_header.node_type_multiple_selected",{count:t})})});case"SYMBOL":return(0,n.jsx)(a.R,{alwaysShowParentComponent:!0,shouldHideComponentIcon:!0,unfocusedInputOverridesClassName:u.XS,focusedInputOverridesClassName:u.sE});case"INSTANCE":return(0,n.jsx)(o.W,{isInSelectionActionsPanel:!0});default:return(0,n.jsx)(c,{nodeTypeString:s})}})()}):null});p.displayName="SelectionName"},573653:(e,t,i)=>{i.d(t,{Y:()=>o});var n=i(104076),s=i(192075),l=i(170907),r=i(737139),a=i(973228);function o({onExpand:e}){return(0,n.jsx)(r.Zk,{"data-testid":"toggle-simplified-panels",className:a.aW,children:(0,n.jsx)(l.z,{onClick:e,recordingKey:"toggleSimplifiedPanels",children:(0,s.tx)("design_systems.component_properties.show_more_properties")})})}},57712:(e,t,i)=>{i.d(t,{H:()=>S});var n=i(104076),s=i(716976),l=i(903927),r=i(276800),a=i(584781),o=i(795033),d=i(165681),x=i(772523),u=i(223837),c=i(176836),h=i(692042),p=i(74620),m=i(835307),g=i(569258),f=i(749484),y=i(266808),_=i(980852),j=i(609817),b=i(88180),v=i(185117),k=i(382827);function C(e){return e?e.richMediaInfo?.richMediaType==="VIDEO"?e.childrenGuids[0]??null:e.hasEnabledVideoPaint?e.guid:null:null}function E(e){let t=C(e.mirror.sceneGraph.get(e.mirror.appModel.hoveredNode));return t?[t]:[]}function S(){let e=function(){let e=(0,p.Mw)(),t=(0,l.d4)(E);return(0,s.useMemo)(()=>{let i=[...t],n=C(e);return n&&i.push(n),[...new Set(i)]},[t,e])}();return e.length?(0,n.jsx)(T,{videoNodeIds:e}):null}function T({videoNodeIds:e}){let t=function(e){let t=(0,s.useCallback)((e,t)=>e.nodeId?{nodeId:e.nodeId,position:t}:void 0,[]);return(0,u.tB)("VideoOverlays",e,t,{useFlushSyncExpensive:!0})}(e),i=(0,h._X)({subscribeToUpdates_expensive:!0});return i?(0,n.jsx)(n.Fragment,{children:Object.entries(t).map(([e,t])=>(0,n.jsx)(w,{nodeId:e,position:t.position,viewportInfo:i},e))}):null}function w({nodeId:e,position:t,viewportInfo:i}){let[u,C]=(0,s.useState)(!1),E=(0,k.sO)(),S=(0,p.KH)(),T=(0,s.useMemo)(()=>Object.keys(S),[S]),w=(0,l.d4)(e=>e.mirror.sceneGraph),N=(0,s.useMemo)(()=>(0,h.Yb)(i,t),[i,t]),I=(0,m.wA)((e,t)=>{let i=e.get(t);if(!i||!i.hasEnabledVideoPaint)return null;let n=i.fills.findIndex(e=>c.y7(e)?.video?.hash);if(-1===n)return null;let s=i.fills[n];return s&&s.video?.hash?{hexHash:(0,a.nj)(s.video.hash),index:n,showControls:!!(i.videoPlayback?.showControls||i.isInImmutableFrame)}:null},e),[L,R,A,O,M]=function(e,t,i,n,l,r){let[a,d]=(0,s.useState)("dormant"),[x,u,c]=(0,b.J)(null),[h,p,m]=(0,b.J)(null),[g,k,C]=(0,b.J)(null),[E]=(0,o.fp)(v.oe),S=function(e,t,i,n,l,r,a,o){let d=(0,s.useRef)(r),x=(0,s.useRef)(a);return(0,s.useCallback)(()=>{if(!e)return;t("loading");let s=document.createElement("video");s.crossOrigin="anonymous",s.autoplay=!0,s.muted=0===o,s.volume=o,i(s);let r=document.createElement("div");r.appendChild(s),r.style.width=`${d.current}px`,r.style.height=`${x.current}px`,document.body.appendChild(r),n(r),async function(){e&&l(await (0,f.mc)(null,s,e))}()},[e,t,l,i,n,o])}(t,d,m,C,c,n,l,E[e]?.currentVolume!==void 0?E[e].currentVolume:1),T=(0,s.useCallback)(()=>{if(x.current){try{x.current.dispose()}catch(e){console.error("Error disposing of video player",e)}c(null)}function t(){let t=(0,_.UN)().get(e);t&&null!=i&&(y.Ez5?.markContainingIndependentLayerNodesDirty(t.guid)||y.Ez5?.invalidateCanvas(),y.Ez5?.moveFromIndependentRenderLayer(t.guid),t.invalidateCanvasSpaceBoundsForSelfAndParents())}h.current&&h.current.parentNode&&h.current.remove(),m(null),g.current&&g.current.parentNode&&g.current.remove(),C(null),y.Ez5?.removeAllVideoNodeReferences(e),d("dormant"),t(),setTimeout(t,0)},[e,i,x,c,d,h,m,g,C]);return function(e,t,i,n,l,r){let a=(0,s.useRef)(r);a.current=r,(0,s.useEffect)(()=>{i&&n&&n.parentNode&&null!=t&&(i.on("playing",()=>{l("playing");let i=(0,_.UN)().get(e);if(i){i.initializeVideoTextureInFillPaint(t,n.videoWidth,n.videoHeight),i.setVideoElementInFillPaint(t,n),y.Ez5?.moveToIndependentRenderLayer(i.guid);let s=()=>{if(!a.current&&(i=(0,_.UN)().get(e))){let e=Math.floor(1e3*n.currentTime);i.setVideoCurrentTimeInFillPaint(t,e),i.setVideoIsPlayingInFillPaint(t,!n.paused),y.Ez5?.markContainingIndependentLayerNodesDirty(i.guid)||y.Ez5?.invalidateCanvas(),i.invalidateCanvasSpaceBoundsForSelfAndParents()}};if("requestVideoFrameCallback"in HTMLVideoElement.prototype){let e=()=>{s(),n.requestVideoFrameCallback(e)};e()}else{let e=()=>{s(),requestAnimationFrame(e)};e()}}}),_.UN().get(e)?.videoPlayback?.muted&&(i.muted(!0),i.volume(0)),i.play())},[e,t,i,n,l])}(e,i,u,p,d,r),(0,s.useEffect)(()=>()=>{T()},[T]),(0,s.useEffect)(()=>{let e=(0,j.tG)().subscribeToContextLost(()=>{T()});return()=>{e()}},[T]),[p,k,a,S,T]}(e,I?.hexHash??null,I?.index??null,t.width*i.zoomScale,t.height*i.zoomScale,i.isPanning||i.isZooming),F=(0,s.useCallback)(t=>{let i=w.get(e),n=i?.parentNode?.type||"";if((0,g.MT)(n)){let e=i?.parentGuid;e&&!T.includes(e)&&x.tJ([e])}else T.includes(e)||x.tJ([e]);t&&"dormant"!==A?t?.paused?t?.play():t?.pause():(C(!1),O())},[A,O,e,T,w]),z=(0,f.DD)(e),P=(0,f.ZU)(e),[B,D]=(0,o.fp)(v.H),{isVideoNodeHovered:V,pointerDownOnVideo:G}=B,H=(0,s.useCallback)((e,t)=>{D({isVideoNodeHovered:e,pointerDownOnVideo:t})},[D]);return I&&I.showControls?(0,n.jsx)("div",{style:{position:"fixed",width:t.width*i.zoomScale,height:t.height*i.zoomScale,top:i.y,left:i.x,transform:`translate(${N.x}px, ${N.y}px) rotate(${t.angle}deg)`,transformOrigin:"top left",pointerEvents:"none"},children:(0,n.jsx)("div",{style:{pointerEvents:"auto"},children:(0,n.jsx)(d._L,{didAutoplayOnSelection:!1,hasEnded:u,isLoading:"loading"===A,isMaximized:!1,isVideoHovered:!0,isVideoNodeHovered:V,mediaHash:I.hexHash,pointerDownOnVideo:G,setHasEnded:e=>{C(e),e&&M()},setIsMaximized:r.lQ,setIsVideoHovered:r.lQ,setVideoControls:H,shouldHideControlBar:P,shouldHideFullscreenButton:E,shouldHidePlaybackButton:z,toggleVideoPlayback:F,videoContainerElement:R,videoElement:L})})}):null}},991263:(e,t,i)=>{i.d(t,{c7:()=>O});var n=i(104076),s=i(716976),l=i(903927),r=i(681398),a=i(192075),o=i(211862),d=i(141524),x=i(894210),u=i(826160),c=i(314788),h=i(88314),p=i(983500),m=i(345477),g=i(223837),f=i(692042),y=i(594440),_=i(404343);let j=(0,p.hG)(_.Yub),b=(0,p.hG)(_.Dts)+4;function v({stamp:e,renderChildren:t}){let i=(0,f._X)({subscribeToUpdates_expensive:!0}),[l,r]=(0,s.useState)(null),a=(0,m.Yk)(),[o,d]=(0,s.useState)(x.Zj.ABOVE),[u,c]=(0,s.useState)(null),p=e.guid;(0,s.useEffect)(()=>{let e=`stamp-tooltip-${p}`,t=(0,g.EE)(e,[p],e=>r(e.position));return r(t.currentNodePosition[p]?.position||null),()=>{(0,g.lB)(e)}},[p]);let _=(0,s.useMemo)(()=>l?(0,f.Yb)(i,l.absoluteBounds):null,[l,i]),v=(0,s.useMemo)(()=>_?{..._,x:_.x+i.x,y:_.y+i.y}:null,[_,i.x,i.y]),k=(0,s.useMemo)(()=>!!_&&(0,f.ZT)(_,i),[_,i]),C=(0,s.useCallback)((e,t,n)=>{let s;let l=i.y+10,r=i.y+i.height-10-a-t.height,o=i.x+10,d=i.x+i.width-10-t.width,u=x.Zj.ABOVE,c=(0,h.qE)((0,y.Al)(e,t),o,d);return c+j+b>e.x+e.width?(c=(0,h.qE)(e.x+e.width+n,o,d),u=x.Zj.RIGHT):c+t.width-j-b<e.x&&(c=(0,h.qE)(e.x-t.width-n,o,d),u=x.Zj.LEFT),u===x.Zj.LEFT||u===x.Zj.RIGHT?s=(0,y.tJ)(e,t):(s=(0,y.T1)(e,t,n))<l&&(s=(0,y.DH)(e,t,n),u=x.Zj.BELOW),{pos:u,x:c,y:(0,h.qE)(s,l,r)}},[a,i]),E=(0,s.useCallback)((e,t,i)=>C(e,t,i).x,[C]),S=(0,s.useCallback)((e,t,i)=>C(e,t,i).y,[C]),T=(0,s.useCallback)((e,t,i,n)=>{if(!v)return;let s=C(v,i,n).pos;d(s),c(n=>{let l=function({targetRect:e,tooltipRect:t,tooltipPosition:i}){let n=e.x-t.x+e.width/2,s=e.y-t.y+e.height/2,l=t.width-2*j-b,r=t.height-2*j-b;switch(i){case x.Zj.ABOVE:return{left:(0,h.qE)(n-j,b,l),top:Math.floor(t.height)};case x.Zj.BELOW:return{left:(0,h.qE)(n-j,b,l),top:-j};case x.Zj.RIGHT:return{left:-j,top:(0,h.qE)(s-j,b,r)};case x.Zj.LEFT:return{left:Math.floor(t.width),top:(0,h.qE)(s-j,b,r)}}}({targetRect:v,tooltipRect:{x:e,y:t,width:i.width,height:i.height},tooltipPosition:s});return n&&l.top===n.top&&l.left===n.left?n:l})},[C,v]);return v&&k?(0,n.jsx)(y.lM,{style:{WebkitUserSelect:"none"},targetRect:v,offset:j,positionX:E,positionY:S,onPosition:T,children:t({arrowPosition:u,tooltipPosition:o})}):null}let k="stamp_overlay--userText--FdBYI ellipsis--ellipsis--Tjyfa",C="stamp_overlay--tRexAvatarForeground--6Qkya",E={[x.Zj.ABOVE]:"stamp_overlay--downArrow--VJLl5 stamp_overlay--arrow--F8-y5",[x.Zj.BELOW]:"stamp_overlay--upArrow--PCqYY stamp_overlay--arrowInset--8zLXg stamp_overlay--arrow--F8-y5",[x.Zj.RIGHT]:"stamp_overlay--leftArrow--u3dvc stamp_overlay--arrow--F8-y5",[x.Zj.LEFT]:"stamp_overlay--rightArrow--G7DIa stamp_overlay--arrow--F8-y5"},S={[x.Zj.ABOVE]:"stamp_overlay--animationUp--Pq4mv stamp_overlay--animationBase--a-FJI",[x.Zj.BELOW]:"stamp_overlay--animationDown--mBXfv stamp_overlay--animationBase--a-FJI",[x.Zj.RIGHT]:"stamp_overlay--animationRight--2KY5g stamp_overlay--animationBase--a-FJI",[x.Zj.LEFT]:"stamp_overlay--animationLeft--daYLK stamp_overlay--animationBase--a-FJI"};function T(e){let t=e.mirror.sceneGraph,i=Object.keys(e.mirror.sceneGraphSelection);if(1!==i.length)return null;let n=t.get(i[0]);return n&&"STAMP"===n.type?n:null}function w(e){let t=e.mirror.sceneGraph.get(e.mirror.appModel.hoveredNode);return t&&"STAMP"===t.type?t.guid:null}function N({shouldShowAvatar:e,avatarEntity:t,text:i}){return(0,n.jsxs)(n.Fragment,{children:[e&&(0,n.jsx)(u.Ro,{size:16,entity:t}),(0,n.jsx)("div",{className:k,children:i})]})}function I({size:e}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 16 16",fill:"none",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_1941_43995)",children:[(0,n.jsx)("rect",{className:"stamp_overlay--tRexAvatarBackground--tprTe",width:"16",height:"16"}),(0,n.jsx)("path",{className:C,d:"M3 9.90476V8H9V9.42857V10.8571V13C9 15.2091 7.20914 17 5 17H0L-0.71875 11.7143L3 9.90476Z"}),(0,n.jsx)("path",{className:C,fillRule:"evenodd",clipRule:"evenodd",d:"M4.81038 2.08926C3.50282 2.45482 3 3.93364 3 5.29134V8C3 8.55228 3.44771 9 4 9H13C13.5523 9 14 8.55228 14 8V6.16667C14 4.50981 12.6569 3.16667 11 3.16667H8.24357C7.98467 3.16667 7.73678 3.06531 7.53359 2.90486C7.09796 2.56089 6.25898 2 5.42 2C5.21483 2 5.00965 2.03354 4.81038 2.08926ZM5.75 5.5C6.16421 5.5 6.5 5.16421 6.5 4.75C6.5 4.33579 6.16421 4 5.75 4C5.33579 4 5 4.33579 5 4.75C5 5.16421 5.33579 5.5 5.75 5.5Z"}),(0,n.jsx)("path",{className:C,d:"M11.8504 13.8881C10.8861 14.05 10.9477 12.5057 9.64966 12.5057C8.35158 12.5057 7.14966 13.3116 7.14966 12.1587C7.14966 11.0057 8.35155 11 9.64962 11C11.5299 11 12.8147 13.7262 11.8504 13.8881Z"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_1941_43995",children:(0,n.jsx)("circle",{r:"8",cx:"8",cy:"8",fill:"black"})})})]})}function L({stamp:e,shouldAnimate:t,testId:i}){let s=e.stampData?.stampedByUserId||null,l=e.stampData?.userId||null,{user:r,loading:x}=(0,d.wW)(s),{user:u,loading:c}=(0,d.wW)(l),h=o.q5()?.org?.name,p=(()=>{let t=!e.isFaceStamp,i=!!e.stampData?.votingSessionId;if(s&&x||l&&c)return(0,n.jsxs)(n.Fragment,{children:[t&&(0,n.jsx)("div",{className:"stamp_overlay--loadingAvatar--DkN-J stamp_overlay--loadingBase--2UAyM"}),(0,n.jsx)("div",{className:"stamp_overlay--loadingUserText--845yi stamp_overlay--loadingBase--2UAyM"})]});if(r){let e=r.handle;return(0,n.jsx)(N,{shouldShowAvatar:t,avatarEntity:r,text:i?(0,a.tx)("voting.stamp_tooltip.vote",{userName:e}):l&&s!==l?(0,n.jsxs)("div",{className:"stamp_overlay--faceStampTooltipText--bMf1l",children:[u?.handle," ",(0,n.jsx)("br",{}),(0,n.jsx)("p",{className:"stamp_overlay--stampedByText--fK8AK",children:(0,a.tx)("whiteboard.stamp.stamped_by_tooltip",{userName:e})})]}):e})}if(u){let e=u.handle;return(0,n.jsx)(N,{shouldShowAvatar:t,avatarEntity:u,text:i?(0,a.tx)("voting.stamp_tooltip.vote",{userName:e}):e})}if(l&&(0,d.Fl)(l)||s&&(0,d.Fl)(s)){let e=i?(0,a.tx)("voting.stamp_tooltip.visitor_vote"):h?(0,a.tx)("voting.stamp_tooltip.visitor_with_org",{orgName:h}):(0,a.tx)("voting.stamp_tooltip.visitor_without_org");return(0,n.jsx)(N,{shouldShowAvatar:t,avatarEntity:{id:s||l||void 0},text:e})}return s||l?(0,n.jsx)(N,{shouldShowAvatar:t,avatarEntity:{},text:(0,a.tx)("voting.stamp_tooltip.unavailable")}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I,{size:16}),(0,n.jsx)("div",{className:k,children:(0,a.tx)("voting.stamp_tooltip.old_stamp")})]})})();return(0,n.jsx)(v,{stamp:e,renderChildren:({tooltipPosition:e,arrowPosition:s})=>(0,n.jsxs)("div",{className:t?S[e]:"",children:[(0,n.jsx)("div",{className:"stamp_overlay--tooltip---xJx5","data-testid":i,children:p}),s&&(0,n.jsx)("div",{className:E[e],style:s})]})})}let R=s.memo(function(){let e=(0,l.d4)(T);return(0,n.jsx)(n.Fragment,{children:e&&(0,n.jsx)(L,{stamp:e,shouldAnimate:!0,testId:"selected-stamp-tooltip"},e.guid)})}),A=s.memo(function(){let e=(0,l.d4)(w),[t,i]=(0,s.useState)(null),[r,a]=(0,s.useState)(!0),o=(0,l.d4)(e=>t?e.mirror.sceneGraph.get(t):null),d=(0,l.d4)(T),x=(0,c.d0)();return((0,s.useEffect)(()=>{let n=!!t;if(e!==t&&(e||t)){if(e&&n){a(!1),i(e);return}if(e&&!n){let t=setTimeout(()=>{i(e)},100);return()=>clearTimeout(t)}if(!e&&n){let e=setTimeout(()=>{i(null),a(!0)},300);return()=>clearTimeout(e)}}},[e,t]),d?.isFaceStamp&&!d?.stampData?.votingSessionId&&x)?null:(0,n.jsx)(n.Fragment,{children:o&&(0,n.jsx)(L,{stamp:o,testId:"hovered-stamp-tooltip",shouldAnimate:r},o.guid)})}),O=s.memo(function(){return(0,r.aJ)()?(0,n.jsx)(A,{}):(0,n.jsx)(R,{})})},571861:(e,t,i)=>{i.d(t,{iX:()=>V});var n=i(104076),s=i(716976),l=i(99723),r=i(266808),a=i(812714),o=i(291705),d=i(466890),x=i(633065),u=i(795161),c=i(192075),h=i(58212),p=i(814082),m=i(130689),g=i(675477),f=i(443192),y=i(17057),_=i(944350),j=i(821359),b=i(977899),v=i(894210),k=i(116553),C=i(753703),E=i(484655),S=i(403206),T=i(683785),w=i(695370),N=i(479929),I=i(974528);let{hasCommandModifier:L}=o.KeyBindingUtil;var R=(e=>(e.Bold="toggle-bold",e.Italic="toggle-italic",e.Strikethrough="toggle-strikethrough",e))(R||{}),A=(e=>(e.UL="toggle-unordered-list",e.OL="toggle-ordered-list",e))(A||{}),O=(e=>(e.ListBackspace="handle-list-backspace",e.Undo="handle-undo",e.Redo="handle-redo",e.Link="toggle-link",e))(O||{});let M={BOLD:{fontWeight:600},HIGHLIGHT:{background:"var(--color-texthighlight)"}},F={"toggle-bold":"BOLD","toggle-italic":"ITALIC","toggle-strikethrough":"STRIKETHROUGH"},z={"toggle-unordered-list":"unordered-list-item","toggle-ordered-list":"ordered-list-item"},P=new Set(["HIGHLIGHT",...Object.values(F)]);function B(){let e=[{strategy:w.Er,component:e=>(0,n.jsx)("span",{className:I.lE,spellCheck:!1,children:e.children})},{strategy:w.f7,component:e=>(0,n.jsx)("span",{className:I.lE,spellCheck:!1,children:e.children})},{strategy:w.cL,component:e=>(0,n.jsx)("span",{className:I.Zg,spellCheck:!1,children:e.children})},{strategy:w.mi,component:e=>{let t="",i="";if(e.entityKey&&e.contentState){let n=e.contentState.getEntity(e.entityKey).getData();t=n.hyperlink,i=n.commentEditorType}return(0,n.jsx)("span",{className:I.JM,"data-tooltip":v.MW.HYPERLINK_POPUP,"data-tooltip-can-edit":!0,"data-tooltip-entity-key":e.entityKey,"data-tooltip-interactive":!0,"data-tooltip-precise":!0,"data-tooltip-show-above":!0,"data-tooltip-target-ref-key":i,"data-tooltip-type":v.Ib.SPECIAL,"data-tooltip-unconstrain-width":!0,"data-tooltip-url-string":t,spellCheck:!1,children:e.children})}},{strategy:w.DL,component:e=>{let t=(0,N.Vt)(e.decoratedText);if(1!==t.length)return(0,n.jsx)(n.Fragment,{children:e.children});let i=new URL(t[0].href).toString();return(0,n.jsx)("span",{className:I.JM,"data-testid":`implicit-hyperlink-${i}`,"data-tooltip":v.MW.HYPERLINK_POPUP,"data-tooltip-can-edit":!1,"data-tooltip-interactive":!0,"data-tooltip-precise":!0,"data-tooltip-show-above":!0,"data-tooltip-type":v.Ib.SPECIAL,"data-tooltip-unconstrain-width":!0,"data-tooltip-url-string":i,spellCheck:!1,children:e.children})}}];return new o.CompositeDecorator(e)}let D=RegExp(/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)$/,"i");class V extends s.Component{constructor(e){super(e),this.TEST_ONLY_mentionsSearchPending=null,this.pendingMentionsSearch=null,this.wrapperRef=s.createRef(),this.onChange=e=>{let t=this.state.editorState;this.setState({editorState:e});let i=t.getCurrentContent(),n=e.getCurrentContent(),s=t.getSelection(),l=e.getSelection();i!==n?this.onEditorContentChange(e):this.props.typeahead?.type==="mentions"?s.getAnchorKey()!==l.getAnchorKey()||s.getFocusKey()!==l.getFocusKey()?this.clearTypeahead("changed_selection_mentions_typeahead"):this.setState({editorState:o.EditorState.forceSelection(e,l)}):s!==l&&this.clearTypeahead("changed_selection")},this.onEditorContentChange=e=>{let t=(0,w.yN)(e),i=(0,w.ws)(e);this.props.updateMessage([t,i]);let{search:n,type:s}=(0,w.TE)(e);null!=n?"MENTION"===s?this.onMentionSearchChange(n):"EMOJI"===s?this.onEmojiSearchChange(n):"COMPLETE_EMOJI"===s&&(this.clearTypeahead("completed_emoji_search"),this.insertEmojiFromString(n)):this.clearTypeahead("input_deleted")},this.hasTypeahead=()=>!!this.props.typeahead,this.insertMention=(e,t)=>{let i=(0,w.Gm)(this.state.editorState);this.state.contactsAnalytics?.trackResultClicked(i,t.index,t.mentions.length,e.id.startsWith("invite-")),(0,E.r)(i,t,!0);let n=(0,T.AO)(this.state.editorState,e);"profile_handle"in e&&this.props.dispatch((0,m.Hx)(e)),this.onChange(n)},this.insertEmoji=e=>{let t=(0,T.gG)(this.state.editorState,e);this.onChange(t)},this.insertSuggestion=e=>{let t=(0,T.Ed)(this.state.editorState,e.suggestedComments[e.index]);this.onChange(t)},this.insertFirstPendingUserInvite=e=>{if(e[0].user?.email){let t=(0,T.rv)(this.state.editorState,e[0]);this.onChange(t)}},this.insertEmojiFromString=e=>{let t=(0,T.Ly)(this.state.editorState,e);this.onChange(t)},this.onInsert=()=>{let e=this.props.typeahead;e&&"mentions"===e.type&&e.mentions[e.index]?this.insertMention(e.mentions[e.index],e):e&&"emojis"===e.type&&e.emojis[e.index]?this.insertEmoji(e.emojis[e.index]):e&&"suggestions"===e.type&&this.insertSuggestion(e)},this.assignEditorOnInsertClear=()=>{this.props.editorOnInsert(this.onInsert),this.props.editorOnClear(()=>this.clearTypeahead("editor_clear"))},this.newMentionsSearch=async e=>{this.pendingMentionsSearch&&this.pendingMentionsSearch.cancel(),this.pendingMentionsSearch=new S.qm;try{return{result:await (0,S.t8)((0,j.fG)(e,this.props.mentionables,!this.props.isProtoView&&this.props.figmaEditorType===_._Y.DESIGN),this.pendingMentionsSearch),canceled:!1}}catch(e){if(e instanceof S.cJ)return{result:null,canceled:!0};throw e}},this.onMentionSearchChange=(0,l.s)(async e=>{let t=this.newMentionsSearch(e);(0,u.Lg)()&&(this.TEST_ONLY_mentionsSearchPending=t);let{result:i,canceled:n}=await t;n||(i?(this.state.contactsAnalytics?.trackQueryResult(e,i?.mentions.length??0),this.props.dispatch(p.We(i))):this.props.dispatch(p.We({type:"mentions",mentions:[],index:0,maxMentions:0,search:e,query:e})),this.props.onUpdateTextArea(this.state.editorState))},300),this.onEmojiSearchChange=e=>{this.props.dispatch(p.We((0,j.oQ)(e))),this.props.onUpdateTextArea(this.state.editorState)},this.clearTypeahead=e=>{this.pendingMentionsSearch&&this.pendingMentionsSearch.cancel(),this.state.contactsAnalytics?.endSession(e),this.hasTypeahead()&&(this.props.typeahead?.type==="suggestions"?"editor_clear"===e?this.props.dispatch(p.UU({force:!0})):"changed_selection"!==e&&this.props.dispatch(p.We(null)):this.props.dispatch(p.We(null)))},this._handleBeforeInput=(e,t)=>{if(this.props.maxCommentLength&&t.getCurrentContent().getPlainText("").length>=this.props.maxCommentLength)return"handled";let i=(0,w.Wt)(t,e);if("ordered-list-item"===i||"unordered-list-item"===i)return t=(0,w.q7)(t,i),this.onChange(t),"handled";let n=(0,w.XM)(t,e);return n?(t=(0,w.oP)(t,e,n),this.onChange(t),"handled"):"not-handled"},this.selectAll=()=>{let e=this.state.editorState.getSelection(),t=this.state.editorState.getCurrentContent(),i=e.merge({anchorKey:t.getFirstBlock().getKey(),anchorOffset:0,focusOffset:t.getLastBlock().getText().length,focusKey:t.getLastBlock().getKey()});this.setState({editorState:o.EditorState.forceSelection(this.state.editorState,i)})},this.hasFocus=()=>this.state.editorState.getSelection().getHasFocus(),this.focus=(e=!0)=>{let t=this.state.editorState.getSelection();t.getHasFocus()?this.props.onFocus():e?setTimeout(()=>{this.props.moveFocusToStartOnMount?this.setState({editorState:(0,w.jM)(this.state.editorState)}):this.setState({editorState:o.EditorState.moveFocusToEnd(this.state.editorState)}),this.onFocus()},0):this.setState({editorState:o.EditorState.forceSelection(this.state.editorState,t)})},this.moveFocusBefore=()=>{let e=(0,w.d8)(this.state.editorState),t=this.state.editorState.getCurrentContent().getBlockBefore(e.getKey()),i=this.state.editorState.getSelection();if(t){let e=i.merge({anchorKey:t.getKey(),anchorOffset:t.getLength(),focusKey:t.getKey(),focusOffset:t.getLength()});this.setState({editorState:o.EditorState.forceSelection(this.state.editorState,e)})}},this.isAllSelected=()=>{let e=this.state.editorState;return e.isSelectionAtStartOfContent()&&e.isSelectionAtEndOfContent()},this.onNavigationKeyDown=e=>(e.stopPropagation(),this.hasTypeahead())?(e.preventDefault(),null):(0,o.getDefaultKeyBinding)(e),this.handleEscape=()=>{this.hasTypeahead()||this.props.isThreadCommentOverflowMenuOpen||this.props.editingComment&&"comment-editor-reply"===this.props.editorType||this.props.onCancel()},this.handleReturn=(e,t)=>{e.stopPropagation();let i=this.state.editorState.getCurrentContent().getPlainText(),n=/^\s+$/,s=!!i&&!n.test(i),l=t.getSelection(),r=t.getCurrentContent().getBlockForKey(l.getStartKey());if(this.hasTypeahead())return e.preventDefault(),"handled";if(s){if(e.altKey||e.metaKey)return e.preventDefault(),this.props.onSubmit(),"handled";if(e.shiftKey||e.ctrlKey){let e=(0,w.XM)(t,"\n");if(e){t=(0,w.oP)(t,"",e);let i=o.Modifier.splitBlock(t.getCurrentContent(),t.getSelection());return t=o.EditorState.push(t,i,"split-block"),this.onChange(t),"handled"}}else if(l.isCollapsed()&&["unordered-list-item","ordered-list-item"].includes(r.getType())){if(n.test(r.getText())){let e=o.Modifier.setBlockType(t.getCurrentContent(),l,"unstyled");t=o.EditorState.push(t,e,"change-block-type")}else{let e=o.Modifier.splitBlock(t.getCurrentContent(),l);t=o.EditorState.push(t,e,"split-block")}return this.onChange(t),"handled"}else if(this.props.submitOnEnter)return e.preventDefault(),this.props.onSubmit(),"handled"}return"not-handled"},this.handlePastedFiles=e=>(this.props.onFilePaste&&this.props.onFilePaste(e),"handled"),this.handlePastedText=(e,t,i)=>{if(!e)return"handled";let n=i.getSelection(),s=i.getCurrentContent();if(!(0,w.c9)(i)&&e.match(D)&&(0,N.$x)((0,k.xT)(e))){for(let e of(n.getIsBackward()&&(n=n.merge({anchorKey:n.getFocusKey(),anchorOffset:n.getFocusOffset(),focusKey:n.getAnchorKey(),focusOffset:n.getAnchorOffset(),isBackward:!1})),Object.values(F)))s=o.Modifier.removeInlineStyle(s,n,e);let t=(s=s.createEntity("HYPERLINK","MUTABLE",{hyperlink:e,commentEditorType:this.props.editorType})).getLastCreatedEntityKey(),l=o.Modifier.applyEntity(s,n,t);i=o.EditorState.push(i,l,"apply-entity");let r=n.merge({anchorOffset:n.getEndOffset(),anchorKey:n.getEndKey(),focusOffset:n.getEndOffset(),focusKey:n.getEndKey()});return i=o.EditorState.forceSelection(i,r),this.onChange(i),"handled"}if((0,a.kc)().comments_html_paste&&t){let e=(0,w._S)(t),n=o.Modifier.replaceWithFragment(i.getCurrentContent(),i.getSelection(),e.getBlockMap()),s=o.EditorState.push(i,n,"insert-fragment");return this.onChange(s),"handled"}{let t=o.Modifier.replaceWithFragment(i.getCurrentContent(),i.getSelection(),o.ContentState.createFromText(e).getBlockMap()),n=o.EditorState.push(i,t,"insert-fragment");return this.onChange(n),"handled"}},this.onSubmitHyperlink=e=>{let t=this.state.editorState;if(this.state.hyperlinkState){let i=this.state.hyperlinkState.selectionToHyperlink,n=(0,k.xT)(e);if((0,N.$x)(n)){if(i.isCollapsed()){let e=t.getCurrentContent();e=o.Modifier.insertText(e,i,n),t=o.EditorState.push(t,e,"insert-characters");let s=i.getStartOffset();i=(0,w.Ji)(t,{start:s,end:s+n.length})}let e=t.getCurrentContent();for(let t of P)e=o.Modifier.removeInlineStyle(e,i,t);if(t=o.EditorState.push(t,e,"change-inline-style"),this.state.hyperlinkState.entityKey){e=e.replaceEntityData(this.state.hyperlinkState.entityKey,{hyperlink:n,commentEditorType:this.props.editorType});let s=o.Modifier.applyEntity(e,i,this.state.hyperlinkState.entityKey);t=o.EditorState.push(t,s,"apply-entity")}else{let s=(e=e.createEntity("HYPERLINK","MUTABLE",{hyperlink:n,commentEditorType:this.props.editorType})).getLastCreatedEntityKey(),l=o.Modifier.applyEntity(e,i,s);t=o.EditorState.push(t,l,"apply-entity")}}else{let e=t.getCurrentContent();e=o.Modifier.removeInlineStyle(e,i,"HIGHLIGHT"),t=o.EditorState.push(t,e,"change-inline-style"),this.props.dispatch(h.F.enqueue({message:(0,c.t)("hyperlink.invalid_link_plain")}))}this.onChange(t),this.setState({hyperlinkState:null})}},this.onFocus=()=>{if(this.assignEditorOnInsertClear(),this.props.setIsEditorFocused(!0),this.focus(!this.props.maintainSelectionOnFocus),this.state.hyperlinkState?.selectionToHyperlink&&!this.props.hyperlinkLocation){let e=this.state.editorState.getCurrentContent(),t=this.state.editorState;e=o.Modifier.removeInlineStyle(e,this.state.hyperlinkState.selectionToHyperlink,"HIGHLIGHT"),t=o.EditorState.push(t,e,"change-inline-style"),this.onChange(t),this.setState({hyperlinkState:null})}},this.onBlur=()=>{let{typeahead:e}=this.props;if(e&&"mentions"===e.type&&e.mentions[e.index]){this.state.contactsAnalytics?.endSession("input_blurred");let t=(0,w.Gm)(this.state.editorState);(0,E.r)(t,e,!1)}this.props.setIsEditorFocused(!1)},this.handleKeyCommand=(e,t)=>{if(F[e]){let i=F[e],n=o.RichUtils.toggleInlineStyle(t,i);if(n)return this.onChange(n),"handled"}else if(z[e]){let i=z[e],n=o.RichUtils.toggleBlockType(t,i);if(n)return this.onChange(n),"handled"}else if("handle-undo"===e){t=o.EditorState.undo(t);let e=(0,w.d8)(t).getText();for(let i of w.Bm)if(e.trim()===i||"1."===e.trim()){let i=e.length;t=o.EditorState.forceSelection(t,(0,w.Ji)(t,{start:i,end:i}))}return this.onChange(t),"handled"}else if("handle-redo"===e){let e=(0,w.d8)(t).getText();t=o.EditorState.redo(t);let i=(0,w.d8)(t).getText();for(let n of w.Bm)if(e.trim()===n||i.trim()===n){let e=i.length;return t=o.EditorState.forceSelection(t,(0,w.Ji)(t,{start:e,end:e})),this.onChange(t),"handled"}if("1."===e.trim()||"1."===i.trim()){let e=i.length;return t=o.EditorState.forceSelection(t,(0,w.Ji)(t,{start:e,end:e})),this.onChange(t),"handled"}return this.onChange(t),"handled"}else if("handle-list-backspace"===e){let e=o.Modifier.setBlockType(t.getCurrentContent(),t.getSelection(),"unstyled"),i=o.EditorState.push(t,e,"change-block-type");return this.onChange(i),"handled"}else if("toggle-link"===e){let{selection:e,entityKey:i}=(0,w.M1)(t);t=o.EditorState.forceSelection(t,e),this.onChange(t);let n=(0,w.L5)();if(n&&this.props.setHyperlinkLocation&&this.props.setHyperlinkEditorRef)return this.setHyperlinkEditorState(t,n,i),"handled"}return"not-handled"},this.getActiveHyperlinkForCurrentSelection=()=>this.state.hyperlinkState?.entityKey?this.state.editorState.getCurrentContent().getEntity(this.state.hyperlinkState.entityKey).getData().hyperlink:"",this.onRemoveHyperlink=()=>{if(this.state.hyperlinkState?.entityKey){let e=this.state.editorState,t=o.Modifier.applyEntity(this.state.editorState.getCurrentContent(),this.state.hyperlinkState.selectionToHyperlink,null);this.onChange(o.EditorState.push(e,t,"apply-entity"))}},this.keyBindingFn=e=>{if("Escape"===e.key&&!this.props.delegateEscapeHandling)return this.handleEscape(),null;if("Backspace"===e.key){let e=(0,w.d8)(this.state.editorState);if(("ordered-list-item"===e.getType()||"unordered-list-item"===e.getType())&&(0,w.wT)(this.state.editorState))return"handle-list-backspace"}if("ArrowUp"===e.key||"ArrowDown"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Tab"===e.key)return this.onNavigationKeyDown(e);if(L(e)){e.stopPropagation();let t=r.Ez5?.uiState().isUI3.getCopy()??!1,i="k"===e.key&&!t||e.shiftKey&&"u"===e.key&&t;if("z"===e.key&&!e.shiftKey)return"handle-undo";if("z"===e.key&&e.shiftKey)return"handle-redo";if("b"===e.key)return"toggle-bold";if("i"===e.key)return"toggle-italic";if(i)return"toggle-link";if(e.shiftKey&&"x"===e.key)return"toggle-strikethrough";if(e.shiftKey&&"8"===e.key)return"toggle-unordered-list";if(e.shiftKey&&"7"===e.key)return"toggle-ordered-list"}return e.stopPropagation(),(0,o.getDefaultKeyBinding)(e)},this.onMouseDown=e=>{e.stopPropagation()},this.onContextMenu=e=>{x.eD||e.stopPropagation()},this.addAriaHiddenToPlaceholder=()=>{let e=this.wrapperRef.current?.querySelector(".public-DraftEditorPlaceholder-root");e&&e.setAttribute("aria-hidden","true")};let t=(0,y.Ty)(e.currentOrgId??null,e.user??null,e.currentOrgUsers),i=(0,y.pP)(e.currentOrgId,e.openFileTeamId,t),n=e.openFileTeamId??null,d=null,g=B();d=this.props.messageMeta?(0,w.Aw)(this.props.messageMeta,g,this.props.editorType):o.EditorState.createEmpty(g),this.state={editorState:d,contactsAnalytics:new y.yO(y.I2,e.openFileKey,i,e.currentOrgId,n,"draftjs"),hyperlinkState:null}}async componentDidMount(){if(this.assignEditorOnInsertClear(),this.addAriaHiddenToPlaceholder(),this.props.mountInputFocused){let e=this.props.moveFocusToStartOnMount?(0,w.jM)(this.state.editorState):o.EditorState.moveFocusToEnd(this.state.editorState);if(this.props.setIsEditorFocused(!0),this.onChange(e),(!this.props.hasMentionedPendingUserInvite||!this.props.hasMentionedPendingUserInviteTwice)&&this.props.pendingUserInvites&&this.props.pendingUserInvites.length>0){if(1===this.props.pendingUserInvites.length)this.insertFirstPendingUserInvite(this.props.pendingUserInvites);else{let{result:t,canceled:i}=await this.newMentionsSearch("");i||setTimeout(()=>{this.props.dispatch(p.We(t)),this.onChange(e),this.props.onUpdateTextArea(this.state.editorState)},180)}}}this.props.editorRef&&this.props.editorType&&this.props.dispatch(g.pP({targetKey:this.props.editorType,targetRef:this.props.editorRef})),this.props.updateMessageOnMount&&this.onEditorContentChange(this.state.editorState)}componentDidCatch(e){"Node.removeChild: The node to be removed is not a child of this node"===e.message&&this.forceUpdate()}componentDidUpdate(e){this.addAriaHiddenToPlaceholder();let t=this.state.editorState;if(!(0,d.Wf)(this.props.messageMeta,e.messageMeta)){let e=(0,w.yN)(this.state.editorState);if(!(0,d.Wf)(e,this.props.messageMeta)){let e=B();t=(0,w.Aw)(this.props.messageMeta,e,this.props.editorType),t=this.state.editorState.getSelection().getHasFocus()?o.EditorState.moveFocusToEnd(t):o.EditorState.moveSelectionToEnd(t),this.onChange(t)}let i=this.props.pendingUserInvites?.length===1?t.getCurrentContent().getPlainText()===`${this.props.pendingUserInvites[0].user?.email} `:""===t.getCurrentContent().getPlainText();(!this.props.hasMentionedPendingUserInvite||!this.props.hasMentionedPendingUserInviteTwice)&&(this.props.pendingUserInvites?.length??0)>0&&this.props.user?.id&&!this.props.typeahead&&i&&setTimeout(async()=>{if(this.props.onUpdateTextArea(this.state.editorState),this.props.pendingUserInvites?.length===1)this.props.dispatch(p.We((0,C.tI)({index:-1,userId:this.props?.user?.id})));else{let e=await (0,j.fG)("",this.props.mentionables,!this.props.isProtoView&&this.props.figmaEditorType===_._Y.DESIGN);this.props.dispatch(p.We(e))}},180)}if(e.mentionables!==this.props.mentionables&&this.onEditorContentChange(t),this.props.initMention&&!e.initMention){let e;let i=t;e=i.getSelection().size>0?o.Modifier.replaceText(i.getCurrentContent(),i.getSelection(),"@"):o.Modifier.insertText(i.getCurrentContent(),i.getSelection(),"@"),this.setState({editorState:o.EditorState.push(t,e,"insert-fragment")})}if(!e.typeahead&&this.props.typeahead&&"mentions"===this.props.typeahead.type){let{search:e}=(0,w.TE)(t);""===e&&this.state.contactsAnalytics?.trackQueryResult("",this.props.typeahead.mentions.length),this.props.dispatch(p.Qe())}}componentWillUnmount(){this.props.setIsEditorFocused(!1);let e=this.props.pendingUserInvites&&this.props.pendingUserInvites.length>0;e&&!this.props.hasMentionedPendingUserInvite?(this.props.dispatch(f.b({has_mentioned_pending_user_invite:!0})),this.props.setPendingUserInvitesAtom?.([])):e&&this.props.hasMentionedPendingUserInvite&&!this.props.hasMentionedPendingUserInviteTwice&&this.props.dispatch(f.b({has_mentioned_pending_user_invite_twice:!0}))}editHyperlinkFromTooltip(e,t){let i=this.state.editorState.getCurrentContent(),n="",s=0,l=0;if(i.getBlockMap().every((t,i)=>(t&&t.findEntityRanges(t=>t.getEntity()===e,(e,t)=>{n=i||"",s=e,l=t}),!n)),this.props.dispatch(g.jD()),""===n)return;let r=this.state.editorState.getSelection().merge({anchorKey:n,focusKey:n,anchorOffset:s,focusOffset:l});r=(0,w.Qo)(this.state.editorState,r,e);let a=o.EditorState.forceSelection(this.state.editorState,r);this.onChange(a),t&&this.setHyperlinkEditorState(a,t,e)}setHyperlinkEditorState(e,t,i){if(this.props.setHyperlinkLocation&&this.props.setHyperlinkEditorRef&&this.props.editorRef){this.setState({hyperlinkState:{selectionToHyperlink:e.getSelection(),entityKey:i}}),this.props.setHyperlinkLocation(t),this.props.setHyperlinkEditorRef(this.props.editorRef);let n=o.Modifier.applyInlineStyle(e.getCurrentContent(),e.getSelection(),"HIGHLIGHT"),s=o.EditorState.push(e,n,"change-inline-style");this.onChange(s)}}render(){let e=I.DX;e=this.props.className?e+" "+this.props.className:e+" "+I.DL;let t=(0,w.FA)(this.state.editorState);return(0,n.jsx)("div",{className:e,onMouseDown:(0,a.kc)().a11y_new_comments_to_fpl?void 0:this.onMouseDown,onPointerDown:(0,a.kc)().a11y_new_comments_to_fpl?this.onMouseDown:void 0,onContextMenu:this.onContextMenu,onFocus:this.onFocus,onClick:this.onFocus,"data-testid":"editable-typeahead",ref:this.wrapperRef,children:(0,n.jsx)(o.Editor,{"aria-haspopup":"listbox",ariaActiveDescendantID:this.props.typeahead?.type==="mentions"?this.props.activeMentionsId:void 0,ariaControls:this.props.typeahead?.type==="mentions"?b.Qd:void 0,ariaDescribedBy:"",ariaExpanded:this.props.typeahead?.type==="mentions",ariaLabel:this.props.ariaLabel??this.props.placeholderText,customStyleMap:M,editorState:this.state.editorState,handleBeforeInput:this._handleBeforeInput,handleKeyCommand:this.handleKeyCommand,handlePastedFiles:this.handlePastedFiles,handlePastedText:this.handlePastedText,handleReturn:this.handleReturn,keyBindingFn:this.keyBindingFn,onBlur:this.onBlur,onChange:this.onChange,placeholder:t?this.props.placeholderText:void 0,readOnly:this.props.readOnly,role:"combobox",spellCheck:!0,tabIndex:this.props.tabIndex||0})})}}V.displayName="EditableTypeahead"},8931:(e,t,i)=>{i.d(t,{T:()=>s});var n=i(104076);let s=(0,i(716976).memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M10.003 7.375A5.5 5.5 0 0 1 16.61 9.5H14a.5.5 0 0 0 0 1h3.5a.5.5 0 0 0 .5-.5V6.5a.5.5 0 0 0-1 0v1.847a6.5 6.5 0 1 0-.128 8.456.5.5 0 1 0-.75-.662 5.5 5.5 0 1 1-6.119-8.766",clipRule:"evenodd"})})})}}]);

//# debugId=52a9b13b-6c2c-5ecf-b803-05f0186eb5b5

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/198f50a699f35a2737dd55289db3ae6b42a9b37f/a88a4c5a-8418534a13b45294.min.js.map