"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="cc855595-5210-558b-93b1-67de9bf0309a")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[2324],{903545:(n,e,t)=>{t.d(e,{b:()=>aN});var a=t(104076),o=t(716976),i=t(266808),l=t(812714),r=t(795033),s=t(74620),d=t(331497),c=t(766812),u=t(973542),p=t(903927),g=t(170627),h=t(681958),f=t(980852),x=t(166887),m=t(80341),v=t(742549),b=t(373547),y=t(354114),w=t(120074),_=t(835307);function A(n){let e=(0,p.d4)(n=>n.mirror.appModel.currentPage),t=(0,v.hA)();return(0,_.wA)((n,e,t,a)=>e.flatMap(e=>{let o=n.get(e);if(!o)return null;if(o.containingCanvas===t){if(!a)return e;{let t=[];return(0,h.hD)(n,e,n=>{n.guid===a&&t.push(e)}),t}}}).filter(m.t),n,e,t)}function N(){let n=(0,x.IL)(),e=(0,r.Xr)(u.m),t=!!(0,v.hA)();return o.useCallback((a,o)=>{g.l7.user("clear-annotations",()=>{let i=(0,f.UN)().get(a);if(!i)return;i.removeAnnotation(o);let l=(0,h.kh)((0,f.UN)(),a);n("delete_annotation",{nodeId:a,nodeType:i.type,tlfId:l?.guid,isDevModeFocusView:t}),e(null),y.Y5.triggerAction("commit")})},[e,n,t])}var j=t(132672),I=t(754245),k=t(382629),S=t(12866),C=t(824570),E=t(511570),L=t.n(E),T=t(983500),V=t(755444),M=t(192075),R=t(692042),P=t(315361),O=t(228227),W=t(814082),D=t(278491),F=t(55029),B=t(938716),z=t(701071),H=t(122010),G=t(841242),U=t(737988),q=t(437540),X=t(619070),K=t(687849),$=t(211862),Y=t(248043),Q=t(303106),J=t(278052),Z=t(564941),nn=t(405223);let ne="ANNOTATIONS_CONTEXT_MENU";function nt(n){let{nodeId:e,annotationIndex:t,parentRect:l}=n,s=(0,$.q5)(),c=(0,p.wA)(),g=N(),h=function(){let n=(0,r.Xr)(u.m);return o.useCallback(e=>{n(e)},[n])}(),f=(0,o.useMemo)(()=>i.w3z.isReadOnly(i.SES.ANNOTATIONS),[]),m=(0,q.R)(n=>n.mirror.appModel.keyboardShortcuts),v=(0,G.XR)(),b=(0,x.am)(),y=(0,d.J2)(i.Ez5.uiState().filterAnnotationCategoryId),w={displayText:(0,M.t)("dev_handoff.annotations.hide_annotations"),shortcut:(0,Z.c1)(m,"toggle-show-annotations"),callback:()=>{K.VU.get("toggle-show-annotations","context-menu")()},recordingKey:"hideAnnotations"},_=[{displayText:(0,M.t)("dev_handoff.annotations.copy_link"),callback:()=>{if(null===s)return;let n=(0,Y.jN)({file:s,nodeId:e,isDevHandoff:!0});c(X.S({fileKey:s.key,url:n,source:Q.d.ANNOTATION_CONTEXT_MENU,visualBellMessageOverride:(0,M.t)("dev_handoff.annotations.copied_link_to_clipboard")}))},recordingKey:"copy"},...f?[]:[{displayText:(0,M.t)("dev_handoff.layers.edit_annotation"),callback:()=>{h(t)},recordingKey:"edit"},{displayText:(0,M.t)("dev_handoff.annotations.delete"),callback:()=>{g(e,t)},recordingKey:"delete"}],...v.length>0?[J.w,{displayText:(0,M.t)("dev_handoff.annotations.filter_by"),recordingKey:"filterBy",children:[{displayText:(0,M.t)("fullscreen_actions.show-all-annotation-categories"),callback:()=>{b("filter_annotation_category",{categoryLabel:"all",source:"context_menu"}),i.Ez5?.uiState().filterAnnotationCategoryId.set(null)},icon:(0,a.jsx)(U.y,{className:"annotation_context_menu--annotationsCategoryAllIcon--GjsT2"}),isChecked:!y,recordingKey:"showAllAnnotationCategories"},J.w,...v.map(n=>{let e=(0,G.uA)(n);return{displayText:e,displayTextClassName:"annotation_context_menu--annotationCategoryLabel--mWwoF",icon:(0,a.jsx)("div",{className:"annotation_context_menu--annotationsCategoryIcon--hD0eJ",style:{backgroundColor:(0,G.FQ)(n)??void 0}}),isChecked:n.id===y,callback:()=>{b("filter_annotation_category",{categoryLabel:e,source:"context_menu"}),i.Ez5?.uiState().filterAnnotationCategoryId.set(n.id)},recordingKey:`showAnnotationCategory-${e}`}})]}]:[],...v.length>0?[w]:[J.w,w]];return(0,a.jsx)(nn.j,{items:_,showPoint:!1,parentRect:l,onSelectItem:n=>n.callback?.(),dispatch:c,lean:"right",leanPadding:0,recordingKey:"viewAnnotationContextMenu"})}var na=t(307829),no=t(550256),ni=t(454851),nl=t(475477),nr=t(684742),ns=t(129011),nd=t(420680),nc=t(781767),nu=t(423128),np=t(536358),ng=t(674524),nh=t(136192),nf=t(330489),nx=t(846680),nm=t(321259),nv=t(371868),nb=t(735212),ny=t(801519);function nw({onEnterPressed:n}){let[e]=(0,nv.DF)();return o.useEffect(()=>(0,nb.Sd)(e.registerCommand(ny.if,t=>{if(t&&t.shiftKey)return t.preventDefault(),e.dispatchCommand(ny.XK,void 0);let a=(0,ny.vJ)();if((0,ny.I2)(a)){let n=a.anchor.getNode().getParent();if(n&&(0,nm.Mz)(n)||n&&(0,nm.HY)(n))return!1}return n(t??void 0),!0},ny.Jj)),[e,n]),null}var n_=t(641518),nA=t(225125),nN=t(652539),nj=t(999473),nI=t(366535),nk=t(443192),nS=t(819851),nC=t(235711),nE=t(894210),nL=t(25870),nT=t(983764),nV=t(929302),nM=t(91478),nR=t(268389),nP=t(293422),nO=t(17933),nW=t(216940),nD=t(516604),nF=t(156412),nB=t(559954),nz=t(365120),nH=t(5780),nG=t(959834);let nU="annotation_categories_edit_window--colorCircle--eQOTM",nq="annotation_categories_edit_window--dragging--N-NqM",nX="annotation_categories_edit_window--selected---8KFm";var nK=t(154709),n$=t(713301);let nY=Symbol("ANNOTATION_CATEGORY_ITEM");var nQ=(n=>(n[n.INVALID_LABEL=0]="INVALID_LABEL",n[n.INVALID_COLOR=1]="INVALID_COLOR",n[n.DUPLICATE_CATEGORIES=2]="DUPLICATE_CATEGORIES",n))(nQ||{});let nJ=[i.RN1.YELLOW,i.RN1.ORANGE,i.RN1.RED,i.RN1.PINK,i.RN1.VIOLET,i.RN1.BLUE,i.RN1.TEAL,i.RN1.GREEN];function nZ(n){return n.preset!==i.Bll.NONE||null!=n.custom&&null!=n.custom.label&&n.custom.label.trim().length>0&&null!=n.custom.color}function n0({recordingKey:n,index:e,isSelected:t,isLastItem:i,categoryId:l,label:r,color:s,dragging:d,shouldFocusLabelInput:c,onDrop:u,onSelect:p,onDragStart:g,onDragEnd:h,onRemove:f,onColorChange:x,onLabelChange:m}){let v=(0,o.useRef)(null),b=(0,o.useRef)(null),{position:y,dragItem:w}=(0,nB.h4)({type:nY,element:v,item:{categoryId:l},accept:[nY],onStart:g,onEnd:h,onDrop:n=>u(e,n)}),_=!!w&&w.categoryId===l;(0,o.useEffect)(()=>{c&&b.current?.focus()},[c]);let A=n_.rf(n,"mousedown",()=>{p(e)}),N=n_.iQ(n,"focus",()=>{t||p(e)}),j=(0,o.useCallback)(n=>{m(l,n)},[l,m]),{manager:I,getContextMenuTriggerProps:k,getTriggerProps:S}=no.b({offset:{mainAxis:4}}),C=(0,o.useCallback)(n=>{x(l,n)},[l,x]),E=(0,o.useMemo)(()=>d?y===nB.Nz.BEFORE?0===e?"annotation_categories_edit_window--withInsertBeforeTop--ie9yH":"annotation_categories_edit_window--withInsertBefore--ztJQH":y===nB.Nz.AFTER?i?"annotation_categories_edit_window--withInsertAfterBottom--BPiPN":"annotation_categories_edit_window--withInsertAfter--Jg20i":null:null,[d,y,e,i]),[T,V]=(0,o.useState)(!1),{getTriggerProps:R,getContainerProps:P,getArrowProps:O}=nO.fP({type:"dialog",isOpen:T,onOpenChange:V});return(0,a.jsxs)(nz.S.recordableDiv,{forwardedRef:v,onMouseDown:A,onFocus:N,className:L()("annotation_categories_edit_window--draggableRowContainer--Apval",E,{[nq]:_,[nX]:t}),recordingKey:n,dataTestId:n,children:[(0,a.jsx)(nN.B,{className:"annotation_categories_edit_window--grabber--mQN70",svg:n$.A}),(0,a.jsxs)(no.bL,{manager:I,children:[(0,a.jsx)(nr.E,{className:L()("annotation_categories_edit_window--colorSelectTrigger--AJgOU",{"annotation_categories_edit_window--active---7kjY":I.isOpen}),recordingKey:n_.Pt(n,"colorSelectTrigger"),...S({}),"aria-label":s?(0,M.t)("dev_handoff.annotations.categories_edit_window.category_color_selector.aria_label",{color:s.label()}):(0,M.t)("dev_handoff.annotations.categories_edit_window.category_color_tooltip"),htmlAttributes:{...k(),"data-tooltip-type":"text","data-tooltip-show-above":!0,"data-tooltip":(0,M.t)("dev_handoff.annotations.categories_edit_window.category_color_tooltip")},children:(0,a.jsxs)("div",{className:"annotation_categories_edit_window--triggerContainer--ksQQB",children:[(0,a.jsx)("div",{className:L()(nU,{"annotation_categories_edit_window--noCategoryColor--TOAMH":!s}),style:{backgroundColor:s?.color}}),(0,a.jsx)(nN.B,{className:"annotation_categories_edit_window--caret--7QFy-",svg:nK.A})]})}),(0,a.jsx)(no.mc,{className:"annotation_categories_edit_window--colorOptions--n--Hk",children:nJ.map(n=>{let e=G.yu[n];return(0,a.jsx)(no.q7,{"aria-label":e.label(),onClick:()=>C(n),className:L()("annotation_categories_edit_window--colorOption--24Kum",{[nX]:s?.color===e.color}),children:(0,a.jsx)("div",{className:nU,style:{backgroundColor:e.color}})},n)})})]}),(0,a.jsx)("div",{className:"annotation_categories_edit_window--labelInputContainer--dR-Yp",children:(0,a.jsx)(nW.p,{"aria-label":(0,M.t)("dev_handoff.annotations.categories_edit_window.category_label_aria_label"),ref:b,value:r??"",className:"annotation_categories_edit_window--labelInput--vtlaI",onChange:j,recordingKey:n_.Pt(n,"labelInput"),placeholder:(0,M.t)("dev_handoff.annotations.categories_edit_window.category_label_placeholder")})}),(0,a.jsxs)("div",{className:"annotation_categories_edit_window--removeButtonContainer--PPynD",children:[(0,a.jsx)(nd.K,{"aria-label":(0,M.t)("dev_handoff.annotations.categories_edit_window.remove_category_button_label",{category:r??""}),htmlAttributes:{"data-tooltip":(0,M.t)("dev_handoff.annotations.categories_edit_window.remove_category_button"),"data-tooltip-type":"text"},recordingKey:n_.Pt(n,"removeButton"),...R({}),children:(0,a.jsx)(nF.O,{})}),(0,a.jsxs)(nO.mc,{...P({style:{width:"calc(320rem / 16)"}}),children:[(0,a.jsx)(nO.i3,{...O()}),(0,a.jsxs)(nR.vo,{children:[(0,a.jsx)(nR.Y9,{children:(0,a.jsx)(nR.hE,{children:(0,M.t)("dev_handoff.annotations.categories_edit_window.remove_category_dialog_title")})}),(0,a.jsx)(nR.nB,{children:(0,M.t)("dev_handoff.annotations.categories_edit_window.remove_category_dialog_body")}),(0,a.jsx)(nR.wi,{children:(0,a.jsxs)(nR.jk,{children:[(0,a.jsx)(nP.$n,{variant:"secondary",recordingKey:n_.Pt(n,"removeCategoryCancel"),onClick:()=>V(!1),children:(0,M.t)("general.cancel")}),(0,a.jsx)(nP.$n,{autoFocus:!0,variant:"destructive",recordingKey:n_.Pt(n,"removeCategoryConfirm"),onClick:()=>{f(l),V(!1)},children:(0,M.t)("general.delete")})]})})]})]})]})]})}let n1=(0,nG.Ju)(function(n){let e=(0,x.IL)(),{open:t,onClose:l,recordingKey:r}=n,s=nV.hS({open:t,onClose:l}),d=(0,G.XR)(),c=(0,G.mi)(),[u,p]=(0,o.useState)([]),[g,h]=(0,o.useState)({}),[m,v]=(0,o.useState)([]),[b,y]=(0,o.useState)([]);(0,o.useEffect)(()=>{d&&(p(d.map(n=>n.id)),h(d.reduce((n,e)=>(n[e.id]=e,n),{})))},[d]);let w=(0,o.useMemo)(()=>{let n=new Set(Object.values(g).map(n=>n.preset===i.Bll.NONE?n.custom?.color:(0,G.AP)(n.preset)).filter(k.Vq));return nJ.find(e=>!n.has(e))??i.RN1.GREEN},[g]),[_,A]=(0,o.useState)(null);(0,o.useEffect)(()=>{A(function(n){let e=new Set;for(let t of n)if(e.add(`${t.preset}-${t.custom?.label}-${t.custom?.color}`),t.preset===i.Bll.NONE&&null!=t.custom){if(null==t.custom.label||0===t.custom.label.trim().length)return{type:0,message:(0,M.t)("dev_handoff.annotations.category_custom.invalid_label")};if(null==t.custom.color)return{type:1,message:(0,M.t)("dev_handoff.annotations.category_custom.invalid_color")}}return e.size!==n.length?{type:2,message:(0,M.t)("dev_handoff.annotations.categories_edit_window.duplicate_categories_message")}:null}(u.map(n=>g[n]).filter(k.Vq)))},[g,u]);let[N,j]=(0,o.useState)(null),I=(0,o.useCallback)(n=>{-1===n?j(null):j(u[n]??null)},[u]),S=(0,o.useRef)(null),[C,E]=(0,o.useState)(!1),[T,V]=(0,o.useState)(null),R=(0,o.useCallback)(()=>{V(null),E(!0)},[]),P=(0,o.useCallback)(()=>{E(!1)},[]),O=(0,o.useCallback)((n,t)=>{let{dragItem:a,position:o}=t,l=u.indexOf(a.categoryId);o===nB.Nz.BEFORE?p(e=>[...e.slice(0,n),a.categoryId,...e.slice(n)].filter((e,t)=>e!==a.categoryId||t===n)):p(e=>[...e.slice(0,n+1),a.categoryId,...e.slice(n+1)].filter((e,t)=>e!==a.categoryId||t===n+1));let r=g[a.categoryId];r&&e("reorder_annotation_category",{category:r.preset===i.Bll.NONE?r.custom?.label??null:(0,G.h9)(r.preset),oldRank:l,newRank:n}),V(a.categoryId),E(!1)},[g,u,e]),W=n_.rf("editCategoriesModal","mousedown",n=>{n.target===S.current&&I(-1)},{includeTarget:!0}),D=(0,o.useCallback)(()=>{let n={id:(0,nH.fO)((0,f.UN)()),preset:i.Bll.NONE,custom:{label:"",color:w}};v(e=>[...e,n.id]),p(e=>[...e,n.id]),h(e=>({...e,[n.id]:n})),j(n.id),V(n.id)},[w]),F=(0,o.useCallback)(n=>{if(m.includes(n))v(e=>e.filter(e=>e!==n));else{let e=g[n];e&&y(n=>[...n,e.preset===i.Bll.NONE?e.custom?.label??"":(0,G.h9)(e.preset)])}p(e=>e.filter(e=>e!==n)),h(e=>{let{[n]:t,...a}=e;return a})},[m,g]),B=(0,o.useCallback)((n,t)=>{let a=g[n];a&&(h(e=>({...e,[n]:{...a,preset:i.Bll.NONE,custom:{...a.preset===i.Bll.NONE?a.custom:{label:(0,G.h9)(a.preset),color:(0,G.AP)(a.preset)},color:t}}})),e("edit_annotation_category_color",{category:a.preset===i.Bll.NONE?a.custom?.label??null:(0,G.h9)(a.preset),newColor:t,oldColor:a.preset===i.Bll.NONE?a.custom?.color:(0,G.AP)(a.preset)}))},[g,e]),z=(0,o.useCallback)((n,t)=>{let a=g[n];a&&(h(e=>({...e,[n]:{...a,preset:i.Bll.NONE,custom:{...a.preset===i.Bll.NONE?a.custom:{label:(0,G.h9)(a.preset),color:(0,G.AP)(a.preset)},label:t}}})),e("edit_annotation_category_name",{newCategory:t,oldCategory:a.preset===i.Bll.NONE?a.custom?.label:(0,G.h9)(a.preset)}))},[g,e]),H=(0,o.useCallback)(()=>{l()},[l]),U=(0,o.useCallback)(()=>{if(_)return;let n=u.map(n=>g[n]).filter(nZ).map(n=>n.preset===i.Bll.NONE?{...n,custom:n.custom?{...n.custom,label:n.custom.label.trim()}:null}:n);if(n.length===d.length&&n.every((n,e)=>{let t=d[e];return!!t&&n.id===t.id&&n.preset===t.preset&&n.custom?.label===t.custom?.label&&n.custom?.color===t.custom?.color})){l();return}m.forEach(n=>{let t=g[n];t&&e("add_annotation_category",{categoryLabel:t.custom?.label??null})}),b.forEach(n=>{e("delete_annotation_category",{categoryLabel:n})}),c(n),l()},[_,u,d,c,l,g,m,b,e]);return(0,a.jsx)(nM.bL,{width:"md",manager:s,htmlAttributes:{"data-testid":"annotation-categories-edit-window-root"},children:(0,a.jsxs)(nR.vo,{children:[(0,a.jsxs)(nR.Y9,{children:[(0,a.jsx)(nR.hE,{children:(0,M.tx)("dev_handoff.annotations.categories_edit_window.title")}),(0,a.jsx)(nR.jk,{children:(0,a.jsx)(nd.K,{recordingKey:n_.Pt(r,"addCategory"),"aria-label":(0,M.t)("dev_handoff.annotations.categories_edit_window.add_category_button"),onClick:D,children:(0,a.jsx)(nD.x,{})})})]}),(0,a.jsx)(nR.nB,{padding:0===u.length?void 0:0,children:u.length>0?(0,a.jsx)(nB.hh,{children:(0,a.jsx)("div",{onMouseDown:W,ref:S,className:L()({[nq]:C}),children:u.map((n,e)=>{let t=g[n];return t?(0,a.jsx)(n0,{categoryId:n,color:t.preset===i.Bll.NONE?t.custom?.color!==void 0?G.yu[t.custom.color]:void 0:(0,G.Lw)(t.preset),dragging:C,index:e,isLastItem:e===u.length-1,isSelected:N===n,label:t.preset===i.Bll.NONE?t.custom?.label:(0,G.h9)(t.preset),onColorChange:B,onDragEnd:P,onDragStart:R,onDrop:O,onLabelChange:z,onRemove:F,onSelect:I,recordingKey:n_.Pt(r,"annotationCategoryItem",e),shouldFocusLabelInput:T===n},n):null})})}):(0,a.jsx)("div",{className:"annotation_categories_edit_window--noCategoriesMessage--haAE-",children:(0,M.tx)("dev_handoff.annotations.categories_edit_window.no_categories_message")})}),(0,a.jsx)(nR.wi,{children:(0,a.jsxs)(nR.jk,{children:[(0,a.jsx)(nP.$n,{variant:"secondary",onClick:H,recordingKey:n_.Pt(r,"cancel"),children:(0,M.tx)("general.cancel")}),(0,a.jsx)(nP.$n,{onClick:U,disabled:!!_,recordingKey:n_.Pt(r,"done"),htmlAttributes:_?{"data-tooltip-type":"text","data-tooltip":_.message}:{},children:(0,M.tx)("general.done")})]})})]})})}),n5=(0,o.memo)(function(n){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...n,children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M9.5 6A1.5 1.5 0 0 1 11 7.5v9A1.5 1.5 0 0 1 9.5 18h-2l-.153-.008A1.5 1.5 0 0 1 6 16.5v-9a1.5 1.5 0 0 1 1.347-1.492L7.5 6zm-2 1a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5zm9-1A1.5 1.5 0 0 1 18 7.5v9a1.5 1.5 0 0 1-1.5 1.5h-2l-.153-.008A1.5 1.5 0 0 1 13 16.5v-9a1.5 1.5 0 0 1 1.347-1.492L14.5 6zm-2 1a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5z",clipRule:"evenodd"})})}),n2=(0,o.memo)(function(n){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...n,children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M16.5 13a1.5 1.5 0 0 1 1.5 1.5v2l-.008.153A1.5 1.5 0 0 1 16.5 18h-9a1.5 1.5 0 0 1-1.492-1.347L6 16.5v-2A1.5 1.5 0 0 1 7.5 13zm-9 1a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5zm9-8A1.5 1.5 0 0 1 18 7.5v2l-.008.153A1.5 1.5 0 0 1 16.5 11h-9a1.5 1.5 0 0 1-1.492-1.347L6 9.5v-2A1.5 1.5 0 0 1 7.5 6zm-9 1a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5z"})})});var n4=t(844152),n6=t(824136),n8=t(416381),n3=t(599441),n7=t(371952),n9=t(728233),en=t(487375);let ee="annotation--viewAnnotation--cA-c1 annotation--_annotationBase--MPByC",et="annotation--wrapperEditing--C2Zlx",ea="annotation--annotationLine--jr4Mc",eo="annotation--annotationLineEndDot--Lsq0a",ei="annotation--withCategory--lj1wU",el="annotation--contentContainer--vSuqs",er="annotation--innerWrapper--T0cql",es="annotation--viewAnnotationFadedOut--7LQPE",ed="annotation--darkText--xCvQV",ec="annotation--properties--1p6UF",eu="annotation--noValue--HHQOU",ep="annotation--propertyOptionIconSvg--LypST",eg="annotation--icon--w1enR",eh="annotation--chit--3je6E",ef="annotation--solidPaint--ClR6h",ex="annotation--solidPaintValue--9PQMf annotation--_ellipsis--8F1VE",em="annotation--variablePill--VNxoI",ev="annotation--viewAnnotationSelected--UApdn",eb="annotation--categoryOptionLabel--Iz9RB",ey="annotation--buttonReset--Emcnw";function ew({valueProps:n,isHovered:e,variableContainerClassName:t}){let o=(0,n7.u)(n?.variableId);if("mixed"===n.format){let o=n.value.some(n=>!!n.variableId);return(0,a.jsx)("div",{className:L()("annotation--multipleVariableWrapper--OW3M1",o&&"annotation--vertical--zmpVv"),children:n.value.map((i,l)=>(0,a.jsxs)("div",{className:"annotation--multipleVariableValue--5-5xk",children:[(0,a.jsx)(ew,{valueProps:i,isHovered:e,variableContainerClassName:t}),l<n.value.length-1&&!o&&(0,a.jsx)("span",{children:", "})]},l))})}let i=`${(0,n9.m3)(n)}`;return o?(0,a.jsx)(en.wG,{dataTestId:"styledValueVariable",containerClassName:L()(em,t),text:o.name,disableHover:!0,isHovered:e,tooltip:i}):(0,a.jsx)(a.Fragment,{children:i})}var e_=t(182814),eA=t(213760),eN=t(814982),ej=t(425045);function eI({svg:n}){return(0,a.jsx)(nN.B,{svg:n,className:L()(eg,ep)})}var ek=t(299062);let eS=n=>(0,n9.nd)(n,"");function eC({nodeFields:n,variable:e,isPreview:t=!1}){let o=(0,n8.v4)(),i=(0,n3.qM)(o,n?.stackSpacing,eS);return e?t?(0,a.jsx)(a.Fragment,{children:e.name}):(0,a.jsx)(en.wG,{containerClassName:em,text:e.name,disableHover:!0}):(0,ej.rO)(n?.stackPrimaryAlignItems)?(0,M.tx)("dev_handoff.annotations.auto"):(0,a.jsx)(a.Fragment,{children:i})}function eE({nodeFields:n,isPreview:e=!1}){let t=(0,n7.u)(n?.itemSpacingVariableId);return e?(0,a.jsx)(eC,{nodeFields:n,variable:t,isPreview:!0}):(0,a.jsx)("div",{className:t?void 0:"annotation--spacingProperty--RCjSM annotation--coloredProperty--OTQ6l",children:(0,a.jsx)("span",{children:(0,a.jsx)(eC,{nodeFields:n,variable:t})})})}function eL({rawValues:n,variables:e,isPreview:t=!1,isTextProperty:o=!1}){let i=(0,n8.v4)(),l=(0,n3.Fm)(i,n,eS,{isTextProperty:o});if(n.length!==e.length)throw Error("<ManySidedProperty /> must have the same number of rawValues and variables");let r=e.map((n,e)=>({value:l[e],format:"pixels",variableId:n?.node_id})),s=r[0]?.variableId;for(let n of r)if(n.variableId!==s){if(t)return(0,M.tx)("fullscreen.mixed");return(0,a.jsx)(ew,{variableContainerClassName:em,valueProps:{format:"mixed",value:r}})}return s?t?(0,a.jsx)(a.Fragment,{children:s}):(0,a.jsx)(ew,{variableContainerClassName:em,valueProps:r[0]}):n.some(e=>e!==n[0])?t?(0,M.tx)("fullscreen.mixed"):(0,a.jsx)(ew,{variableContainerClassName:em,valueProps:{format:"pixels",value:l.join(", ")}}):(0,a.jsx)(ew,{variableContainerClassName:em,valueProps:{format:"pixels",value:l[0]}})}function eT({nodeFields:n,isPreview:e=!1}){let t=(0,n7.u)(n.paddingTopVariableId),o=(0,n7.u)(n.paddingRightVariableId),i=(0,n7.u)(n.paddingBottomVariableId),l=(0,n7.u)(n.paddingLeftVariableId),{stackTopPadding:r,stackRightPadding:s,stackBottomPadding:d,stackLeftPadding:c}=n,u=[t,o,i,l].some(n=>!!n);return e?(0,a.jsx)(eL,{rawValues:[r,s,d,c],variables:[t,o,i,l],isPreview:!0}):(0,a.jsx)("div",{className:L()(u?void 0:"annotation--paddingProperty--ckvG6 annotation--coloredProperty--OTQ6l"),children:(0,a.jsx)("span",{children:(0,a.jsx)(eL,{rawValues:[r,s,d,c],variables:[t,o,i,l]})})})}function eV({nodeId:n}){let e=(0,_.wA)(e=>{let t=e.get(n);return t?{stackWrap:t.stackWrap,stackMode:t.stackMode}:null},n);if(e?.stackWrap==="WRAP")return(0,a.jsx)(eI,{svg:ek.A});switch(e?.stackMode){case"HORIZONTAL":return(0,a.jsx)(e_.g,{"data-testid":"Icon24AlLayoutGridHorizontalSmall",className:L()(eg,ep)});case"VERTICAL":return(0,a.jsx)(eA.C,{"data-testid":"Icon24AlLayoutGridVerticalSmall",className:L()(eg,ep)});case"GRID":return(0,a.jsx)(eN.t,{"data-testid":"Icon24GridView",className:L()(eg,ep)});default:return null}}function eM({nodeFields:n}){if("WRAP"===n.stackWrap)return(0,M.tx)("fullscreen.properties_panel.stack_panel.wrap");switch(n.stackMode){case"HORIZONTAL":return(0,M.tx)("dev_handoff.annotations.autolayout_horizontal");case"VERTICAL":return(0,M.tx)("dev_handoff.annotations.autolayout_vertical");case"GRID":return(0,M.tx)("inspect_panel.properties.flow.grid");default:return null}}function eR({nodeFields:n}){if(!n||!n.isStack)return null;if("HORIZONTAL"===n.stackMode)switch(n.stackPrimaryAlignItems){case"MIN":switch(n.stackCounterAlignItems){case"MIN":return(0,M.tx)("dev_handoff.annotations.alignment.top_left");case"CENTER":return(0,M.tx)("dev_handoff.annotations.alignment.left");case"MAX":return(0,M.tx)("dev_handoff.annotations.alignment.bottom_left");case"BASELINE":return(0,M.tx)("dev_handoff.annotations.alignment.baseline_left")}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(n.stackCounterAlignItems){case"MIN":return(0,M.tx)("dev_handoff.annotations.alignment.top_center");case"CENTER":return(0,M.tx)("dev_handoff.annotations.alignment.center");case"MAX":return(0,M.tx)("dev_handoff.annotations.alignment.bottom_center");case"BASELINE":return(0,M.tx)("dev_handoff.annotations.alignment.baseline_center")}case"MAX":switch(n.stackCounterAlignItems){case"MIN":return(0,M.tx)("dev_handoff.annotations.alignment.top_right");case"CENTER":return(0,M.tx)("dev_handoff.annotations.alignment.right");case"MAX":return(0,M.tx)("dev_handoff.annotations.alignment.bottom_right");case"BASELINE":return(0,M.tx)("dev_handoff.annotations.alignment.baseline_right")}}switch(n.stackPrimaryAlignItems){case"MIN":switch(n.stackCounterAlignItems){case"MIN":return(0,M.tx)("dev_handoff.annotations.alignment.top_left");case"CENTER":return(0,M.tx)("dev_handoff.annotations.alignment.top_center");case"MAX":return(0,M.tx)("dev_handoff.annotations.alignment.top_right");case"BASELINE":return null}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(n.stackCounterAlignItems){case"MIN":return(0,M.tx)("dev_handoff.annotations.alignment.left");case"CENTER":return(0,M.tx)("dev_handoff.annotations.alignment.center");case"MAX":return(0,M.tx)("dev_handoff.annotations.alignment.right");case"BASELINE":return null}case"MAX":switch(n.stackCounterAlignItems){case"MIN":return(0,M.tx)("dev_handoff.annotations.alignment.bottom_left");case"CENTER":return(0,M.tx)("dev_handoff.annotations.alignment.bottom_center");case"MAX":return(0,M.tx)("dev_handoff.annotations.alignment.bottom_right");case"BASELINE":return null}}}function eP({value:n,variableAlias:e,isPreview:t}){let o=(0,n7.u)(e?.id);return o&&t?(0,a.jsx)(a.Fragment,{children:o.name}):(0,a.jsx)(ew,{variableContainerClassName:em,valueProps:{value:n}})}var eO=t(624155),eW=t(391145),eD=t(77417),eF=t(561437),eB=t(559185);function ez(n,e){let t=(0,p.d4)(n=>n.library),a=(0,eB.f$)(n),o=(0,P.mJ)(a);if(!n||!a||!o)return null;let i=(0,eO.Gp)(n.key,[a],t);if(!i)return null;let l=i.value;return"SUBSCRIBED_WITHOUT_LIBRARY"===i.kind&&(l.style_type=e),l.description=o.description,l.name=o.name,l.isLocal="LOCAL"===i.kind,l}function eH(n,e){if(1===e)return n;let t=(100*e).toLocaleString("en",{maximumFractionDigits:2})+"%";return`${n} \xb7 ${t}`}function eG(n,e,t){let{opacity:a=1}=n;switch(n.type){case"SOLID":{if(!n.color)return null;let{color:o}=n,{a:i=1}=o,l=t({...o,a:i*a},{alphaInPercent:!0});return e?e.name:l}case"GRADIENT_LINEAR":return eH((0,M.t)("dev_handoff.selection_colors.gradient_linear"),a);case"GRADIENT_ANGULAR":return eH((0,M.t)("dev_handoff.selection_colors.gradient_angular"),a);case"GRADIENT_DIAMOND":return eH((0,M.t)("dev_handoff.selection_colors.gradient_diamond"),a);case"GRADIENT_RADIAL":return eH((0,M.t)("dev_handoff.selection_colors.gradient_radial"),a);case"IMAGE":return eH((0,M.t)("dev_handoff.annotations.image"),a);case"VIDEO":return eH((0,M.t)("dev_handoff.annotations.video"),a);default:return null}}function eU({paints:n,styleRef:e,variables:t}){let o=t?.[0],i=(0,eD.Ig)(),l=(0,n7.u)(o?.id),r=ez(e,"FILL");return 0===n.length?null:r?(0,a.jsx)(a.Fragment,{children:r.name}):n.length>1?(0,M.tx)("dev_handoff.annotations.multiple"):(0,a.jsx)(a.Fragment,{children:eG(n[0],l,i)})}function eq({paints:n}){let e=n[0];return(0,a.jsx)(eW.J,{className:eh,tabIndex:-1,paint:e,allowMouseDownPropagation:!0})}function eX({paint:n,variableAlias:e}){let t=(0,eD.Ig)(),o=(0,n7.u)(e?.id),i=eG(n,o,t);return i?(0,a.jsxs)("div",{className:ef,children:[(0,a.jsx)(eW.J,{className:eh,paint:n,tabIndex:-1,allowMouseDownPropagation:!0}),(0,a.jsx)("span",{className:ex,title:i,children:o?(0,a.jsx)(en.wG,{containerClassName:em,text:i,disableHover:!0}):i})]}):null}function eK({styleRef:n,styleType:e,hideIcon:t=!1}){let o=ez(n,e);return(!function(n){let e=(0,p.d4)(n=>n.library),t=(0,eB.f$)(n),a=t?(0,eO.Gp)(n.key,[t],e):void 0;(0,eO.w$)(a)}(n),o)?(0,a.jsxs)("div",{className:ef,children:[!t&&(0,a.jsx)("div",{className:L()("annotation--styleChit--yCQ3O annotation--chit--3je6E",eg),children:(0,a.jsx)(eF.zi,{dsStyle:o})}),(0,a.jsx)("span",{className:ex,title:o.name,children:o.name})]}):null}function e$({paints:n,styleRef:e,variables:t}){return e?(0,a.jsx)(eK,{styleRef:e,styleType:"FILL"}):0===n.length?null:(0,a.jsx)("div",{className:"annotation--mixedValues--Z0qIk",children:n.map((n,e)=>(0,a.jsx)(eX,{paint:n,variableAlias:t?.[e]},e))})}var eY=t(271899),eQ=t(491488),eJ=t(241421),eZ=t(731650);function e0({effects:n,styleRef:e}){let t=ez(e,"EFFECT");if(t)return(0,a.jsx)(a.Fragment,{children:t.name});if(n.length>1)return(0,M.tx)("dev_handoff.annotations.multiple");let o=n[0];return o?(0,a.jsx)(e1,{effect:o}):null}function e1({effect:n}){switch(n.type){case"DROP_SHADOW":return(0,M.tx)("dev_handoff.annotations.shadow");case"BACKGROUND_BLUR":return(0,M.tx)("fullscreen.properties_panel.effects.background_blur");case"FOREGROUND_BLUR":return(0,M.tx)("fullscreen.properties_panel.effects.layer_blur");case"INNER_SHADOW":return(0,M.tx)("fullscreen.properties_panel.effects.inner_shadow");case"GRAIN":return(0,M.tx)("fullscreen.properties_panel.effects.texture");case"NOISE":return(0,M.tx)("fullscreen.properties_panel.effects.noise");case"GLASS":return(0,M.tx)("fullscreen.properties_panel.effects.glass");case"REPEAT":case"SYMMETRY":case void 0:return null}}function e5({effects:n,styleRef:e}){return(0,a.jsx)(a.Fragment,{children:n.map((n,t)=>(0,a.jsx)(e8,{effect:n,styleRefHeader:0===t?e:null},t))})}function e2({effect:n,variables:e}){let t=[n.offset?.x,n.offset?.y,n.radius,n.spread];return t.some((n,t)=>e[t]?.name)?(0,a.jsx)("div",{children:t.map((n,t)=>{if(void 0===n)return null;let o=e[t];return o?.name?(0,a.jsx)(en.wG,{text:o.name,disableHover:!0},t):(0,a.jsx)("div",{children:n},t)}).filter(n=>null!==n)}):(0,a.jsx)("span",{children:t.filter(n=>void 0!==n).join(", ")})}function e4({effect:n,radiusVariable:e}){return e?.name?(0,a.jsx)("span",{className:"annotation--effectBlurVariable--mbYFb",children:(0,a.jsx)(en.wG,{text:e.name,disableHover:!0})}):void 0===n.radius?null:(0,a.jsx)("span",{children:` ${(0,n9.nd)(n.radius,"px")}`})}let e6=new eJ.SU;function e8({effect:n,styleRefHeader:e}){let t=(0,eD.Ig)(),o=e&&(0,a.jsx)(e3,{styleRef:e}),i=[n.xVar,n.yVar,n.radiusVar,n.spreadVar,n.colorVar].map(n=>{if(n?.value?.alias){let e=eQ.sD.fromKiwi(n.value.alias);if(e)return eQ.sD.toString(e)}return null}),l=(0,n7.hg)(i);switch(n.type){case"DROP_SHADOW":case"INNER_SHADOW":{let{color:e}=n,i=l[4],r=e?t(e,{alphaInPercent:!0}):null;return(0,a.jsxs)("div",{children:[o,(0,a.jsx)("span",{children:(0,a.jsx)(e1,{effect:n})}),e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{}),(0,a.jsxs)("div",{className:ef,children:[(0,a.jsx)(eW.J,{className:L()(eh,"annotation--chitInline--vG6cM"),color:e,allowMouseDownPropagation:!0}),i?(0,a.jsx)(en.wG,{text:i.name,disableHover:!0}):(0,a.jsx)("span",{className:ex,title:r||void 0,children:r})]})]}),(0,a.jsx)("span",{}),(0,a.jsx)(e2,{effect:n,variables:l}),n.blendMode&&"NORMAL"!==n.blendMode&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{children:e6.format(n.blendMode)})]})]})}case"BACKGROUND_BLUR":case"FOREGROUND_BLUR":return(0,a.jsxs)("div",{children:[o,(0,a.jsx)("span",{children:(0,a.jsx)(e1,{effect:n})}),(0,a.jsx)(e4,{effect:n,radiusVariable:l[2]})]});case"REPEAT":case"SYMMETRY":case"GLASS":case"NOISE":case"GRAIN":case void 0:return null}}function e3({styleRef:n}){let e=(0,eB.f$)(n),t=(0,P.mJ)(e);return e&&t?(0,a.jsx)("div",{children:t.name}):null}var e7=t(160761);let e9=n=>{switch(n){case"RIGHT":return(0,M.t)("inspect_panel.typography.align_right");case"CENTER":return(0,M.t)("inspect_panel.typography.align_center");case"JUSTIFIED":return(0,M.t)("inspect_panel.typography.align_justified");case"LEFT":return(0,M.t)("dev_handoff.annotations.align_left")}};function tn(){return(0,a.jsx)(nN.B,{svg:e7.A,className:L()(eg,ep)})}function te({textAlignHorizontal:n}){return(0,a.jsx)(a.Fragment,{children:e9(n)})}let tt=n=>n.toLocaleString("en",{maximumFractionDigits:2,useGrouping:!1});function ta({lineHeightOrMixed:n,variableAlias:e,isPreview:t}){let o=(0,n7.u)(e?.id),i=(0,n8.v4)(),l="mixed"!==n&&"PIXELS"===n.units?n.value:void 0,r=(0,n3.qM)(i,l,tt,{isTextProperty:!0});return"mixed"===n?(0,M.tx)("fullscreen.mixed"):o&&t?(0,a.jsx)(a.Fragment,{children:o.name}):"PERCENT"===n.units&&100===n.value?(0,M.tx)("dev_handoff.annotations.auto"):"RAW"===n.units?(0,a.jsx)(ew,{variableContainerClassName:em,valueProps:{format:"fig_number",value:{value:100*n.value,units:"PERCENT"},variableId:o?.node_id}}):(0,a.jsx)(ew,{variableContainerClassName:em,valueProps:{value:r,variableId:o?.node_id}})}function to({fontNameOrMixed:n,variableAlias:e,isPreview:t}){let o=(0,n7.u)(e?.id);return"mixed"===n?(0,M.tx)("fullscreen.mixed"):o&&t?(0,a.jsx)(a.Fragment,{children:o.name}):(0,a.jsx)(ew,{variableContainerClassName:em,valueProps:{value:n.family,variableId:o?.node_id}})}function ti({fontWeightOrMixed:n,variableAlias:e,isPreview:t}){let o=(0,n7.u)(e?.id);return"mixed"===n?(0,M.tx)("fullscreen.mixed"):(o&&o.resolvedType!==i.rXF.FLOAT&&(o=null),o&&t)?(0,a.jsx)(a.Fragment,{children:o.name}):(0,a.jsx)(ew,{variableContainerClassName:em,valueProps:{value:n,variableId:o?.node_id}})}var tl=t(372209),tr=t(374356),ts=t(668810),td=t(962815),tc=t(33649),tu=t(198130),tp=t(541014),tg=t(77351),th=t(275646);let tf=new Map([[i.L5V.HEIGHT,{label:()=>(0,M.t)("fullscreen.properties_panel.transform_panel.height"),category:"dimension",Icon:()=>(0,a.jsx)(eI,{svg:tc.A}),extractNodeFields:n=>n?{height:n.size.y,heightVar:n.boundVariables.height}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(tA,{value:n.height,variableAlias:n.heightVar,isPreview:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(tA,{value:n.height,variableAlias:n.heightVar}):null,index:0}],[i.L5V.MIN_HEIGHT,{label:()=>(0,M.t)("fullscreen.properties_panel.stack_panel.minmax.min_height_tt"),category:"dimension",Icon:()=>(0,a.jsx)(eI,{svg:tc.A}),extractNodeFields:n=>n?{minHeight:n.minHeight,minHeightVar:n.boundVariables.minHeight}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(tA,{value:n.minHeight,variableAlias:n.minHeightVar,isPreview:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(tA,{value:n.minHeight,variableAlias:n.minHeightVar}):null,index:0}],[i.L5V.MAX_HEIGHT,{label:()=>(0,M.t)("fullscreen.properties_panel.stack_panel.minmax.max_height_tt"),category:"dimension",Icon:()=>(0,a.jsx)(eI,{svg:tc.A}),extractNodeFields:n=>n?{maxHeight:n.maxHeight,maxHeightVar:n.boundVariables.maxHeight}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(tA,{value:n.maxHeight,variableAlias:n.maxHeightVar,isPreview:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(tA,{value:n.maxHeight,variableAlias:n.maxHeightVar}):null,index:0}],[i.L5V.WIDTH,{label:()=>(0,M.t)("fullscreen.properties_panel.transform_panel.width"),category:"dimension",Icon:()=>(0,a.jsx)(eI,{svg:tp.A}),extractNodeFields:n=>n?{width:n.size.x,widthVar:n.boundVariables.width}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(tA,{value:n.width,variableAlias:n.widthVar,isPreview:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(tA,{value:n.width,variableAlias:n.widthVar}):null,index:0}],[i.L5V.MIN_WIDTH,{label:()=>(0,M.t)("fullscreen.properties_panel.stack_panel.minmax.min_width_tt"),category:"dimension",Icon:()=>(0,a.jsx)(eI,{svg:tp.A}),extractNodeFields:n=>n?{minWidth:n.minWidth,minWidthVar:n.boundVariables.minWidth}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(tA,{value:n.minWidth,variableAlias:n.minWidthVar,isPreview:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(tA,{value:n.minWidth,variableAlias:n.minWidthVar}):null,index:0}],[i.L5V.MAX_WIDTH,{label:()=>(0,M.t)("fullscreen.properties_panel.stack_panel.minmax.max_width_tt"),category:"dimension",Icon:()=>(0,a.jsx)(eI,{svg:tp.A}),extractNodeFields:n=>n?{maxWidth:n.maxWidth,maxWidthVar:n.boundVariables.maxWidth}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(tA,{value:n.maxWidth,variableAlias:n.maxWidthVar,isPreview:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(tA,{value:n.maxWidth,variableAlias:n.maxWidthVar}):null,index:0}],[i.L5V.CORNER_RADIUS,{label:()=>(0,M.t)("fullscreen.properties_panel.transform_panel.corner_radius"),category:"dimension",Icon:()=>(0,a.jsx)(eI,{svg:tr.A}),extractNodeFields:n=>n?{rectangleTopLeftCornerRadius:n.rectangleTopLeftCornerRadius,rectangleTopRightCornerRadius:n.rectangleTopRightCornerRadius,rectangleBottomRightCornerRadius:n.rectangleBottomRightCornerRadius,rectangleBottomLeftCornerRadius:n.rectangleBottomLeftCornerRadius,topLeftRadiusVariable:n.boundVariables.topLeftRadius?.id,topRightRadiusVariable:n.boundVariables.topRightRadius?.id,bottomRightRadiusVariable:n.boundVariables.bottomRightRadius?.id,bottomLeftRadiusVariable:n.boundVariables.bottomLeftRadius?.id}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(tv,{nodeFields:n,isPreview:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(tv,{nodeFields:n}):null,index:0}],[i.L5V.STACK_MODE,{label:()=>(0,M.t)("dev_handoff.annotations.autolayout_mode"),category:"stack",Icon:({nodeId:n})=>(0,a.jsx)(eV,{nodeId:n}),extractNodeFields:n=>n?{stackMode:n.stackMode,stackWrap:n.stackWrap}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(eM,{nodeFields:n}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(eM,{nodeFields:n}):null,index:0}],[i.L5V.STACK_ALIGNMENT,{label:()=>(0,M.t)("dev_handoff.annotations.alignment"),category:"stack",Icon:({nodeId:n})=>{let e=(0,_.wA)(e=>{let t=e.get(n);return!t||t.isGrid?null:{stackMode:t.stackMode,stackPrimaryAlignItems:t.stackPrimaryAlignItems,stackCounterAlignItems:t.stackCounterAlignItems,stackWrap:t.stackWrap}},n);return e?(0,a.jsx)(eI,{svg:(0,eY.GN)(e)}):null},extractNodeFields:n=>n?{isStack:n.isStack,stackMode:n.stackMode,stackPrimaryAlignItems:n.stackPrimaryAlignItems,stackCounterAlignItems:n.stackCounterAlignItems}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(eR,{nodeFields:n}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(eR,{nodeFields:n}):null,index:0}],[i.L5V.STACK_SPACING,{label:()=>(0,M.t)("inspect_panel.properties.gap"),category:"stack",Icon:({nodeId:n})=>{let e=(0,_.Fk)(e=>e.get(n)?.stackMode,n);return e&&"GRID"!==e?(0,a.jsx)(eI,{svg:"HORIZONTAL"===e?ts.A:td.A}):null},extractNodeFields:n=>n?{itemSpacingVariableId:n?.boundVariables?.itemSpacing?.id,stackSpacing:n.stackSpacing,stackPrimaryAlignItems:n.stackPrimaryAlignItems}:null,PreviewValue:({nodeFields:n})=>(0,a.jsx)(eE,{nodeFields:n,isPreview:!0}),DisplayValue:({nodeFields:n})=>(0,a.jsx)(eE,{nodeFields:n}),index:0}],[i.L5V.GRID_COLUMN_COUNT,{label:()=>(0,M.t)("inspect_panel.properties.grid.columns"),category:"stack",Icon:()=>(0,a.jsx)(n5,{"data-testid":"Icon24AlColumnsSmall",className:L()(eg,ep)}),extractNodeFields:n=>n?{columnCount:n.gridColumnCount}:null,PreviewValue:({nodeFields:n})=>(0,a.jsx)(eP,{value:n?n.columnCount:0,isPreview:!0}),DisplayValue:({nodeFields:n})=>(0,a.jsx)(eP,{value:n?n.columnCount:0}),index:0}],[i.L5V.GRID_ROW_COUNT,{label:()=>(0,M.t)("inspect_panel.properties.grid.rows"),category:"stack",Icon:()=>(0,a.jsx)(n2,{"data-testid":"Icon24AlRowsSmall",className:L()(eg,ep)}),extractNodeFields:n=>n?{rowCount:n.gridRowCount}:null,PreviewValue:({nodeFields:n})=>(0,a.jsx)(eP,{value:n?n.rowCount:0,isPreview:!0}),DisplayValue:({nodeFields:n})=>(0,a.jsx)(eP,{value:n?n.rowCount:0}),index:0}],[i.L5V.GRID_COLUMN_GAP,{label:()=>(0,M.t)("inspect_panel.properties.grid.column_gap"),category:"stack",Icon:({nodeId:n})=>{let e=(0,_.Fk)(e=>e.get(n)?.stackMode,n);return e&&"GRID"===e?(0,a.jsx)(eI,{svg:td.A}):null},extractNodeFields:n=>n?{itemSpacingVariableId:n?.boundVariables?.itemSpacing?.id,stackSpacing:n.gridColumnGap,stackPrimaryAlignItems:n.stackPrimaryAlignItems}:null,PreviewValue:({nodeFields:n})=>(0,a.jsx)(eE,{nodeFields:n,isPreview:!0}),DisplayValue:({nodeFields:n})=>(0,a.jsx)(eE,{nodeFields:n}),index:0}],[i.L5V.GRID_ROW_GAP,{label:()=>(0,M.t)("inspect_panel.properties.grid.row_gap"),category:"stack",Icon:({nodeId:n})=>{let e=(0,_.Fk)(e=>e.get(n)?.stackMode,n);return e&&"GRID"===e?(0,a.jsx)(eI,{svg:ts.A}):null},extractNodeFields:n=>n?{itemSpacingVariableId:n?.boundVariables?.itemSpacing?.id,stackSpacing:n.gridRowGap,stackPrimaryAlignItems:n.stackPrimaryAlignItems}:null,PreviewValue:({nodeFields:n})=>(0,a.jsx)(eE,{nodeFields:n,isPreview:!0}),DisplayValue:({nodeFields:n})=>(0,a.jsx)(eE,{nodeFields:n}),index:0}],[i.L5V.GRID_COLUMN_ANCHOR_INDEX,{label:()=>(0,M.t)("inspect_panel.properties.grid.column_start"),category:"stack",Icon:()=>(0,a.jsx)(n5,{"data-testid":"Icon24AlColumnsSmall",className:L()(eg,ep)}),extractNodeFields:n=>n?{columnIndex:n.gridColumnAnchorIndex}:null,PreviewValue:({nodeFields:n})=>(0,a.jsx)(eP,{value:n?n.columnIndex+1:0,isPreview:!0}),DisplayValue:({nodeFields:n})=>(0,a.jsx)(eP,{value:n?n.columnIndex+1:0}),index:0}],[i.L5V.GRID_ROW_ANCHOR_INDEX,{label:()=>(0,M.t)("inspect_panel.properties.grid.row_start"),category:"stack",Icon:()=>(0,a.jsx)(n2,{"data-testid":"Icon24AlRowsSmall",className:L()(eg,ep)}),extractNodeFields:n=>n?{rowIndex:n.gridRowAnchorIndex}:null,PreviewValue:({nodeFields:n})=>(0,a.jsx)(eP,{value:n?n.rowIndex+1:0,isPreview:!0}),DisplayValue:({nodeFields:n})=>(0,a.jsx)(eP,{value:n?n.rowIndex+1:0}),index:0}],[i.L5V.GRID_COLUMN_SPAN,{label:()=>(0,M.t)("inspect_panel.properties.grid.horizontal_span"),category:"stack",Icon:()=>(0,a.jsx)(n4.o,{"data-testid":"Icon24ArrowRightSmall",className:L()(eg,ep)}),extractNodeFields:n=>n?{columnSpan:n.gridColumnSpan}:null,PreviewValue:({nodeFields:n})=>(0,a.jsx)(eP,{value:n?n.columnSpan:0,isPreview:!0}),DisplayValue:({nodeFields:n})=>(0,a.jsx)(eP,{value:n?n.columnSpan:0}),index:0}],[i.L5V.GRID_ROW_SPAN,{label:()=>(0,M.t)("inspect_panel.properties.grid.vertical_span"),category:"stack",Icon:()=>(0,a.jsx)(n6.W,{"data-testid":"Icon24ArrowDownSmall",className:L()(eg,ep)}),extractNodeFields:n=>n?{rowSpan:n.gridRowSpan}:null,PreviewValue:({nodeFields:n})=>(0,a.jsx)(eP,{value:n?n.rowSpan:0,isPreview:!0}),DisplayValue:({nodeFields:n})=>(0,a.jsx)(eP,{value:n?n.rowSpan:0}),index:0}],[i.L5V.STACK_PADDING,{label:()=>(0,M.t)("inspect_panel.properties.padding"),category:"stack",Icon:()=>(0,a.jsx)(eI,{svg:tu.A}),extractNodeFields:n=>n?{stackTopPadding:n.stackTopPadding,stackRightPadding:n.stackRightPadding,stackBottomPadding:n.stackBottomPadding,stackLeftPadding:n.stackLeftPadding,paddingTopVariableId:n.boundVariables?.paddingTop?.id,paddingRightVariableId:n.boundVariables?.paddingRight?.id,paddingBottomVariableId:n.boundVariables?.paddingBottom?.id,paddingLeftVariableId:n.boundVariables?.paddingLeft?.id}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(eT,{nodeFields:n,isPreview:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(eT,{nodeFields:n}):null,index:0}],[i.L5V.TEXT_STYLE,{label:()=>(0,M.t)("dev_handoff.annotations.text_style"),category:"text",Icon:tn,extractNodeFields:n=>({inheritedTextStyle:n?.inheritedTextStyle}),PreviewValue:({nodeFields:n})=>n?.inheritedTextStyle?(0,a.jsx)(tj,{styleRef:n.inheritedTextStyle}):null,DisplayValue:({nodeFields:n})=>n?.inheritedTextStyle?(0,a.jsx)(eK,{styleRef:n.inheritedTextStyle,styleType:"TEXT",hideIcon:!0}):null,index:0}],[i.L5V.FONT_FAMILY,{label:()=>(0,M.t)("inspect_panel.typography.font"),category:"text",Icon:tn,extractNodeFields:n=>n?{fontNameOrMixed:n.fontNameOrMixed,fontFamilyVariable:n.boundVariables.fontFamily?.[0]}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(to,{fontNameOrMixed:n.fontNameOrMixed,variableAlias:n.fontFamilyVariable,isPreview:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(to,{fontNameOrMixed:n.fontNameOrMixed,variableAlias:n.fontFamilyVariable}):null,index:0}],[i.L5V.FONT_STYLE,{label:()=>(0,M.t)("inspect_panel.code.font_style"),category:"text",Icon:tn,extractNodeFields:n=>({fontStyle:n?.fontName.style}),PreviewValue:({nodeFields:n})=>(0,a.jsx)(a.Fragment,{children:n?.fontStyle}),DisplayValue:({nodeFields:n})=>(0,a.jsx)(a.Fragment,{children:n?.fontStyle}),index:0}],[i.L5V.FONT_SIZE,{label:()=>(0,M.t)("dev_handoff.annotations.font_size"),category:"text",Icon:tn,extractNodeFields:n=>n?{fontSizeOrMixed:n.fontSizeOrMixed,fontSizeVariable:n.boundVariables.fontSize?.[0]}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(tA,{value:n.fontSizeOrMixed,variableAlias:n.fontSizeVariable,isPreview:!0,isTextProperty:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(tA,{value:n.fontSizeOrMixed,variableAlias:n.fontSizeVariable,isTextProperty:!0}):null,index:0}],[i.L5V.LINE_HEIGHT,{label:()=>(0,M.t)("fullscreen.type_panel.line_height"),category:"text",Icon:tn,extractNodeFields:n=>n?{lineHeightOrMixed:n.lineHeightOrMixed,lineHeightVariable:n.boundVariables.lineHeight?.[0]}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(ta,{lineHeightOrMixed:n.lineHeightOrMixed,variableAlias:n.lineHeightVariable,isPreview:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(ta,{lineHeightOrMixed:n.lineHeightOrMixed,variableAlias:n.lineHeightVariable}):null,index:0}],[i.L5V.LETTER_SPACING,{label:()=>(0,M.t)("fullscreen.type_panel.letter_spacing"),category:"text",Icon:tn,extractNodeFields:n=>n?{letterSpacingOrMixed:n.letterSpacingOrMixed,letterSpacingVariable:n.boundVariables.letterSpacing?.[0]}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(tN,{value:n.letterSpacingOrMixed,variableAlias:n.letterSpacingVariable,isPreview:!0,isTextProperty:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(tN,{value:n.letterSpacingOrMixed,variableAlias:n.letterSpacingVariable,isTextProperty:!0}):null,index:0}],[i.L5V.TEXT_ALIGN_HORIZONTAL,{label:()=>(0,M.t)("dev_handoff.annotations.text_align"),category:"text",Icon:tn,extractNodeFields:n=>({textAlign:n?.textAlignHorizontal}),PreviewValue:({nodeFields:n})=>n?.textAlign?(0,a.jsx)(te,{textAlignHorizontal:n.textAlign}):null,DisplayValue:({nodeFields:n})=>n?.textAlign?(0,a.jsx)(te,{textAlignHorizontal:n.textAlign}):null,index:0}],[i.L5V.FONT_WEIGHT,{label:()=>(0,M.t)("inspect_panel.typography.weight"),category:"text",Icon:tn,extractNodeFields:n=>n?{fontWeightOrMixed:n.fontWeightOrMixed,fontStyleVariable:n.boundVariables.fontStyle?.[0]}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(ti,{fontWeightOrMixed:n.fontWeightOrMixed,variableAlias:n.fontStyleVariable,isPreview:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(ti,{fontWeightOrMixed:n.fontWeightOrMixed,variableAlias:n.fontStyleVariable}):null,index:0}],[i.L5V.FILL,{label:()=>(0,M.t)("fullscreen.properties_panel.fill.fill"),category:"paint",Icon:({nodeId:n})=>{let e=(0,_.Fk)(e=>e.get(n)?.fills,n);return e?(0,a.jsx)(eq,{paints:e}):null},extractNodeFields:n=>n?{fills:n.fills,fillVariables:n.boundVariables.fills,inheritedFillStyle:n.inheritedFillStyle}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(eU,{paints:n.fills,variables:n.fillVariables,styleRef:n.inheritedFillStyle}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(e$,{paints:n.fills,styleRef:n.inheritedFillStyle,variables:n.fillVariables}):null,index:0}],[i.L5V.STROKE,{label:()=>(0,M.t)("fullscreen.properties_panel.fill.stroke"),category:"paint",Icon:({nodeId:n})=>{let e=(0,_.Fk)(e=>e.get(n)?.strokePaints.data,n);return e?(0,a.jsx)(eq,{paints:e}):null},extractNodeFields:n=>n?{strokePaints:n.strokePaints,strokeVariables:n.boundVariables.strokes,inheritedFillStyle:n.inheritedFillStyle,inheritedFillStyleForStroke:n.inheritedFillStyleForStroke}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(eU,{paints:n.strokePaints.data,variables:n.strokeVariables,styleRef:n.inheritedFillStyle}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(e$,{paints:n.strokePaints.data,styleRef:n.inheritedFillStyleForStroke,variables:n.strokeVariables}):null,index:0}],[i.L5V.STROKE_WIDTH,{label:()=>(0,M.t)("fullscreen.properties_panel.borders.stroke_width"),category:"paint",Icon:()=>(0,a.jsx)(eI,{svg:tg.A}),extractNodeFields:n=>n?{borderStrokeWeightsIndependent:n.borderStrokeWeightsIndependent,strokeWeight:n.strokeWeight,strokeWeightVariable:n.boundVariables.strokeWeight?.id,borderTopWeight:n.borderTopWeight,borderRightWeight:n.borderRightWeight,borderBottomWeight:n.borderBottomWeight,borderLeftWeight:n.borderLeftWeight,strokeTopWeightVariable:n.boundVariables.strokeTopWeight?.id,strokeRightWeightVariable:n.boundVariables.strokeRightWeight?.id,strokeBottomWeightVariable:n.boundVariables.strokeBottomWeight?.id,strokeLeftWeightVariable:n.boundVariables.strokeLeftWeight?.id}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(tb,{nodeFields:n,isPreview:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(tb,{nodeFields:n}):null,index:0}],[i.L5V.EFFECT,{label:()=>(0,M.t)("inspect_panel.code.effect"),category:"paint",Icon:function(){return(0,a.jsx)(eI,{svg:eZ.A})},extractNodeFields:n=>n?{effects:n.effects.filter(n=>n.visible),inheritedEffectStyle:n.inheritedEffectStyle}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(e0,{effects:n.effects,styleRef:n.inheritedEffectStyle}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(e5,{effects:n.effects,styleRef:n.inheritedEffectStyle}):null,index:0}],[i.L5V.OPACITY,{label:()=>(0,M.t)("fullscreen.scrubbable.opacity"),category:"paint",Icon:()=>(0,a.jsx)(eI,{svg:th.A}),extractNodeFields:n=>n?{opacity:n.opacity,opacityVariable:n.boundVariables.opacity?.id}:null,PreviewValue:({nodeFields:n})=>n?(0,a.jsx)(tm,{nodeFields:n,isPreview:!0}):null,DisplayValue:({nodeFields:n})=>n?(0,a.jsx)(tm,{nodeFields:n}):null,index:0}],[i.L5V.COMPONENT,{label:()=>(0,M.t)("dev_handoff.annotations.component"),category:"component",Icon:()=>(0,a.jsx)(eI,{svg:tl.A}),extractNodeFields:(n,e)=>{let t;let a=n?.symbolId;if(a){let n=e.get(a);n&&(n.isState&&n.parentNode?.name&&(t=`${n.parentNode.name} (${n.name})`),t=n.name)}return{symbolName:t}},PreviewValue:({nodeFields:n})=>(0,a.jsx)(a.Fragment,{children:n?.symbolName}),DisplayValue:({nodeFields:n})=>(0,a.jsx)(a.Fragment,{children:n?.symbolName}),index:0}]]),tx=0;function tm({nodeFields:n,isPreview:e=!1}){let t=(0,n7.u)(n.opacityVariable);return t&&e?(0,a.jsx)(a.Fragment,{children:t.name}):(0,a.jsx)(ew,{variableContainerClassName:em,valueProps:{format:"percent",value:n.opacity,variableId:t?.node_id}})}function tv({nodeFields:n,isPreview:e=!1}){let t=(0,n7.u)(n.topLeftRadiusVariable),o=(0,n7.u)(n.topRightRadiusVariable),i=(0,n7.u)(n.bottomRightRadiusVariable),l=(0,n7.u)(n.bottomLeftRadiusVariable);return(0,a.jsx)(eL,{rawValues:[n.rectangleTopLeftCornerRadius,n.rectangleTopRightCornerRadius,n.rectangleBottomRightCornerRadius,n.rectangleBottomLeftCornerRadius],variables:[t,o,i,l],isPreview:e})}function tb({nodeFields:n,isPreview:e=!1}){return n.borderStrokeWeightsIndependent?(0,a.jsx)(tw,{nodeFields:n,isPreview:e}):(0,a.jsx)(ty,{nodeFields:n,isPreview:e})}function ty({nodeFields:n,isPreview:e}){let t=(0,n7.u)(n.strokeWeightVariable);return t&&e?(0,a.jsx)(a.Fragment,{children:t.name}):(0,a.jsx)(ew,{variableContainerClassName:em,valueProps:{value:n.strokeWeight,variableId:t?.node_id,format:"pixels"}})}function tw({nodeFields:n,isPreview:e}){let t=(0,n7.u)(n.strokeTopWeightVariable),o=(0,n7.u)(n.strokeRightWeightVariable),i=(0,n7.u)(n.strokeBottomWeightVariable),l=(0,n7.u)(n.strokeLeftWeightVariable);return n?(0,a.jsx)(eL,{rawValues:[n.borderTopWeight,n.borderRightWeight,n.borderBottomWeight,n.borderLeftWeight],variables:[t,o,i,l],isPreview:e}):null}tf.forEach(n=>{n.index=tx++});let t_=n=>n.toLocaleString("en",{maximumFractionDigits:5,useGrouping:!1});function tA({value:n,variableAlias:e,isPreview:t,isTextProperty:o=!1}){let i=(0,n7.u)(e?.id),l=(0,n8.v4)(),r=(0,n3.qM)(l,"number"==typeof n?n:void 0,t_,{isTextProperty:o});return null===n?null:"mixed"===n?(0,M.tx)("fullscreen.mixed"):i&&t?(0,a.jsx)(a.Fragment,{children:i.name}):(0,a.jsx)(ew,{variableContainerClassName:em,valueProps:{value:r,variableId:i?.node_id}})}function tN({value:n,variableAlias:e,isPreview:t,isTextProperty:o=!1}){let i=(0,n7.u)(e?.id),l=(0,n8.v4)(),r=(0,n3.qM)(l,"mixed"===n?void 0:n.value,t_,{isTextProperty:o});return"mixed"===n?(0,M.tx)("fullscreen.mixed"):i&&t?(0,a.jsx)(a.Fragment,{children:i.name}):"PIXELS"===n.units?(0,a.jsx)(ew,{variableContainerClassName:em,valueProps:{format:"pixels",value:r,variableId:i?.node_id}}):(0,a.jsx)(ew,{variableContainerClassName:em,valueProps:{format:"fig_number",value:n,variableId:i?.node_id}})}function tj({styleRef:n}){let e=(0,eB.f$)(n),t=(0,P.mJ)(e);return t?(0,a.jsx)(a.Fragment,{children:t.name}):null}var tI=t(555642),tk=(n=>(n[n.MANUAL=0]="MANUAL",n[n.CODEBASE_SUGGESTIONS=1]="CODEBASE_SUGGESTIONS",n[n.MANAGED_STRING=2]="MANAGED_STRING",n))(tk||{}),tS=(n=>(n[n.ALIGNED=0]="ALIGNED",n[n.ABOVE=1]="ABOVE",n[n.BELOW=2]="BELOW",n))(tS||{}),tC=t(666875),tE=t(265149),tL=t(772523),tT=t(506192);let tV=(0,r.eU)(new Map),tM=((0,r.eU)(null,(n,e,{nodeId:t,suggestions:a})=>{let o=new Map(n(tV));0===a.length?o.delete(t):o.set(t,a),e(tV,o)}),{nodeSuggestionsByTlf:new Map,nodeSuggestionsByGuid:new Map});var tR=t(877643),tP=t(366815),tO=t(587277);function tW({nodeId:n,nodeFields:e,isFadedOut:t,suggestions:o}){let i=(0,P.uQ)()===n,l=n=>{n&&(tL.wr(),(0,tO.S)("annotations"),tL.Dh([n]))},r=o.slice(0,3).map(n=>n.name).join(", ");return(0,a.jsxs)(tP.D8,{className:L()(ee,el,{[ev]:i,[es]:t}),role:"button",tabIndex:0,onMouseDown:()=>{i||(e.firstChildGuid?l(e.firstChildGuid):l(n))},"data-testid":"annotationDisplay",recordingKey:`viewAnnotationContainer-${e.name}`,children:[(0,a.jsx)("div",{className:"annotation--codeConnectIcon--nFdfw",children:(0,a.jsx)(tR.s,{})}),(0,a.jsx)("div",{className:"annotation--codeConnectLabel--Pd3TS",children:(0,a.jsx)("span",{className:"annotation--codeConnectLabelName--d-Hdu",children:r})})]})}let tD={type:tk.CODEBASE_SUGGESTIONS,useSharedHooksContext:()=>(function(){let n=(0,r.md)(tV),e=(0,s.eY)();if(!(0,l.kc)().dt_ccv2_on_canvas)return tM;let t=new Map,a=new Map;for(let[o,i]of n.entries()){let n=e.get(o);if(!n)continue;let l=n.findContainingTopLevelFrameOrSelf(),r={nodeId:o,node:n,tlfGuid:l,possibleSuggestions:i};t.set(o,r),l&&(a.has(l)||a.set(l,[]),a.get(l)?.push(r))}return{nodeSuggestionsByTlf:a,nodeSuggestionsByGuid:t}})(),useRelevantTLFs:({nodeSuggestionsByTlf:n})=>Array.from(n.keys()),useNewAnnotationsByTlf(n,{nodeSuggestionsByTlf:e}){let t={};for(let[n,a]of e.entries())t[n]=a.map(n=>({nodeId:n.nodeId,uniqueId:`${n.nodeId}-codebase-suggestions`,annotationType:tk.CODEBASE_SUGGESTIONS,meta:{nodeSuggestions:n.possibleSuggestions}}));return t},annotationWrapperClassName:"annotation--annotationWrapperCodebaseSuggestions--1G1LW",AnnotationDisplayOverride({nodeInfo:n,isFadedOut:e}){var t;let o=(t=n.nodeId,(0,_.wA)((n,e)=>{let t=n.get(e);return t?{firstChildGuid:t.childrenNodes[0]?.guid,tlfNodeId:t.findContainingTopLevelFrameOrSelf(),type:t.type,name:t.name}:null},t));return o?(0,a.jsx)(tW,{nodeId:n.nodeId,nodeFields:o,isFadedOut:e,suggestions:n.meta.nodeSuggestions}):null}};var tF=t(444780),tB=t(58212),tz=t(832832),tH=t(984374),tG=t(31786);let tU=(0,r.Iz)(n=>(0,r.mg)((0,r.eU)(e=>{if(!n)return null;let t=e(tH.Mk[tG.PW.MANAGED_STRING].local),a=e(tH.Mk[tG.PW.MANAGED_STRING].subscribed);return t[n]??a[n]??null}),n=>n)),tq={type:tk.MANAGED_STRING,useSharedHooksContext(){let n=(0,p.d4)(n=>n.mirror.appModel.currentPage),e=(0,nS.m0)();return(0,_.wA)((n,e,t)=>(0,l.kc)().cheddar&&(0,l.kc)().cheddar_annotations&&t?(n.get(e)?(0,h.qT)(n,e):[]).reduce((n,e)=>{let t=function n(e){return e.childrenNodes.flatMap(e=>{if(e.visible){if((0,tz.go)(e)){let n=function(n){let e=(0,tz.gk)(n);return e?{managedStringId:e.value.managedStringId}:null}(e);if(!n)return;return{annotationType:tk.MANAGED_STRING,nodeId:e.guid,uniqueId:`${e.guid}-${eQ.oW.toString(n.managedStringId)}`,meta:{...n}}}return n(e)}}).filter(k.Vq)}(e);return t.length>0?{...n,[e.guid]:t}:n},{}):{},n,e)},useRelevantTLFs:n=>Object.keys(n),useNewAnnotationsByTlf:(n,e)=>n.reduce((n,t)=>({...n,[t]:e[t]||[]}),{}),annotationWrapperClassName:"annotation--annotationWrapperManagedString--RTskR",AnnotationDisplayOverride({nodeInfo:n,isFadedOut:e}){let t=(0,P.uQ)()===n.nodeId,o=function(n){let e=(0,r.md)(tU(n));return e?.managedStringData.key}(n.meta.managedStringId);return o?(0,a.jsx)(tX,{isFadedOut:e,isSelected:t,nodeId:n.nodeId,stringKey:o}):null}};function tX({isFadedOut:n,isSelected:e,nodeId:t,stringKey:o}){let l=(0,p.wA)(),r=(0,x.hC)(),s=n=>{n&&(tL.wr(),(0,tO.S)("annotations"),tL.Dh([n]),tL.tw()?.getCopy()!==i._gJ.STRING_MANAGEMENT&&(0,tL.ax)(i._gJ.STRING_MANAGEMENT))};return(0,a.jsxs)("div",{className:L()(ee,el,{[ev]:e,[es]:n}),children:[(0,a.jsx)(nr.E,{onClick:()=>s(t),className:L()(ey,"annotation--managedStringLabel--fWb5O"),children:o}),(0,a.jsx)(tK,{"aria-label":(0,M.t)("inspect_panel.copy"),onClick:()=>{r("string_management.annotations.copy_key",{stringKey:o,nodeId:t}),navigator.clipboard.writeText(o).then(()=>{l(tB.F.enqueue({message:(0,M.t)("string_translation_management.copied_to_clipboard",{stringKey:o})}))})},htmlAttributes:{"data-tooltip-type":nE.Ib.TEXT,"data-tooltip":(0,M.t)("general.back")},children:(0,a.jsx)(tF.O,{})})]})}let tK=(0,o.forwardRef)(({children:n,variant:e,...t},o)=>(0,a.jsx)(nr.E,{ref:o,...t,className:L()(ey,"annotation--iconButton--w7kfn","annotation--ghost--thK4p"),children:(0,a.jsx)("span",{"aria-hidden":!0,className:eg,children:n})}));tK.displayName="IconButton";let t$=[tD,tq],tY=t$.reduce((n,e)=>("type"in e&&(n[e.type]=e),n),{}),tQ=(0,T.jz)("15px"),tJ=o.memo(function({lineWidth:n,lineHeight:e,lineAlignment:t,isLeftAligned:o,isMinimized:i}){let l="",r=Math.min(20,n),s=Math.min(20,e);return t===tS.ALIGNED?l=`M 0 ${e/2} h ${n}`:t===tS.ABOVE?l=o?`
        M 0 0
        h ${n-r}
        q ${r} 0 ${r} ${s}
        v ${e-s}
      `:`
        M ${n} 0
        h -${n-r}
        q -${r} 0 -${r} ${s}
        v ${e-s}`:t===tS.BELOW&&(l=o?`
        M 0 ${e}
        h ${n-r}
        q ${r} 0 ${r} -${s}
        v -${e-s}
      `:`
        M ${n} ${e}
        h -${n-r}
        q -${r} 0 -${r} -${s}
        v -${e-s}
      `),(0,a.jsx)("svg",{width:n+2*tQ,height:e+2*tQ,className:L()(ea,{"annotation--annotationLineLeftAligned--W-1DZ":o,"annotation--annotationLineBelowNode--JeafT":t===tS.BELOW}),children:(0,a.jsxs)("g",{transform:`translate(${tQ}, ${tQ})`,children:[i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("circle",{className:"annotation--annotationLineStartDot--x6RNc",cx:o?-6:n+6,cy:t===tS.ABOVE?0:e,r:4,strokeWidth:"4"}),(0,a.jsx)("circle",{className:"annotation--annotationLineStartInnerDot--aw58q",cx:o?-6:n+6,cy:t===tS.ABOVE?0:e,r:1,strokeWidth:"0"})]}),(0,a.jsx)("path",{d:l,strokeWidth:"var(--line-width-scale)",fill:"none",strokeDasharray:"calc(var(--line-width-scale) * 3) calc(var(--line-width-scale) * 2)"}),(0,a.jsx)("circle",{className:eo,cx:o?n:0,cy:t===tS.ABOVE?e:0,strokeWidth:"0"})]})})});function tZ({nodeId:n,annotationId:e,setDimensions:t,isAnnotationFocused:d,annotationType:c,lineColor:p,children:g,offsetX:h,offsetY:f,lineWidth:m,lineHeight:v,lineAlignment:b,isLeftAligned:y,shouldMinimize:w,shouldDelayHover:A,shouldHide:N,isEditingAnnotation:I,isInCentralTLF:k}){let S=(0,x.IL)(),C=(0,o.useRef)(null),[E,T]=(0,o.useState)(!1),V=(0,j.LZ)(),M=(0,s.dH)(),R=(0,P.uQ)(),O=R===n,{data:W}=(0,tT.BK)(ne),D=W?.annotationId===e,[F]=(0,tC.A)(E,60),B=O||D||(A?E&&(F||w):E),z=(0,r.md)(u.m),H=(0,_.wA)((n,e)=>{let t=n.get(e);return t?{annotationsLength:t.annotations.length,nodeType:t.type,absoluteBoundingBox:t.absoluteBoundingBox}:null},n);(0,tE.wY)(w?void 0:C,n=>{n&&t(e,n)});let{annotationsLength:G,nodeType:U}=H??{},q=M===i.NLJ.ANNOTATE&&!E&&null!==R&&R!==n,X=w&&!I&&!d&&!E,K=(0,o.useCallback)(()=>{null===z&&(tL.Uc(n),X&&!E&&S("hover_minimized_annotation",{nodeId:n,nodeType:U}),T(!0))},[z,n,U,X,E,S]),$=(0,o.useCallback)(()=>{T(!1)},[]),Y=!N;c===tk.MANUAL&&(Y=I||Y&&(O||!!G));let Q=(0,o.useMemo)(()=>{let n={transform:`translate(${h}px, calc(${f}px - 50%))`,zIndex:k&&!B?10:void 0};return(!O||I)&&p?{...n,"--annotation-line-color":p,"--annotation-dot-border-color":p}:n},[h,f,O,I,p,k,B]);return(0,a.jsx)("div",{className:L()("annotation--annotationWrapper--pKMw2",tY[c]?.annotationWrapperClassName,{"annotation--wrapperMinimized--UOExu":X&&!E,[et]:I,"annotation--annotationWrapperSelected--ffb0X":O,annotationWrapperForcedHover:B||d&&!I,"annotation--transitionScaling--eD821":E!==F&&!d&&!I,"annotation--shouldHideEmptyAnnotations--WXr4h":(0,l.kc)().dt_component_annotations}),style:Q,"data-testid":"annotationWrapper",children:Y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tJ,{lineWidth:m,lineHeight:v,lineAlignment:b,isLeftAligned:y,isMinimized:X}),(0,a.jsxs)("div",{ref:C,onMouseOut:$,onMouseOver:K,className:L()({"annotation--annotationLeftAligned--FHQRp":y,"annotation--annotationRightAligned--VrH8e":!y}),"data-testid":`annotation-${e}`,children:[(0,a.jsx)("div",{className:L()("annotation--annotationHoverTarget--4y3Xc",{"annotation--annotationHoverTargetLeftAligned--G1twU":y})}),V&&(!X||E)&&g(q)]})]})})}var t0=t(954184);let t1=(0,nC.Fu)("has_opened_annotation_visibility_learn_more_link");function t5({nodeId:n,annotationId:e,viewportInfo:t,setDimensions:l,annotationIndex:s,offsetX:d,offsetY:c,lineWidth:p,lineHeight:m,lineAlignment:b,isLeftAligned:w}){let A=function(){let n=(0,x.IL)(),{Sprig:e}=(0,nA.A)(),t=!!(0,v.hA)(),a=(0,nS.m0)(),i=(0,nS.Em)(),l=(0,G.XR)();return o.useCallback((o,r,s,d)=>{g.l7.user(s?"edit-annotation":"create-annotation",()=>{s?o.updateAnnotation(d,r):o.addAnnotation(r);let c=(0,h.kh)((0,f.UN)(),o.guid),u=r.categoryId?l.find(n=>n.id===r.categoryId):null,p={nodeType:o.type,nodeId:o.guid,tlfId:c?.guid??o.guid,hasText:!!r.label,numProperties:r.properties.length,isDevModeFocusView:t,isDevMode:a,isDesignMode:i,category:u?(0,G.uA)(u):void 0,annotationId:d};s?n("edit_annotation",p):(n("create_annotation",p),e("track","create_annotation",{isDevMode:a,isDevModeFocusView:t,isDesignMode:i})),y.Y5.triggerAction("commit")})},[e,n,t,a,i,l])}(),j=N(),I=(0,r.Xr)(u.m),k=(0,_.wA)((n,e)=>n.get(e)?.annotations,n),S=(0,G.XR)({initializeIfNull:!0}),C=k?.[s],[E,L]=o.useState(C?.label??""),[T,V]=o.useState(C?.properties??[]),[M,R]=o.useState(()=>C?S.find(n=>n.id===C.categoryId)?.id??null:null),P=(0,o.useMemo)(()=>{if(!M)return null;let n=S.find(n=>n.id===M);return n?(0,G.FQ)(n):null},[M,S]);(0,o.useEffect)(()=>{M&&R(S.find(n=>n.id===M)?.id??null)},[S,M]);let O=o.useCallback(()=>{let t=!!C&&(""!==C.label||C.properties.length>0||null!==M),a=0===("lexical"===(0,nf.j_)(E)?(0,nf.El)(E):(0,nh.At)(E)).length;if(a&&0===T.length&&null===M)C&&j(n,s);else{let o=(0,f.UN)().get(n);o&&(A(o,{label:a?"":E,properties:T,categoryId:M},t,s),i.Ez5?.editorState().focusedAnnotationId.set(e))}I(null)},[C,E,T,I,j,n,s,A,M,e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t8,{viewportInfo:t,onPointerDown:O}),(0,a.jsx)(tZ,{annotationId:e,annotationType:tk.MANUAL,isAnnotationFocused:!0,isEditingAnnotation:!0,isLeftAligned:w,lineAlignment:b,lineColor:P??void 0,lineHeight:m,lineWidth:p,nodeId:n,offsetX:d,offsetY:c,setDimensions:l,shouldDelayHover:!1,shouldHide:!1,shouldMinimize:!1,children:()=>(0,a.jsx)(t2,{nodeId:n,saveAnnotation:O,inputText:E,setInputText:L,inputProperties:T,setInputProperties:V,categoryId:M,setInputCategoryId:R,annotationIndex:s})},e)]})}function t2({nodeId:n,saveAnnotation:e,inputText:t,setInputText:l,inputProperties:s,setInputProperties:d,categoryId:c,setInputCategoryId:u,annotationIndex:g}){let m=(0,p.wA)(),{Sprig:b}=(0,nA.A)(),y=(0,x.IL)(),w=(0,nS.Em)(),A=!!(0,v.hA)(),j=(0,nS.m0)(),{getTriggerProps:I,manager:k}=na.b(),{Dropdown:S,isDropdownShown:C,dropdownTargetRef:E,toggleDropdown:T}=(0,nT.B)("annotation-property-selector-dropdown"),V=N(),R=o.useRef(null),P=o.useId(),O=(0,G.XR)(),W=(0,_.Fk)((n,e)=>n.get(e)?.type||null,n),F=(0,_.wA)((n,e,t)=>{let a={},o=n.get(e);if(o)for(let n of t)(0,tI.J)(o,n.type,!0)&&(a[n.type]=!0);return a},n,t4),{availableProperties:B,selectedProperties:z}=o.useMemo(()=>{let n=[],e=[];for(let t of t4)s.some(n=>n.type===t.type)?e.push(t):F[t.type]&&n.push(t);return{availableProperties:n,selectedProperties:e}},[s,F]),H=(0,_.wA)((n,e,t)=>{let a=n.get(e);return t.map(e=>e.config.extractNodeFields(a,n))},n,B);o.useEffect(()=>{y("show_annotation_dialog",{nodeId:n,nodeType:W})},[y,W,n]);let U=o.useCallback(()=>{R.current?.focus()},[]),q=o.useCallback(n=>{d([...s,{type:n}])},[d,s]);function K(n){d(s.filter(e=>e.type!==n)),U()}let J=(0,o.useCallback)(e=>{let a=(0,f.UN)().get(n),o=c?O.find(n=>n.id===c):null,l=o?(0,G.uA)(o):null,r=e?O.find(n=>n.id===e):null,d=r?(0,G.uA)(r):null;if(a){let n=(0,h.kh)((0,f.UN)(),a.guid);y("select_annotation_category",{nodeId:a.guid,nodeType:a.type,tlfId:n?.guid??a.guid,hasText:!!t,numProperties:s.length,isDevModeFocusView:A,isDevMode:j,isDesignMode:w,newCategoryLabel:d,oldCategoryLabel:l,isPreset:r?r.preset!==i.Bll.NONE:null,annotationId:g}),b("track","select_annotation_category",{isDevMode:j,isDevModeFocusView:A,isDesignMode:w})}u(e)},[u,y,n,t,s,A,j,w,O,c,b,g]),[Z,nn]=o.useState(!1),ne=(0,ng.v_)("createAnnotation","keydown",(0,o.useCallback)(n=>{if(!k.isOpen&&!C){if("Escape"===n.key)e();else if("ArrowDown"===n.key){let e=n.ctrlKey||n.metaKey,t=n.shiftKey;e&&!t&&(nn(!0),T())}}},[k.isOpen,C,e,T]));o.useEffect(()=>(document.addEventListener("keydown",ne),()=>{document.removeEventListener("keydown",ne)}),[ne]);let nt=n_.qP("annotationLabelInput","submit",l),np=n_.v_("annotationLabelInput","keydown",n=>{n?.stopPropagation(),e()}),nh=(0,o.useCallback)(({html:n})=>{nt(n)},[nt]),nm=(0,o.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),!k.isOpen){let e=(0,f.UN)().get(n);if(e){let n=(0,h.kh)((0,f.UN)(),e.guid);y("click_annotation_category_picker",{nodeId:e.guid,nodeType:e.type,tlfId:n?.guid??e.guid,hasText:!!t,numProperties:s.length,isDevModeFocusView:A,annotationId:g}),b("track","click_annotation_category_picker",{isDevMode:j,isDevModeFocusView:A,isDesignMode:w})}}k.setOpen(!0)},[k,t,s,A,j,w,n,y,g,b]),nv=(0,o.useMemo)(()=>O.map(n=>({id:n.id,label:(0,G.uA)(n),color:(0,G.FQ)(n)}))??[],[O]),nb=(0,o.useMemo)(()=>O.find(n=>n.id===c),[O,c]),ny=o.useRef(null),nj=ny.current&&ny.current.scrollHeight>ny.current.clientHeight,nC={"--annotation-category-color":nb?(0,G.FQ)(nb)??"var(--color-bg)":"var(--color-bg)"},nV=(0,o.useCallback)(()=>{y("click_edit_annotation_categories",{nodeId:n,nodeType:W,isDevModeFocusView:A}),m(nI.to({type:n1,data:{recordingKey:"annotationCategoriesEditWindow"}})),k.setOpen(!1)},[m,y,n,W,A,k]),nM=(0,$.q5)(),nR=(0,o.useCallback)(()=>{if(null===nM)return;let e=(0,Y.jN)({file:nM,nodeId:n,isDevHandoff:j});m(X.S({fileKey:nM.key,url:e,source:Q.d.ANNOTATION_CONTEXT_MENU,visualBellMessageOverride:(0,M.t)("dev_handoff.annotations.copied_link_to_clipboard")}))},[m,nM,n,j]),nP=(0,o.useMemo)(()=>[...0===B.length?[{name:"no-properties",displayText:(0,M.t)("dev_handoff.annotations.all_properties_added"),displayTextClassName:eb,disabled:!0}]:[],...B.reduce((e,t,o,i)=>(e.push({name:`property-${o}`,displayText:t.config.label(),icon:(0,a.jsx)(t.config.Icon,{nodeId:n}),className:"annotation--propertyMenuOption--9-5ow",sideText:(0,a.jsx)(t.config.PreviewValue,{nodeFields:H[o]}),rightJustifySideText:!0,callback:()=>q(t.type),recordingKey:`createAnnotationOptionButton-${t.type}`}),o<i.length-1&&t.config.category!==i[o+1]?.config.category&&e.push({separator:!0,displayText:""}),e),[])],[B,H,n,q]),nO=(0,o.useCallback)(()=>{e()},[e]),{manager:nW,getTriggerProps:nD}=no.b({offset:{mainAxis:4}}),nF=(0,r.md)(t1),[nB,nz]=(0,o.useState)(!1),nH=w&&!nB;(0,o.useEffect)(()=>{"loaded"===nF.status&&nz(void 0!==nF.data)},[nF]);let nG=(0,o.useCallback)(()=>{m(nk.b({has_opened_annotation_visibility_learn_more_link:!0}))},[m]),nU=(0,a.jsxs)(na.bL,{manager:nW,children:[(0,a.jsx)(ni.d,{"aria-label":(0,M.t)("dev_handoff.annotations.more_actions"),recordingKey:"createAnnotationMoreActions",htmlAttributes:{"data-tooltip":(0,M.t)("dev_handoff.annotations.more_actions"),"data-tooltip-type":nE.Ib.TEXT},...nD({}),children:(0,a.jsx)(nc.J,{})}),(0,a.jsxs)(na.mc,{children:[(0,a.jsxs)(na.YJ,{children:[(0,a.jsx)(na.q7,{onClick:nR,children:(0,M.t)("dev_handoff.annotations.copy_link")}),(0,a.jsx)(na.q7,{onClick:()=>{V(n,g)},children:(0,M.t)("dev_handoff.annotations.delete")})]}),nH&&(0,a.jsxs)("div",{className:"annotation--visibilityDisclaimer--oQFzZ text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",children:[(0,a.jsx)("p",{children:(0,M.t)("dev_handoff.annotations.visibility_disclaimer")}),(0,a.jsx)(nl.N,{href:"https://help.figma.com/hc/articles/20774752502935-Add-measurements-and-annotate-designs-in-Dev-Mode",newTab:!0,onClick:nG,children:(0,M.t)("dev_handoff.annotations.visibility_learn_more")})]})]})]});return(0,a.jsx)(nL.vL,{name:"create-annotation",focusOnMount:!0,handleKeyDown:n=>{let{event:t}=n;"Escape"===t.key&&(n.accept(),e())},children:(0,a.jsxs)("div",{ref:E,"data-testid":"annotationDialog",children:[(0,a.jsxs)("div",{className:L()("annotation--createAnnotation--tWKSM annotation--_annotationBase--MPByC",nb?ei:void 0,D.Qx,D.Uu),style:nC,children:[(0,a.jsxs)("div",{className:"annotation--createAnnotationHeader--thXfu",children:[(0,a.jsx)("div",{className:"annotation--headerRowLeft--iIqjN",children:(0,a.jsxs)(na.bL,{manager:k,children:[(0,a.jsxs)(nr.E,{className:L()("annotation--categorySelectorButton--q2A6p",{[ed]:nb&&(0,G.cD)(nb),[ei]:!!nb}),"data-tooltip-type":nE.Ib.TEXT,"data-tooltip":(0,M.t)("dev_handoff.annotations.category_selector_tooltip"),"aria-label":(0,M.t)("dev_handoff.annotations.category_selector_tooltip"),recordingKey:"createAnnotationCategorySelectorButton",...I({onClick:nm}),children:[(0,a.jsx)("span",{className:"annotation--categorySelectorButtonLabel--xGX7w annotation--_ellipsis--8F1VE",children:nb?(0,G.uA)(nb):(0,M.t)("dev_handoff.annotations.no_category_option_label")}),(0,a.jsx)(nN.B,{className:"annotation--caret--noLOu",svg:nK.A})]}),(0,a.jsxs)(na.mc,{"data-testid":"createAnnotationCategorySelector",children:[(0,a.jsx)(na.YJ,{children:(0,a.jsx)(ns.H_,{checked:null===c,onChange:()=>J(null),recordingKey:n_.Pt("createAnnotationCategorySelector","category-option","no-category"),children:(0,a.jsx)("span",{className:eb,children:(0,M.tx)("dev_handoff.annotations.no_category_option_label")})})}),nv.length>0&&(0,a.jsx)(na.YJ,{children:nv.map(n=>(0,a.jsxs)(ns.H_,{checked:c===n.id,onChange:()=>J(n.id),recordingKey:n_.Pt("createAnnotationCategorySelector","category-option",n.label),children:[(0,a.jsx)(na.Q$,{children:(0,a.jsx)("div",{className:"annotation--categoryOptionIcon--jg6bS",children:(0,a.jsx)("div",{className:"annotation--colorCircle--i6hsL",style:{backgroundColor:n.color??void 0}})})}),n.label]},n.id))}),(0,a.jsx)(na.YJ,{children:(0,a.jsx)(na.q7,{onClick:nV,recordingKey:n_.Pt("createAnnotationCategorySelector","category-option","edit-categories"),children:(0,M.t)("dev_handoff.annotations.edit_categories_option_label")})})]})]})}),(0,a.jsxs)("div",{className:"annotation--headerRowRight--5h3Tr",children:[nU,(0,a.jsx)(nd.K,{"aria-label":(0,M.t)("general.close"),recordingKey:"closeAnnotationDialog",onClick:nO,children:(0,a.jsx)(nu.A,{})})]})]}),(0,a.jsxs)("div",{className:er,children:[(0,a.jsxs)("div",{className:L()(el,{"annotation--contentContainerNoProperties--pc2WE":0===z.length}),children:[(0,a.jsxs)("div",{ref:ny,className:L()("annotation--labelEditor--xNx12",{[D.ZR]:nj}),dir:"auto",children:[(0,a.jsx)("label",{id:P,style:{display:"none"},children:(0,M.t)("dev_handoff.annotations.add_annotation")}),(0,a.jsx)(nx.A,{anchorElemOverride:ny.current,ariaLabelledBy:P,innerRef:R,lexicalContentClassName:"annotation_lexical_editor--contentEditable--EVm11",namespace:"annotation-dialog-lexical-editor",onSave:nh,placeholder:(0,a.jsx)("div",{className:L()("annotation_lexical_editor--placeholder--pPwLm",{"annotation_lexical_editor--withCategory--bUCqy":!!nb}),children:(0,M.t)("dev_handoff.annotations.add_annotation")}),plugins:[(0,a.jsx)(nw,{onEnterPressed:np},0)],value:t,valueFormat:(0,nf.j_)(t)})]}),z.length>0&&(0,a.jsx)("div",{className:ec,children:z.map(e=>(0,a.jsx)(t6,{onRemoveProp:K,nodeId:n,property:e},`selected-${e.type}`))})]}),(0,a.jsx)("div",{className:"annotation--createAnnotationFooter--wx9JM",children:(0,a.jsxs)(nr.E,{className:L()("annotation--pinPropertyButton--OTLW3",{"annotation--pinPropertyButtonActive---nkvq":C}),actionOnPointerDown:!0,onClick:()=>{nn(!1),T()},"aria-label":(0,M.t)("dev_handoff.annotations.pin_properties_tooltip"),"data-tooltip-type":nE.Ib.TEXT,"data-tooltip":(0,M.t)("dev_handoff.annotations.pin_properties_tooltip"),recordingKey:"createAnnotationPinPropertyButton",children:[(0,a.jsx)(nN.B,{className:"annotation--pinPropertyButtonIcon--dgnI0",svg:t0.A}),(0,M.tx)("dev_handoff.annotations.pin_properties_label")]})})]})]}),(0,a.jsx)(S,{activatePathOnMount:[Z&&nP.length>0?nP[0].displayText??"":""],autofocusPrevOnDismount:!0,dataTestId:"createAnnotationPropertySelector",focusOnMount:Z,items:nP,minWidth:220,onDismissMenu:U,onDropdownHidden:U,preventEventCapture:!0,recordingKey:"createAnnotationPropertySelector",rootAndSubmenuMaxWidth:220,shouldUsePortal:!0,showPoint:!1})]})})}let t4=Array.from(tf.entries()).map(([n,e])=>({type:n,config:e}));function t6({nodeId:n,onRemoveProp:e,property:t}){let o=t.config.DisplayValue,{canHaveValue:i,nodeFields:l}=(0,_.wA)((n,e)=>{let a=n.get(e);if(!a)return{canHaveValue:!1,nodeFields:null};let o=(0,tI.J)(a,t.type,!1);return o?{canHaveValue:o,nodeFields:t.config.extractNodeFields(a,n)}:{canHaveValue:o,nodeFields:null}},n);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"annotation--selectedPropertyDisplayLabel--AtFEJ",children:t.config.label()}),(0,a.jsxs)("div",{className:"annotation--selectedPropertyValueWrapper--OyM0X",children:[(0,a.jsx)("span",{className:L()("annotation--selectedPropertyValue--wwu2U",{[eu]:!i}),children:i?(0,a.jsx)(o,{nodeFields:l}):(0,M.tx)("dev_handoff.annotations.no_value")}),(0,a.jsx)("span",{className:"annotation--selectedPropertyDelete--DMdrA",children:(0,a.jsx)(nd.K,{recordingKey:`removeAnnotation${t.type}`,htmlAttributes:{"data-tooltip-type":nE.Ib.TEXT,"data-tooltip":(0,M.t)("dev_handoff.annotations.remove_property")},"aria-label":(0,M.t)("dev_handoff.annotations.remove_property"),onClick:g.nc.user("remove-annotation",()=>{e(t.type)}),children:(0,a.jsx)(np.w,{})})})]})]})}function t8({viewportInfo:n,onPointerDown:e}){return(0,a.jsx)(nj.n.recordableDiv,{className:`${et} ${D.Dm} ${D.Uu}`,recordingKey:"annotationDialogBackground",style:{position:"absolute",left:n.x,top:n.y,width:n.width,height:n.height},onPointerDown:e})}var t3=t(264993),t7=t(827259),t9=t(147046),an=t(469191),ae=t(893178);let at=o.memo(function({nodeId:n,annotationId:e,annotationType:t,annotationMeta:l,setDimensions:r,shouldHide:s,isEditingAnnotation:d,offsetX:c,offsetY:u,lineWidth:p,lineHeight:g,lineAlignment:h,lineColor:f,isLeftAligned:x,shouldMinimize:m,shouldDelayHover:v,isInCentralTLF:b}){let y=(0,C.k9)(()=>({nodeId:n,annotationType:t,meta:l,uniqueId:e}),[n,t,l,e]),w=(0,B.NW)(),_=w===e,A=o.useCallback(n=>{n?i.Ez5.editorState().focusedAnnotationId.set(e):n||w!==e||i.Ez5.editorState().focusedAnnotationId.set(null)},[e,w]),N=o.useCallback(n=>{let t=tY[y.annotationType];if(t&&"AnnotationDisplayOverride"in t){let e=t.AnnotationDisplayOverride;if(e)return(0,a.jsx)(e,{nodeInfo:y,isFadedOut:n,isFocused:_,onFocusChange:A})}return y.annotationType===tk.MANUAL?(0,a.jsx)(aa,{annotationId:e,nodeInfo:y,isFadedOut:n,isFocused:_,onFocusChange:A}):null},[y,_,A,e]);return(0,a.jsx)(tZ,{annotationId:e,annotationType:t,isAnnotationFocused:_,isEditingAnnotation:d,isInCentralTLF:b,isLeftAligned:x,lineAlignment:h,lineColor:f,lineHeight:g,lineWidth:p,nodeId:n,offsetX:c,offsetY:u,setDimensions:r,shouldDelayHover:v,shouldHide:s,shouldMinimize:m,children:N},e)}),aa=o.memo(function({annotationId:n,nodeInfo:e,isFadedOut:t,isFocused:l,onFocusChange:d}){let{nodeId:c,meta:{annotationIndex:g}}=e,h=(0,x.IL)(),f=(0,P.uQ)(),m=(0,s.dH)(),b=f===c,[y,w]=(0,r.fp)(u.m),A=(0,o.useRef)(null),I=(0,B.NW)(),k=N(),S=(0,o.useMemo)(()=>i.w3z.isReadOnly(i.SES.ANNOTATIONS),[]),C=(0,O.Kv)(),E=(0,j.s9)(),T=(0,B.E_)(),V=!!(0,v.hA)(),M=(0,p.wA)(),R=(n,e)=>{n&&(tL.wr(),(0,tO.S)("annotations"),e?(i.w3z.setEnableZoomToSelection(!1),tL.Dh([n]),i.w3z.setEnableZoomToSelection(!0)):tL.Dh([n]))},W=(0,o.useRef)(l);W.current=l,(0,o.useEffect)(()=>()=>{W.current&&i.Ez5?.editorState().focusedAnnotationId.set(null)},[]),(0,o.useEffect)(()=>{C&&(i.Ez5?.editorState().focusedAnnotationId.set(null),w(null))},[C,w]);let D=n_.v_(`annotationDisplay-${n}`,"keydown",o.useCallback(n=>{!S&&l&&null===y&&T===t3.AD&&("Backspace"===n.key||"Delete"===n.key?E&&(k(c,g),A.current?.blur()):"Enter"===n.key?E&&(n.preventDefault(),w(g)):"Escape"===n.key?A.current?.blur():"Tab"!==n.key&&(0,ae.f7)(n))},[g,k,y,l,S,c,T,w,E]));o.useEffect(()=>(document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)),[D]);let F=o.useCallback(()=>{let n=window.getSelection()?.toString()||"";n&&(0,t7.Dk)(n,{withLineBreaks:!0})},[]);(0,o.useEffect)(()=>{let n=A.current?.getRootNode()?.activeElement??null;l&&n!==A.current&&A.current?.focus(),l||n!==A.current||A.current?.blur()},[l]);let z=o.useCallback(e=>{e.preventDefault(),e.stopPropagation(),M(t9.j7({type:ne,data:{position:{left:e.clientX,bottom:e.clientY},nodeId:c,annotationIndex:g,annotationId:n}}))},[M,c,g,n]),H=(0,G.XR)(),U=(0,_.wA)((n,e)=>{let t=n.get(e);return t?{annotations:t.annotations,nodeType:t.type,nodeName:t.name}:null},c);if(!U||0===U.annotations.length)return null;let{annotations:q,nodeType:X,nodeName:K}=U,$=q[g];if(!$)return null;let{label:Y,properties:Q}=$,J=H.find(n=>n.id===$.categoryId),Z={"--annotation-category-color":J?(0,G.FQ)(J)??"var(--color-bg)":"var(--color-bg)"},nn=(0,nf.j_)($.label);return(0,a.jsxs)(tP.D8,{className:L()(ee,{[ei]:!!J,"annotation--viewAnnotationNodeSelected--DfJ3t":b&&null===I&&null===y,[es]:t,"annotation--onlyCategory--X9mU1":!Y&&0===Q.length&&!!J}),"data-testid":"annotationDisplay",forwardedRef:A,onBlur:()=>d(!1),onContextMenu:z,onCopy:F,onDoubleClick:()=>{E&&(b||R(c,!1),w(g))},onFocus:()=>d(!0),onMouseDown:n=>{l&&b||(R(c,(0,an.i)(n)),w(null),h("click_annotation_content",{nodeId:c,nodeType:X,hasText:!!$.label,numProperties:$.properties.length,currentTool:m,isDevModeFocusView:V}),A.current?.focus())},recordingKey:`viewAnnotationContainer-${K}-${g}`,role:"button",style:Z,tabIndex:0,children:[J&&(0,a.jsx)("div",{className:"annotation--annotationHeader--GXEj5",children:(0,a.jsx)("div",{className:L()("annotation--categoryLabel--7VWuC",{[ed]:(0,G.cD)(J)}),dir:"auto",children:(0,G.uA)(J)})}),(0,a.jsxs)("div",{className:L()(er,el),children:[Y&&(0,a.jsx)(nx.C,{value:Y,valueFormat:nn,lexicalContentClassName:"annotation_lexical_editor--contentEditableReadOnly--G8hdw",themeOverride:{link:"annotation_lexical_editor--linkReadOnly--HnBAD"},namespace:"annotation-display-lexical-editor",renderHtmlOnly:!0}),(0,a.jsx)(ao,{nodeId:c,properties:Q})]})]})});function ao({nodeId:n,properties:e}){let t=(0,C.k9)(()=>[...e].sort((n,e)=>tf.get(n.type).index-tf.get(e.type).index),[e]),o=(0,_.wA)((n,e,t)=>{let a=n.get(e);return t.map(e=>{if(!a)return{nodeFields:null,canHaveValue:!1};let t=(0,tI.J)(a,e.type,!1);return t?{nodeFields:tf.get(e.type).extractNodeFields(a,n),canHaveValue:t}:{nodeFields:null,canHaveValue:t}})},n,t);return 0===e.length?null:(0,a.jsx)("div",{className:L()(ec,"annotation--propertiesDisplay--wFXaY"),children:t.map((n,e)=>(0,a.jsx)(ai,{property:n,canHaveValue:o[e].canHaveValue,nodeFields:o[e].nodeFields},e))})}let ai=o.memo(function({property:n,canHaveValue:e,nodeFields:t}){let o=tf.get(n.type),i=o.DisplayValue;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"annotation--propertyDisplayLabel--PQ2vF",children:o.label()}),(0,a.jsx)("span",{className:L()("annotation--propertyDisplayValue--bxdp7",{[eu]:!e}),"data-testid":`annotationPropertyValue-${n.type.toString()}`,children:e?(0,a.jsx)(i,{nodeFields:t}):(0,M.tx)("dev_handoff.annotations.no_value")})]})});var al=t(404343);let ar=(0,T.jz)("220px"),as=(0,T.jz)(al.RHC);function ad(n,e,t,a,o,l,r,s,d){let c=i.Ez5.isFullscreenYScrollbarNeeded();return o?Math.min(s?r+t*e-8:r-8,Math.max(0,-n/2-l+a+d.left+4)):Math.max(s?-r-t*e+8:-r+8,Math.min(0,n/2-l-a-d.right-(c?as:4)))}function ac(n,e,t=!0){let{x:a,y:o,width:l,height:r}=n,{offsetX:s,offsetY:d,zoomScale:c,width:u}=e,p=i.Ez5.isFullscreenYScrollbarNeeded(),g=Math.min(20*c,20),h=a+l,f=(a-s)*c+u/2>ar+g+8,x=(s-h)*c+u/2>ar+g+(p?16:4),m=f&&!x;return(t||(m=f||!x),m)?{lineWidth:g,offsetX:(a-s)*c-g,offsetY:(o+r/2-d)*c,isLeftAligned:m}:{lineWidth:g,offsetX:(h-s)*c+g,offsetY:(o+r/2-d)*c,isLeftAligned:m}}function au(n,e,t){let a=[],o=8*Math.min(1,t);for(let e of n){let n=e.height+o;for(a.push({basis:e.offsetY-n/2,length:1,height:n});a.length>1&&function(n,e){let t=n.basis+n.height-e.basis;return!(t<=0)&&(n.height+=e.height,n.length+=e.length,n.basis-=t*e.height/n.height,!0)}(a[a.length-2],a[a.length-1]);)a.pop()}let i=0;for(let t of a){let{basis:a}=t;for(let l=0;l<t.length;l++){let t=n[i];if(t){let n=t.height+o;e[t.uniqueId]=a+n/2,a+=n,i++}}}}function ap(n,e,t,a,o){return a+(Math.min(Math.max(n,e),t)-e)/(t-e)*(o-a)}var ag=t(311486),ah=t(386358),af=t(841776),ax=t(664057),am=t(347497),av=t(520164);let ab=(0,l.kc)().dt_annotations_sizing?.5:1,ay=(0,T.jz)("4px")/2;function aw(n){let{children:e}=n,t=(0,o.useRef)(null),[i,l]=(0,o.useState)(null),r=(0,o.useRef)(null),s=function(){let n=(0,p.d4)(n=>n.selectedView),e=p.d4(n=>n.versionHistory)?.isLoadingPage,t=(0,b.DP)(),{isLoading:a}=(0,w.v9)({selectedView:n,isLoadingVersionHistory:e,theme:t});return a}();return(0,o.useEffect)(()=>{if(t.current){let n=t.current.attachShadow({mode:"open"}),e=document.createElement("style");e.nonce=(0,V.Ay)().csp_nonce,e.textContent=[ag.Nz,af.Nz,ah.Nz,av.Nz,"/** @postcss-export-raw */\n\n/**\n * ellipsis.css\n *\n * Add an ellipsis if text is too long.\n *\n * The element that composes this mixin MUST have a defined width or max-width in pixels.\n * - Only works on a single line of text. See below for multi-line ellipses\n */\n\n.ellipsis--ellipsis--Tjyfa {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/**\n * Add an ellipsis after n lines of text.\n * https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-line-clamp\n *\n * The element that composes this mixin MUST:\n * - Have a defined width or max-width in pixels.\n * - Have a defined fallback height or max-height set to `line-height * n`,\n *     in case browsers do not support -webkit-line-clamp or box-orient\n *     at least the container size will be correct (with no ellipses)\n *\n * TODO(golf): start using `line-clamp` instead of -webkit-line-clamp once browsers start supporting it\n */\n\n.ellipsis--_ellipsisAfterNLines--LzI7k {\n  display: -webkit-inline-box;\n  overflow: hidden;\n\n  /* https://github.com/postcss/autoprefixer/issues/776#issuecomment-297734206 */\n  /* autoprefixer: off */\n  -webkit-box-orient: vertical;\n  /* autoprefixer: on */\n}\n\n.ellipsis--ellipsisAfter2Lines--Qo-Xh {\n  -webkit-line-clamp: 2;\n}\n\n.ellipsis--ellipsisAfter3Lines--h405C {\n  -webkit-line-clamp: 3;\n}\n\n.ellipsis--ellipsisAfter6Lines--2UA7M {\n  -webkit-line-clamp: 6;\n}\n\n.ellipsis--ellipsisAfter8Lines--WZFi8 {\n  -webkit-line-clamp: 8;\n}\n","/** @postcss-export-raw */\n/* Keep in line with FGDevHandoffHelpers.h */\n.annotation--annotationContainer--k4xiM {\n  position: relative;\n  /* Make all z indexes in this file relative to the parent.\n     We want all annotations to render underneath comments */\n  /* stylelint-disable-next-line @fpl/no-manual-z-index */\n  z-index: 0;\n}\n.annotation--annotationContainer--k4xiM.annotation--isPageLoading--JGk-P {\n    filter: blur(3px);\n  }\n.annotation--_ellipsis--8F1VE {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.annotation--annotationWrapper--pKMw2 {\n  /* TODO: these should be semantic tokens */\n  /* stylelint-disable-next-line @figma/color-no-raw */\n  --annotation-line-color: rgba(131, 131, 131, 0.75);\n  --annotation-dot-border-color: #838383; /* stylelint-disable-line @figma/color-no-raw */\n  --annotation-border-color: var(--color-border-selected);\n  --annotation-border-selected-color: var(--color-border-brand);\n\n  --annotation-scale: 1;\n\n  position: absolute;\n  pointer-events: none;\n  width: max-content;\n}\n/* If no annotation was rendered, then the wrapper shouldn't show either */\n.annotation--shouldHideEmptyAnnotations--WXr4h:not(.annotation--wrapperMinimized--UOExu):not(:has(.annotation--viewAnnotation--cA-c1)):not(:has(.annotation--createAnnotation--tWKSM)) {\n    display: none;\n  }\n.annotation--annotationWrapperSelected--ffb0X {\n  --annotation-line-color: var(--color-border-selected);\n  --annotation-dot-border-color: var(--color-border-selected);\n}\n.annotation--annotationWrapper--pKMw2,\n.annotation--wrapperMinimized--UOExu:hover {\n  /* stylelint-disable-next-line @fpl/no-manual-z-index */\n  z-index: 1;\n}\n/* Handle scaling transition on mouse out */\n.annotation--transitionScaling--eD821 .annotation--annotationLeftAligned--FHQRp,\n  .annotation--transitionScaling--eD821 .annotation--annotationRightAligned--VrH8e {\n    transition: transform 0.05s ease-in-out;\n  }\n/* Handle transition scaling on mouse enter */\n.annotation--transitionScaling--eD821:hover .annotation--annotationLeftAligned--FHQRp,\n  .annotation--transitionScaling--eD821:hover .annotation--annotationRightAligned--VrH8e {\n    transition: transform 0.025s ease-out;\n  }\n.annotation--wrapperEditing--C2Zlx {\n  /* stylelint-disable-next-line @fpl/no-manual-z-index */\n  z-index: 2;\n}\n.annotation--wrapperMinimized--UOExu {\n  /* stylelint-disable-next-line @fpl/no-manual-z-index */\n  z-index: 0;\n}\n.annotation--annotationLine--jr4Mc {\n  --line-width-scale: 1;\n  --y-offset-direction: -1;\n\n  position: absolute;\n  top: 50%;\n  /* Push to left of annotation box */\n  transform: translate(\n    calc(-100% + 15px),\n    calc(var(--y-offset-direction) * 15px)\n  );\n\n  stroke: var(--annotation-line-color);\n  fill: var(--annotation-line-color);\n}\n.annotation--annotationLineLeftAligned--W-1DZ {\n  transform: translate(-15px, calc(var(--y-offset-direction) * 15px));\n}\n.annotation--annotationLineBelowNode--JeafT {\n  --y-offset-direction: 1;\n\n  top: auto;\n  bottom: 50%;\n}\n.annotation--annotationLineStartDot--x6RNc {\n  fill: color-mix(in srgb, var(--annotation-dot-border-color) 45%, transparent);\n  stroke: var(--annotation-dot-border-color);\n}\n.annotation--annotationLineStartInnerDot--aw58q {\n  fill: var(--color-text-onbrand);\n}\n.annotation--annotationLineEndDot--Lsq0a {\n  --dot-radius: 2px;\n  r: var(--dot-radius);\n}\n.annotation--_annotationBase--MPByC {\n  color: var(--color-text);\n\n  pointer-events: auto;\n\n  border-radius: var(--radius-large);\n  box-shadow: var(--elevation-200-canvas);\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n\n  max-width: 220px;\n\n  font-family: Inter;\n  font-size: 11px;\n  font-weight: 400;\n\n  /* This avoids a size shift when adding a border (category & selection). */\n  border: 1px solid transparent;\n}\n.annotation--viewAnnotation--cA-c1 {\n  background: var(--color-bg);\n  outline: none;\n\n  -webkit-user-select: text;\n\n          user-select: text;\n\n  /* This is to make sure the annotation proportions look better when there's a category */\n}\n.annotation--viewAnnotation--cA-c1.annotation--withCategory--lj1wU {\n    min-width: 80px;\n  }\n.annotation--viewAnnotation--cA-c1.annotation--onlyCategory--X9mU1 {\n    min-width: auto;\n\n    border-radius: var(--radius-medium);\n    background: var(--annotation-category-color);\n  }\n.annotation--viewAnnotation--cA-c1.annotation--onlyCategory--X9mU1 .annotation--categoryLabel--7VWuC {\n      margin: 0;\n    }\n.annotation--viewAnnotation--cA-c1.annotation--onlyCategory--X9mU1 .annotation--contentContainer--vSuqs.annotation--innerWrapper--T0cql {\n      padding: 0;\n    }\n.annotation--viewAnnotationNodeSelected--DfJ3t {\n  border: 1px solid var(--annotation-border-selected-color);\n}\n.annotation--viewAnnotation--cA-c1:focus {\n  border: 1px solid var(--annotation-border-color);\n}\n.annotation--viewAnnotationFadedOut--7LQPE > * {\n  opacity: 0.5;\n}\n.annotation--viewAnnotationFadedOut--7LQPE .annotation--innerWrapper--T0cql > * {\n  opacity: 0.5;\n}\n.annotation--createAnnotation--tWKSM {\n\n  background: var(--color-bg);\n  /* fixed when authoring */\n  width: 220px;\n}\n.annotation--createAnnotation--tWKSM .text-editor {\n    border: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor.ql-blank::after {\n    margin-top: -1.85em;\n  }\n.annotation--createAnnotation--tWKSM .text-editor:focus-within {\n    margin: 0;\n  }\n.annotation--createAnnotation--tWKSM .ql-container {\n    background: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor {\n    font-size: 13px;\n    line-height: 24px;\n    min-height: 24px;\n    padding: 2px 6px;\n    margin: 4px 0 6px 0;\n  }\n.annotation--annotationHeader--GXEj5 {\n  display: flex;\n}\n.annotation--createAnnotationHeader--thXfu {\n  display: flex;\n  padding-top: 10px;\n  padding-left: 10px;\n  padding-right: 8px;\n}\n.annotation--headerRowLeft--iIqjN {\n  flex: 1 1 0;\n  min-width: 0;\n  display: flex;\n}\n.annotation--headerRowRight--5h3Tr {\n  flex: 0 1 auto;\n  display: flex;\n  gap: 4px;\n}\n.annotation--categoryLabel--7VWuC {\n  color: var(--color-text-onbrand);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  font-weight: var(--body-medium-strong-fontWeight, 550);\n\n  border-radius: var(--radius-medium, 0.3125rem);\n  background-color: var(--annotation-category-color);\n\n  margin: 9px 8px 0px 8px;\n  padding: 2px 6px;\n\n  -webkit-user-select: none;\n\n          user-select: none;\n}\n.annotation--categoryLabel--7VWuC.annotation--darkText--xCvQV {\n    color: var(--color-text-onwarning);\n  }\n.annotation--innerWrapper--T0cql {\n  position: relative;\n\n  color: var(--color-text);\n}\n.annotation--createAnnotation--tWKSM .ql-editor ul,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ul,\n  .annotation--createAnnotation--tWKSM .ql-editor ol,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ol {\n    padding-left: 1.5em;\n  }\n.annotation--annotationHoverTarget--4y3Xc {\n  width: 24px;\n  height: 24px;\n  position: absolute;\n  pointer-events: auto;\n  top: calc(50% - 12px);\n  /* This is relative to the left edge of the line end dot,\n     but we want to center it around the dot */\n  left: -10px;\n}\n.annotation--annotationHoverTargetLeftAligned--G1twU {\n  /* This is relative to the right edge of the line end dot,\n     but we want to center it around the dot.\n     Shift by parent width (100%) to account for when the\n     annotation is not hidden. */\n  left: calc(100% - 14px);\n}\n.annotation--annotationLeftAligned--FHQRp {\n  transform: translate(-100%, 0) scale(var(--annotation-scale));\n  transform-origin: 100% 50%;\n  left: 8px;\n}\n.annotation--annotationRightAligned--VrH8e {\n  transform: scale(var(--annotation-scale));\n  transform-origin: 0 50%;\n  left: -8px;\n}\n.annotation--contentContainer--vSuqs {\n  display: flex;\n  flex-direction: column;\n  padding: 0 0 8px 0;\n  box-sizing: border-box;\n}\n.annotation--contentContainer--vSuqs.annotation--innerWrapper--T0cql {\n  gap: 8px;\n  padding: 8px;\n}\n.annotation--contentContainerNoProperties--pc2WE {\n  padding: 0;\n}\n.annotation--labelEditor--xNx12 {\n  padding: 0 8px;\n\n  max-height: 304px;\n  overflow-y: auto;\n}\n.annotation--properties--1p6UF {\n  display: grid;\n  grid-template-columns: min-content auto;\n  align-items: center;\n\n  cursor: default;\n}\n.annotation--properties--1p6UF.annotation--propertiesDisplay--wFXaY {\n    grid-row-gap: 4px;\n  }\n.annotation--createAnnotation--tWKSM .annotation--properties--1p6UF {\n  padding-left: 16px;\n  padding-right: 12px;\n}\n.annotation--selectedPropertyDisplayLabel--AtFEJ,\n.annotation--selectedPropertyValue--wwu2U {\n  /* The delete icon forces a certain row height, so we need to manually pad text to ensure labels are consistently positioned */\n  /* If not, the \"effect\" row that has more lines is vertically positioned different to the other property rows */\n  /* We're using rem here to mimic how --icon-button-size is defined */\n  padding: calc(0.75rem - 8px) 0;\n}\n.annotation--propertyDisplayLabel--PQ2vF,\n.annotation--selectedPropertyDisplayLabel--AtFEJ {\n  align-self: baseline;\n\n  color: var(--color-text-secondary);\n  white-space: nowrap;\n\n  padding-right: 12px !important;\n}\n.annotation--selectedPropertyValueWrapper--OyM0X {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n\n  width: calc(100% + 4px);\n\n  overflow: hidden;\n}\n.annotation--propertyDisplayValue--bxdp7 {\n  overflow: hidden;\n}\n.annotation--noValue--HHQOU {\n  color: var(--color-text-secondary);\n}\n.annotation--selectedPropertyValue--wwu2U {\n  overflow: hidden;\n\n  flex: 1 1 100%;\n}\n.annotation--selectedPropertyDelete--DMdrA {\n  display: flex;\n  align-items: center;\n}\n.annotation--propertyOptionIconSvg--LypST {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.annotation--icon--w1enR {\n  flex: 0 0 24px;\n\n  width: 24px;\n  height: 24px;\n  margin-right: 4px;\n}\n.annotation--icon--w1enR svg {\n  fill: var(--color-icon);\n}\n.annotation--icon--w1enR[aria-disabled='true'] svg {\n  fill: var(--color-icon-disabled);\n}\n.annotation--chit--3je6E {\n  width: 12px;\n  height: 12px;\n\n  border-radius: 2px;\n  display: flex;\n  overflow: hidden;\n  margin: 1px 2px 1px 0;\n  flex-shrink: 0;\n  border: 1px solid var(--color-border);\n}\n.annotation--chit--3je6E svg {\n    width: 12px;\n    height: 12px;\n  }\n.annotation--propertyMenuOption--9-5ow .annotation--chit--3je6E {\n    margin: 1px 10px 1px 6px;\n  }\n.annotation--propertyMenuOption--9-5ow:hover .annotation--chit--3je6E {\n    border-color: var(--color-icon);\n  }\n.annotation--styleChit--yCQ3O {\n  border: none;\n}\n.annotation--chitInline--vG6cM {\n  margin: 0;\n}\n.annotation--solidPaint--ClR6h {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.annotation--solidPaintValue--9PQMf {\n}\n.annotation--createAnnotationFooter--wx9JM {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 6px 8px 6px;\n}\n.annotation--coloredProperty--OTQ6l {\n  display: flex;\n  align-items: center;\n  justify-content: left;\n}\n.annotation--coloredProperty--OTQ6l > span {\n    padding-left: 2px;\n    padding-right: 2px;\n    border-radius: 2px;\n  }\n.annotation--paddingProperty--ckvG6 > span {\n    background: var(--color-bginspectpadding);\n    color: var(--color-textoninspectpadding);\n  }\n.annotation--spacingProperty--RCjSM > span {\n    background: var(--color-bginspectspacing);\n    color: var(--color-textoninspectspacing);\n  }\n.annotation--mixedValues--Z0qIk {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.annotation--variablePill--VNxoI {\n  height: 16px;\n  padding: 0 4px;\n}\n.annotation--multipleVariableWrapper--OW3M1 {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n  flex-direction: row;\n  align-items: center;\n}\n.annotation--multipleVariableWrapper--OW3M1.annotation--vertical--zmpVv {\n  flex-direction: column;\n  flex-wrap: nowrap;\n}\n.annotation--multipleVariableValue--5-5xk {\n  overflow: hidden;\n  align-self: stretch;\n}\n.annotation--annotationWrapperManagedString--RTskR {\n  --annotation-line-color: var(--color-border-component-strong);\n  --annotation-dot-border-color: var(--color-border-component-strong);\n  --annotation-border-color: var(--color-border-component-strong);\n}\n.annotation--annotationWrapperManagedString--RTskR .annotation--viewAnnotation--cA-c1 {\n    background-color: var(--color-bg-component-tertiary);\n    color: var(--color-text);\n    display: flex !important;\n    flex-direction: row !important;\n    align-items: center;\n    cursor: default;\n  }\n.annotation--annotationWrapperManagedString--RTskR .annotation--viewAnnotation--cA-c1:hover,\n  .annotation--annotationWrapperManagedString--RTskR .annotation--viewAnnotationSelected--UApdn {\n    border: 1px solid transparent;\n  }\n.annotation--annotationWrapperManagedString--RTskR .annotation--viewAnnotation--cA-c1:hover {\n    background-color: var(--color-bg-component-tertiary-hover);\n  }\n.annotation--annotationWrapperManagedString--RTskR .annotation--viewAnnotation--cA-c1.annotation--contentContainer--vSuqs {\n    padding: 2px 6px 2px 6px;\n  }\n.annotation--annotationWrapperManagedString--RTskR .annotation--managedStringLabel--fWb5O {\n    background: none;\n    font-size: 10px;\n    font-family: 'Roboto Mono', Monaco, 'Courier New', monospace;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW {\n  --annotation-line-color: var(--color-border-handoff-strong);\n  --annotation-dot-border-color: var(--color-border-handoff-strong);\n  --annotation-border-color: var(--color-border-handoff-strong);\n}\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--viewAnnotation--cA-c1 {\n    background-color: var(--color-bg-handoff-tertiary);\n    color: var(--color-text-handoff);\n    display: flex !important;\n    flex-direction: row !important;\n    cursor: default;\n  }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--viewAnnotation--cA-c1:hover,\n  .annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--viewAnnotationSelected--UApdn {\n    border: 1px solid transparent;\n  }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--viewAnnotation--cA-c1:hover {\n    background-color: var(--color-bg-handoff-tertiary);\n  }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--viewAnnotation--cA-c1.annotation--contentContainer--vSuqs {\n    padding: 2px 6px 2px 4px;\n  }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--codeConnectIcon--nFdfw {\n    display: inline-block;\n    flex: none;\n  }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--codeConnectIcon--nFdfw svg {\n      display: block;\n    }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--codeConnectIcon--nFdfw svg path {\n        fill: var(--color-icon-handoff);\n      }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--codeConnectLabel--Pd3TS {\n    font-size: 10px;\n\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--codeConnectLabelName--d-Hdu {\n    font-family: 'Roboto Mono', Monaco, 'Courier New', monospace;\n  }\n.annotation--effectBlurVariable--mbYFb {\n  padding-left: 4px;\n}\n.annotation--headerRowLeft--iIqjN {\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n.annotation--categorySelectorButton--q2A6p {\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  background-color: var(--color-bg-secondary);\n  color: var(--color-text-secondary);\n  font-weight: var(--body-medium-strong-fontWeight, 550);\n\n  border-radius: 4px;\n\n  padding-left: 6px;\n  padding-right: 18px;\n\n  border: 1px solid transparent;\n}\n.annotation--categorySelectorButton--q2A6p.annotation--withCategory--lj1wU {\n    color: var(--color-text-onbrand);\n    background-color: var(--annotation-category-color);\n  }\n.annotation--categorySelectorButton--q2A6p.annotation--withCategory--lj1wU .annotation--caret--noLOu {\n      fill: var(--color-icon-onbrand);\n      color: var(--color-icon-onbrand);\n    }\n.annotation--categorySelectorButton--q2A6p.annotation--withCategory--lj1wU.annotation--darkText--xCvQV {\n    color: var(--color-text-onwarning);\n  }\n.annotation--categorySelectorButton--q2A6p.annotation--withCategory--lj1wU.annotation--darkText--xCvQV .annotation--caret--noLOu {\n      fill: var(--color-icon-onwarning);\n      color: var(--color-icon-onwarning);\n    }\n.annotation--categorySelectorButton--q2A6p:focus-visible {\n    border: 1px solid var(--color-border-selected);\n  }\n.annotation--categorySelectorButton--q2A6p .annotation--caret--noLOu {\n    fill: var(--color-icon);\n    color: var(--color-icon);\n  }\n.annotation--pinPropertyButton--OTLW3 {\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding: 4px 8px 4px 4px;\n\n  font-weight: var(--body-medium-fontWeight, 450);\n  line-height: var(--body-medium-lineHeight, 16px);\n\n  border-radius: var(--radius-medium);\n  border: 1px solid transparent;\n\n  color: var(--color-text-secondary);\n}\n.annotation--pinPropertyButton--OTLW3:hover {\n    color: var(--color-text);\n    background-color: var(--color-bg-secondary);\n  }\n.annotation--pinPropertyButton--OTLW3:hover .annotation--pinPropertyButtonIcon--dgnI0 {\n      fill: var(--color-icon);\n      color: var(--color-icon);\n    }\n.annotation--pinPropertyButton--OTLW3:focus-visible {\n    border: 1px solid var(--color-border-selected);\n  }\n.annotation--pinPropertyButton--OTLW3.annotation--pinPropertyButtonActive---nkvq {\n    color: var(--color-text);\n    background-color: var(--color-bg-secondary);\n  }\n.annotation--pinPropertyButton--OTLW3.annotation--pinPropertyButtonActive---nkvq .annotation--pinPropertyButtonIcon--dgnI0 {\n      fill: var(--color-icon);\n      color: var(--color-icon);\n    }\n.annotation--pinPropertyButton--OTLW3 .annotation--pinPropertyButtonIcon--dgnI0 {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    width: 16px;\n    height: 16px;\n\n    fill: var(--color-icon-secondary);\n    color: var(--color-icon-secondary);\n\n    margin-right: 4px;\n  }\n.annotation--categorySelectorButtonLabel--xGX7w {\n  max-width: 116px;\n}\n.annotation--caret--noLOu {\n  position: absolute;\n  top: calc(50% - 3px);\n  right: 6px;\n\n  --padding-right: var(--menu-padding-right, 4px);\n  margin-right: calc(var(--padding-right) - 4px);\n}\n.annotation--colorCircle--i6hsL {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n\n  box-sizing: border-box;\n\n  background-color: rgba(255, 255, 255, 0.1);\n}\n.annotation--colorCircle--i6hsL.annotation--noCategoryColor--fYEUj {\n  background-color: transparent;\n  border: 1px solid var(--color-icon-secondary);\n}\n.annotation--categoryOptionLabel--Iz9RB {\n  text-align: start;\n  padding: 0 6px;\n}\n.annotation--categoryOptionIcon--jg6bS {\n  flex: 0 0 auto;\n  padding: 0 2px;\n}\n.annotation--visibilityDisclaimer--oQFzZ {\n\n  padding: 0 16px;\n  max-width: 136px;\n\n  color: var(--color-text-menu-secondary);\n}\n.annotation--visibilityDisclaimer--oQFzZ p {\n    margin-bottom: 4px;\n  }\n/* Copying some of the icon-button styles since the styles don't apply within\n a shadow root element */\n.annotation--buttonReset--Emcnw {\n  display: inline-flex;\n  place-items: center;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  border: none;\n  -webkit-user-select: none;\n          user-select: none;\n}\n.annotation--buttonReset--Emcnw * {\n    /* Things inside of button shouldn't be targeted by clicks, only the button itself */\n    pointer-events: none;\n  }\n.annotation--iconButton--w7kfn {\n  --icon-button-width: initial;\n  --icon-button-height: initial;\n  --icon-button-outline-offset: -0.0625rem;\n  --icon-button-outline-width: 0.0625rem;\n  --icon-button-outline-color: transparent;\n  --icon-button-icon: var(--color-icon);\n  --icon-button-icon-secondary: var(--color-icon-secondary);\n  --icon-button-icon-tertiary: var(--color-icon-tertiary);\n  --icon-button-size: 1.5rem;\n  --icon-button-icon-size: 1.5rem;\n  --icon-button-radius: var(--radius-medium);\n\n  display: grid;\n  width: var(--icon-button-width, var(--icon-button-size));\n  height: var(--icon-button-height, var(--icon-button-size));\n  min-width: var(--icon-button-width, var(--icon-button-size));\n  padding: 0;\n\n  border-radius: var(--fpl-radius-left, var(--icon-button-radius))\n    var(--fpl-radius-right, var(--icon-button-radius))\n    var(--fpl-radius-right, var(--icon-button-radius))\n    var(--fpl-radius-left, var(--icon-button-radius));\n  background: transparent;\n  outline: var(--icon-button-outline-color) solid var(--icon-button-outline-width);\n  outline-offset: var(--icon-button-outline-offset);\n}\n.annotation--iconButton--w7kfn:disabled {\n    --icon-button-icon: var(--color-icon-disabled);\n    --icon-button-icon-secondary: var(--color-icon-disabled);\n    --icon-button-icon-tertiary: var(--color-icon-disabled);\n  }\n/**\n * Hovering over any part of a button group should trigger the hover states of everything\n * inside of the group. Focusing an element inside the group should also trigger the hover states\n * of everything else.\n */\n.annotation--ghost--thK4p:not([aria-disabled='true']):hover,\n  :where([role='group']:hover) .annotation--ghost--thK4p:not([aria-disabled='true']),\n  [role='group']:has([data-show-focus]:focus-visible) .annotation--ghost--thK4p:not([aria-disabled='true']):not(:focus-visible) {\n      background: var(--color-bghovertransparent);\n  }\n.annotation--ghost--thK4p:not([aria-disabled='true']):active {\n      background: var(--color-bgtransparent-secondary-hover);\n    }\n.annotation--ghost--thK4p[data-show-focus]:focus-visible {\n    --icon-button-outline-color: var(--color-border-selected);\n  }\n.annotation--iconButton--w7kfn .annotation--icon--w1enR {\n  --color-icon: var(--icon-button-icon);\n  --color-icon-secondary: var(--icon-button-icon-secondary);\n  --color-icon-tertiary: var(--icon-button-icon-tertiary);\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: var(--icon-button-icon-size);\n  height: var(--icon-button-icon-size);\n  min-width: var(--icon-button-icon-size);\n\n  /* mixins aren't supported in composes, so the border radius settings have to be copied */\n  border-radius: var(--fpl-radius-left, var(--icon-button-radius))\n    var(--fpl-radius-right, var(--icon-button-radius))\n    var(--fpl-radius-right, var(--icon-button-radius))\n    var(--fpl-radius-left, var(--icon-button-radius));\n  fill: var(--color-icon);\n  pointer-events: none;\n}\n",am.N,"/** @postcss-export-raw */\n.annotation_lexical_editor--contentEditable--EVm11 {\n  box-sizing: border-box;\n  flex-grow: 1;\n  padding-left: 8px;\n  padding-right: 0px;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  font-size: 13px;\n  line-height: 1.7;\n  outline: none;\n  text-align: left;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.annotation_lexical_editor--contentEditableReadOnly--G8hdw {\n  box-sizing: border-box;\n  font-size: 11px;\n  line-height: 16px;\n\n  cursor: default;\n}\n.annotation_lexical_editor--placeholder--pPwLm {\n  color: var(--color-text-secondary);\n  overflow: hidden;\n  position: absolute;\n  text-overflow: ellipsis;\n  top: 11px;\n  left: 8px;\n  font-size: 13px;\n  display: inline-block;\n  pointer-events: none;\n}\n.annotation_lexical_editor--withCategory--bUCqy.annotation_lexical_editor--placeholder--pPwLm {\n    top: 11px;\n  }\n.annotation_lexical_editor--linkReadOnly--HnBAD {\n  color: var(--color-text-brand);\n  cursor: pointer;\n  -webkit-text-decoration: underline;\n  text-decoration: underline;\n}\n",ax._content].join("\n"),r.current=document.createElement("style"),n.append(e),n.append(r.current),l(n)}},[]),(0,o.useEffect)(()=>{r.current&&(r.current.textContent=`
        .annotationWrapperForcedHover {
          --annotation-scale: ${n.hoverScale} !important;

          /* stylelint-disable-next-line @fpl/no-manual-z-index */
z-index: 100;
        }

        .${ea} {
          --line-width-scale: ${n.hoverScale} !important;
        }

        .${eo} {
          --dot-radius: ${n.hoverScale*ay}px !important;
        }
      `)},[n.hoverScale]),(0,a.jsx)("div",{ref:t,"data-testid":"annotation-renderer-shadow-dom-container",className:L()("annotation--annotationContainer--k4xiM",D.Dm,D.Uu,s&&"annotation--isPageLoading--JGk-P"),children:i&&(0,I.createPortal)(e,i)})}function a_(){let n=(0,p.wA)(),e=(0,P.uQ)(),t=(0,p.d4)(n=>n.isFullscreenDocumentLoaded),c=(0,s.dH)(),g=(0,R._X)({subscribeToUpdates_expensive:!0}),f=(0,p.d4)(n=>n.dropdownShown),m=f?.type===ne,v=(0,r.Xr)(u.f),[b,y]=(0,r.fp)(u.m),w=(0,S.DP)();(0,o.useEffect)(()=>{e||y(null)},[e,y]),(0,o.useEffect)(()=>{c!==i.NLJ.ANNOTATE&&y(null)},[c,y]),(0,o.useEffect)(()=>{null!==b&&n((0,W.UU)())},[n,b]);let[N,j]=(0,o.useState)({}),{nodesWithAnnotationInfo:I,annotationsBeingViewed:E,newAnnotationNodeInfo:L}=function(n,e){let t=(0,P.uQ)(),a=(0,F.LO)(),c=(0,r.md)(u.m),p=(0,B.NW)(),g=(0,d.J2)(i.Ez5.uiState().filterAnnotationCategoryId),f=(0,_.Fk)((n,e)=>h.kh(n,e||"")?.guid||e||void 0,t),{allAnnotations:x,newAnnotationNode:m}=function({topLevelOrSelfNodeId:n}){let e=(0,s.dH)(),t=(0,d.J2)(i.Ez5.annotationObserver().annotationInfoByTlf),a=A([...t.keys()]),o=(0,r.md)(u.m),l=(0,P.uQ)(),c=(0,G.XR)(),p=(0,s.eY)(),g=null!==o?l:null,h=null!==o?n:void 0,{tlfsWithNodes:f,newAnnotationNode:x}=(0,C.k9)(()=>{let n=[...a],l=null;return g&&h&&!t.has(h)&&(e===i.NLJ.ANNOTATE||null!==o)&&n.push(h),{tlfsWithNodes:n.reduce((n,e)=>{let t=p.get(e),{nodes:a,newAnnotationNodeId:i}=function n(e,t,a=[],o,i){let l;if(e){if("SECTION"===e.type)return{nodes:[],newAnnotationNodeId:l};e.childrenNodes.forEach(e=>{let{newAnnotationNodeId:r}=n(e,t,a,o,i);l=l||r}),e.annotations.forEach((n,t)=>{let o=n.categoryId&&i.find(e=>e.id===n.categoryId)||null;a.push({nodeId:e.guid,uniqueId:`${e.guid}-manual-${t}`,annotationType:tk.MANUAL,meta:{annotationIndex:t,isUnAuthored:!1,category:o,categoryColor:o&&(0,G.FQ)(o)||void 0}})}),o===e.annotations.length&&e.guid===t&&(0===e.annotations.length?l=e.guid:a.push({nodeId:e.guid,uniqueId:`${e.guid}-manual-${e.annotations.length}`,annotationType:tk.MANUAL,meta:{annotationIndex:e.annotations.length,isUnAuthored:!0,category:null,categoryColor:void 0}}))}return{nodes:a,newAnnotationNodeId:l}}(t,g,[],o,c);return i&&t&&(l={nodeId:i,tlfGuid:e}),n[e]=a,n},{}),newAnnotationNode:l}},[a,p,g,h,e,o,c,t]),m={...f};for(let n of t$){let e=n.useSharedHooksContext&&n.useSharedHooksContext(),t=A(n.useRelevantTLFs(e)),a=n.useNewAnnotationsByTlf(t,e,{topLevelOrSelfNodeId:h});Object.keys(a).forEach(n=>{let e=a[n];m[n]?m[n]=[...m[n],...e]:m[n]=e})}return{allAnnotations:(0,C.zN)(m),newAnnotationNode:x}}({topLevelOrSelfNodeId:f}),v=(0,_.wA)((n,e)=>Object.entries(e).map(([e,t])=>{let a=[];t.forEach(e=>{let t=n.get(e.nodeId);if(t&&(!(0,l.kc)().dt_annotations_filter_out_clipped_nodes||!function(n){if(!n.isAlive)return!0;let e=n.parentNode,t=n.absoluteBoundingBox;for(;e;){let n=e.absoluteBoundingBox;if("FRAME"===e.type&&!e.frameMaskDisabled&&(t.x<n.x||t.x+t.w>n.x+n.w||t.y<n.y||t.y+t.h>n.y+n.h))return!0;e=e.parentNode}return!1}(t))){let n=t.absoluteRenderBounds;a.push({...e,nodeBounds:{x:n?.x??0,y:n?.y??0,width:n?.w??0,height:n?.h??0}})}});let o=n.get(e);return{topLevelFrameNodeId:e,topLevelFrameBounds:{x:o?.absoluteBoundingBox.x??0,y:o?.absoluteBoundingBox.y??0,width:o?.absoluteBoundingBox.w??0,height:o?.absoluteBoundingBox.h??0},nodes:a}}),x),b=(0,o.useMemo)(()=>{if(f){let n=v.find(({topLevelFrameNodeId:n})=>n===f);if(n){let e=n.topLevelFrameBounds;return{x:e.x+e.width/2,y:e.y+e.height/2}}}},[v,f]),y=(0,C.k9)(()=>{let e=0,t=null,a=v.map(a=>{let{topLevelFrameBounds:o}=a;if(!function(n,e){let t=n.x,a=n.x+n.width,o=n.y,i=n.y+n.height,l=e.x,r=e.x+e.width,s=e.y,d=e.y+e.height;return t<r&&a>l&&o<d&&i>s}({x:o.x-ar,y:o.y,width:o.width+2*ar,height:o.height},(0,R.qc)(n)))return null;let i=function(n,e){let t={x:e.x+e.width/2,y:e.y+e.height/2};return Math.hypot(t.x-n.x,t.y-n.y)}(b||{x:n.offsetX,y:n.offsetY},o);(!t||i<t.distanceFromFocusPoint)&&(t={tlfIndex:e,distanceFromFocusPoint:i}),e++;let l=function(n,e){let t=(0,R.qc)(e);return Math.min(n.width*e.zoomScale,t.width)*Math.min(n.height*e.zoomScale,t.height)/(t.width*t.height)}(o,n);return{...a,isMostCentralTLF:!1,viewportClampingWeight:ap(l,.8,.85,0,1)*ap(n.zoomScale,.98,1,0,1),viewportOffsetXForClamping:l>.8&&n.zoomScale>.98||null!==c?n.offsetX*n.zoomScale:0}}).filter(k.Vq),o=t?t.tlfIndex:void 0;return void 0!==o&&(a[o].isMostCentralTLF=!0),a},[v,n,b,c]),w=Math.max(ab,n.zoomScale),N=t?1/Math.min(1,n.zoomScale):1,{annotationsBeingViewed:j,nodesWithAnnotationInfo:I,annotationBeingEditedIndex:S}=(0,o.useMemo)(()=>{let o=[],i=0,l=null,r=y.flatMap(({nodes:r,topLevelFrameNodeId:s,topLevelFrameBounds:d,isMostCentralTLF:u,viewportClampingWeight:h,viewportOffsetXForClamping:f})=>{r.length>0&&o.push({tlf:s,numNodes:r.length});let x=r.map(o=>{let{nodeId:i,nodeBounds:l,annotationType:r,uniqueId:x}=o,m="meta"in o?o.meta:void 0,v=m&&("category"in m?m.category:null),b=m&&("categoryColor"in m?m.categoryColor:void 0),y=i===t,_=null!==g&&v?.id!==g,A=p===x&&null!==c,j=!!m&&"isUnAuthored"in m&&m.isUnAuthored,I=A||j?1:_?0:h,k=function(n,e,t){let{x:a,y:o,width:i,height:l}=n,{x:r,width:s}=e,d=Math.abs(a-r)<Math.abs(r+s-(a+i)),c=Math.min(a,r),u=Math.max(a+i,r+s),p=Math.min(Math.max(20*t,5*t),20);return d?{lineWidth:(a-c)*t+p,offsetX:c*t-p,offsetY:(o+l/2)*t,isLeftAligned:d}:{lineWidth:(u-(a+i))*t+p,offsetX:u*t+p,offsetY:(o+l/2)*t,isLeftAligned:d}}(l,d,w);if(!A&&!j){let t=I*ad(n.width,w,l.width,e[x]?.width||0,k.isLeftAligned,k.offsetX-f,k.lineWidth,A,a);k.offsetX+=t,k.lineWidth+=t*(k.isLeftAligned?-1:1)}return{...k,meta:m,width:e[x]?.width||0,height:_?6:(e[x]?.height||0)*(y?N:1)+(y?10*(N-1):0),nodeId:i,uniqueId:x,nodeBounds:l,tlfGuid:s,shouldMinimize:_,lineColor:b,annotationType:r,topLevelFrameBounds:d,isInCentralTLF:u,currentlyBeingEdited:A||j}}).sort((n,e)=>n.offsetY-e.offsetY),m=x.findIndex(n=>n.currentlyBeingEdited);-1!==m&&(l=m+i);let v=function(n,e){let t=[],a=[],o={};for(let n of e)n.isLeftAligned?t.push(n):a.push(n);return au(t,o,n),au(a,o,n),e.map(e=>{let{y:t,height:a,width:i}=e.nodeBounds,l=o[e.uniqueId],r=t*n,s=e.lineWidth,d=tS.ALIGNED,c=0,u=e.lineWidth;return l<r?(d=tS.ABOVE,c=r-l,u+=i/2*n):l>(t+a)*n&&(d=tS.BELOW,c=l-(t+a)*n,u+=i/2*n),{...e,offsetY:l,lineAlignment:d,lineHeight:c,lineWidth:u,originalLineWidth:s}})}(w,x);return i+=r.length,v});return{annotationsBeingViewed:o,nodesWithAnnotationInfo:r,annotationBeingEditedIndex:l}},[n.width,w,y,e,g,a,c,p,N,t]);return{nodesWithAnnotationInfo:(0,C.k9)(()=>{if(null===S)return I;let e=[...I],t={...e[S]},o=Math.min(1,n.zoomScale*(1/ab)),i=ad(n.width,n.zoomScale,t.nodeBounds.width,t.width,t.isLeftAligned,t.offsetX*o-n.offsetX*n.zoomScale,t.lineWidth*o,!0,a)/o;if(t.offsetX=t.offsetX+i,t.lineWidth=t.lineWidth+i*(t.isLeftAligned?-1:1),"isUnAuthored"in t.meta&&t.meta.isUnAuthored){let e=ac(t.nodeBounds,n,!t.isLeftAligned);e.isLeftAligned!==t.isLeftAligned&&(t.lineWidth=e.lineWidth/o,t.isLeftAligned=e.isLeftAligned,t.lineAlignment=tS.ALIGNED,t.lineHeight=0,t.offsetX=(e.offsetX+n.offsetX*n.zoomScale)/o,t.offsetY=(e.offsetY+n.offsetY*n.zoomScale)/o)}return e[S]=t,e},[I,n,S,a]),annotationsBeingViewed:j,newAnnotationNodeInfo:(0,_.wA)((n,e,t,a)=>{if(!t)return null;let o=n.get(t.nodeId);if(!o)return null;let i=o.absoluteRenderBounds,l={x:i?.x??0,y:i?.y??0,width:i?.w??0,height:i?.h??0},r=ac(l,a);return{...r,nodeId:t.nodeId,uniqueId:`${t.nodeId}-manual-${o.annotations.length}`,width:e[t.nodeId]?.width||0,height:e[t.nodeId]?.height||0,newAnnotationNode:t,tlfGuid:t.tlf,shouldMinimize:!1,lineAlignment:tS.ALIGNED,lineHeight:0,lineColor:void 0,originalLineWidth:r.lineWidth,annotationType:tk.MANUAL,isInCentralTLF:!1,nodeBounds:l,meta:{annotationIndex:o.annotations.length,category:null,categoryColor:void 0,isUnAuthored:!0}}},e,m,n)}}(g,N),T=(0,x.IL)(),V=E.length,D=E.reduce((n,e)=>n+e.numNodes,0);(0,o.useEffect)(()=>{V&&c===i.NLJ.SELECT&&T("showing_annotations_for_tlfs",{topLevelFrameCount:V,nodesWithAnnotationsCount:D})},[V,D,c,T]),o.useEffect(()=>(z.NB?.setIsShowingAnnotations(0!==I.length),v(I.length),()=>{z.NB?.setIsShowingAnnotations(!1),v(0)}),[I.length,v]);let U=(0,o.useCallback)((n,e)=>{j(t=>t[n]?.height!==e.height||t[n]?.width!==e.width?{...t,[n]:e}:t)},[]),q=(0,O.EG)();if(!t)return null;let X=g.zoomScale<.05,K=g.x+g.width/2,$=g.y+g.height/2,Y=Math.min(1,g.zoomScale*(1/ab)),Q=null,J=[],Z=[];I.forEach(n=>{null!==b&&n.nodeId===e&&n.annotationType===tk.MANUAL&&n.meta.annotationIndex===b&&(Q=(0,a.jsx)(t5,{annotationId:n.uniqueId,annotationIndex:b,isLeftAligned:n.isLeftAligned,lineAlignment:n.lineAlignment,lineHeight:n.lineHeight*Y,lineWidth:n.lineWidth*Y,nodeId:n.nodeId,offsetX:n.offsetX*Y+K-g.offsetX*g.zoomScale,offsetY:n.offsetY*Y+$-g.offsetY*g.zoomScale,setDimensions:U,viewportInfo:g}));let t=(0,a.jsx)(at,{annotationId:n.uniqueId,annotationMeta:"meta"in n?n.meta:void 0,annotationType:n.annotationType,isEditingAnnotation:!1,isInCentralTLF:n.isInCentralTLF,isLeftAligned:n.isLeftAligned,lineAlignment:n.lineAlignment,lineColor:n.lineColor,lineHeight:n.lineHeight,lineWidth:n.lineWidth,nodeId:n.nodeId,offsetX:n.offsetX,offsetY:n.offsetY,setDimensions:U,shouldDelayHover:g.zoomScale<.25,shouldHide:X,shouldMinimize:n.shouldMinimize},n.uniqueId);n.nodeId===e?Z.push(t):J.push(t)});let nn=null!==b&&L&&(0,a.jsx)(t5,{annotationId:L.uniqueId,annotationIndex:b,isLeftAligned:L.isLeftAligned,lineAlignment:L.lineAlignment,lineHeight:L.lineHeight,lineWidth:L.lineWidth,nodeId:L.nodeId,offsetX:L.offsetX+K,offsetY:L.offsetY+$,setDimensions:U,viewportInfo:g}),na=m&&f&&(0,a.jsx)(nt,{nodeId:f.data.nodeId,annotationIndex:f.data.annotationIndex,parentRect:f.data.position});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aw,{hoverScale:1/Y,children:(0,a.jsxs)("div",{"data-fpl-version":w.version,style:{visibility:q?"hidden":"visible",position:"absolute",transform:`translate(${-g.offsetX*g.zoomScale+g.x+g.width/2}px, ${-g.offsetY*g.zoomScale+g.y+g.height/2}px) scale(${Math.min(g.zoomScale*(1/ab),1)})`},children:[(0,a.jsx)(H.v,{isAccessible:Z.length>0,role:"region","aria-label":(0,M.t)("dev_handoff.annotations.accessible_area_label"),children:Z}),J]})}),Q,nn,na]})}function aA(){return!function(){let n=(0,s.dH)(),e=(0,d.J2)(i.Ez5.annotationObserver().annotationInfoByTlf);return A((0,o.useMemo)(()=>Array.from(e.keys()),[e])).length>0||!!(0,l.kc)().dt_component_annotations||!!(0,l.kc)().dt_ccv2_on_canvas||!!(0,l.kc)().cheddar_annotations||n===i.NLJ.ANNOTATE}()?null:(0,a.jsx)(c.p,{forceNoScroll:!0,children:(0,a.jsx)(a_,{})})}function aN(){let n=(0,j.iW)();return((0,o.useEffect)(()=>{!n&&(r.zl.set(u.m,null),i.Ez5&&i.Ez5.editorState().focusedAnnotationId.set(null))},[n]),n)?(0,a.jsx)(aA,{}):null}},871052:(n,e,t)=>{t.d(e,{tX:()=>no,Oy:()=>ns});var a=t(104076),o=t(716976),i=t(59423),l=t(651234),r=t(742212),s=t(667693),d=t(88314),c=t(917360),u=t(224781),p=t(902892),g=t(878604),h=t(268389),f=t(782747),x=t(418129),m=t(980852),v=t(812714),b=t(795033);t(120440);var y=t(666875),w=t(222714),_=t(361170),A=t(192075),N=t(211862),j=t(835307),I=t(990609),k=t(107799),S=t(266230),C=t(803120),E=t(492130),L=t(825543),T=t(329232),V=t(776975),M=t(533144),R=t(403160),P=t(855492),O=t(401763),W=t(652931),D=t(126968),F=t(389006),B=t(130249),z=t(266808),H=t(883765),G=t(74620),U=t(592726),q=t(331497),X=t(577932),K=t(580276),$=t(588402),Y=t(540041),Q=t(743558),J=t(35552),Z=t(121363),nn=t(191182),ne=t(32404),nt=t(429033);function na({codeInstanceNode:n,entryPointCodeFile:e,previewState:t,isResizingPanel:i,forceReadOnly:r,hideChatBox:s}){let d=(0,U.iZ)(),c=(0,N.tS)();(0,ne.zA)(),(0,nt.m)();let u=e.guid,p=(0,o.useMemo)(()=>(0,a.jsx)(Y.d,{nodeGuid:u}),[u]),g=(0,b.Xr)((0,k.mC)(u)),h=(0,K.Xu)(),{changedFiles:f}=(0,Q.E)(e,l.lV.CODE_IN_SITES),x=(0,Z.P)(),m=(0,B.og)(e.codeFileFullPath),y=(0,o.useMemo)(()=>(0,X.qE)(c||null,u),[c,u]);return function(n,e,t){let a=(0,G.eY)(),{attachments:i,setAttachments:l,claimAPendingAttachmentOrMakeOne:r}=(0,S._9)(n.guid),s=z.Ez5?.codeSelection(),d=(0,q.ut)(s?.selectedPromptFrames,[]),c=(0,o.useCallback)(()=>{d&&d.length>0&&e===ns.EMPTY&&((0,J.E)(d[0]||null,a,l,()=>{},t,r),z.n1M?.clearSelectedPromptFrames())},[d,e,a,l,t,r]);(0,o.useEffect)(()=>{0===i.length&&c()},[i,c,e])}(e,t,(0,o.useCallback)((n,e,t)=>{H.az.trackDefinedEvent("ai_for_production.code_chat_design_node_pasted",{number_of_nodes:e,number_of_instances:t,persistent_entity_id:y,file_key:c||void 0})},[c,y])),(0,a.jsx)($.U,{chatMessagesNode:e,chatMessagesNodeGuid:e?.guid??"",codeInstanceGuid:n.guid,emptyState:p,enableAssetImport:(0,v.kc)().bake_import,enableDragUpload:!0,enableDsImport:(0,v.kc)().bake_ds_import_plan_enabled,enableImageAttachment:!0,featureType:l.lV.CODE_IN_SITES,forceReadOnly:r,hideChatBox:s,isResizingPanel:i,rootPath:m,sendMessage:(t,a)=>{let o=t.plainText;o||(o=t.hidden?"":b.zl.get((0,k.mC)(u)));let i={...t,plainText:o};return g(""),(0,nn.O)({featureType:l.lV.FIGMAKE_IN_DESIGN,userMessageContent:i,rawUserChatDetails:a,user:d,chatMessagesNode:e,setInput:g,fileKey:c,autoFixingUserMessageId:null,canUseSupabase:h,changedFiles:f,model:x,instanceNode:n})},setInput:g,showCodeStreaming:!0,showCopyButton:!0})}function no({forceReadOnly:n,hideToolbar:e,hideChatBox:t}){let i=(0,b.md)(M.wh),l=(0,j.Fk)((n,e)=>e.flatMap(e=>n.get(e)?.guid??[]),i),r=Array.from((0,o.useMemo)(()=>{let n=(0,m.UN)();return new Map(l.map(e=>[e,n.get(e)]).filter(n=>null!=n[1]))},[l]).values())[0];return r?(0,a.jsx)(nd,{node:r,forceReadOnly:n,showToolbar:!e,hideChatBox:t}):null}function ni({name:n}){return(0,a.jsxs)("div",{className:"x1kzcg16 xlup9mm x1yjdb4r x1n5zjp5 x78zum5 x1nfngrj xkh2ocl",children:[(0,a.jsx)(c.J,{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1akne3o",htmlAttributes:{"data-tooltip":n,"data-tooltip-type":"text"},children:n}),(0,a.jsx)(O.M,{})]})}function nl({panelConfiguration:n,handleSegmentChange:e}){return(0,a.jsx)("div",{className:"x78zum5 x6s0dn4 xl56j7k x1iyjqo2 x1excjyp",children:(0,a.jsxs)(u.bL,{value:n,onChange:e,legend:(0,a.jsx)(p.q,{children:(0,A.t)("sites.panel.code_window_display_picker.hidden_legend")}),children:[(0,a.jsx)(D.A,{selectedValue:n,value:"preview",IconComponent:f._,text:(0,A.t)("make.window.preview")}),(0,a.jsx)(D.A,{selectedValue:n,value:"code",IconComponent:x.X,text:(0,A.t)("make.window.code")})]})})}function nr({panelConfiguration:n,handleSegmentChange:e}){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"x153ncpu x1yjdb4r x1n5zjp5 x78zum5 x13a6bvl x6s0dn4 x1nfngrj",children:(0,a.jsx)(nl,{panelConfiguration:n,handleSegmentChange:e})})})}var ns=(n=>(n[n.EMPTY=0]="EMPTY",n[n.THINKING=1]="THINKING",n[n.LOADED=2]="LOADED",n))(ns||{});function nd({node:n,onClose:e,forceReadOnly:t,showToolbar:l,hideChatBox:c}){let[u,p]=o.useState("preview"),[f,x]=o.useState(!1),m=(0,L.h)(n),v=function(n){let[e,t]=o.useState(0),{exchange:a}=(0,k.$W)(n?.guid);return(0,o.useEffect)(()=>{a?.messages?.length?t(1):n.sourceCode===r.j?t(0):t(2)},[a,n?.sourceCode]),e}(m),{setAttachments:A}=(0,S._9)(m?.guid),N=o.useCallback(n=>{(0,M.UM)(),e?.(),A([])},[e,A]),j=function(){let n;let[{windowInnerWidth:e,windowInnerHeight:t}]=(0,y.A)((0,w.l)(),300,{equalityFn:s.c2}),[a,i]=(0,b.fp)(M.yq);if(a){let o=(0,d.qE)(a.x,0,e-a.width),i=(0,d.qE)(a.y,0,t-a.height),l=(0,d.qE)(a.width,640,e-o),r=(0,d.qE)(a.height,480,t-i);n={x:o,y:i,width:l,height:r}}else{let a=(0,d.qE)(e*np.targetPercentWidth,np.minWidth,np.maxWidth-2*np.margin),o=(0,d.qE)(Math.min(a/np.aspectRatio,t-2*np.margin),np.minHeight,np.maxHeight);n={x:(e-a)/2,y:(t-o)/2,width:a,height:o}}let l=o.useMemo(()=>new _.Mi(n.x,n.y),[n.x,n.y]),r=o.useCallback(({x:n,y:e,width:t,height:o})=>{a&&n===a.x&&e===a.y&&t===a.width&&o===a.height||i({x:n,y:e,width:t,height:o})},[a,i]),c=o.useCallback(e=>{let t=e.size?.x??n.width,a=e.size?.y??n.height;r({x:e.position?.x??n.x,y:e.position?.y??n.y,width:t,height:a})},[r,n.width,n.height,n.x,n.y]);return{initialPosition:l,initialHeight:n.height,initialWidth:n.width,handleTransform:c,constraints:nu}}(),[I,C]=o.useState(j.initialWidth),E=o.useRef(null);return n&&n.isAlive?(0,a.jsx)(g._L,{defaultWidth:j.initialWidth,defaultHeight:j.initialHeight,onClose:N,defaultPosition:j.initialPosition,onTransform:n=>{j.handleTransform(n),n.size&&C(n.size.x)},ref:E,recordingKey:"sites-code-window",draggable:"anywhere",constraints:j.constraints,children:(0,a.jsx)(h.vo,{children:(0,a.jsx)(h.nB,{padding:0,scrolling:"none",children:(0,a.jsxs)(i.YZ,{direction:"horizontal",children:[(0,a.jsx)(i.Zk,{defaultSize:35,minSize:20,children:(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x5yr21d",children:[(0,a.jsx)(ni,{name:n.name}),(0,a.jsx)(na,{codeInstanceNode:n,entryPointCodeFile:m,isResizingPanel:f,previewState:v,forceReadOnly:t,hideChatBox:c})]})}),(0,a.jsx)(i.TW,{onDragging:n=>{x(n)},className:"x1i1rx1s xbpqucl"}),(0,a.jsx)(i.Zk,{children:(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x5yr21d",children:[(0,a.jsx)(nr,{panelConfiguration:u,handleSegmentChange:p}),(0,a.jsx)(nc,{panelConfiguration:u,chatNode:m,codeInstanceNodeToRender:n,isDragging:f,windowRef:E,previewState:v,forceReadOnly:t,showToolbar:l})]})})]})})})}):null}function nc({panelConfiguration:n,chatNode:e,codeInstanceNodeToRender:t,isDragging:r,windowRef:s,previewState:d,forceReadOnly:c,showToolbar:u}){let p=(0,b.md)(M.Jl),g=(0,m.UN)().get(p),h=(0,L.h)(e),f=g?.guid,x=e?.guid,y=o.useCallback(n=>{if(!f)return;let e=T.O.get(f);e&&(n===E.d.ERROR?e.hasErrors=!0:n===E.d.LOADED&&(e.hasErrors=!1))},[f]),w=o.useMemo(()=>{let n=e?.codeFilePath||void 0;return(0,a.jsx)(I.S,{selectedCodeFileNode:g,nodeWithChatMessages:e,featureType:l.lV.FIGMAKE_IN_DESIGN,rootPath:n})},[e,g]),_=o.useMemo(()=>(0,a.jsx)(F.RL,{codeFile:g,nodeWithChatMessages:e,fullHeight:!0,forceDisableEditable:c}),[e,g,c]),A=(0,N.tS)();(0,o.useEffect)(()=>{if(!f)return;let n=T.O.start(A,f);return()=>n.end()},[f,A]);let{triggerSelfHeal:j}=(0,C.u)({chatMessagesNode:e,disabled:!(0,v.kc)().bake_auto_error_fix,featureType:l.lV.FIGMAKE_IN_DESIGN}),k=o.useCallback((n,e,t,a)=>{h&&j(h,t,a)},[j,h]),S=(0,V.rh)(t),O=o.useMemo(()=>{let n=2===d;return(0,a.jsx)("div",{...{0:{className:"xh8yej3 x5yr21d"},1:{className:"xh8yej3 x5yr21d x1s85apg x47corl"}}[!n<<0],children:(0,a.jsx)(R.m,{chatNodeId:x??null,codeSelectionToRender:S,disablePointerEvents:r,isVisible:!0,jsxDev:(0,v.kc)().code_layers_click_to_inspect,onError:k,onPreviewStateChange:y,sandbox:null,showToolbar:u,showViewOptions:!0,windowRef:s})})},[S,s,y,u,r,x,k,d]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x5yr21d",children:["preview"===n&&(0,a.jsxs)("div",{className:"xh8yej3 x5yr21d x78zum5 xl56j7k x6s0dn4",children:[O,1===d&&(0,a.jsx)(W.Ay,{}),0===d&&(0,a.jsx)(P.p,{})]}),"code"===n&&(0,a.jsxs)(i.YZ,{direction:"horizontal",children:[(0,a.jsx)(i.Zk,{defaultSize:35,children:w}),(0,a.jsx)(i.Zk,{defaultSize:65,children:_})]})]})})}let nu={minWidth:640,minHeight:480,maxWidth:"100vw",maxHeight:"100vh"},np={minWidth:750,minHeight:500,maxWidth:1200,maxHeight:800,margin:16,targetPercentWidth:.6,aspectRatio:1.5}}}]);

//# debugId=cc855595-5210-558b-93b1-67de9bf0309a

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/06052928d202a0d7131d20533d029c8400bc51cc/2324-aba2f798667fcf79.min.js.map