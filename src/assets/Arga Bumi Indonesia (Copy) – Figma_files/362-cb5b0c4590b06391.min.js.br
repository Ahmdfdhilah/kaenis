"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="61201240-ed8c-5e24-84f8-cd0227e9e4bd")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[362],{915019:(e,t,n)=>{n.d(t,{IK:()=>l,ff:()=>c,om:()=>s});var o=n(716976),i=n(641518),r=n(361170),a=n(692042);function l(e,t,n,i,l){let s=(0,a._X)({subscribeToUpdates_expensive:!n});return o.useMemo(()=>{if(n)return l(e,t);{let n=(0,a.$g)(s,new r.Mi(e,t));return new r.Mi(n.x-i/2,n.y+30)}},[n,l,e,t,s,i])}function s(e,t,n){let[r,a]=o.useState(!1),l=i.v_(n,"keydown",o.useCallback(n=>"Shift"!==n.key?i.aH:(a(!0),e&&t)?void 0:i.aH,[e,t,a])),s=i.v_(n,"keyup",o.useCallback(n=>"Shift"!==n.key?i.aH:(a(!1),e&&t)?void 0:i.aH,[e,t,a]));return o.useEffect(()=>(document.addEventListener("keydown",l),document.addEventListener("keyup",s),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",s)}),[l,s]),{pressingShiftKey:r,setPressingShiftKey:a}}function c(e,t,n){let[i,r]=o.useState(0);return o.useEffect(()=>{if(!e)return;let n=n=>{!n.shiftKey&&e&&t(!1)};return document.addEventListener("mousemove",n),()=>{document.removeEventListener("mousemove",n)}},[e,t]),{shouldModalHide:o.useMemo(()=>e&&!n&&i<=1,[e,n,i]),incrementTimesInteractedWithModal:o.useCallback(()=>{r(e=>e+1)},[r])}}},7331:(e,t,n)=>{n.d(t,{X:()=>k});var o=n(104076),i=n(716976),r=n(903927),a=n(369392),l=n(298874),s=n(529992),c=n(573820),d=n(965815),p=n(266808),u=n(170627),_=n(511570),h=n.n(_),m=n(221586),y=n(823736),g=n(331497),v=n(737139),I=n(936774),x=n(34246),f=n(425045),N=n(259595);let T="stack_controls--input--gK1jo text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",E="stack_controls--scrubbableControl--b1ChI",A="stack_controls--inputSvg--wFizL",b="stack_controls--stackSpacingRow--Uus3H";function O(){let e=(0,g.J2)(p.Ez5.canvasViewState().focusedStackRegion);if(!e)return null;let{region:t,focus:n}=e;return t===p.RN9.SPACING?(0,o.jsx)(j,{focusOnMount:n}):t===p.RN9.COUNTER_SPACING?(0,o.jsx)(S,{focusOnMount:n}):(0,o.jsx)(C,{stackRegion:t,focusOnMount:n})}let P=e=>{if(e.keyCode===m.Uz.TAB){e.preventDefault(),e.currentTarget.blur();let t=e.shiftKey;p.Qa7.tabActiveStackRegion(t)}};function j({focusOnMount:e}){return(0,o.jsx)(v.fI,{className:b,children:(0,o.jsx)(N.KI,{focusOnMount:e,inputClassName:T,inputTestId:"stackSpacingControl",noBorderOnFocus:!0,onBlur:p.Qa7.clearActiveStackRegion,onCanvasUI:!0,onKeyDown:P,onPaste:D,outerClassName:E,recordingKey:"stackSpacingControl",source:"canvas",svgClassName:A})})}function S({focusOnMount:e}){return(0,o.jsx)(v.fI,{className:b,children:(0,o.jsx)(I.q,{focusOnMount:e,inputClassName:T,inputTestId:"stackCounterSpacingControl",noBorderOnFocus:!0,onBlur:p.Qa7.clearActiveStackRegion,onCanvasUI:!0,onKeyDown:P,onPaste:D,outerClassName:E,recordingKey:"stackCounterSpacingControl",source:"canvas",svgClassName:A})})}function C({stackRegion:e,focusOnMount:t}){let[n]=(0,f.HF)(e),i=Array.isArray(n)?n.length:0;return e===p.RN9.SPACING?null:(0,o.jsx)(v.fI,{className:h()("stack_controls--stackPaddingRow--40WUa",{"stack_controls--large--bJFUN":i>3}),children:(0,o.jsx)(x.s,{disableVariablesEntryPoint:!0,focusOnMount:t,inputClassName:T,inputTestId:"stackPaddingControl",noBorderOnFocus:!0,onBlur:p.Qa7.clearActiveStackRegion,onKeyDown:P,onPaste:D,outerClassName:E,paddingSelection:e,recordingKey:"stackPaddingControl",source:"canvas",svgClassName:A})})}function D(e){(0,y.gk)(e)&&(e.preventDefault(),e.currentTarget.blur(),u.l7.user("paste-in-stack",()=>{p.glU.triggerAction("paste",{})}))}let k=i.memo(function(){return(0,r.d4)(e=>e.mirror.appModel.isReadOnly)?null:(0,o.jsx)(w,{})});function w(){return(0,o.jsx)(a.k,{isShown:!0,children:(0,o.jsx)(c.IA,{children:(0,o.jsx)(R,{testID:"DesignInlineMenu"})})})}function R({testID:e}){let t=(0,r.d4)(e=>{let t=e.mirror.selectionProperties.stackMode;return 1===e.mirror.selectionProperties.numSelected&&("HORIZONTAL"===t||"VERTICAL"===t||"GRID"===t)});return(0,r.d4)(e=>{let t=e.mirror.selectionProperties.selectedWidgetInfo;return!!(1===e.mirror.selectionProperties.numSelected&&t?.propertyMenu.length)})?(0,o.jsxs)(d.W1,{size:"small",testID:e,children:[(0,o.jsx)(l.jk,{}),(0,o.jsx)(s.x,{})]}):t?(0,o.jsx)(d.W1,{testID:e,darkModePreferred:!0,children:(0,o.jsx)(O,{},"stackControls")}):null}},444049:(e,t,n)=>{n.d(t,{m:()=>i});var o=n(104076);function i({children:e}){return(0,o.jsx)("div",{className:"objects_panel_container--container--jBz9j",children:e})}},277159:(e,t,n)=>{n.d(t,{f:()=>y});var o=n(104076),i=n(716976),r=n(641518),a=n(361170),l=n(665261),s=n(652539),c=n(506192),d=n(215853),p=n(398585),u=n(72832),_=n(833441),h=n(201128),m=n(954184);function y({resolvedTypes:e,recordingKey:t}){let{showing:n,toggle:l,hide:u}=(0,c.BK)("expression-builder-create-variable"),_=i.useRef(null),y=r.rf(r.Pt(t,"createVariableDropdown"),"click",i.useCallback(()=>{1===e.length?f(e[0]):l()},[e,l])),[v,I]=i.useState(!1),x=i.useRef(null),f=e=>{let t=_.current?.getBoundingClientRect();t&&(x.current={initialPosition:new a.Mi(t.left,t.top),resolvedType:e},I(!0))},N=()=>{I(!1)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{ref:_,className:h.ZS,onClick:y,children:(0,o.jsx)(s.B,{svg:m.A})}),v&&(v&&x.current?(0,o.jsx)(p.U,{initialPosition:x.current.initialPosition,initialWidth:p.i,resolvedType:x.current.resolvedType,onCreateVariable:N,onClose:N}):null),n&&_.current&&(0,o.jsx)(d.Cf,{arrowOffsetFromRectLeft:14,leanPadding:0,lean:"right",targetRect:_.current.getBoundingClientRect(),children:e.map(e=>(0,o.jsx)(g,{resolvedType:e,onClose:u,showCreationModal:f,recordingKey:t},e))})]})}function g({resolvedType:e,onClose:t,showCreationModal:n,recordingKey:a}){let s=(0,_.F)(e),c=r.rf(r.Pt(a,"createVariableOption",s.name),"click",i.useCallback(()=>{n(e),t()},[t,e,n]));return(0,o.jsxs)(l.c$,{className:h.Fs,onClick:c,children:[(0,o.jsx)(u.i,{type:e,showTooltip:!1}),s.name]})}},722850:(e,t,n)=>{let o;n.d(t,{E:()=>e7});var i=n(104076),r=n(716976),a=n(903927),l=n(276800),s=n(420680),c=n(737121),d=n(156412),p=n(276926),u=n(266808),_=n(170627),h=n(264993),m=n(812714),y=n(795033),g=n(511570),v=n.n(g),I=n(983500),x=n(308424),f=n(641518),N=n(550209),T=n(361170),E=n(72138),A=n(192075),b=n(278491),O=n(354114),P=n(823736),j=n(553065),S=n(74620),C=n(211862),D=n(915019),k=n(205088),w=n(299640),R=n(894210),L=n(25870),M=n(316923),U=n(883765),K=n(76616),B=n(653899),V=n(660838),F=n(559954),Y=n(911990),H=n(737139),G=n(652539),z=n(236631),W=n(560201),J=n(420906);let X=(0,W.ex)("prototype_action_info",function(){return(0,i.jsxs)("div",{className:z.s.flex.itemsCenter.justifyCenter.$,children:[(0,i.jsx)(G.B,{className:"prototype_action_info_tooltip--prototypeDestinationInfoIcon--GeQWS",svg:J.A}),(0,i.jsx)("span",{className:z.s.flexGrow1.m6.$,style:{maxWidth:144},children:(0,A.tx)("proto.prototype_panel.use_the_circular_node_to_connect_the_selected_object_to_another_frame_tooltip")})]})},()=>({unconstrainWidth:!0}));var $=n(766317),Z=n(239077),q=n(167151),Q=n(919778),ee=n(831797),et=n(39456),en=n(432884),eo=n(152917),ei=n(968169),er=n(950241),ea=n(237263),el=n(355225);function es({onChange:e,value:t,shouldFocusKeyCaptureField:n,setShouldFocusKeyCaptureField:o}){let a;let l=(0,el._i)(t?.keyCodes),s=t=>e({keyCodes:t,triggerDevice:"KEYBOARD"}),[c,d]=r.useState(!1),p=r.useRef(null);r.useEffect(()=>{(!t||!t.keyCodes||0===t.keyCodes.length)&&n&&p.current&&(o(!1),p.current.focus(),d(!0))},[o,n,t]),r.useEffect(()=>{if(!c)return()=>{};let t=new ea.L,n=t.onPress(t=>{e({keyCodes:[t.buttons[0]],triggerDevice:t.controllerType}),requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})});return t.start(),()=>{n.release(),t.end()}},[e,c]);let u=null,_=(0,el.E8)(t);return c?a=(0,i.jsx)(ec,{children:(0,A.tx)("proto.keyCapture.press_key_lowercase")}):t?.triggerDevice==="KEYBOARD"&&l?u=(0,el.U8)(l):_?u=_:a=(0,i.jsx)(ec,{children:(0,A.tx)("proto.keyCapture.click_to_set_key")}),(0,i.jsx)(H.rp,{ref:p,className:"prototype_key_capture_field--root--bD21s","data-tooltip-type":R.Ib.TEXT,"data-tooltip":u&&u.length>10?u:null,onFocus:()=>d(!0),onBlur:()=>d(!1),onKeyDown:e=>{e.preventDefault(),e.stopPropagation();let t=e.which||e.keyCode;!el.RI.has(t)&&el.pu[t]&&(t===l?.keyCode&&e.repeat?s((0,el.wb)({keyCode:t,metaKey:e.metaKey||l.metaKey,shiftKey:e.shiftKey||l.shiftKey,ctrlKey:e.ctrlKey||l.ctrlKey,altKey:e.altKey||l.altKey})):s((0,el.wb)({...e,keyCode:t})),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},recordingKey:"keycapture",children:u??a})}function ec({children:e}){return(0,i.jsx)("span",{className:"prototype_key_capture_field--placeholder--gWUKF",children:e})}var ed=n(818706),ep=n(816299),eu=n(623411);n(120440);var e_=n(437540),eh=n(241421),em=n(951770),ey=n(374618);let eg=new eh.VG,ev=new eh.EX,eI=new eh.JV,ex=new eh.Eq;function ef(e){let t=(0,q.cJ)(),{showVideoV2Triggers:n}=(0,e_.R)(e=>({allStatesInSelection:e.mirror.selectionProperties.stateGroupSelectionInfo?.mode===u.iCO.STATE,allTopLevelFramesInSelection:!!e.mirror.selectionProperties.allTopLevelFramesInSelection,showVideoV2Triggers:(0,em.dq)(e.mirror.selectionProperties)})),o=(0,y.md)(ey.NE)?"ON_MEDIA_HIT"!==e.property?ev:ex:"ON_MEDIA_HIT"!==e.property?eg:eI,r=t=>{let r=(0,i.jsx)("div",{className:"transition_interaction_dropdown--prototypeInteractionIcon---njby",children:(0,em.e7)(t)});return(0,i.jsx)(ep.c$,{value:String(t),disabled:!function(t){if("NONE"===t)return!0;let o=!!e.interactionsOnSelectedNodes&&e.interactionsOnSelectedNodes.every(t=>e.interactionsOnSelectedNodes&&h.aI(t.sourceNodeID,e.interactionsOnSelectedNodes[0].sourceNodeID))&&!(0,j.hS)(e.property),i=(function(){if(e.interactionsOnSelectedNodes)return new Set(e.interactionsOnSelectedNodes.map(e=>e?.event?.interactionType).filter(e=>void 0!==e))})()?.has(t)&&(0,j.hS)(e.property)&&e.property!==t;return(!o&&!i||!!["ON_KEY_DOWN","DRAG","ON_VOICE","ON_MEDIA_HIT"].includes(t))&&("AFTER_TIMEOUT"===t?!e.interactionContainsOpenLinkAction:"ON_MEDIA_HIT"===t||"ON_MEDIA_END"===t?n:(!e.interactionContainsOpenLinkAction||"ON_CLICK"===t||"MOUSE_UP"===t)&&(!e.interactionContainsUpdateMediaRuntime||"ON_HOVER"!==t&&"ON_PRESS"!==t&&"DRAG"!==t)&&(!e.interactionOnlyContainsBack||"ON_HOVER"!==t&&"ON_PRESS"!==t))}(t),children:(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x167g77z",children:[(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1kky2od xlup9mm",children:r}),o.format(t)]})},t)},a=(t?[]:["NONE"]).map(r),l=["ON_CLICK",...t?[]:["DRAG"],"ON_HOVER","ON_PRESS","ON_KEY_DOWN"].map(r),s=["MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].map(r),c=(t?[]:["ON_MEDIA_HIT","ON_MEDIA_END"]).map(r),d=["AFTER_TIMEOUT"].map(r),p=[...a,!t&&(0,i.jsx)(ep.wv,{},"select1"),...l,(0,i.jsx)(ep.wv,{},"select2"),...s,!t&&(0,i.jsx)(ep.wv,{},"select3"),...d,...!t&&n?[(0,i.jsx)(ep.wv,{},"select4"),...c]:[]],_=(0,j.E7)(e.property);return(0,i.jsxs)(ep.bL,{value:_?String(_):void 0,onChange:t=>{t&&e.onChange(t)},recordingKey:f.Pt(e,"select"),children:[(0,i.jsx)(ep.l9,{"data-testid":"interaction-select",iconLead:_?(0,i.jsx)("div",{className:"x180r7m8",children:(0,em.e7)(_)}):void 0,label:(0,i.jsx)(eu.h,{children:(0,A.tx)("proto.trigger")}),width:"fill",children:(0,i.jsx)("span",{"data-testid":"interaction-select-label",children:_?o.format(_):(0,j.gl)(e.property)?(0,A.tx)("fullscreen.mixed"):void 0})}),(0,i.jsx)(ep.mc,{children:p})]})}var eN=n(748624),eT=n(294044);let eE={keyCodes:[],triggerDevice:"KEYBOARD"};function eA(e,t,n){return(0,i.jsx)(ed.A,{label:e,input:t,appendedClassName:n?void 0:eT.dU})}function eb(e){let{detailPropsMultipleActions:t,interactionsOnSelectedNodesAndComponents:n,updateSelectionProperties:o}=(0,eN.Ay)(e.category),{interactionType:l,transitionTimeout:s=.8,mediaHitTime:c=0,interactionMaintained:d=!1,interactionDuration:p=.3,keyTrigger:u=eE}=t.interactionEvent,_=(0,y.md)($.Cw),h=r.useMemo(()=>!l&&_>1||l&&_>0?j.oV:l||"NONE",[l,_]),m=(e,t)=>{if(e.connectionType===t)return e;if("CONDITIONAL"===e.connectionType)for(let n of(0,j.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]){let e=n.actions?n.actions.find(e=>e.connectionType===t):void 0;if(void 0!==e)return e}return null},g=void 0!==t.interactionActions.find(e=>m(e,"URL")),v=void 0!==t.interactionActions.find(e=>m(e,"UPDATE_MEDIA_RUNTIME")),I=1===t.interactionActions.length&&"BACK"===t.interactionActions[0].connectionType,x=void 0!==t.interactionActions.find(e=>m(e,"CONDITIONAL"));return function(e){let t=(0,a.wA)(),n=e.updateSelectionProperties,o=(0,ei.RU)(),[l,s]=r.useState(!1),c=(0,V.YT)(),d=c===V.Oz.SINGLE_COL,p=c===V.Oz.TWO_COL,u=!0===(0,j.E7)(e.maintained),_=(0,j.E7)(e.keyTrigger),h="ON_KEY_DOWN"===(0,j.E7)(e.interactionType),m="AFTER_TIMEOUT"===(0,j.E7)(e.interactionType),y="ON_MEDIA_HIT"===(0,j.E7)(e.interactionType),g=["MOUSE_IN","MOUSE_OUT","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].indexOf((0,j.E7)(e.interactionType)||"")>-1,v=r.useId(),I=(0,i.jsx)(ef,{ariaLabel:(0,A.t)("proto.trigger"),ariaLabelledBy:v,className:eT.sQ,interactionContainsOpenLinkAction:e.interactionContainsOpenLinkAction,interactionContainsUpdateMediaRuntime:e.interactionContainsUpdateMediaRuntime,interactionOnlyContainsBack:e.interactionOnlyContainsBack,interactionsOnSelectedNodes:e.interactionsOnSelectedNodes,onChange:o=>{K.sn.start("interaction_details_changed"),n({interactionType:o}),t((0,k._P)({name:"Prototype Interaction Type Changed",params:{newType:o,oldType:(0,j._W)(e.interactionType,"MIXED")}})),"ON_KEY_DOWN"===o&&s(!0)},property:e.interactionType,recordingKey:f.Pt(e,"interactionDropdown")}),x=d?(0,i.jsx)(ed.A,{labelId:v,label:(0,A.t)("proto.trigger"),input:I}):(0,i.jsx)("div",{className:eT.BX,children:I}),N=(0,i.jsxs)(i.Fragment,{children:[m&&eA((0,A.t)("proto.delay"),(0,i.jsx)(er.W4,{className:eT.Lp,"data-tooltip":(0,A.t)("proto.trigger.after_delay_timeout"),"data-tooltip-type":R.Ib.TEXT,dataTestId:"timeout-input",dispatch:t,inputClassName:eT.Gl,max:20,onValueChange:e=>{n({transitionTimeout:e})},recordingKey:f.Pt(e,"timeoutInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:e.timeout,wheelMultiplier:o/1e3,children:(0,i.jsx)(en.A,{})}),d),h&&eA((0,A.t)("proto.key"),(0,i.jsx)(es,{onChange:e=>{n({keyTrigger:e})},value:_,shouldFocusKeyCaptureField:l,setShouldFocusKeyCaptureField:s}),d),y&&eA((0,A.t)("proto.time"),(0,i.jsx)(er.qd,{className:eT.Ym,"data-tooltip":(0,A.t)("proto.trigger.video_hit_time"),"data-tooltip-type":R.Ib.TEXT,dataTestId:"mediaHitTime-input",dispatch:t,displayFractions:!0,inputClassName:eT.vE,max:3600,onValueChange:e=>{n({mediaHitTime:e})},recordingKey:f.Pt(e,"mediaHitTimeInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaHitTime,wheelMultiplier:o/1e3,children:(0,i.jsx)(eo.Y,{})}),d),g&&eA((0,A.t)("proto.delay"),(0,i.jsx)(er.W4,{allowEmpty:!0,className:eT.Lp,"data-tooltip":(0,A.t)("proto.trigger.after_delay_timeout"),"data-tooltip-type":R.Ib.TEXT,dataTestId:"duration-input",dispatch:t,inputClassName:eT.Gl,min:0,onValueChange:e=>{n(e&&e>0?{interactionMaintained:!0,interactionDuration:e}:{interactionMaintained:!1})},placeholder:(0,A.t)("proto.trigger.add_delay_placeholder"),recordingKey:f.Pt(e,"delayInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:u?e.interactionDuration:void 0,wheelMultiplier:o/1e3,children:(0,i.jsx)(en.A,{})}),d)]});return(0,i.jsxs)("div",{className:p?eT.eU:void 0,children:[x,N]})}({...e,updateSelectionProperties:o,interactionType:h,interactionContainsOpenLinkAction:g,interactionContainsUpdateMediaRuntime:v,interactionOnlyContainsBack:I,interactionContainsConditionalAction:x,timeout:s,maintained:d,interactionDuration:p,mediaHitTime:c,keyTrigger:u,interactionsOnSelectedNodes:n,recordingKey:f.Pt(e.recordingKey,V.Qe)})}let eO="prototype_interaction_edit_modal--contentContainer--bo2b4",eP="prototype_interaction_edit_modal--ui3TwoColContentContainer--x9vrG",ej="prototype_interaction_edit_modal--ui3SingleColContentContainer--uF-ir",eS="prototype_interaction_edit_modal--ui3CollapsedModalHeaderButtons--7yPuD",eC="prototype_interaction_edit_modal--dividerHorizontal--3wvnB",eD="prototype_interaction_edit_modal--ui3InteractionsPanelContentRight--bVfG8";function ek(e){let{selectedInteractions:t,makeUpdateSelectionPropertiesForActionIndex:n,makeUpdateMultipleDestinationNodesForActionIndex:o,differentLengthActions:a,mergedActions:l}=(0,eN.Ay)(e.category,e.filterOutNoneActions),s=void 0!==l.find(e=>"CONDITIONAL"===e.connectionType),{selectedActionIndex:c,onSelect:d}=e,p=(0,V.YT)(),u=p===V.Oz.SINGLE_COL,_=p===V.Oz.TWO_COL,{expandedRows:h,setExpandedRows:m,deleteButtonPressed:g,newActionIndexPath:I,resetNewActionIndexPath:x}=e,N=(0,y.md)($.jM),T=(0,q.cJ)()&&(0,Q.kc)({interactionType:e.interactionType,actions:l});r.useEffect(()=>{I&&!I?.equals([])&&(d(I.path,!0),x())},[h,m,I,x,d]);let E=r.useCallback(e=>{h.find(t=>t.equals(e))?m(h.filter(t=>!t.equals(e))):m([...h,new et.Op(e)])},[h,m]),b=r.useCallback(n=>{var o=n.dropItem;if((0,j.gl)(o)||(0,et.qQ)(n.dragItem.action))return;let i=e.interactionsOnSelectedNodes;if(!i||!t)return;for(var r=0;r<t?.length;r++){let e=t[r];if(e&&e.actions){let i=e.actions,a=(0,et.Vp)(i,c,h,o,n.position);if(a.newSelectedActionIndex&&_&&d(a.newSelectedActionIndex.path,!0),a.newActions&&(t[r].actions=a.newActions),a.newExpandedRows){if(_){let e=[];a.newActions?.forEach((t,n)=>{"CONDITIONAL"===t.connectionType&&e.push(new et.Op([n]))}),m(e)}else m(a.newExpandedRows)}}}let a=i.map(e=>t.find(t=>t.id===e.id)??e);O.Y5.updateSelectionProperties({prototypeInteractions:a})},[h,m,e.interactionsOnSelectedNodes,c,t,d,_]),P=v()({"prototype_interaction_edit_modal--panelUI3--WK3CN":!0,"prototype_interaction_edit_modal--panelUI3TwoColumn--V5gi4":_});return T?(0,i.jsx)(Z.r,{isInteractionModal:!0}):(0,i.jsx)(F.hh,{children:(0,i.jsxs)(H.Zk,{className:P,children:[e.shouldHideTitle?null:(0,i.jsx)(H.fI,{children:(0,i.jsx)(H.U8,{title:(0,A.t)("proto.interaction.interaction"),dataTooltipContentKey:X,dataTooltipTimeoutDelay:50})}),(0,i.jsx)("div",{children:(0,i.jsxs)(i.Fragment,{children:[u&&(0===N.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eb,{category:e.category,recordingKey:V.dJ,headerButtons:(0,i.jsx)(i.Fragment,{})}),(0,i.jsx)("div",{className:"prototype_interaction_edit_modal--dividerHorizontalUI3--HMCeE"})]}):(0,i.jsx)(Y.Y,{direction:"horizontal",padding:{horizontal:16,vertical:8},children:(0,i.jsx)(H.JU,{children:(0,A.tx)("fullscreen.mixed")})})),a&&(0,i.jsx)(Y.Y,{direction:"horizontal",padding:{horizontal:16,vertical:8},children:(0,i.jsx)(H.nV,{children:(0,A.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content")})}),!a&&0===N.length&&(0,i.jsx)(i.Fragment,{children:l?.map((r,a)=>i.jsx(ee.P,{action:r,actionIndexPath:[a],autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,autoOpenVariablePicker:e.autoOpenVariablePicker,expandedRows:h,interactionType:e.interactionType,isNarrowPanel:!s,isNestedInConditional:!1,numActions:l.length,onDeleteAction:()=>g(a),onDrop:b,onExpand:E,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,recordingKey:f.Pt(e.recordingKey,V.eG,a),selectedActionIndex:c,selectedInteractions:t,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder,stateManagementVersion:e.stateManagementVersion,updateMultipleDestinationNodes:o(a),updateSelectionProperties:n(a)},a))})]})})]})})}var ew=n(293422),eR=n(475477),eL=n(836982),eM=n(58212),eU=n(313865);function eK({transition:e,recordingKey:t,updateSelectionProperties:n,stateManagementVersion:o,selectedInteractions:r}){let l=(0,a.wA)(),s=(0,V.YT)()===V.Oz.SINGLE_COL,c=s?ew.IK:ew.$n,d=1===o?(0,i.jsx)(c,{variant:"secondary",onClick:()=>{U.az.trackDefinedEvent("prototype.state_management_noodle_reverted",{num_interactions:r.length}),n({stateManagementVersion:0})},recordingKey:f.Pt(t,"revert-state-management-version"),htmlAttributes:{"data-testid":"revert-state-management-button"},children:(0,A.tx)("proto.state_management.revert_controls")}):(0,i.jsx)(c,{variant:"primary",onClick:()=>{for(let t of(U.az.trackDefinedEvent("prototype.state_management_noodle_upgraded",{num_interactions:r.length,preserve_scroll_position_value:!!e.preserveScroll}),r))(0,V.uU)(t.stateManagementVersion)&&t.id&&t.sourceNodeID&&eU.zZ.recordInteractionUpgraded(t.id,t.sourceNodeID);n({...(0,j.hS)(e.preserveScroll)&&(0,j.hS)(o)?{transitionResetScrollPosition:!e.preserveScroll}:{},stateManagementVersion:1}),l(eM.F.enqueue({type:"state-management-updated",message:(0,A.t)("proto.state_management.visual_bell_updated_message"),button:{text:(0,A.t)("proto.state_management.visual_bell_update_all"),action:()=>{O.Y5.triggerActionInUserEditScope("update-interactions-state-management-on-page"),l(eM.F.enqueue({type:"state-management-updated-all",message:(0,A.t)("proto.state_management.visual_bell_update_all_message")}))}}}))},recordingKey:f.Pt(t,"update-state-management-version"),children:(0,A.tx)("proto.state_management.update_controls")}),p=1===o?(0,A.tx)("proto.state_management.new_controls"):(0,A.tx)("proto.state_management.old_controls"),u=(0,i.jsx)(eR.N,{trusted:!0,newTab:!0,href:"https://help.figma.com/hc/articles/14397859494295",children:(0,A.tx)("proto.state_management.controls_help_link_new")}),_=(0,i.jsxs)("div",{className:"prototype_state_management_version_panel--containerUI3--V5tpG",children:[(0,i.jsx)(eu.J,{children:p}),(0,i.jsx)(eu.J,{children:u}),d]}),h=(0,i.jsxs)("div",{className:"prototype_state_management_version_panel--containerUI3TwoCol--AAp8u",children:[(0,i.jsx)("span",{className:"prototype_state_management_version_panel--labelWrapperUI3--37g5A",children:(0,i.jsx)(eu.J,{children:p})}),(0,i.jsx)("span",{className:"prototype_state_management_version_panel--helpLinkWrapperUI3--BttuC",children:u}),d]});return(0,i.jsx)(eL.k,{name:"prototype_state_management_version_panel",children:(0,i.jsx)(H.Zk,{className:"prototype_state_management_version_panel--panelUI3--8-Db5",children:s?_:h})})}let eB="created_noodle";function eV(e){let{shouldHideTitle:t=!1,category:n,newActionIndexPath:o}=e,r=(0,V.YT)()===V.Oz.TWO_COL,{detailProps:a,detailPropsMultipleActions:l,interactionsOnSelectedNodesAndComponents:s,updateSelectionProperties:c,selectedInteractions:d}=(0,eN.Ay)(e.category,e.filterOutNoneActions);(0,B.h)(()=>{if(void 0!==K.sn.get(eB)){let e=K.sn.stop(eB);(0,U.sx)(eB,{elapsedMs:e,numConnectors:d.length},{forwardToDatadog:!0})}});let{showPanel:p,transition:u}=(0,V.n6)(a,l,d),{interactionType:_="NONE",interactionMaintained:h=!1,interactionDuration:m=.3,keyTrigger:y=eE,transitionTimeout:g=.8,mediaHitTime:v=0}=l.interactionEvent,I=(0,V.iC)(d),x=(0,i.jsx)(ek,{autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,autoOpenVariablePicker:e.autoOpenVariablePicker,category:n,deleteButtonPressed:e.deleteButtonPressed,expandedRows:e.expandedRows,filterOutNoneActions:e.filterOutNoneActions,interactionDuration:m,interactionType:_,interactionsOnSelectedNodes:s,keyTrigger:y,maintained:h,mediaHitTime:v,newActionIndexPath:o,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,recordingKey:f.Pt(e,V.Qe),resetNewActionIndexPath:e.resetNewActionIndexPath,selectedActionIndex:e.selectedActionIndex,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder,setExpandedRows:e.setExpandedRows,shouldHideTitle:t,stateManagementVersion:I,timeout:g});return(0,i.jsxs)("div",{children:[x,!r&&p&&(0,i.jsx)(eK,{transition:u,recordingKey:f.Pt(e,"stateManagementVersionPanel"),updateSelectionProperties:c,stateManagementVersion:I,selectedInteractions:d})]})}var eF=n(472831),eY=n(694908),eH=n(506426),eG=n(643330),ez=n(813141),eW=n(577841);function eJ(e,t,n){let[o,i,r]=e.path;if(void 0===o||void 0===i||void 0===r)return;let a=t[o]?.conditionalActions;if((0,j.hS)(a)){let e=a?.[i]?.actions?.length??0;if(r>=e){if(0===e){n([o],!0);return}n([o,i,r-1],!0);return}}}function eX(e,t,n){let o=e.path[0]>=t.length,i=0===e.path.length;if(o){n([t.length-1],!0);return}if(i){n([0],!0);return}}var e$=n(389724),eZ=n(347080);let eq=()=>{u.glU?.setSelectedInteractions([]),(0,m.kc)().prototype_ai_magic_link_show_suggestion_toast&&O.Y5.showMagicLinkSuggestedVisualBell("create_node_transition"),O.Y5.deselectProperty()},eQ=(0,I.jz)("197px"),e0=(0,I.c8)("50%");function e1(e){var t;return e&&o?.height<369?o=t={...o,height:369}:o??={width:440,height:e?369:320,leftWidthPct:45}}let e7=r.memo(function({filterOutNoneActions:e}){let t=(0,a.d4)(e6),n=(0,eN.HS)(),{selectedInteractions:o}=(0,eN.Ay)(n,e),r=o.length>0,{pressingShiftKey:l,setPressingShiftKey:s}=(0,D.om)(t,r,V.dJ);if((0,ez.G)()||!t||!r)return null;let c=o.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType));return(0,i.jsx)(e4,{category:n,containsConditional:c,pressingShiftKey:l,setPressingShiftKey:s,initialX:t.initialX,initialY:t.initialY,shouldPin:t.shouldPin,filterOutNoneActions:e})}),e4=r.memo(function({category:e,containsConditional:t,pressingShiftKey:n,initialX:l,initialY:p,shouldPin:m,setPressingShiftKey:g,filterOutNoneActions:b}){let j;let U=(0,a.wA)(),[K,B]=r.useState(!1),[,F]=(0,y.fp)(eW.x),Y=(0,r.useRef)(null),H=m||K,{shouldModalHide:G,incrementTimesInteractedWithModal:z}=(0,D.ff)(n,g,H),W=(0,V.YT)(),J=W===V.Oz.SINGLE_COL,X=W===V.Oz.TWO_COL,[Z,ee]=r.useState(new et.Op([0])),{selectedInteractions:en,differentLengthActions:eo,interactionsOnSelectedNodesAndComponents:ei,mergedActions:er,detailProps:ea,detailPropsMultipleActions:el,updateSelectionProperties:es}=(0,eN.Ay)(e,b),ec=el.interactionEvent.interactionType??"NONE",ed=(0,q.cJ)();var ep=Z.path.length>0?Z:new et.Op([0]);let eu=ep.isConditional(),e_=(e,t)=>ep=new et.Op(e);ep.path[0]>=er.length&&!eu?eX(Z,er,e_):eu&&eJ(Z,er,e_);let eh=r.useCallback((e,t)=>{t?ee(new et.Op(e)):ee(new et.Op([]))},[]);r.useEffect(()=>{if(0===er.length){(0,N.us)("the interactions panel should always have actions if rendered");let e=JSON.parse(JSON.stringify(en));for(let t of e)if(t&&t.actions?.length===0){let e={connectionType:"NONE"};t.actions=[e]}let t=ei.map(t=>e.find(e=>h.aI(e.id,t.id))??t);O.Y5.updateSelectionProperties({prototypeInteractions:t})}let e=Z.isConditional();if(e){if(e){eJ(Z,er,eh);return}}else{eX(Z,er,eh);return}},[er,Z,eh,en,ei]);let{shouldShowAdvancedPrototypingPaywall:em,showAdvancedPrototypinglMultipleActionsModal:ey}=(0,V.zt)(),{showPanel:eg,transition:ev}=(0,V.n6)(ea,el,en),eI=(0,V.iC)(en);var ex=[];X?er.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&ex.push(new et.Op([t]))}):er.length<4&&er.forEach((e,t)=>{ex.push(new et.Op([t]))});let[ef,eT]=r.useState(ex),eE=r.useRef(null),eA=(0,I.jz)(eZ.prototypeInteractionModalWidth),eS=(0,I.jz)(eZ.prototypeInteractionModalExpandedWidth),eD=e1(eg).width,ek=t?eS:eA;X&&(ek=eD);let[ew,eR]=r.useState(m),eL=r.useCallback(()=>{K||(U((0,k._P)({name:"prototype_interaction_details_modal_dragged"})),B(!0))},[U,K,B]),eM=r.useCallback((e,n)=>X?new T.Mi(e-(eD-eA),n):t?new T.Mi(e-(eS-eA),n):new T.Mi(e,n),[X,t,eD,eA,eS]),eB=(0,D.IK)(l,p,m,ek,eM);r.useEffect(()=>{F(G)},[F,G]),r.useEffect(()=>{eR(m)},[m]),r.useEffect(()=>()=>{U((0,k._P)({name:"prototype_interaction_details_modal_closed"}))},[U]);let ez=(0,y.md)($.uW);r.useEffect(()=>{ed&&ez?.focus()},[ed,ez]);let e7=r.useRef(null),[e4,e6]=r.useState(!1);r.useEffect(()=>{e4&&(e6(!1),e7.current?.scrollToBottom())},[e4,e6,e7]);let[e8,e9]=r.useState(new et.Op([])),te=(0,C.q5)(),tt=r.useCallback((e,t)=>{let n=e.event.clipboardData||window.clipboardData;switch(t){case w.zy.COPY:case w.zy.CUT:{let o=JSON.parse(JSON.stringify(en)),i=(0,eF.lg)(o),r=P.fG(te?.key||null,{prototypeInteractions:i});if(!r)break;if(P.C4(n,r,""),t===w.zy.CUT){let e=[];for(let t of en){let{sourceNodeID:n,id:o}=t;n&&o&&e.push(x.d({nodeID:n,interactionID:o}))}_.l7.user("delete-prototype-interactions",()=>u.glU?.deleteInteractions(e)),O.Y5.deselectProperty()}e.accept()}}},[te?.key,en]),tn=r.useRef(!1),[to,ti]=r.useState(!1),{firstVariableSetMode:tr,firstVariableSetID:ta}=(0,eH.b)(),tl=(0,S.p8)("currentPage"),ts=r.useCallback((e,t,n,o)=>{U((0,k._P)({name:"Prototype delete action",params:{action:e,source:"panel",connector_id:t,page_id:n,actionInConditionalAction:o}}))},[U]),tc=r.useCallback(e=>{if(ei&&en){var t=!1,n=!1;if(em)ey();else{for(let r=0;r<en?.length;r++){let a=en[r],l=[];if(a&&a.actions){var o=0,i=[];for(let r=0;r<a.actions.length;r++){let s=a.actions[r];if(r!==e)void 0!==ef.find(e=>e.equals([r]))&&i.push(new et.Op([o])),l.push(s),o++;else{let e=a.id?a.id:h.Hr;ts(s.connectionType?s.connectionType:"NONE",(0,h.dI)(e),tl),r===a.actions.length-1&&(t=!0),2===a.actions.length&&(n=!0)}eT(i)}en[r].actions=l}}let r=ei.map(e=>en.find(t=>t.id===e.id)??e);O.Y5.updateSelectionProperties({prototypeInteractions:r}),n&&eT([new et.Op([0])]),t&&X&&ee(new et.Op([e-1]))}}},[ei,en,em,ey,ef,tl,ts,X]),td=r.useCallback(e=>{if(!ei||!en||!e.path.length||void 0===e.path[0])return;let[t,n,o]=e.path,i=e.isConditional();if(em)ey();else if(i){let e=!1,i=!1,r=en.map(r=>{let a=r.actions;if(!a)return r;let l=a.map((a,l)=>{if(l!==t||"CONDITIONAL"!==a.connectionType)return a;let s=a.conditionalActions;if(!s)return a;let c=s.map((t,a)=>{if(a!==n)return t;let l=t.actions;if(!l)return t;let s=l[o];s&&ts(s.connectionType?s.connectionType:"NONE",(0,h.dI)(r.id??h.Hr),tl,!0);let c=l.filter((e,t)=>t!==o);return e=o===l.length-1,i=0===c.length,{...t,actions:c}});return{...a,conditionalActions:c}});return{...r,actions:l}}),a=ei.map(e=>r.find(t=>t.id===e.id)??e);O.Y5.updateSelectionProperties({prototypeInteractions:a}),i?ee(new et.Op([t])):!i&&e&&ee(new et.Op([t,n,o-1]))}else tc(t);document.activeElement?.blur()},[ei,en,em,ey,tc,tl,ts]),tp=ed&&(0,Q.kc)({interactionType:ec,actions:er}),tu=(0,i.jsx)(E.P,{className:X?"prototype_interaction_edit_modal--ui3TwoColScrollContainer--IWuQ4":eO,useBottomPinning:!X,ref:e7,allowScrollAndZoomOver:!0,"data-not-draggable":!0,children:(0,i.jsx)(eV,{autoOpenExpressionBuilder:to,autoOpenVariablePicker:tn,category:e,deleteButtonPressed:tc,expandedRows:ef,filterOutNoneActions:b,newActionIndexPath:e8,onNewActionAdded:e=>{e9(e)},onSelect:eh,recordingKey:X?f.Pt("leftCol",V.dJ):V.dJ,resetNewActionIndexPath:()=>{e9(new et.Op([]))},selectedActionIndex:Z,setAutoOpenExpressionBuilder:ti,setExpandedRows:eT,shouldHideTitle:!0})}),t_=1===en.length,th=en[0],tm=!1;th&&(tm=!!th.actions&&th.actions.length<2,th.actions&&1===th.actions.length&&(j=th.actions[0]));let ty=!j||"NONE"===j.connectionType,tg=t_&&tm&&ty;var tv=h.Hr;let tI=(0,i.jsx)(eY.t,{skipPaywall:tg,addButtonPressed:e=>{if(!en)return;if(("CONDITIONAL"===e.connectionType||"SET_VARIABLE"===e.connectionType||"SET_VARIABLE_MODE"===e.connectionType)&&em){ey();return}"SET_VARIABLE_MODE"===e.connectionType&&(e.targetVariableSetID=ta,e.targetVariableModeID=tr),"SET_VARIABLE"===e.connectionType&&tn&&(tn.current=!0),"CONDITIONAL"===e.connectionType&&ti(!0);let t=!1;var n=null,o=!eo&&!tg&&en[0].actions&&1===en[0].actions.length;if(eo||tg)for(var i=0;i<en.length;i++){let t=en[i];t.actions=[e];let n=t.id,o=t.sourceNodeID;(0,V.uU)(t.stateManagementVersion)&&n&&o&&eU.zZ.recordInteractionUpgraded(n,o),t.stateManagementVersion=1}else for(var i=0;i<en.length;i++){let o=en[i];if(o.actions){if((0,V.uU)(o.stateManagementVersion)&&(o.id&&o.sourceNodeID&&eU.zZ.recordInteractionUpgraded(o.id,o.sourceNodeID),o.actions?.forEach(e=>{e.transitionResetScrollPosition=!e.transitionPreserveScroll})),X){if(Z.isConditional()){let n=Z.path[0],i=Z.path[1],r=Z.path[2],a=o.actions?.[n],l=a.conditionalActions?.[i].actions?.length??0;n===o.actions.length-1&&r===l-1&&(t=!0),a.conditionalActions?.[i].actions?.splice(r+1,0,e)}else{let n=Z.path[0]+1;n===o.actions.length&&(t=!0),o.actions?.splice(n,0,e)}}else o.actions?.push(e);tv=o.id?o.id:h.Hr}else o.actions=[e],tv=o.id?o.id:h.Hr;if(o.stateManagementVersion=1,X){let e=[...Z.path];e[e.length-1]+=1,n=new et.Op([...e])}else n=new et.Op([o.actions.length-1])}let r=ei.map(e=>en.find(t=>t.id===e.id)??e);if(O.Y5.updateSelectionProperties({prototypeInteractions:r}),o||X){var a=[];r[0].actions?.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&a.push(new et.Op([t]))}),eT(a)}e6&&(!X||t)&&e6(!0),e9&&e9(n),U((0,k._P)({name:"Prototype add action",params:{action:e.connectionType?e.connectionType:"NONE",source:"panel",connector_id:(0,h.dI)(tv),page_id:tl}}))},renderButton:!0,recordingKey:V.dJ,isNestedInConditional:X&&Z.isConditional()}),tx=en.some(e=>void 0!==e.actions&&e.actions?.length>1),tf=!Z.isConditional()&&!tx,tN=(0,i.jsx)(s.K,{onClick:()=>td(Z),"aria-label":(0,A.t)("proto.prototype_panel.delete"),disabled:tf,recordingKey:f.Pt(V.dJ,"actionDeleteButton"),htmlAttributes:{"data-tooltip":(0,A.t)("proto.prototype_panel.delete"),"data-tooltip-type":R.Ib.TEXT},children:(0,i.jsx)(d.O,{})}),tT=(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3FooterContainer--oYsXM",children:[tI," ",tN]}),tE=(0,i.jsx)(e$.c.Provider,{value:e$.P.LEFT,children:(0,i.jsxs)("div",{className:X?"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeftResizable--16pLu":"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeft--UYWSG",ref:eE,style:X?{width:`${e1(eg).leftWidthPct}%`}:void 0,children:[(0,i.jsx)(eb,{category:e,recordingKey:V.dJ,headerButtons:(0,i.jsx)(i.Fragment,{})}),(0,i.jsx)("div",{className:eC}),tu,(0,i.jsx)("div",{className:eC}),(0,i.jsx)(i.Fragment,{children:tT})]})}),tA=er.length>0?(0,i.jsx)(e$.c.Provider,{value:e$.P.RIGHT,children:(0,i.jsx)(E.P,{allowScrollAndZoomOver:!0,"data-not-draggable":!0,className:X?"prototype_interaction_edit_modal--ui3ScrollContainerRight--LJr-n":void 0,children:(0,i.jsx)(e5,{selectedActionIndex:ep,handleExpandUI3:(e,t)=>{!t&&er.length>1?eT(ef.filter(t=>!t.equals(e))):ef.find(t=>t.equals(e))||eT([...ef,new et.Op(e)])},autoOpenVariablePicker:tn,autoOpenExpressionBuilder:to,setAutoOpenExpressionBuilder:ti,filterOutNoneActions:b})})}):null,tb=r.useRef(eQ),[,tO]=(0,c.i)({disabled:!X,onDragStart(){eE.current&&(tb.current=eE.current.getBoundingClientRect().width)},onDrag(e){if(eE.current&&tb.current){let t=e1(eg),n=tb.current+e.delta.x,i=n/t.width*100;n<eQ?i=eQ/t.width*100:i>e0&&(i=e0),eE.current.style.width=`${i}%`,o={...t,leftWidthPct:i}}}}),tP=X?(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3TwoColPanelContainer--e8MK8",children:[(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3TwoColInnerContainer--ZvJj2",children:[tE,(0,i.jsx)("div",{className:"prototype_interaction_edit_modal--dividerVertical--Noi1C",children:(0,i.jsx)("div",{...tO({className:"prototype_interaction_edit_modal--verticalResizeHandle--xkc8V"})})}),tA]}),eg&&(0,i.jsx)(eK,{transition:ev,recordingKey:f.Pt(V.dJ,"stateManagementVersionPanel"),updateSelectionProperties:es,stateManagementVersion:eI,selectedInteractions:en})]}):tu,tj=(0,i.jsx)(eG.Ao,{ref:Y,allowAutoExpanding:!0,allowResizeHeight:X,allowResizeWidth:X,allowWheelPassthrough:!0,arrowPosition:m?void 0:eG.F_.TOP,arrowRelativeX:m?void 0:ek/2,beMoreAccessible:!0,canRenderBelowViewport:!0,containerClassName:v()({[eO]:!X,[eP]:X,[ej]:J,"prototype_interaction_edit_modal--abovePropertiesPanel--hFejC":ew,"prototype_interaction_edit_modal--belowPropertiesPanel--f1Jfl":!ew,"prototype_interaction_edit_modal--hideModal--RSp-R":G}),contentContainerClassName:v()({[eO]:!X,[eP]:X,[ej]:J}),dataTestId:"in-context-prototype-interaction-edit-modal",dragHeaderOnly:!0,fullFrame:X,headerClassName:"prototype_interaction_edit_modal--multilineInteractionDetailsHeader--OE8Wr",headerSize:"small",initialHeight:X?e1(eg).height-eG.uF:void 0,initialPosition:eB,initialWidth:X?e1(eg).width:void 0,maxHeight:X?800:void 0,maxWidth:X?800:void 0,minHeight:X?eg?369:320:void 0,minWidth:X?440:void 0,onClose:eq,onDragStart:()=>{eR(!0),eL()},onFocus:z,onResize:X?e=>{o={...e1(eg),height:e.height,width:e.width}}:void 0,recordingKey:"interactionDetailsModal",title:(t,{titleId:n})=>(0,i.jsx)("div",{className:"prototype_interaction_edit_modal--onboardingRow--UlvE0",children:tp?(0,i.jsx)(e3,{closeButton:t}):(0,i.jsx)(e2,{category:e,createActionTrigger:tI,closeButton:t,titleId:n})}),children:tP}),tS=ed?tj:(0,i.jsx)(L.vL,{name:"Prototype Draggable modal",className:"prototype_interaction_edit_modal--prototypeDraggableModal--njJ6A",handleClipboard:tt,children:tj});return(0,i.jsx)(M.ht.Provider,{value:r.useMemo(()=>({autoCloseOnScroll:!H}),[H]),children:tS})});function e5({selectedActionIndex:e,autoOpenVariablePicker:t,handleExpandUI3:n,autoOpenExpressionBuilder:o,setAutoOpenExpressionBuilder:r,filterOutNoneActions:a}){let s=(0,eN.HS)(),{selectedInteractions:c,mergedActions:d,makeUpdateSelectionPropertiesForActionIndex:p,makeUpdateMultipleDestinationNodesForActionIndex:u,detailPropsMultipleActions:_}=(0,eN.Ay)(s,a),h=e.path[0],m=u(h),y=p(h),g=(0,V.iC)(c),v=_.interactionEvent.interactionType??"NONE";if(e.isConditional()){let n=e.path[1],a=e.path[2],s=d[h],p=((0,j.hS)(s.conditionalActions)&&s.conditionalActions?s.conditionalActions:[])[n],u=p?.actions?.[a];return u?(0,i.jsx)("div",{className:eD,children:(0,i.jsx)(ee.P,{action:u,actionIndexPath:e.path,autoOpenExpressionBuilder:o,autoOpenVariablePicker:t,expandedRows:[e],interactionType:v,isNarrowPanel:!0,isNestedInConditional:!0,numActions:d.length,onDeleteAction:l.lQ,onDrop:l.lQ,onExpand:l.lQ,onSelect:l.lQ,recordingKey:f.Pt(V.dJ,V.Qe,V.eG,h),selectedActionIndex:e,selectedInteractions:c,setAutoOpenExpressionBuilder:r,stateManagementVersion:g,updateMultipleDestinationNodes:m.appendActionIndex(n).appendActionIndex(a),updateSelectionProperties:y.appendActionIndex(n).appendActionIndex(a)},a)}):null}return(0,i.jsx)("div",{className:eD,children:(0,i.jsx)(ee.P,{action:d[h],actionIndexPath:[h],autoOpenExpressionBuilder:o,autoOpenVariablePicker:t,expandedRows:[e],interactionType:v,isNarrowPanel:!0,isNestedInConditional:!1,numActions:d.length,onDeleteAction:l.lQ,onDrop:l.lQ,onExpand:n,onSelect:l.lQ,recordingKey:f.Pt(V.dJ,V.Qe,V.eG,h),selectedActionIndex:e,selectedInteractions:c,setAutoOpenExpressionBuilder:r,stateManagementVersion:g,updateMultipleDestinationNodes:m,updateSelectionProperties:y},h)})}function e2({category:e,closeButton:t,createActionTrigger:n,titleId:o}){let r=(0,a.wA)(),{selectedInteractions:l}=(0,eN.Ay)(e),c=(0,V.YT)(),d=(()=>{if(1!==l.length)return 0;let e=l[0],t={nodeID:e.sourceNodeID,interactionID:e.id};return(u.X3B?.getMatchingInteractions(x.d(t))??[]).length})(),_=(0,m.kc)().prototype_hide_matching_noodles&&1===l.length&&d>1&&(0,i.jsx)(s.K,{actionOnPointerDown:!0,onClick:()=>{if(1!==l.length)return;let e=l[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=u.X3B?.getMatchingInteractions(x.d(t))??[];u.glU?.selectInteractionsAndSourceNodes(n);let o=(0,A.t)("proto.interaction_details.visual_bell.selected_n_matching_interactions",{total_num_interactions:n.length});O.Y5.showVisualBellWithUndo("selected-matching-noodles",o,!1),r((0,k._P)({name:"prototype_select_matching_interactions",params:{num_connectors:n.length}}))},"aria-label":(0,A.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:d}),htmlAttributes:{tabIndex:-1,onMouseEnter:()=>{if(1!==l.length)return;let e=l[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=u.X3B?.getMatchingInteractions(x.d(t))??[];u.glU?.hoverInteractions(n)},onMouseLeave:()=>u.glU?.hoverInteractions([]),"data-tooltip":(0,A.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:d}),"data-tooltip-type":R.Ib.TEXT},children:(0,i.jsx)(p.A,{})});switch(c){case V.Oz.TWO_COL:return(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeader--Ka7aM",children:[(0,i.jsx)("span",{id:o,children:(0,A.tx)("proto.interaction_details.header")}),(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeaderButtons--UqykU",children:[_,t]})]});case V.Oz.SINGLE_COL:return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{id:o,children:(0,A.tx)("proto.interaction_details.header")}),(0,i.jsxs)("div",{className:eS,children:[_,n,t]})]})}}function e3({closeButton:e}){return(0,i.jsxs)(i.Fragment,{children:[(0,A.tx)("proto.sites_interaction_link_details.header"),(0,i.jsx)("div",{className:eS,children:e})]})}let e6=e=>e.pickerShown?.id===b.o$?e.pickerShown:null},474575:(e,t,n)=>{n.d(t,{y7:()=>eP,a1:()=>eM,wU:()=>eV,dT:()=>eF});var o=n(104076),i=n(716976),r=n(903927),a=n(276800),l=n(623411),s=n(454851),c=n(420680),d=n(438557),p=n(894862),u=n(156412),_=n(266808),h=n(170627),m=n(264993),y=n(681958),g=n(812714),v=n(795033),I=n(511570),x=n.n(I),f=n(983500),N=n(166887),T=n(328341),E=n(308424),A=n(641518),b=n(366815),O=n(361170),P=n(619511),j=n(652539),S=n(192075),C=n(850701),D=n(278491),k=n(241421),w=n(819851),R=n(354114),L=n(553065),M=n(951770),U=n(374618),K=n(211862),B=n(76365),V=n(294570),F=n(761768),Y=n(894210),H=n(386958),G=n(540864),z=n(589481),W=n(61796),J=n(240347);function X(e){return e??"Default"}let $=i.createContext({getNodeName:X}),Z=i.memo(function({getNodeName:e=X,children:t}){let n=i.useMemo(()=>({getNodeName:e}),[e]);return(0,o.jsx)($.Provider,{value:n,children:t})});var q=n(660838),Q=n(355225),ee=n(748624),et=n(352241),en=n(668134),eo=n(205088),ei=n(564941),er=n(842909),ea=n(141330),el=n(290407),es=n(946847),ec=n(288971),ed=n(86421),ep=n(153477);function eu(){let e=(0,r.wA)(),t=(0,r.d4)(e=>(0,ei.Yh)(e.mirror.appModel,ea.JT.MAGIC_LINK)),n=(0,en.a)();if(!(0,er.PE)())return null;let i=n?(0,S.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip-v2"):(0,S.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip-ga");return(0,o.jsx)("span",{className:"magic_link--magicLinkButton--CWefW","data-testid":"magic-link-entry",children:(0,o.jsx)(c.K,{recordingKey:A.Pt("prototypeInteractionList","magicLinkButton"),"aria-label":i,onClick:()=>{(0,ec.$I)({moduleToOpen:{type:"custom",module:(0,o.jsx)(ed.p,{}),name:es.Sn.MAGIC_LINK,beforeModuleOpen:()=>{e((0,eo.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"properties_panel"}})),(0,el.B3)(ea.JT.MAGIC_LINK),t&&(0,el.Ag)(ea.JT.MAGIC_LINK,ep.e,{})}},trackingData:{source:"prototype_magic_link_triggered"}})},htmlAttributes:{"data-tooltip":i,"data-tooltip-show-above":!0},children:(0,o.jsx)(et.B,{})})})}var e_=n(737139),eh=n(101362),em=n(82991),ey=n(478208),eg=n(236631);let ev=(0,n(560201).ex)("prototype_info",function(e){let{tooltipText:t}=e;return(0,o.jsx)("div",{className:eg.s.flex.justifyCenter.itemsCenter.$,children:(0,o.jsx)("span",{className:eg.s.m6.flexGrow1.$,style:{maxWidth:144},children:t})})},e=>({tooltipText:e.getAttribute("data-tooltip-text")}));var eI=n(766317),ex=n(702043),ef=n(556936),eN=n(472831),eT=n(347080),eE=n(57540);let eA=new k.JV,eb=new k.Eq,eO=new k.sX,eP=i.memo(function({filterInteractionCategory:e}){let t=(0,r.wA)(),n=(0,r.d4)(ee.Cy),a=(0,r.d4)(ee.n9),l=(0,r.d4)(ee.DV),s=(0,r.d4)(eD),c=(0,r.d4)(B.dK),d=(0,r.d4)(B.Xt),p=(0,ee.a2)(),u=(0,ee.R)(),g=(0,r.d4)(ew),v=(0,r.d4)(eC),I=Object.keys(d).length>1,x=eR(),T=function(){let e=eR(),t=(0,r.d4)(ek);return!!e&&!!t&&t.selectionOverrides[_.YnC.PROTOTYPE_INTERACTIONS]}(),A=(0,K.q5)(),b=(0,N.U)(),P=(0,w.cJ)(),j=i.useMemo(()=>new k.cP(c),[c]),S=i.useCallback(e=>j.format(e),[j]),L=i.useRef(null),M=e=>{R.Y5.updateSelectionProperties({prototypeInteractions:e},{shouldCommit:V.zk.NO_BUT_TRACK_AS_EDIT}),R.Y5.commit()},U=(0,J.Zj)(Object.keys(d)),Y=(0,o.jsx)(ej,{currentSelectedProperty:s,dispatch:t,filterInteractionCategory:e,headerAccessory:U&&(0,o.jsx)(eu,{}),inSites:P,inheritedInternalInteractionGroups:u,interactionGroups:p,isOrInInstance:x,isValidPrototypingSourceSelected:g,mixed:I,onAddProperty:e=>{e.stopPropagation();let t=[],o=[];for(let e of Object.keys(d)){let n=_.glU.generateUniqueID();if(!n)return;let i=m.sH(n);if(!i)return;let r={id:i,sourceNodeID:m.sH(e)??m.Hr,event:{interactionType:eM(p,void 0,P)}};r.stateManagementVersion=1,r.actions=[{connectionType:"NONE"}],t.push(r);let a=(0,y.kh)(c,e);o.push(a?a.guid:"")}let i=t.map(e=>E.d({nodeID:e.sourceNodeID,interactionID:e.id}));if(i.length>0){_.glU.setSelectedInteractions(i);let e=(0,H.cn)(L.current);eF(new O.Mi(e.x,e.y+(0,f.jz)(eT.rightNavGridRowHeight)),!1)}let r=[...n,...t,...a];b("prototype_interaction_added",{interactionCount:r.length,sourceTlfIds:JSON.stringify(o)}),M(r)},onChange:(e,t)=>{let o=e.map(e=>e.interactions).reduce((e,t)=>e.concat(t),[]),i=new Set,r=[];for(let e of o){let t=m.dI(e.id);if(t&&!i.has(t))r.push(e);else{if(!(t=_.glU.generateUniqueID()))continue;let n=m.sH(t);if(!n)continue;r.push({...e,id:n})}t&&i.add(t)}t===F.J.NORMAL?r=[...r,...a]:t===F.J.INHERITED_INTERNAL&&(r=[...n,...r]),M(r)},onDeleteProperty:(e,t)=>{let n=(t===F.J.NORMAL?p:u).filter((t,n)=>e.has(n)),o=[];for(let e of n)o.push(...e.interactions);let i=eV(o);h.l7.user("delete-prototype-interactions",()=>_.glU.deleteInteractions(i)),R.Y5.deselectProperty()},openFile:A,shouldIgnoreKeyboardEvents:l.length>0||s.type!==_.rrT.PROTOTYPE_INTERACTION&&s.type!==_.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,showResetInteractionsButton:T,toggleScrollBehaviorPicker:()=>{if(v?.id===D.AO)t(C.XE());else{let e=(0,H.cn)(L.current);t(C.u1({id:D.AO,initialX:e.x,initialY:e.y}))}}});return(0,o.jsx)(Z,{getNodeName:S,children:P?Y:(0,o.jsx)(e_.Zk,{"data-onboarding-key":"prototypePanel",ref:L,"data-testid":"prototype-interaction-list",children:Y})})});function ej(e){let t=i.useRef(!1),n=!!e.filterInteractionCategory,r=!n||e.filterInteractionCategory===F.J.NORMAL,s=e.isOrInInstance&&e.inheritedInternalInteractionGroups.length>0,c=n?e.filterInteractionCategory===F.J.INHERITED_INTERNAL&&s:s,d=(0,o.jsx)("div",{className:"prototype_interaction_list--categoryRow--Xxfm4",children:(0,o.jsx)(l.J,{className:"prototype_interaction_list--categoryLabel--0dGOM",children:(0,S.tx)("proto.interaction_list.variant_interactions")})});return(0,o.jsxs)(o.Fragment,{children:[r&&(0,o.jsx)(eh.dD.Provider,{value:{useGrid:!0},children:(0,o.jsx)(W.h6,{addProperty:e.onAddProperty,boldHeaderRow:e.interactionGroups.length>=1||e.inheritedInternalInteractionGroups.length>=1,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,headerAccessory:e.headerAccessory,hideAddButton:!e.isValidPrototypingSourceSelected,onChange:t=>e.onChange(t,F.J.NORMAL),onDeleteProperty:t=>e.onDeleteProperty(t,F.J.NORMAL),onResetInteractions:h.nc.user("reset-instance-interactions",()=>_.glU.resetSymbolOverrides(_.YnC.PROTOTYPE_INTERACTIONS)),openFile:e.openFile,overrideAddPropertyTooltip:(0,S.t)("proto.prototype_panel.add"),pickerShown:null,propertyList:e.interactionGroups,recordingKey:"prototypeInteractionList",renderProperty:(n,i,r,a,l,s,c,d,p)=>(0,o.jsx)(eS,{autoOpenVariablePicker:t,category:F.J.NORMAL,dispatch:e.dispatch,hasFocus:l,inSites:e.inSites,index:i,interactionGroup:n,interactionGroups:e.interactionGroups,isDragging:a,onMouseDown:c,onMouseMove:d,onMouseUp:p,recordingKey:A.Pt("prototypeInteractionList",i),selected:r,singletonRow:e.interactionGroups.length<=1}),selectedPropertyType:_.rrT.PROTOTYPE_INTERACTION,shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,showResetInteractionsButton:e.showResetInteractionsButton,stylePickerShown:{isShown:!1},title:e.inSites?"":(0,S.t)("proto.title_interactions"),toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker})}),c&&d,c&&(0,o.jsx)(eh.dD.Provider,{value:{useGrid:!0},children:(0,o.jsx)(W.h6,{addProperty:a.lQ,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,hideAddButton:!0,onChange:t=>e.onChange(t,F.J.INHERITED_INTERNAL),onDeleteProperty:t=>e.onDeleteProperty(t,F.J.INHERITED_INTERNAL),openFile:e.openFile,pickerShown:null,propertyList:e.inheritedInternalInteractionGroups,recordingKey:A.Pt("prototypeInheritedInternalInteractionList"),renderProperty:(n,i,r,a,l,s,c,d,p)=>(0,o.jsx)(eS,{autoOpenVariablePicker:t,category:F.J.INHERITED_INTERNAL,dispatch:e.dispatch,hasFocus:l,inSites:e.inSites,index:i,interactionGroup:n,interactionGroups:e.inheritedInternalInteractionGroups,isDragging:a,onMouseDown:c,onMouseMove:d,onMouseUp:p,recordingKey:A.Pt("prototypeInheritedInternalInteractionList",i),selected:r,singletonRow:e.inheritedInternalInteractionGroups.length<=1}),selectedPropertyType:_.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,stylePickerShown:{isShown:!1},title:"",toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker})})]})}function eS({interactionGroups:e,interactionGroup:t,index:n,hasFocus:a,isDragging:l,selected:y,singletonRow:I,onMouseDown:f,onMouseMove:O,onMouseUp:w,dispatch:L,category:K,recordingKey:V,inSites:W}){let{getNodeName:J}=i.useContext($),X=(0,r.d4)(ee.DV),Z=(0,ee.a2)(),Q=(0,r.d4)(eC),et=Q?.id===D.o$?Q:null,en=(0,r.d4)(B.dK),[eo,ei]=i.useState(!1),er=(0,v.md)(U.NE)?eb:eA,ea=i.useContext(ex.qd),el=function(e,t){let n=new Set(t.map(e=>{let t=E.s(e);return t?m.dI(t.interactionID):""}).filter(e=>""!==e));for(let t of e.interactions){let e=m.dI(t.id);if(e&&n.has(e))return!0}return!1}(t,X),[es,ec]=(0,v.fp)(eI.jM),ed=(0,v.md)(eI.uW),{useGrid:ep}=i.useContext(eh.dD),eu=i.useRef(null),e_=i.useRef(null),eg=i.useCallback(()=>{let e=W?e_.current:eu.current;eF((0,H.cn)(e),!1)},[W]),eT=i.useCallback(()=>{_.glU.setSelectedInteractions([]),L(C.XE()),R.Y5.deselectProperty()},[L]),eO=n=>{if(!eu||!e_)return;W&&ed?.focus();let o=eB(t),i=n.metaKey||n.ctrlKey;if(i)el?o=X.filter(e=>!o.includes(e)):o.push(...X);else if(!W&&n.shiftKey){var r;let n,i;let a=(r=t.key,e.findIndex(({key:e})=>e===r));if(-1===a)return;let l=function(e,t){let n=1/0,o=e;for(let i of t){let t=Math.abs(e-i);t<n&&(o=i,n=t)}return o}(a,function(e,t){let n=new Set,o=new Set(t);for(let t=0;t<e.length;t++)eB(e[t]).some(e=>o.has(e))&&n.add(t);return n}(e,X)),s=(n=a,i=l,a>l&&(n=l,i=a),e.slice(n,i+1));for(let e of(o=[...X],s))o.push(...eB(e))}if(_.glU.setSelectedInteractions(o),R.Y5.updateAppModel({currentSelectedProperty:{type:K===F.J.NORMAL?_.rrT.PROTOTYPE_INTERACTION:_.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,indices:[]}}),o.length){let e=et&&et.shouldPin;if(W){let t=es.length+o.length>1;i?(i||t)&&L(C.XE()):(ec([]),e||eg())}else e||eg()}else eT()},eP=(0,r.d4)(G.ZM),ej=!1,eS=null,eD=null;for(let e of t.interactions)if(!eS&&e.actions&&e.actions.length>0)eS=e.actions[0],eD=e;else if(eK(eS,J,!0,eP)!=eK((e.actions??[])[0],J,!0,eP)){ej=!0;break}let ek=()=>{let e=eV(t.interactions);_.glU.hoverInteractions(e),ei(!0)},ew=()=>{_.glU.hoverInteractions([]),ei(!1)},eR=new k.js(!0,eP),eL=(0,k.mj)(eS),eM=eD?.actions?.length??0,eY=eM>1?(0,S.t)("sites.panel.interaction_summary",{numActions:eM}):ej||!eS||"NONE"===eL?void 0:eR.format(eL),{tooltipText:eH,showTooltip:eG}=(0,eN.QY)(eY),ez=e=>{e.stopPropagation()},eW=e=>{e.stopPropagation();let n=eV(t.interactions);h.l7.user("delete-prototype-interactions",()=>_.glU.deleteInteractions(n)),R.Y5.deselectProperty(),R.Y5.commit()},eJ=!1,eX=!1;if(K===F.J.NORMAL){for(let e of t.interactions){if(!e.actions||0===e.actions.length)continue;let t=e.actions[0];if(!t||"SWAP_STATE"!==t.navigationType)continue;let n="";if(t.transitionNodeID){let e=en.get(m.dI(t.transitionNodeID));if(e){if(e.isState)n=e.parentGuid||"";else{eJ=!0;break}}}let o=_.glU.getContainingStateGroupOrSelf(m.dI(e.sourceNodeID??m.Hr))||"";if(""===o||""!==n&&o!==n){eJ=!0;break}}let n=["ON_CLICK","MOUSE_DOWN","MOUSE_UP"].includes(t.event.interactionType??""),o=e.some(e=>"ON_HOVER"===e.event.interactionType);eX=n&&o}eJ=K!==F.J.INHERITED_INTERNAL&&eJ;let e$=function(e,t,n){if(e!==F.J.INHERITED_INTERNAL)return null;let o=n.find(e=>e.key===t.key&&e.interactions.length===t.interactions.length&&1===t.interactions.length&&function(e,t){let n=void 0!==e.actions&&e.actions.length>=1,o=void 0!==t.actions&&t.actions.length>=1;if(!n||!o)return!1;let i=e.actions.every(e=>"UPDATE_MEDIA_RUNTIME"===e.connectionType),r=e.actions.every(e=>m.fn(e.transitionNodeID));var a=!1;for(let e of t.actions)if("INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType){a=!0;break}return i&&r&&a}(e.interactions[0],t.interactions[0]));return o?.interactions[0]??null}(K,t,e),eZ=(0,T.ZC)(e$),eq=(0,N.U)();if(i.useEffect(()=>{null===eZ&&e$&&eq("prototype_interaction_conflict_override_created",{interaction_type:t.interactions[0].event?.interactionType,action_type:e$.event?.interactionType})}),t.event.interactionType&&ea&&ea!==(0,q.hD)(t.event.interactionType)||"mouse"===ea&&(0,ef.zL)(t.interactions)||W&&(0,g.kc)().sts_links_v2&&(0,ef.pL)(t.interactions))return null;let eQ=K===F.J.INHERITED_INTERNAL&&Z.some(e=>e.key===t.key)&&!e$,e0=y&&a,e1=el&&!y,e7=(0,o.jsx)(p.Z,{}),e4=eJ||eX||eQ,e5=eJ?(0,S.t)("proto.prototype_panel.this_interaction_must_swap_from_a_variant_to_another_variant_within_the_same_component_set_tooltip"):eX?(0,S.t)("proto.prototype_panel.prototype_multiple_interactions_mouse_and_hover_tooltip"):eQ?(0,S.t)("proto.prototype_panel.this_interaction_will_not_be_triggered_as_interactions_on_instances_are_triggered_before_inherited_internal_interactions_tooltip"):"",e2=(0,o.jsx)(em.ic,{ref:e_,"data-testid":`prototypeInteractionItem-${n}`,hideGrabber:!0,onMouseEnter:ek,onMouseLeave:ew,onClick:eO,recordingKey:A.Pt(V,"draggableRow"),selected:el,"aria-selected":el,children:(0,o.jsx)(ey.s2,{label:null,leftIcon:(0,o.jsx)(s.d,{"aria-expanded":e1&&!!et,recordingKey:A.Pt(V,"interactionIcon"),htmlAttributes:{onMouseDown:ez,"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":e4?e5:eU(t.event,er,!!W)},"aria-label":e4?e5:eU(t.event,er,!!W),children:e4?e7:(0,M.e7)(t.event.interactionType)}),input:(0,o.jsxs)(b.D8,{onMouseDown:ez,recordingKey:A.Pt(V,"interactionText"),className:"prototype_interaction_list--ellipsis--ro1zN ellipsis--ellipsis--Tjyfa",onMouseEnter:eG,children:[eU(t.event,er,!!W),eY&&(0,o.jsxs)("span",{"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":eH,className:"prototype_interaction_list--summaryText--hGpp4",children:["\xa0\xb7\xa0",eY]})]}),rightIcon:(0,o.jsx)(P.k,{isVisible:eo,children:(0,o.jsx)(c.K,{onClick:eW,"aria-label":(0,S.t)("proto.prototype_panel.remove_interaction_aria_label",{interactionType:eU(t.event,er,!!W).toLocaleLowerCase()}),"data-tooltip":(0,S.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:A.Pt(V,"removeButton"),htmlAttributes:{onMouseDown:ez},children:(0,o.jsx)(u.O,{})})})})});if(W)return e2;let e3=(0,o.jsxs)(d.u,{className:x()({"prototype_interaction_list--interactionButton--q-58Q":!0,"prototype_interaction_list--interactionButtonSelected--8YX9A":e0,"prototype_interaction_list--interactionButtonSelectedSecondary--Nx73L":e1}),onClick:eO,htmlAttributes:{onKeyDown:e=>{ep&&("Enter"!==e.key&&(" "!==e.key||e.shiftKey)||eO(e))},onMouseDown:ez},"aria-haspopup":"dialog","aria-expanded":!!et,recordingKey:V,children:[e4&&(0,o.jsx)(j.B,{className:"prototype_interaction_list--warningIcon--Mgr5O",svg:eE.A,"data-tooltip-type":Y.Ib.SPECIAL,"data-tooltip":ev,"data-tooltip-text":e5}),(0,o.jsx)("div",{className:e4?"prototype_interaction_list--interactionNameShort--5UMLL prototype_interaction_list--interactionName--zQsSL":"prototype_interaction_list--interactionName--zQsSL",children:eU(t.event,er,!!W)}),(0,M.av)((0,k.mj)(eS)),(0,o.jsx)("div",{className:"prototype_interaction_list--targetText--UMXyE",dir:"auto",children:ej?(0,S.t)("proto.variant_actions.mixed"):K===F.J.INHERITED_INTERNAL?(0,S.t)("proto.variant_actions.change_to"):eK(eS,J,!0,eP)})]}),e6=(0,o.jsx)(P.k,{isVisible:eo,children:(0,o.jsx)("span",{className:"prototype_interaction_list--removeButton--g6aiQ",children:(0,o.jsx)(c.K,{onClick:eW,"aria-label":(0,S.t)("proto.prototype_panel.remove_interaction_aria_label",{interactionType:eU(t.event,er,!!W).toLocaleLowerCase()}),"data-tooltip":(0,S.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:A.Pt(V,"removeButton"),htmlAttributes:{onMouseDown:ez},children:(0,o.jsx)(u.O,{})})})});return ep?(0,o.jsx)(eh.lt,{ref:eu,htmlAttributes:{"data-testid":`prototypeInteractionItem-${n}`,onMouseEnter:ek,onMouseLeave:ew,onMouseMove:O,onMouseUp:w,onMouseDown:f},input:e3,icon:e6,selected:y||el,hasFocus:e0,singletonRow:I,recordingKey:A.Pt(V,"draggableRow")}):(0,o.jsx)("div",{children:(0,o.jsxs)(z.e,{ref:eu,className:"prototype_interaction_list--interactionListRow---i0Rg ui3_rows--ui3OneInputOneIconRow--SMoQ9 ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu","data-testid":`prototypeInteractionItem-${n}`,dragging:l,onMouseDown:f,onMouseEnter:ek,onMouseLeave:ew,onMouseMove:O,onMouseUp:w,recordingKey:A.Pt(V,"draggableRow"),selected:e0,selectedSecondary:e1,singletonRow:I,children:[e3,e6]})})}function eC(e){return e.pickerShown}function eD(e){return e.mirror.appModel.currentSelectedProperty}function ek(e){return e.mirror.selectionProperties.resettableInstanceOverrides}function ew(e){return e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0}function eR(){let e=(0,r.d4)(B.Xt),t=(0,r.d4)(B.dK);for(let n of Object.keys(e)){let e=t.get(n);if(e&&("INSTANCE"===e.type||e.isInstanceSublayer))return!0}return!1}let eL=["ON_CLICK","DRAG","ON_HOVER","ON_PRESS","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"];function eM(e,t,n){let o=new Set;for(let{event:t}of e)o.add(t.interactionType);for(let e of eL)if(!o.has(e)&&(!n||"DRAG"!==e)&&("BACK"!==t||"ON_HOVER"!==e&&"ON_PRESS"!==e))return e;return"ON_KEY_DOWN"}function eU(e,t,n){let o=t.format(e.interactionType??"NONE");if("ON_KEY_DOWN"===e.interactionType&&e.keyTrigger&&e.keyTrigger.keyCodes){let t=(0,Q._i)(e.keyTrigger.keyCodes),i=(0,Q.E8)(e.keyTrigger,!0);if("KEYBOARD"===e.keyTrigger.triggerDevice&&t)return n?(0,Q.U8)(t):o+" ("+(0,Q.U8)(t)+")";if(i)return n?i:o+" ("+i+")"}return o}function eK(e,t,n,o){let i=new k.js(n,o);if(!e)return i.format("NONE");let r=(0,k.mj)(e);switch(r){case"NONE":case"GO_BACK":case"CLOSE_OVERLAY":case"SET_VARIABLE":case"SET_VARIABLE_MODE":case"CONDITIONAL":return i.format(r);case"OPEN_URL":if(null!=e.connectionURL){if((0,L.gl)(e.connectionURL))return(0,S.t)("fullscreen.mixed");return e.connectionURL.replace(/https?:\/\//,"")}return i.format("NONE");case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":case"UPDATE_MEDIA_SKIP_TO":return eO.format(e)}return e.transitionNodeID?(0,L.gl)(e.transitionNodeID)?(0,S.t)("fullscreen.mixed"):t(m.dI(e.transitionNodeID)):i.format("NONE")}function eB(e){return e.interactions.filter(e=>e.id&&e.sourceNodeID).map(e=>E.d({nodeID:e.sourceNodeID,interactionID:e.id}))}function eV(e){let t=[];for(let n of e){let{sourceNodeID:e,id:o}=n;e&&o&&t.push(E.d({nodeID:e,interactionID:o}))}return t}function eF(e,t){R.Y5.triggerAction("show-prototype-interaction-edit-modal",{args:{source:_.yxn.PROPERTIES_PANEL,x:e.x,y:e.y,isBehaviorsOnly:t}})}},637499:(e,t,n)=>{n.d(t,{x:()=>tI,k:()=>tx});var o=n(104076),i=n(716976),r=n(903927),a=n(266808),l=n(264993),s=n(511570),c=n.n(s),d=n(437540),p=n(308424),u=n(641518),_=n(236631),h=n(192075),m=n(241421),y=n(819851),g=n(354114),v=n(553065),I=n(506192),x=n(205088),f=n(761768),N=n(415567),T=n(989941),E=n(623411),A=n(170627),b=n(361170),O=n(41076),P=n(294570),j=n(386958),S=n(950241),C=n(391145),D=n(239395),k=n(813371),w=n(818706),R=n(331497);function L(e){i.useEffect(()=>{let t=a.Ez5?.prototypingEditorState().colorPickerEyedropperVarData;if(t)return(0,R.lu)(t,{onChangeImmediate(){let n=t.getCopy();n&&e(n)}})},[e])}var M=n(737139),U=n(954741),K=n(788613),B=n(404343);let V=O.TI;function F({children:e}){return(0,o.jsx)(K.TN,{children:e})}function Y({interactionType:e,recordingKey:t,actionIndexPath:n,nodeId:s}){let[c,p]=i.useState(!1),[_,m]=i.useState(new b.Mi),y=(0,r.wA)(),g="{ "+n.join(", ")+" }",{destinationOverlayBackgroundColor:I,destinationOverlayBackgroundType:f,destinationOverlayPositionType:N,destinationOverlayBackgroundInteraction:O}=(0,d.R)(e=>({destinationOverlayBackgroundColor:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[g]?.destinationOverlayBackgroundColor,destinationOverlayBackgroundType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[g]?.destinationOverlayBackgroundType,destinationOverlayPositionType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[g]?.destinationOverlayPositionType,destinationOverlayBackgroundInteraction:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[g]?.destinationOverlayBackgroundInteraction})),R=i.useRef(null),U=i.useCallback(()=>{p(!1)},[p]),K=i.useCallback(()=>{if(c)U();else{p(!0);let e=R.current;m((0,j.cn)(e))}},[c,U]),B=i.useCallback(e=>{let t=e?"SOLID_COLOR":"NONE";A.l7.user("overlay-background-type-edit-scope",()=>{a.X3B?.setOverlayBackgroundType(l.dI(s),t)}),y((0,x._P)({name:"Overlay background visible changed",params:{backgroundType:t}}))},[y,s]),Y=i.useCallback(e=>{let t=e?"CLOSE_ON_CLICK_OUTSIDE":"NONE";A.l7.user("overlay-background-interaction-edit-scope",()=>{a.X3B?.setOverlayBackgroundInteraction(l.dI(s),t)}),y((0,x._P)({name:"Overlay background interaction changed",params:{backgroundInteraction:t}}))},[y,s]),H=i.useCallback(()=>(0,v._W)(I,{r:0,g:0,b:0,a:.25}),[I]),G=i.useCallback((e,t)=>{t!==P.zk.NO&&A.l7.user("overlay-background-color-edit-scope",()=>{a.X3B?.setOverlayBackgroundColor(l.dI(s),e)})},[s]);L(e=>{G(e.value,P.zk.YES)});let z=i.useCallback((e,t)=>{G(e,P.zk.YES)},[G]),J=i.useCallback((e,t)=>{let n=H();G({r:n.r,g:n.g,b:n.b,a:e},t)},[H,G]),X=i.useCallback(e=>{A.l7.user("overlay-position-type-edit-scope",()=>{a.X3B?.setOverlayPositionType(l.dI(s),e)}),y((0,x._P)({name:"Overlay position changed",params:{position:e}}))},[y,s]),$=H(),Z=H().a,q=(0,v.E7)(N),Q="CLOSE_ON_CLICK_OUTSIDE"===(0,v.E7)(O),ee="SOLID_COLOR"===(0,v.E7)(f),et=(0,o.jsxs)("div",{className:"overlay_panel--colorValueContainer--gJtb9 paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",children:[(0,o.jsx)(C.J,{onClick:ee?K:()=>{},color:$,opacity:Z,recordingKey:u.Pt(t,"chit"),className:"overlay_panel--chit--Zn66r paint_panels--chit--twQEy"}),(0,o.jsx)(k.AN,{className:"overlay_panel--colorInputUI3--ozOrK paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:V,property:$,disabled:!ee,onChange:z,recordingKey:u.Pt(t,"colorInput"),noBorderOnFocus:!0}),(0,o.jsx)(S.Pd,{className:"overlay_panel--opacity--vrrjV paint_panels--opacityInputContainer--oqlsk",value:Z,onValueChange:J,dispatch:y,disabled:!ee,noBorderOnFocus:!0,recordingKey:u.Pt(t,"opacity")})]});return(0,o.jsxs)(M.Zk,{className:"overlay_panel--overlayPanelUI3--GLqgD",children:[(0,o.jsx)(W,{overlayPositionType:q,onOverlayPositionTypeChange:X,recordingKey:t}),!("ON_HOVER"===e||"ON_PRESS"===e)&&(0,o.jsx)(F,{children:(0,o.jsx)(T.S,{label:(0,o.jsx)(E.J,{children:(0,h.tx)("proto.close_when_clicking_outside")}),recordingKey:u.Pt(t,"closeOnClickOutside"),onChange:Y,checked:Q})}),(0,o.jsx)(F,{children:(0,o.jsx)(T.S,{label:(0,o.jsx)(E.J,{children:(0,h.tx)("proto.overlay_panel.background")}),recordingKey:u.Pt(t,"addBackgroundBehindOverlay"),onChange:B,checked:ee})}),ee&&(0,o.jsx)(w.A,{ref:R,label:(0,h.t)("proto.overlay_panel.background"),input:et}),c&&(0,o.jsx)(D.h,{disabledVariableIds:new Set,initialPosition:_,color:$,boundVariable:null,onChange:G,onClose:U,recordingKey:u.Pt(t,"colorPicker")})]})}let H=U.l6,G=U.c$;class z extends i.PureComponent{constructor(){super(...arguments),this.titleFormatter=new m.Cr,this.renderOverlayPositionOption=(e,t)=>(0,o.jsx)(G,{value:e,recordingKey:u.Pt(this.props,e)},t)}render(){let e=["CENTER","TOP_LEFT","TOP_CENTER","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT"].map(this.renderOverlayPositionOption);return(0,o.jsxs)(H,{ariaLabelledBy:this.props.ariaLabelledBy,chevronClassName:"overlay_panel--chevron--7RTA-",className:this.props.className,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownWidth:B.DxS,formatter:this.titleFormatter,id:this.props.recordingKey??"overlay-position_select",inputClassName:"overlay_panel--input--tGHHB",onChange:this.props.onChange,property:this.props.property,recordingKey:u.Pt(this.props,"select"),children:[e,(0,o.jsx)(U.sK,{}),this.renderOverlayPositionOption("MANUAL",10)]})}}function W({overlayPositionType:e,onOverlayPositionTypeChange:t,recordingKey:n}){let a=(0,r.wA)(),l=(0,I.Um)(),s=i.useId(),c=(0,o.jsx)(z,{ariaLabelledBy:s,className:"overlay_panel--overlayPositionDropdown--ZxxSI",property:e,dispatch:a,dropdownShown:l,onChange:t,recordingKey:u.Pt(n,"overlayPositionDropdown")});return(0,o.jsx)(w.A,{label:(0,h.t)("proto.overlay_panel.position"),labelId:s,input:c})}z.displayName="OverlayPositionDropdown";var J=n(825923),X=n(684742),$=n(513674),Z=n(74620),q=n(316923),Q=n(39456),ee=n(660838),et=n(596763),en=n(652539),eo=n(911990),ei=n(831797),er=n(694908);let ea="prototype_conditional_controls--conditionalRowUI3--rQlu6",el="prototype_conditional_controls--conditionIcon--Npk57";var es=n(609746),ec=n(969560),ed=n(764361);function ep({onDeleteAction:e,updateMultipleDestinationNodes:t,updateSelectionProperties:n,updateCondition:i,updateActions:r,onAddAction:l,autoOpenVariablePicker:s,isSelected:c,handleMouseDownUI3:d,...p}){let _=p.conditionalActions,m=_?.actions?_?.actions:[],y=_?.condition?_?.condition:void 0,g=(0,ee.YT)()===ee.Oz.TWO_COL,I=g?ea:"prototype_conditional_controls--conditionalRowIf--25FqB prototype_conditional_controls--conditionalRow--u0PaS",x=(0,o.jsx)(q.KN,{resolvedType:a.rXF.BOOLEAN,targetVariableData:y,updateSelectionProperties:n,recordingKey:p.recordingKey,updateConditionInConditionalAction:i,showVariableThumbnails:!0,isNarrowPanel:!0}),f=(0,o.jsx)("div",{className:"prototype_conditional_controls--addButton--vlYLn",children:(0,o.jsx)(er.t,{addButtonPressed:l,recordingKey:u.Pt(p.recordingKey,"addActionToIfButton"),renderButton:!0,isNestedInConditional:!0})}),N=(0,o.jsxs)(o.Fragment,{children:[g?(0,o.jsx)("span",{className:"prototype_conditional_controls--conditionIconUI3--zcwx0",children:(0,h.tx)("proto.else")}):(0,o.jsx)(en.B,{className:el,svg:es.A}),!g&&m.length>0&&(0,o.jsx)("div",{className:"prototype_conditional_controls--addButtonForElse--ogBWu prototype_conditional_controls--addButton--vlYLn",children:(0,o.jsx)(er.t,{addButtonPressed:l,recordingKey:u.Pt(p.recordingKey,"addActionToElseButton"),renderButton:!g,isNestedInConditional:!0})})]}),T=g?(0,o.jsx)(X.E,{className:"prototype_conditional_controls--elseBlockRowUI3--VXjmO",onClick:d,children:N}):(0,o.jsx)(M.fI,{className:g?ea:"prototype_conditional_controls--conditionalRow--u0PaS",children:N});return(0,o.jsxs)(o.Fragment,{children:[p.ifStatement&&(0,o.jsx)("div",{className:I,children:!g&&(0,o.jsxs)(eo.Y,{direction:"horizontal",spacing:4,children:[(0,o.jsx)("span",{className:g?"prototype_conditional_controls--conditionalRowConditionUI3--M2mOx":"prototype_conditional_controls--conditionalRowCondition--kn-f7",children:(0,o.jsxs)(eo.Y,{direction:"horizontal",spacing:0,children:[(0,o.jsx)(en.B,{className:el,svg:ec.A}),(0,o.jsx)(eo.Y,{direction:"horizontal",spacing:0,children:(0,v.hS)(y)&&x}),(0,o.jsx)(en.B,{className:"prototype_conditional_controls--icon--JV1i0",svg:ed.default})]})}),!g&&m.length>0&&f]})}),!p.ifStatement&&T,m&&m.map((i,r)=>(0,o.jsx)(ei.P,{action:i,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],r],autoOpenVariablePicker:s,expandedRows:p.expandedRows,interactionType:p.interactionType,isNestedInConditional:!0,numActions:m.length,onAddAction:l,onDeleteAction:()=>e(r),onDrop:p.onDrop,onExpand:p.onExpand,onSelect:p.onSelect,recordingKey:u.Pt(p.recordingKey,"conditional-action-row",r),selectedActionIndex:p.selectedActionIndex,selectedInteractions:p.selectedInteractions,stateManagementVersion:p.stateManagementVersion,updateMultipleDestinationNodes:t.appendActionIndex(r),updateSelectionProperties:n.appendActionIndex(r)},r)),0===m.length&&(0,o.jsx)(ei.P,{action:p.emptyAction,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],0],autoOpenVariablePicker:s,expandedRows:p.expandedRows,interactionType:p.interactionType,isNestedInConditional:!0,numActions:m.length,onAddAction:l,onDeleteAction:()=>e(0),onDrop:p.onDrop,onExpand:p.onExpand,onSelect:p.onSelect,recordingKey:u.Pt(p.recordingKey,"conditional-action-row",0),selectedActionIndex:p.selectedActionIndex,selectedInteractions:p.selectedInteractions,stateManagementVersion:p.stateManagementVersion,updateMultipleDestinationNodes:t.appendActionIndex(0),updateSelectionProperties:n.appendActionIndex(0)},0)]})}function eu(e,t,n){return function(o){var i=[...t];i.length>e?i[e].condition=o:i.push({condition:0===e?o:void 0,actions:[]},{condition:1===e?o:void 0,actions:[]}),n({conditionalActions:i})}}function e_({onDrop:e,onSelect:t,onExpand:n,action:i,updateMultipleDestinationNodes:a,updateSelectionProperties:l,interactionType:s,recordingKey:c,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:_,selectedActionIndex:m,expandedRows:y,autoOpenVariablePicker:g,onNewActionAdded:I,handleMouseDownUI3:f}){let N=(0,r.wA)(),T=(0,Z.p8)("currentPage"),E=(0,ee.YT)()===ee.Oz.TWO_COL,A=E?m.equals(_):void 0,{shouldShowAdvancedPrototypingPaywall:b,showAdvancedPrototypingConditionalActionsModal:O}=(0,ee.zt)(),P=(0,v.hS)(i.conditionalActions)&&i.conditionalActions?i.conditionalActions:[],j=e=>function(t){var n=[...P];n.length>e?n[e].actions=[...t]:n.push({actions:t}),l({conditionalActions:n})},S=e=>function(t){var n=[...P],o=0;if(n.length>e){var i=n[e].actions;i?i.push(t):i=[t],o=i.length}else n.push({actions:0===e?[t]:[]},{actions:1===e?[t]:[]}),o=1;"SET_VARIABLE"===t.connectionType&&(g.current=!0),l({conditionalActions:n}),I&&I(new Q.Op([_[0],e,o-1])),N((0,x._P)({name:"Prototype add action",params:{action:t.connectionType?t.connectionType:"NONE",source:"panel",page_id:T,actionInConditionalAction:!0}}))},C=e=>function(t){if(b)O();else{var n=[...P];let o=P[e],i=[];if(o&&o.actions)for(let e=0;e<o.actions.length;e++){let n=o.actions[e];e!==t?i.push(n):N((0,x._P)({name:"Prototype delete action",params:{action:n.connectionType?n.connectionType:"NONE",source:"panel",page_id:T,actionInConditionalAction:!0}}))}n[e].actions=i,l({conditionalActions:n})}},D=P.length>0?P[0]:void 0,k=P.length>1?P[1]:void 0;return(0,o.jsxs)("div",{style:E?{position:"relative"}:void 0,children:[(0,v.gl)(i.conditionalActions)&&(0,o.jsx)($.Y1,{children:(0,o.jsx)(X.E,{className:"prototype_conditional_controls--mixedConditionalText--6O32b",onClick:()=>{var e=[];e.push({},{}),l({conditionalActions:e})},children:(0,h.t)("fullscreen.properties_panel.click_to_replace_mixed_content")})}),(0,v.hS)(i.conditionalActions)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ep,{actionIndexPath:[_[0],0],autoOpenVariablePicker:g,conditionalActions:D,emptyAction:{ifStatement:!0,action:i},expandedRows:y,handleMouseDownUI3:f,ifStatement:!0,interactionType:s,isSelected:A,onAddAction:S(0),onDeleteAction:C(0),onDrop:e,onExpand:n,onSelect:t,recordingKey:u.Pt(c,"conditional-block",0),selectedActionIndex:m,selectedInteractions:p,stateManagementVersion:d,updateActions:j(0),updateCondition:eu(0,P,l),updateMultipleDestinationNodes:a.appendActionIndex(0),updateSelectionProperties:l.appendActionIndex(0)},0),(0,o.jsx)(ep,{actionIndexPath:[_[0],1],autoOpenVariablePicker:g,conditionalActions:k,emptyAction:{ifStatement:!1,action:i},expandedRows:y,handleMouseDownUI3:f,ifStatement:!1,interactionType:s,isSelected:A,onAddAction:S(1),onDeleteAction:C(1),onDrop:e,onExpand:n,onSelect:t,recordingKey:u.Pt(c,"conditional-block",1),selectedActionIndex:m,selectedInteractions:p,stateManagementVersion:d,updateActions:j(1),updateCondition:eu(1,P,l),updateMultipleDestinationNodes:a.appendActionIndex(1),updateSelectionProperties:l.appendActionIndex(1)},1)]})]})}function eh({updateSelectionProperties:e,conditionalActions:t,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:i,...r}){let l=t.length>0?t[0]:void 0,s=l?.condition?l?.condition:void 0,d=c()({"prototype_conditional_controls--standaloneIfConditional--GLFDU":!0,"prototype_conditional_controls--placeholderText--esG0u":!s});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.A,{input:null,label:(0,h.t)("proto.condition")}),(0,o.jsx)(et.Ad,{appendedClassName:"prototype_conditional_controls--conditionalActionRightPadding--xpK6Z",label:null,input:(0,v.hS)(s)?(0,o.jsx)("div",{className:d,children:(0,o.jsx)(q.KN,{resolvedType:a.rXF.BOOLEAN,targetVariableData:s,updateSelectionProperties:e.appendActionIndex(0),recordingKey:r.recordingKey,updateConditionInConditionalAction:eu(0,t,e),autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:i,showVariableThumbnails:!0,isNarrowPanel:!0})}):null})]})}var em=n(816299),ey=n(681958),eg=n(783728),ev=n.n(eg),eI=n(607804);class ex{constructor(e,t){this.nodeFormatter=e,this.scene=t,this.format=e=>{let t=this.nodeFormatter.format(e);if(this.scene&&e!==l.AD&&null!=e){let n=this.scene.get(e);if(n?.isResponsiveSet)return"/"===t?(0,h.t)("sites.panel.home"):t}return t}}}var ef=n(772523),eN=n(211862),eT=n(76365),eE=n(998619),eA=n(226486),eb=n(520266),eO=n(167151);function eP(e){let t=i.useMemo(()=>new m.cP(e.scene),[e.scene]),[n,r]=i.useState([]),[s,c]=i.useState([]),d=(0,eO.cJ)(),p=i.useCallback(()=>{let t=a.baT.ALL;"SCROLL_TO"===e.action?t=a.baT.SCROLL_TO:"SWAP_STATE_TO"===e.action?t=a.baT.STATES:"NAVIGATE_TO"===e.action&&d&&(t=a.baT.RESPONSIVE_SETS);let{viableIds:n,disabledIds:o}=a.X3B.getTransitionDestinationsOnActiveCanvas(t);return r(n),c(o),Promise.resolve()},[e.action,d]),_=e=>{ef.Uc(e??"")},y=e.nodeId===v.oV?v.oV:l.dI(e.nodeId),g=n;(0,v.hS)(y)&&y!==l.AD&&-1===g.indexOf(y)&&(g=g.concat([y]));let I="SCROLL_TO"!==e.action?g.filter(e=>t.hasNameForNode(e)).map(e=>(0,o.jsx)(em.c$,{value:e,htmlAttributes:{onFocus:()=>_(e)},children:t.format(e)},`enabled-${e}`)):((n,i)=>{let r=ev()(n.filter(e=>t.hasNameForNode(e)),t=>t===i&&(0,v.hS)(i)?ey.Ql(e.scene,t)?.guid:e.scene.get(t)?.parentGuid),a=Object.keys(r);(0,ey.X4)(a,t.format.bind(t));let{tlfId:l,index:s}=(0,ey.H_)(e.scene,a);return l&&s&&(a.splice(s,1),a=[l,...a]),a.reduce((e,n,i)=>(0!==i&&e.push((0,o.jsx)(em.wv,{},i)),e.push((0,o.jsx)(em.c$,{value:n+" ",disabled:!0,children:t.format(n)},`disabled-${n}`)),r[n].forEach((n,i)=>e.push((0,o.jsx)(em.c$,{value:n,disabled:!1,htmlAttributes:{onFocus:()=>_(n)},children:t.format(n)},`enabled-${n+i}`))),e),[])})(g,y),x=s.filter(e=>t.hasNameForNode(e)).map(e=>(0,o.jsx)(em.c$,{value:e,disabled:!0,htmlAttributes:{onFocus:()=>_(e)},children:t.format(e)},`disabled-${e}`)),f=(0,v.hS)(y)&&y!==l.AD?y:void 0;i.useEffect(()=>{p()},[p]);let N=i.useMemo(()=>new ex(t,e.scene),[t,e.scene]);return(0,o.jsxs)(em.bL,{value:f,onChange:t=>{t&&e.onChange(t)},onOpenChange:e=>{e&&p()},recordingKey:u.Pt(e,"select"),children:[(0,o.jsx)(em.l9,{label:(0,o.jsx)(E.h,{children:(0,h.tx)("proto.destination")}),"data-testid":"destination-select",width:"fill",children:f?N.format(f):(0,v.hS)(y)?N.format(y):"Mixed"}),(0,o.jsxs)(em.mc,{children:[I||null,0!==s.length&&0!==g.length&&(0,o.jsx)(em.wv,{}),x]})]})}let ej=i.memo(function(e){let t=(0,eN.tS)(),n=(0,eN._G)(),l=(0,r.d4)(eS),s=(0,r.d4)(eT.Sh),c=(0,r.d4)(eT.dK),d=(0,eI.to)(),p=(0,eE.D)(s,c),u=(0,r.d4)(eC),_=i.useMemo(()=>(0,eb.cP)(u,t,n,d,e.actionIndexPath),[u,t,n,e.actionIndexPath,d]),h=i.useMemo(()=>(0,eb.cP)(l,t,n,d),[l,t,n,d]),m=_||h;if(!m||m.mode!==a.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)return null;let{allStates:y,stateGroupModel:g,selectedStates:v,selectedStatesPropertyValues:I}=m,x=g.propertySortOrder||[],f=g.propertyValues;return f?(0,o.jsx)(eA.lS,{allStates:y,extended:!0,hideErrorsPanel:!0,onSelectProperty:t=>{let n={};for(let e of Object.keys(t)){let o=t[e].symbol.node_id;for(let t of(n[e]=o,p[e]||[]))n[t]=o;for(let e of s)n[e]||(n[e]=o)}e.onChange(n)},recordingKey:e.recordingKey,selectedStates:v,selectedStatesPropertyValues:I,shouldIndent:!0,sortedProperties:x,stateGroupPropertyValues:f}):null});function eS(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function eC(e){return e.mirror.selectionProperties.prototypeDestinationStateGroupSelectionInfo}var eD=n(389724),ek=n(812714),ew=n(653899),eR=n(366815),eL=n(797715),eM=n(371952),eU=n(540864),eK=n(277159),eB=n(316325),eV=n(13073),eF=n(668700),eY=n(447563),eH=n(487375),eG=n(979263),ez=n(643330);let eW="prototype_set_variable_controls--dropdownAndIconContainer--6m3Tw",eJ="prototype_set_variable_controls--placeholderText--PBIqf";function eX({targetVariableData:e,targetVariable:t,updateSelectionProperties:n,autoOpenVariablePicker:s,...d}){let p=i.useRef(null),m=(0,r.wA)(),y=(0,r.d4)(e=>e.variablePickerShown),g=(0,eM.tZ)((0,v.hS)(t)&&"id"in t?t.id:void 0),I=(0,eM.u)((0,v.hS)(t)&&"id"in t?t.id:void 0),[f,N]=i.useState("");(0,ew.h)(()=>{s&&!0===s.current&&(E(),s.current=!1)});let T=(0,eM.BQ)((0,v.hS)(t)&&"id"in t?t.id:void 0)??(0,eB.m9)((0,v.hS)(t)&&"nodeFieldAlias"in t?t.nodeFieldAlias:void 0);i.useEffect(()=>{void 0!==e&&T&&"MIXED"!==T&&(0,v.hS)(e)&&e.resolvedType!==T.resolvedType&&!((0,eB.tz)(e.resolvedType)&&(0,eB.tz)(T.resolvedType))&&n({targetVariableData:void 0})},[T,n,e]);let E=()=>{let e=p.current.getBoundingClientRect();m((0,eL.C)({type:"variable-picker-set-variable-action",isShown:!0,resolvedType:a.rXF.STRING,initialPosition:new b.Mi(e.left-20,e.top),key:d.recordingKey,onVariableSelected:j}))},A=i.useCallback(()=>{m((0,eL.B)())},[m]),[O,P]=i.useState(!1),j=i.useCallback(t=>{if(void 0!==t&&t.node_id){let o={targetVariable:{id:t.node_id}},i=a.CWU?.getVariableResolvedValue(t.node_id,new Map);!e&&t.resolvedType===a.rXF.COLOR&&i&&(o.targetVariableData=i??void 0),n(o),m((0,x.Zh)({name:"prototype.variable_selected",params:{collectionId:t.variableSetId,variableId:t.node_id,variableType:t.resolvedType}})),P(!0)}},[m,e,n]),S=i.useCallback(e=>{e.value.stablePath.map(e=>l.sH(e))&&(n({targetVariable:{nodeFieldAlias:{stablePathToNode:e.value.stablePath,nodeField:"COMPONENT_PROP_ASSIGNMENTS",indexOrKey:e.value.explicitDefId}}}),P(!0))},[n]),C=i.useMemo(()=>({type:"LOCAL_VARIABLES",layout:"list"}),[]),D=i.useRef(null);L(e=>{n({targetVariableData:e})});let k="nodeFieldAlias"in t?(0,eB.aA)(t.nodeFieldAlias.stablePathToNode,t.nodeFieldAlias.indexOrKey):void 0,R=k?(0,eB.Xx)(k.varValue.resolvedType):null,M=null;if((0,v.gl)(t))M=null;else if(T?.resolvedType===a.rXF.COLOR)M=(0,v.gl)(e)?(0,o.jsx)("div",{className:"prototype_set_variable_controls--targetVariableDataMixedContainer--H6uGu",children:(0,h.t)("fullscreen.mixed")}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(eG.gJ,{variableValue:e??T,onChange:e=>{n({targetVariableData:e})},recordingKey:u.Pt(d.recordingKey,"variableValueInput"),setVariableAction:!0,innerContainerClassName:"prototype_set_variable_controls--variableColorInputContainer--NaOmp"})});else{let t=a.rXF.BOOLEAN;I?t=I.resolvedType:k&&(t=k.varValue.resolvedType===a.rXF.TEXT_DATA?a.rXF.STRING:k.varValue.resolvedType),M=(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:eW,children:(0,o.jsx)(q.KN,{resolvedType:t,targetVariableData:e,autoOpenExpressionBuilder:O,setAutoOpenExpressionBuilder:P,updateSelectionProperties:n,recordingKey:d.recordingKey,isNarrowPanel:d.isNarrowPanel,showVariableThumbnails:!0})})})}let U=c()({"prototype_set_variable_controls--targetVariableDropdownUI3--Pz71q":!0,[eJ]:!(g||k)}),K=(0,r.d4)(eU.ZM)?(0,h.t)("proto.select_variable_unified"):(0,h.t)("proto.select_variable.short"),B=(0,o.jsx)(eR.D8,{recordingKey:u.Pt(d.recordingKey,"selectTargetVariable"),onClick:E,children:(0,o.jsx)("div",{ref:p,children:(0,o.jsx)(eo.Y,{children:(0,o.jsx)("div",{className:U,children:(0,o.jsx)("div",{className:eW,children:(0,v.gl)(t)?(0,o.jsx)("div",{className:c()(_.s.pt2.$,_.s.pb2.$),children:(0,h.t)("fullscreen.mixed")}):g?(0,o.jsx)(eH.wG,{text:g,thumbnailValue:T,isDeleted:!!I&&(0,eV.eF)(I)}):k?(0,o.jsx)(eH.wG,{text:k.name,thumbnailValue:R,isDeleted:!1,colorTheme:eH.J2.COMPONENT}):(0,o.jsx)("div",{className:c()(_.s.pt2.$,_.s.pb2.$,"prototype_set_variable_controls--placeholderTextColorUI3--Pc-4N"),children:K})})})})})}),V=(0,o.jsx)(w.A,{input:B,label:(0,h.t)("proto.target")}),F=c()({"prototype_set_variable_controls--setVariableToContainerUI3--pGbDe":!0,[eJ]:!e&&T?.resolvedType!==a.rXF.COLOR}),Y=(0,o.jsx)("div",{className:F,"data-testid":"set-variable-container",children:M}),H=null!==M?(0,o.jsx)(w.A,{label:(0,h.t)("proto.variable.value"),input:Y}):null;return(0,o.jsxs)("div",{children:[V,y.isShown&&"variable-picker-set-variable-action"===y.type&&y.key===d.recordingKey?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ez.Ao,{title:"",headerSize:"hidden",initialPosition:y.initialPosition,onClose:A,dragHeaderOnly:!1,initialWidth:216,canRenderBelowViewport:!0,children:(0,o.jsx)(eY.YK,{currentView:C,disabledVariableIds:new Set,onClose:A,onComponentPropSelected:(0,ek.kc)().ds_variable_props_proto?S:void 0,onSearchInputChange:N,onVariableSelected:j,pickerType:"set-variable",recordingKey:u.Pt(d.recordingKey,"variablePickerForSelection"),renderSetControls:()=>(0,o.jsx)(eF.Z,{currentView:C,subscribedLibraries:[],setControlRightButtons:(0,o.jsx)(eK.f,{resolvedTypes:[a.rXF.BOOLEAN,a.rXF.STRING,a.rXF.FLOAT,a.rXF.COLOR]}),recordingKey:u.Pt(d.recordingKey,"variablePickerForSelection")}),searchInputRef:D,searchQuery:f,selectedItem:I})}),(0,o.jsx)(eY.$3,{onClose:A})]}):null,H]})}var e$=n(506426),eZ=n(680909),eq=n(762801),eQ=n(190333),e0=n(836982),e1=n(580910),e7=n(894210),e4=n(313865),e5=n(475477);function e2(){let e=(0,o.jsx)(e5.N,{newTab:!0,href:"https://help.figma.com/hc/articles/14397859494295",htmlAttributes:{rel:"noopener noreferrer",onMouseDown:e=>{e.stopPropagation(),e.preventDefault()}},children:(0,h.tx)("proto.state_management.info_tooltip_learn_more")}),t=(0,o.jsx)("span",{children:(0,o.jsx)("strong",{children:(0,h.tx)("proto.animation_panel.preserve_scroll_position")})});return(0,o.jsx)(o.Fragment,{children:(0,h.tx)("proto.state_management.info_tooltip",{PreserveScrollPositionBold:t,LearnMoreLink:e})})}let e3=(0,n(560201).ex)("prototype_state_management_info",function(){return(0,o.jsx)("div",{className:"prototype_state_management_info_tooltip--stateManagementMoreInfo---gER1 tooltip--text--Ll1mS",children:(0,o.jsx)(e2,{})})}),e6="prototype_state_management_panel--stateManagementPanelTooltipUI3--x5MQ3";function e8({transition:e,navigationType:t,recordingKey:n,showPreserveScrollPosition:a,showResetVideoState:l,showResetInteractiveComponentState:s,updateSelectionProperties:c,stateManagementVersion:d,selectedInteractions:p}){let _=(0,r.wA)(),m=(0,y.Em)(),g=i.useContext(eD.c),I=(0,ee.YT)()===ee.Oz.TWO_COL&&g===eD.P.LEFT,f=eq.iv({placement:"bottom"});if(I)return null;let N=(0,ee.LH)(d),A=(0,o.jsx)(T.S,{onChange:t=>{_((0,x._P)({name:"Preserve Scroll Changed",params:{newValue:t}})),c({...function(e){if((0,v.hS)(e.preserveScroll))return{transitionPreserveScroll:e.preserveScroll}}({...e,preserveScroll:t})})},checked:!0===e.preserveScroll,mixed:(0,v.gl)(e.preserveScroll),recordingKey:u.Pt(n,"preserve-scroll-check"),label:(0,o.jsx)(E.J,{children:(0,h.tx)("proto.animation_panel.preserve_scroll_position")})}),b=(0,o.jsx)(K.TN,{children:A}),O=(0,o.jsx)(T.S,{onChange:t=>{_((0,x._P)({name:"Reset Scroll Position Changed",params:{newValue:t,noodleUpgradedThisSession:e4.zZ.haveAnyInteractionsBeenUpgraded(p)}})),c({...function(e){if((0,v.hS)(e.resetScrollPosition))return{transitionResetScrollPosition:e.resetScrollPosition}}({...e,resetScrollPosition:t})})},checked:!0===e.resetScrollPosition,mixed:(0,v.gl)(e.resetScrollPosition),recordingKey:u.Pt(n,"reset-scroll-position-check"),label:(0,o.jsx)(E.J,{children:(0,h.tx)("proto.animation_panel.reset_scroll_position")})}),P=(0,ek.kc)().fpl_toggle_tip?(0,o.jsxs)("div",{className:e6,children:[(0,o.jsx)(eq.Uj,{...f.getTriggerProps(),"aria-label":(0,h.t)("proto.state_management.info_tooltip_learn_more"),children:(0,o.jsx)(eQ.B,{})}),(0,o.jsx)(eq.mc,{manager:f,children:(0,o.jsx)(eq.UC,{maxWidth:240,children:(0,o.jsx)(e2,{})})})]}):(0,o.jsx)("div",{"data-tooltip-type":e7.Ib.SPECIAL,"data-tooltip":e3,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":240,className:e6,children:(0,o.jsx)(e1.In,{icon:"info-16"})}),j=(0,o.jsxs)(K.TN,{children:[O," ",m&&P]}),S=(0,o.jsx)(T.S,{onChange:t=>{_((0,x._P)({name:"Reset Component State Changed",params:{newValue:t,noodleUpgradedThisSession:e4.zZ.haveAnyInteractionsBeenUpgraded(p)}})),c({...function(e){if((0,v.hS)(e.resetInteractiveComponents))return{transitionResetInteractiveComponents:e.resetInteractiveComponents}}({...e,resetInteractiveComponents:t})})},checked:!0===e.resetInteractiveComponents,mixed:(0,v.gl)(e.resetInteractiveComponents),recordingKey:u.Pt(n,"reset-component-state-check"),label:(0,o.jsx)(E.J,{children:(0,h.tx)("proto.animation_panel.reset_component_state")})}),C=(0,o.jsx)(K.TN,{children:S}),D=(0,o.jsx)(T.S,{onChange:t=>{_((0,x._P)({name:"Reset Video Position Changed",params:{newValue:t}})),c({...function(e){if((0,v.hS)(e.resetVideoPosition))return{transitionResetVideoPosition:e.resetVideoPosition}}({...e,resetVideoPosition:t})})},checked:!0===e.resetVideoPosition,mixed:(0,v.gl)(e.resetVideoPosition),recordingKey:u.Pt(n,"reset-video-position-check"),label:(0,o.jsx)(E.J,{children:(0,ee.LH)(d)?(0,h.tx)("proto.state_management.reset_video_state"):(0,h.tx)("proto.animation_panel.reset_video_state")})}),k=(0,o.jsx)(K.TN,{children:D}),w=(0,o.jsxs)(M.Zk,{className:`prototype_state_management_panel--stateManagementPanel--sYaaj ${(0,ee.kM)(d)&&"prototype_state_management_panel--stateManagementPanelWithVersion--AovOP"}`,children:[(0,ee.uU)(d)&&a&&b,l&&(0,ee.uU)(d)&&k,N&&j,N&&s&&C,N&&l&&k,(0,v.gl)(d)&&(0,o.jsx)(eo.Y,{direction:"horizontal",padding:{horizontal:12,vertical:12},children:(0,o.jsx)(M.nV,{children:(0,h.tx)("proto.state_management.mixed_state_update")})})]});return(0,o.jsx)(e0.k,{name:"prototype_state_management_panel",children:(0,o.jsxs)(eZ.bL,{defaultOpen:!1,children:[(0,o.jsx)(eZ.Y9,{children:(0,o.jsx)(eZ.JU,{recordingKey:u.Pt(n,"expand-caret"),actionOnPointerDown:!0,children:(0,h.tx)("proto.state")},"expand-caret")}),(0,o.jsx)(eZ.UC,{children:w})]})})}let e9=U.c$,te=U.l6,tt=l.AD;class tn extends m.cP{format(e){return e===tt||null===e?(0,h.t)("proto.target_video_node_name_formatter.this_video"):super.format(e)}}function to(e){let{viableSameFrameVideoIds:t,disabledSameFrameVideoIds:n,scene:a,dropdownShown:s,targetVideoNodeID:c,isVideoSelected:d,onChange:p}=e,_=(0,r.wA)(),[y,g]=i.useState(()=>d?new tn(a):new m.cP(a));t.sort((e,t)=>{let n=y.format(e),o=y.format(t);return n.localeCompare(o)}),d&&t.unshift(tt);let I=t.length>0&&n.length>0,x=`prototype-target-video-select-${e.recordingKey}`,f=i.useId(),N=(0,o.jsxs)(te,{ariaLabelledBy:f,chevronClassName:"prototype_target_video_dropdown--chevron--jgz53",className:"prototype_target_video_dropdown--targetVideoDropdown--6hKF-",dataTestId:"target-video-select",dispatch:_,dropdownAlignment:"left",dropdownShown:s,formatter:y,id:x,inputClassName:"prototype_target_video_dropdown--input--infAK",onChange:p,onOptionFocus:e=>{ef.Uc(e??"")},property:(0,v.gl)(c)?c:l.dI(c),recordingKey:u.Pt(e,"select"),children:[t.filter(e=>y.hasNameForNode(e)).map((t,n)=>(0,o.jsx)(e9,{value:t,recordingKey:u.Pt(e,`viable-option-${n}`),disabled:!1},`enabled-${n}`)),I&&(0,o.jsx)(U.sK,{}),n.filter(e=>y.hasNameForNode(e)).map((t,n)=>(0,o.jsx)(e9,{value:t,recordingKey:u.Pt(e,`viable-option-${n}`),disabled:!0},`disabled-${n}`))]});return(0,o.jsx)(w.A,{input:N,label:(0,h.t)("proto.video_dropdown.label"),labelId:f})}var ti=n(555013);function tr({action:e,recordingKey:t,onURLChange:n,onOpenInNewTabChange:i}){let r=(0,o.jsx)(ti.ks,{className:"prototype_open_url_action_options--urlInputUI3--H-JfT",dataTestId:"url-input",placeholder:(0,h.t)("proto.interaction.example_com"),value:(0,v.gl)(e.connectionURL)?(0,h.t)("fullscreen.mixed"):(0,v._W)(e.connectionURL,""),onChange:n,recordingKey:u.Pt(t,"urlTextInput"),autoFocus:!1}),a=(0,o.jsx)(T.S,{label:(0,o.jsx)(E.J,{children:(0,h.tx)("proto.action_open_url_in_new_tab")}),onChange:i,recordingKey:u.Pt(t,"open-url-in-new-tab-check"),checked:void 0===e.openUrlInNewTab||!0===e.openUrlInNewTab});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.A,{label:(0,h.t)("proto.open_url.text_input_label"),input:r}),(0,o.jsx)(K.TN,{children:a})]})}var ta=n(968169),tl=n(294044);function ts({updateSelectionProperties:e,action:t,extraScrollOffset:n,showScrollToOptions:a,recordingKey:l,setPropertiesForAnchorLink:s,hideXOffset:c,renderWithIconSpacing:d}){let{smallNudgeAmount:p,bigNudgeAmount:_}=(0,ta.sT)(),m=(0,r.wA)(),y=(t,n)=>(o,i)=>{if(t){if(s){s({extraScrollOffset:{...t,[n]:o}});return}e({extraScrollOffset:{...t,[n]:o}},{shouldCommit:i})}},g=(0,v._W)(n,{x:0,y:0}),I=i.useId();if(!a||"SCROLL_TO"!==t)return null;let x=(0,o.jsx)(S.gq,{bigNudgeAmount:_,"data-tooltip":(0,h.t)("proto.trigger.y_offset"),"data-tooltip-type":e7.Ib.TEXT,dispatch:m,inputClassName:tl.oM,onValueChange:y(g,"y"),recordingKey:u.Pt(l,"extraScrollOffsetY"),scrubMultiplier:p,smallNudgeAmount:p,tooltipForScreenReadersOnly:!1,value:g.y,wheelMultiplier:p,children:(0,o.jsx)("span",{className:tl.QK,children:(0,h.tx)("proto.scroll_options.scroll_offset.y")})}),f=(0,o.jsx)(S.gq,{bigNudgeAmount:_,"data-tooltip":(0,h.t)("proto.trigger.x_offset"),"data-tooltip-type":e7.Ib.TEXT,dispatch:m,inputClassName:tl.oM,onValueChange:y(g,"x"),recordingKey:u.Pt(l,"extraScrollOffsetX"),scrubMultiplier:p,smallNudgeAmount:p,tooltipForScreenReadersOnly:!1,value:g.x,wheelMultiplier:p,children:(0,o.jsx)("span",{className:tl.QK,children:(0,h.tx)("proto.scroll_options.scroll_offset.x")})});if(c){let e=(0,h.t)("proto.scroll_options.offset");return d?(0,o.jsx)(et.DE,{label:null,input:(0,o.jsxs)("div",{className:tl.G_,children:[(0,o.jsx)("div",{id:I,"aria-hidden":"true",className:tl.aB,"data-non-interactive":!0,children:e}),(0,o.jsx)("div",{className:tl.w1,children:x})]}),icon:null}):(0,o.jsx)(w.A,{label:e,input:x})}return(0,o.jsx)(K.Cm,{label:(0,o.jsx)(w.F,{tooltip:(0,h.t)("proto.scroll_options.offset"),children:(0,h.t)("proto.scroll_options.offset")}),leftInput:f,rightInput:x})}var tc=n(152917);let td="prototype_video_action_options--chevron--mkNyv",tp="prototype_video_action_options--input--3-cEi",tu=U.c$,t_=U.l6,th=new m.js,tm=new m.Z6;function ty({action:e,onChange:t,updateSelectionProperties:n,dropdownShown:a,recordingKey:l}){let s=(0,m.Od)(e),c=(0,v.E7)(e.mediaAction),d="UPDATE_MEDIA_RUNTIME"===(0,v.E7)(e.connectionType),p="SKIP_TO"===c,_="SKIP_FORWARD"===c||"SKIP_BACKWARD"===c,y="PLAY"===c||"PAUSE"===c||"TOGGLE_PLAY_PAUSE"===c,g="MUTE"===c||"UNMUTE"===c||"TOGGLE_MUTE_UNMUTE"===c,I=(0,r.wA)(),f=(0,ta.RU)(),N=i.useCallback(e=>{n({mediaSkipToTime:e}),I((0,x._P)({name:"Media skip to time changed",params:{value:e}}))},[I,n]),T=`prototype-media-action-select-${l}`,E="prototype_video_action_options--shortDropdown--NOXXv",A=a&&a.type===T?th:tm,b=i.useId(),O=(0,o.jsxs)(t_,{ariaLabelledBy:b,chevronClassName:td,className:E,dataTestId:"media-play-pause-select",dispatch:I,dropdownShown:a,formatter:A,id:T,inputClassName:tp,onChange:t,property:s,recordingKey:u.Pt(l,"select"),children:[(0,o.jsx)(tu,{value:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",recordingKey:u.Pt(l,"toggle-play-pause-option"),disabled:!1},"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE"),(0,o.jsx)(tu,{value:"UPDATE_MEDIA_PLAY",recordingKey:u.Pt(l,"play-option"),disabled:!1},"UPDATE_MEDIA_PLAY"),(0,o.jsx)(tu,{value:"UPDATE_MEDIA_PAUSE",recordingKey:u.Pt(l,"pause-option"),disabled:!1},"UPDATE_MEDIA_PAUSE")]}),P=i.useId(),j=(0,o.jsxs)(t_,{ariaLabelledBy:P,chevronClassName:td,className:E,dataTestId:"media-mute-unmute-select",dispatch:I,dropdownShown:a,formatter:A,id:T,inputClassName:tp,onChange:t,property:s,recordingKey:u.Pt(l,"select"),children:[(0,o.jsx)(tu,{value:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",recordingKey:u.Pt(l,"toggle-mute-unmute-option"),disabled:!1},"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE"),(0,o.jsx)(tu,{value:"UPDATE_MEDIA_MUTE",recordingKey:u.Pt(l,"mute-option"),disabled:!1},"UPDATE_MEDIA_MUTE"),(0,o.jsx)(tu,{value:"UPDATE_MEDIA_UNMUTE",recordingKey:u.Pt(l,"unmute-option"),disabled:!1},"UPDATE_MEDIA_UNMUTE")]}),C=i.useId(),D=(0,o.jsxs)(t_,{ariaLabelledBy:C,chevronClassName:td,className:E,dataTestId:"media-skip-by-select",dispatch:I,dropdownShown:a,dropdownWidth:160,formatter:A,id:T,inputClassName:tp,onChange:t,property:s,recordingKey:u.Pt(l,"select"),children:[(0,o.jsx)(tu,{value:"UPDATE_MEDIA_SKIP_FORWARD",recordingKey:u.Pt(l,"skip-forward-option"),disabled:!1},"UPDATE_MEDIA_SKIP_FORWARD"),(0,o.jsx)(tu,{value:"UPDATE_MEDIA_SKIP_BACKWARD",recordingKey:u.Pt(l,"skip-backward-option"),disabled:!1},"UPDATE_MEDIA_SKIP_BACKWARD")]}),k=(0,o.jsx)(S.qd,{className:"prototype_video_action_options--timestampContainer---DdaI","data-tooltip":(0,h.t)("proto.trigger.timestamp_to_set_to"),"data-tooltip-type":e7.Ib.TEXT,dataTestId:"mediaSkipToTime-input",dispatch:I,displayFractions:!0,inputClassName:"prototype_video_action_options--timestamp--luOrs",max:3600,onValueChange:N,recordingKey:u.Pt(l,"mediaSkipToTimeInput"),scrubMultiplier:f/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaSkipToTime||0,wheelMultiplier:f/1e3,children:(0,o.jsx)(tc.Y,{})}),R="SKIP_BACKWARD"===c?(0,h.t)("proto.trigger.duration_to_jump_backward"):(0,h.t)("proto.trigger.duration_to_jump_forward"),L=(0,o.jsx)(S.dE,{className:"prototype_video_action_options--timeAmountContainer--5kpHn","data-tooltip":R,"data-tooltip-type":e7.Ib.TEXT,dataTestId:"mediaSkipByAmount-input",dispatch:I,max:3600,onValueChange:e=>{n({mediaSkipByAmount:e}),I((0,x._P)({name:"Media skip by amount changed",params:{value:e}}))},recordingKey:u.Pt(l,"mediaSkipByAmountInput"),scrubMultiplier:f/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaSkipByAmount||5,wheelMultiplier:f/1e3});return d?y?(0,o.jsx)(w.A,{input:O,label:(0,h.t)("proto.video_options.behavior"),labelId:b}):g?(0,o.jsx)(w.A,{input:j,label:(0,h.t)("proto.video_options.behavior"),labelId:P}):_?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.A,{input:D,label:(0,h.t)("proto.video_options.direction"),labelId:C}),(0,o.jsx)(w.A,{input:L,label:(0,h.t)("proto.video_options.offset")})]}):p?(0,o.jsx)(w.A,{input:k,label:(0,h.t)("proto.video_options.timestamp")}):(0,o.jsxs)(M.fI,{children:[y&&O,g&&j,_&&D,_&&L,p&&k]}):null}var tg=n(748624);let tv=({onUpdateTransitionNodeID:e})=>{let t=(0,r.wA)();return i.useCallback((n,o)=>{let i=l.sH(n);i&&e(i),t((0,x._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(o),destinationTlfId:n}}))},[t,e])};function tI({action:e,recordingKey:t,interactionType:n,onActionChange:s,updateMultipleDestinationNodes:h,updateSelectionProperties:g,stateManagementVersion:T,autoOpenVariablePicker:E,autoOpenExpressionBuilder:A,setAutoOpenExpressionBuilder:b,...O}){let P=(0,r.wA)(),j=(0,I.Um)(),{scene:S}=(0,d.R)(e=>({scene:e.mirror.sceneGraph})),C=(0,y.cJ)(),D=(0,ee.YT)(),k=D===ee.Oz.SINGLE_COL,w=D===ee.Oz.TWO_COL,R=i.useContext(eD.c),L=w&&R===eD.P.RIGHT,M="SET_VARIABLE"===(0,v.E7)(e.connectionType),U="SET_VARIABLE_MODE"===(0,v.E7)(e.connectionType),K="CONDITIONAL"===(0,v.E7)(e.connectionType),B="INTERNAL_NODE"===(0,v.E7)(e.connectionType),V="INTERNAL_NODE"===(0,v.E7)(e.connectionType)&&"SWAP_STATE"===(0,v.E7)(e.navigationType),F="URL"===(0,v.E7)(e.connectionType),Y=B||"BACK"===(0,v.E7)(e.connectionType)||"CLOSE"===(0,v.E7)(e.connectionType),H="UPDATE_MEDIA_RUNTIME"===(0,v.E7)(e.connectionType),G=(0,r.d4)(e=>{let t=e.mirror.selectionProperties.numSelected,n=e.mirror.selectionProperties.numVideosSelected;return 1===t&&!!n}),z=(0,N.uQ)(),W=[],X=[];if(z&&a.X3B){let{viableIds:e,disabledIds:t}=a.X3B.getVideoNodesOnSameTlfAsNode(z);W=e,X=t}let $=l.dI((0,v.E7)(e.transitionNodeID)),Z=null!=$&&$!==l.AD,q=B&&(!(0,v.hS)(e.transitionNodeID)||Z)&&!(C&&!V&&"SCROLL_TO"!==(0,v.E7)(e.navigationType)),Q=(0,v.E7)(e.navigationType),et=B&&"OVERLAY"===(0,v.E7)(Q),en=(0,ee.hU)(e.transitionType,e.easingType,e.easingFunction,e.transitionDuration,e.transitionShouldSmartAnimate,e.transitionPreserveScroll,e.transitionResetVideoPosition,e.openUrlInNewTab,e.transitionResetScrollPosition,e.transitionResetInteractiveComponents),eo=Y&&!et&&("INSTANT"===en.behavior||"DISSOLVE"===en.behavior),ei=!H&&(0,ee.oc)(e),er=(0,ee.GB)(e),ea=(0,ee.uU)(T)?eo||ei:(0,ee.Fp)(T,e.connectionType,e.navigationType),{selectedInteractions:el}=(0,tg.Ay)(f.J.NORMAL),es=el.map(e=>e.sourceNodeID&&e.id?p.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0).filter(e=>void 0!==e),ec=tv({onUpdateTransitionNodeID:e=>{g({transitionNodeID:e})}}),ed=e=>ec(e,es),ep=i.useCallback(e=>{h(e),P((0,x._P)({name:"Variant based prototyping UI changed",params:{source:"panel"}})),P((0,x._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(es)}}))},[h,P,es]),eu=i.useCallback(e=>{g({connectionURL:e.target.value})},[g]),em=(0,m.Od)(e),ey=c()({[tl.Ti]:O.isNestedInConditional&&!k&&!L}),eg=B&&!V;return(0,o.jsxs)("div",{className:ey,children:[eg&&(0,o.jsx)(tx,{action:e,interactionType:n,updateSelectionProperties:g,recordingKey:t,actionIndexPath:O.actionIndexPath}),F&&(0,o.jsx)(tr,{action:e,recordingKey:t,onOpenInNewTabChange:e=>{g({openUrlInNewTab:e}),P((0,x._P)({name:"Open Url In New Tab Changed",params:{value:e}}))},onURLChange:eu}),H&&(0,o.jsx)(to,{dropdownShown:j,scene:S,targetVideoNodeID:e.transitionNodeID||l.Hr,recordingKey:u.Pt(t,"targetVideoDropdown"),viableSameFrameVideoIds:W,disabledSameFrameVideoIds:X,isVideoSelected:G,onChange:ed}),(0,o.jsx)(ty,{dropdownShown:j,action:e,onChange:s,updateSelectionProperties:g,recordingKey:t}),M&&(0,o.jsx)("div",{children:(0,o.jsx)(eX,{action:em,autoOpenVariablePicker:E,className:tl.PB,dispatch:P,isNarrowPanel:O.isNestedInConditional||O.isNarrowPanel,isNestedInConditional:O.isNestedInConditional,nodeId:e.transitionNodeID||l.Hr,onChange:ed,recordingKey:u.Pt(t,"setVariableControls"),targetVariable:e.targetVariable||{id:""},targetVariableData:e.targetVariableData,updateSelectionProperties:g})}),U&&(0,o.jsx)("div",{children:(0,o.jsx)(e$.I,{dispatch:P,targetVariableSetID:e.targetVariableSetID,targetVariableModeID:e.targetVariableModeID,deprecatedTargetVariableSetKey:e.targetVariableSetKey,updateSelectionProperties:g,recordingKey:u.Pt(t,"setVariableControls"),actionIndexPath:O.actionIndexPath.join(",")})}),K&&(L?(0,o.jsx)(eh,{recordingKey:u.Pt(t,"conditionalActionSection","conditional-block",0),autoOpenExpressionBuilder:A,setAutoOpenExpressionBuilder:b,updateSelectionProperties:g,conditionalActions:(0,v.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]}):(0,o.jsx)(e_,{action:e,actionIndexPath:O.actionIndexPath,autoOpenVariablePicker:E,expandedRows:O.expandedRows,handleMouseDownUI3:O.handleMouseDownUI3,interactionType:n,onDrop:O.onDrop,onExpand:O.onExpand,onNewActionAdded:O.onNewActionAdded,onSelect:O.onSelect,recordingKey:u.Pt(t,"conditionalActionSection"),selectedActionIndex:O.selectedActionIndex,selectedInteractions:O.selectedInteractions,stateManagementVersion:T,updateMultipleDestinationNodes:h,updateSelectionProperties:g})),V&&(0,o.jsx)("div",{className:_.s.ml0.$,children:(0,o.jsx)(ej,{onChange:ep,nodeId:e.transitionNodeID||l.Hr,recordingKey:u.Pt(t,"consumption"),actionIndexPath:O.actionIndexPath})}),q&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:tl.x}),(0,o.jsx)(J.X7,{transition:en,interactionType:n,navigationType:e.navigationType,recordingKey:u.Pt(t,"animationPanel"),updateSelectionProperties:g,isNarrowPanel:O.isNestedInConditional||O.isNarrowPanel,stateManagementVersion:T})]}),ea&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:tl.x}),(0,o.jsx)(e8,{connectionType:e.connectionType,navigationType:e.navigationType,recordingKey:u.Pt(t,"stateManagementPanel"),selectedInteractions:O.selectedInteractions,showPreserveScrollPosition:eo,showResetInteractiveComponentState:!!er,showResetVideoState:!!ei,stateManagementVersion:T,transition:en,updateSelectionProperties:g})]})]})}function tx({action:e,interactionType:t,updateSelectionProperties:n,actionIndexPath:r,recordingKey:a,setPropertiesForAnchorLink:s,hideXOffset:c,renderWithIconSpacing:_}){let{scene:y}=(0,d.R)(e=>({scene:e.mirror.sceneGraph})),I="INTERNAL_NODE"===(0,v.E7)(e.connectionType),x=(0,m.Od)(e),N=l.dI((0,v.E7)(e.transitionNodeID)),T=null!=N&&N!==l.AD,E=I&&"OVERLAY"===(0,v.E7)(e.navigationType)&&T,A=(0,v.E7)(e.navigationType),b=I&&"OVERLAY"===(0,v.E7)(A),O=I&&(b||"SWAP"===(0,v.E7)(A)),P=i.useId(),{selectedInteractions:j}=(0,tg.Ay)(f.J.INHERITED_INTERNAL),S=j.map(e=>e.sourceNodeID&&e.id?p.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0).filter(e=>void 0!==e),C=tv({onUpdateTransitionNodeID:e=>{if(s){s({transitionNodeID:e});return}n?n({transitionNodeID:e}):g.Y5.updateSelectionProperties({transitionNodeID:e})}}),D=(0,o.jsx)(eP,{action:x,ariaLabelledBy:P,nodeId:e.transitionNodeID||l.Hr,onChange:e=>C(e,S),recordingKey:u.Pt(a,"destinationDropdown"),scene:y}),k=(0,o.jsx)(ts,{action:x,showScrollToOptions:"SCROLL_TO"===x,extraScrollOffset:e.extraScrollOffset,updateSelectionProperties:n||g.Y5.updateSelectionProperties,recordingKey:u.Pt(a,"scrollOptionsPanel"),setPropertiesForAnchorLink:s,hideXOffset:c,renderWithIconSpacing:_}),R=r?(0,o.jsx)(Y,{interactionType:t,updateSelectionProperties:n||g.Y5.updateSelectionProperties,recordingKey:u.Pt(a,"overlaySettings"),actionIndexPath:r,nodeId:e.transitionNodeID||l.Hr}):null,L=O?(0,h.t)("proto.overlay"):(0,h.t)("proto.destination"),M=_?(0,o.jsx)(et.DE,{label:null,input:(0,o.jsxs)("div",{className:tl.G_,children:[(0,o.jsx)("div",{id:P,"aria-hidden":"true",className:tl.aB,"data-non-interactive":!0,children:L}),(0,o.jsx)("div",{className:tl.w1,children:D})]}),icon:null}):(0,o.jsx)(w.A,{labelId:P,label:L,input:D});return(0,o.jsxs)(o.Fragment,{children:[M,k,E&&R]})}},831797:(e,t,n)=>{n.d(t,{P:()=>et});var o=n(104076),i=n(716976),r=n(903927);let a=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M11.5 6a.5.5 0 0 1 .5.5V11a1 1 0 0 0 1 1h4.5a.5.5 0 0 1 0 1H13a2 2 0 0 1-2-2V6.5a.5.5 0 0 1 .5-.5",clipRule:"evenodd"})})});var l=n(795033),s=n(511570),c=n.n(s),d=n(559954),p=n(308424),u=n(641518),_=n(365120),h=n(192075),m=n(241421),y=n(506192),g=n(205088),v=n(816299),I=n(623411),x=n(790009),f=n(266808),N=n(812714);n(120440);var T=n(997477),E=n(553065),A=n(951770),b=n(540864),O=n(167151);function P({formatter:e,value:t,disabled:n}){return(0,o.jsx)(v.c$,{value:t,disabled:n,children:(0,o.jsxs)("div",{className:"x78zum5 x6s0dn4 x167g77z",children:[(0,o.jsx)("div",{className:"x78zum5 x6s0dn4 x1kky2od xlup9mm",children:(0,o.jsx)(x.J,{mode:"dark",children:"MIXED"===t?(0,o.jsx)("div",{className:"x1kky2od xlup9mm"}):(0,o.jsx)(j,{action:t})})}),(0,o.jsx)("div",{children:"MIXED"===t?(0,h.tx)("fullscreen.mixed"):e.format(t)})]})})}function j({action:e}){return(0,o.jsx)("div",{className:"prototype_action_dropdown--prototypeActionIcon--qChhY",children:(0,A.av)(e)})}function S(e){let t=`prototype-action-select-${e.recordingKey}`,n=e.dropdownShown&&e.dropdownShown.type===t,i=(0,E.E7)(e.action),a=(0,A.av)(i),l=(0,r.d4)(b.ZM),s=new m.js(!0,l),c=new m.Z6(!0,l),d=!(0,r.d4)(e=>e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0);return(0,o.jsx)("div",{id:t,children:(0,o.jsxs)(v.bL,{onChange:e.onChange,value:e.action,recordingKey:u.Pt(e,"select"),children:[(0,o.jsx)(v.l9,{"data-testid":"action-select",disabled:d,iconLead:(0,o.jsx)("div",{className:"x180r7m8",children:a}),label:(0,o.jsx)(I.h,{children:(0,h.tx)("proto.action")}),width:"fill",children:(0,E.gl)(e.action)?(0,h.t)("fullscreen.mixed"):null}),(0,o.jsx)(v.mc,{children:function(e,t){let n=(0,O.cJ)(),i=(0,o.jsx)(P,{formatter:t,value:"NONE",disabled:!1},"NONE"),r=(0,o.jsx)(P,{formatter:t,value:"NAVIGATE_TO",disabled:!1},"NAVIGATE_TO"),a=(0,o.jsx)(P,{formatter:t,value:"SWAP_STATE_TO",disabled:!f.glU.isSelectionContainedInStateOrStateInstance()},"SWAP_STATE_TO"),l=(0,o.jsx)(P,{formatter:t,value:"GO_BACK",disabled:!1},"GO_BACK"),s=(0,o.jsx)(P,{formatter:t,value:"SCROLL_TO",disabled:!1},"SCROLL_TO"),c=(0,o.jsx)(P,{formatter:t,value:"OPEN_URL",disabled:!1},"OPEN_URL"),d=(0,o.jsx)(P,{formatter:t,value:"OPEN_OVERLAY",disabled:!1},"OPEN_OVERLAY"),p=(0,o.jsx)(P,{formatter:t,value:"SWAP_WITH",disabled:!1},"SWAP_WITH"),u=(0,o.jsx)(P,{formatter:t,value:"CLOSE_OVERLAY",disabled:!1},"CLOSE_OVERLAY"),_=(0,o.jsx)(P,{formatter:t,value:"SET_VARIABLE",disabled:!1},"SET_VARIABLE"),h=(0,N.kc)().prototype_set_mode_action&&(0,o.jsx)(P,{formatter:t,value:"SET_VARIABLE_MODE",disabled:!1},"SET_VARIABLE_MODE"),m=!e.isNestedInConditional&&(0,o.jsx)(P,{formatter:t,value:"CONDITIONAL",disabled:!1},"CONDITIONAL"),y=(0,o.jsx)(v.wv,{},"first-divider"),g=(0,o.jsx)(v.wv,{},"second-divider"),I=(0,o.jsx)(v.wv,{},"third-divider"),{getConfig:x}=(0,T.I7)("exp_prototyping_reorder_actions"),A=!!x().getValue("new_ordering",!1),b=n?[a,l,s,y,_,m]:A?[i,y,r,a,l,s,c,g,_,h,m,I,d,p,u]:[i,y,r,a,l,s,c,g,d,p,u,I,_,h,m];if(e.showVideoActions&&!n){let e=[(0,o.jsx)(v.wv,{},"fourth-divider"),(0,o.jsx)(P,{formatter:t,value:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",disabled:!1},"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS"),(0,o.jsx)(P,{formatter:t,value:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",disabled:!1},"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS"),(0,o.jsx)(P,{formatter:t,value:"UPDATE_MEDIA_SKIP_TO",disabled:!1},"UPDATE_MEDIA_SKIP_TO"),(0,o.jsx)(P,{formatter:t,value:"UPDATE_MEDIA_SKIP_BY_OPTIONS",disabled:!1},"UPDATE_MEDIA_SKIP_BY_OPTIONS")];b=b.concat(e)}return(0,E.gl)(e.action)&&(b=[(0,o.jsx)(P,{formatter:t,value:"MIXED",disabled:!0},"MIXED"),(0,o.jsx)(v.wv,{},"mixed-divider")].concat(b)),b.filter(Boolean)}(e,n?s:c)})]})})}var C=n(951002),D=n(684742),k=n(264993),w=n(513674),R=n(236631),L=n(371952),M=n(316923),U=n(316325),K=n(389724),B=n(660838),V=n(13073),F=n(487375),Y=n(294044);let H="prototype_action_verbose_title--actionNameInsertion--aF4kI",G="prototype_action_verbose_title--actionName--qWJL3",z="prototype_action_verbose_title--actionNameUI3--JAYsG",W=()=>{let e=(0,r.d4)(e=>e.mirror.sceneGraph);return i.useMemo(()=>new m.cP(e),[e])};function J({action:e,isNestedInConditional:t,isNarrowPanel:n,onClick:r}){let a=(0,B.YT)()===B.Oz.TWO_COL,l=i.useContext(K.c),s=a&&l===K.P.LEFT,d=t||n,p=(0,L.u)((0,E.hS)(e.targetVariable)&&e.targetVariable&&"id"in e.targetVariable?e.targetVariable?.id:void 0),u=(0,E.hS)(e.targetVariable)&&e.targetVariable&&"nodeFieldAlias"in e.targetVariable?(0,U.aA)(e.targetVariable.nodeFieldAlias.stablePathToNode,e.targetVariable.nodeFieldAlias.indexOrKey):void 0,_=p?.name??u?.name,y=W(),g=new m.Z6(!0),v=(0,m._X)(e),I=(0,E.E7)(v),x=(0,A.av)(I),N=e=>{if(!e.connectionType||(0,E.gl)(e.connectionType))return null;let t=c()({[G]:!0,[z]:a}),n=c()({"prototype_action_verbose_title--actionDestination--JZ-gU":!0,"prototype_action_verbose_title--actionDestinationUI3--ZGxbq":a});switch(e.connectionType){case"NONE":case"SET_VARIABLE_MODE":case"OBJECT_ANIMATION":return null;case"INTERNAL_NODE":case"BACK":case"CLOSE":case"UPDATE_MEDIA_RUNTIME":{let i=e.transitionNodeID;if((0,E.gl)(i))return(0,o.jsx)("div",{className:t,children:(0,h.t)("proto.variant_actions.mixed")});if(void 0===i||k.aI(i,k.Hr))return null;let r=k.dI(i),a=y.format(r);return(0,o.jsx)("div",{className:n,children:a})}case"URL":{let i=e.connectionURL;if(!i)return null;if((0,E.gl)(i))return(0,o.jsx)("div",{className:t,children:(0,h.t)("proto.variant_actions.mixed")});return(0,o.jsx)("div",{className:n,children:i})}case"SET_VARIABLE":if(!e.targetVariableData||(0,E.gl)(e.targetVariableData))return null;return(0,o.jsx)("div",{className:"prototype_action_verbose_title--setVariablePreviewContainer--6omxy",children:(0,o.jsx)(M.y3,{targetVariableData:e.targetVariableData,showVariableThumbnails:!1,isNarrowPanel:d,isInConditional:!0})});case"CONDITIONAL":{if((0,E.gl)(e)||(0,E.gl)(e.conditionalActions)||!e.conditionalActions)return null;let t=e.conditionalActions.length>0?e.conditionalActions[0].condition:void 0;return(0,o.jsx)(M.y3,{targetVariableData:t,isInConditional:!0,showVariableThumbnails:!1})}default:(0,C.xb)(e.connectionType)}},T=c()({[R.s.block.bgTransparent.$]:!0,"prototype_action_verbose_title--buttonResetTextAlign--gy69p":!0,"prototype_action_verbose_title--buttonFocusOutline--YmAoD":!0,[Y.Li]:d&&!a,[Y.O8]:!d&&!a,[Y.kE]:a}),b=c()({"prototype_action_verbose_title--iconContainer--jqarD":!0,"prototype_action_verbose_title--iconContainerUI3--yBP0-":a});return(0,o.jsx)(D.E,{className:T,onClick:r,children:(0,o.jsxs)(w.Y1,{horizontalAlignItems:"space-between",width:"fill-parent",children:[(0,o.jsx)("div",{className:b,children:x}),(e=>{let t=I?g.format(I):"Undefined",n=c()({[G]:!0,[z]:a});if(((0,E.gl)(e.connectionType)||(0,E.gl)(v))&&(t=(0,h.t)("fullscreen.mixed")),!e.connectionType||(0,E.gl)(e.connectionType)||"NONE"===e.connectionType||"BACK"===e.connectionType||"CLOSE"===e.connectionType)return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:n,children:t})});var i=N(e);switch(e.connectionType){case"INTERNAL_NODE":if("SWAP_STATE"===e.navigationType)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:(0,h.t)("proto.action_change_to")}),i]});if(i){if("OVERLAY"===e.navigationType)return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:H,children:(0,h.tx)("proto.action_overlay_title",{overlayFrameName:(0,o.jsx)("span",{children:i})})})});if("SWAP"===e.navigationType)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:(0,h.t)("proto.action_swap_overlay_title")}),i]})}return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:t}),i]});case"UPDATE_MEDIA_RUNTIME":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:t}),i]});case"URL":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:i?(0,h.t)("proto.action_url_title"):(0,h.t)("proto.action_open_link")}),i]});case"SET_VARIABLE":{let r=e.targetVariableData&&(0,E.hS)(e.targetVariableData)&&e.targetVariableData.resolvedType===f.rXF.COLOR,l=c()({"prototype_action_verbose_title--actionNameInsertionColor--isir- prototype_action_verbose_title--actionNameInsertion--aF4kI":!0,"prototype_action_verbose_title--actionNameInsertionColorUI3--Apj0i":a});if(_&&i)return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:r?l:H,children:(0,h.tx)("proto.action_set_variable_title",{variableName:(0,o.jsx)("span",{className:"prototype_action_verbose_title--variableNameContainer--XeJX2",children:(0,o.jsx)(F.wG,{text:_,isDeleted:!!p&&(0,V.eF)(p),disableHover:s})}),variableValue:(0,o.jsx)("span",{className:"prototype_action_verbose_title--variableDestinationContainer--RXbKo prototype_action_verbose_title--variableNameContainer--XeJX2",children:i})})})});return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:n,children:t})})}case"SET_VARIABLE_MODE":return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:n,children:(0,h.t)("proto.action_set_variable_mode")})});case"CONDITIONAL":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:a?(0,h.t)("proto.if"):(0,h.t)("proto.action_conditional_title")}),i]});case"OBJECT_ANIMATION":return(0,o.jsx)(o.Fragment,{});default:(0,C.xb)(e.connectionType)}})(e)]})})}var X=n(506426),$=n(637499),Z=n(694908),q=n(39456),Q=n(818706);let ee=Symbol("ACTION_ROW");function et({updateMultipleDestinationNodes:e,updateSelectionProperties:t,onDeleteAction:n,stateManagementVersion:s,selectedInteractions:v,autoOpenVariablePicker:I,autoOpenExpressionBuilder:x,setAutoOpenExpressionBuilder:f,...N}){let T=(0,r.wA)(),{shouldShowAdvancedPrototypingPaywall:E,showAdvancedPrototypingVariablesModal:A,showAdvancedPrototypingConditionalActionsModal:b}=(0,B.zt)(),O=(0,y.Um)(),P=(0,B.hP)(),{firstVariableSetMode:j,firstVariableSetID:C}=(0,X.b)(),D=N.action,k=N.isNestedInConditional&&(0,q.qQ)(N.action),w=!!D.connectionType&&"CONDITIONAL"===D.connectionType,R=(0,B.YT)(),L=R===B.Oz.SINGLE_COL,M=R===B.Oz.TWO_COL,U=i.useContext(K.c),V=M&&U===K.P.RIGHT,F=M&&U===K.P.LEFT;var H=N.selectedActionIndex.equals(N.actionIndexPath);let G=1===N.selectedActionIndex.path.length&&N.isNestedInConditional&&N.actionIndexPath[0]===N.selectedActionIndex.path[0];var z=void 0===N.expandedRows||void 0!==N.expandedRows.find(e=>e.equals(N.actionIndexPath));z=!!L||!F||w;let[W,et]=i.useState(!1);i.useEffect(()=>{if(w){let e=setTimeout(()=>{et(!0)},0);return()=>clearTimeout(e)}et(!0)},[w]);let en=w&&!z,eo=w&&z,ei=i.useRef(null),[er,ea]=(0,l.fp)(B.hV),{position:el,dragItem:es}=(0,d.h4)(()=>({type:ee,element:ei,item:{action:N.action,actionIndexPath:new q.Op(N.actionIndexPath)},dropPositionThreshold:eo?.2:en?1/3:.5,getDeepestTargetOnly:!0,canDrag:!!F||!z,onDrop(e){N.onDrop(e),ea(!0)}})),ec=i.useMemo(()=>{let e=ei.current;if(!e||!el||V)return;if(es&&"CONDITIONAL"===es.connectionType&&N.isNestedInConditional||(0,q.qQ)(es)){ea(!1);return}let t=k?d.Nz.BEFORE:el;var n=void 0;let o=e.offsetParent?.firstElementChild?.scrollTop??0;return t===d.Nz.BEFORE?n=e.offsetTop-o:t===d.Nz.AFTER&&(n=e.offsetTop+e.offsetHeight-o),ea(!0),n},[el,V,es,N.isNestedInConditional,k,ea]),ed=el&&w&&!z&&el===d.Nz.INSIDE&&"CONDITIONAL"!==es.connectionType,ep=u.rf(N.recordingKey,"click",e=>{N.onSelect(N.actionIndexPath,!0)}),eu=u.rf(N.recordingKey,"mousedown",e=>{(0,q.qQ)(N.action)||N.onSelect(N.actionIndexPath,!0)}),e_=e=>{var n=!0,o=!1;switch(e){case"NONE":t({connectionType:"NONE"});break;case"NAVIGATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE"});break;case"OPEN_OVERLAY":t({connectionType:"INTERNAL_NODE",navigationType:"OVERLAY"});break;case"SCROLL_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SCROLL_TO"});break;case"SWAP_WITH":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP"});break;case"SWAP_STATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP_STATE"});break;case"GO_BACK":t({connectionType:"BACK"});break;case"CLOSE_OVERLAY":t({connectionType:"CLOSE"});break;case"OPEN_URL":t({connectionType:"URL"});break;case"SET_VARIABLE":E?(n=!1,A()):(t({connectionType:"SET_VARIABLE"}),I.current=!0);break;case"SET_VARIABLE_MODE":E?(n=!1,A()):t({connectionType:"SET_VARIABLE_MODE",targetVariableSetID:C,targetVariableModeID:j});break;case"UPDATE_MEDIA_PLAY":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PLAY"});break;case"UPDATE_MEDIA_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PAUSE"});break;case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_PLAY_PAUSE"});break;case"UPDATE_MEDIA_MUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"MUTE"});break;case"UPDATE_MEDIA_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"UNMUTE"});break;case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_MUTE_UNMUTE"});break;case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_FORWARD"});break;case"UPDATE_MEDIA_SKIP_BACKWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_BACKWARD"});break;case"UPDATE_MEDIA_SKIP_TO":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_TO"});break;case"CONDITIONAL":o=!0,E?(n=!1,b()):(t({connectionType:"CONDITIONAL"}),f&&f(!0))}if(M&&N.onExpand(N.actionIndexPath,o),n){let t=v.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>p.d({nodeID:e.sourceNodeID,interactionID:e.id}));T((0,g._P)({name:"Prototype action changed",params:{action:e,source:"panel",connectorIds:JSON.stringify(t)}}))}},eh=N.isNestedInConditional?Y.It:Y.ft,em=c()({[Y.wu]:!F,[Y.zX]:F&&er}),ey=(0,o.jsx)(a,{className:Y._2});if(k&&N.onAddAction)return(0,o.jsxs)("div",{className:F?Y.LW:void 0,children:[ec&&(0,o.jsx)("hr",{className:eh,style:{transform:`translateY(${ec}px)`}}),F&&N.isNestedInConditional&&ey,(0,o.jsx)("div",{className:em,ref:ei,children:(0,o.jsx)(Z.t,{addButtonPressed:N.onAddAction,recordingKey:u.Pt(N.recordingKey,"addAction"),isNestedInConditional:!0})})]});let eg=(0,m._X)(D),ev="NONE"!==eg,eI=(z||!ev)&&!F,ex=N.numActions>1,ef=c()({[Y.$l]:!0,[Y.KY]:F&&!N.isNestedInConditional,[Y.Iw]:F&&!N.isNestedInConditional&&er,[Y.DM]:F&&N.isNestedInConditional,[Y.vs]:F&&N.isNestedInConditional&&er,[Y.M9]:F&&N.isNestedInConditional&&G&&er,[Y.I_]:F&&w&&!H&&er,[Y.PE]:H&&F&&!N.isNestedInConditional,[Y.Ze]:ed}),eN=c()({[Y.rn]:!0,[Y.Gu]:F,[Y.Yo]:N.isNestedInConditional&&!V}),eT=(0,o.jsx)(J,{action:D,isNestedInConditional:N.isNestedInConditional,isNarrowPanel:N.isNarrowPanel&&ex,onClick:ep}),eE=(0,o.jsx)(S,{dispatch:T,dropdownShown:O,onChange:e_,action:eg,recordingKey:u.Pt(N.recordingKey,"actionDropdown"),showVideoActions:P,isNestedInConditional:N.isNestedInConditional}),eA=eI?eE:eT,eb=(0,o.jsx)(_.S.div,{className:eN,children:L||V?(0,o.jsx)(Q.A,{label:(0,h.t)("proto.action"),input:eA}):eA}),eO=c()({[Y.Oe]:!0,[Y.h2]:H,[Y.Ob]:w});return(0,o.jsxs)("div",{className:ef,ref:ei,children:[void 0!==ec&&(0,o.jsx)("hr",{className:eh,style:{transform:`translateY(${ec}px)`}}),F?(0,o.jsxs)("div",{className:eO,children:[N.isNestedInConditional&&ey,eb]}):eb,z&&W&&(0,o.jsx)($.x,{action:D,actionIndexPath:N.actionIndexPath,autoOpenExpressionBuilder:x,autoOpenVariablePicker:I,expandedRows:N.expandedRows,handleMouseDownUI3:eu,interactionType:N.interactionType,isNarrowPanel:N.isNarrowPanel,isNestedInConditional:N.isNestedInConditional,onActionChange:e_,onDrop:N.onDrop,onExpand:N.onExpand,onNewActionAdded:N.onNewActionAdded,onSelect:N.onSelect,recordingKey:N.recordingKey,selectedActionIndex:N.selectedActionIndex,selectedInteractions:v,setAutoOpenExpressionBuilder:f,stateManagementVersion:s,updateMultipleDestinationNodes:e,updateSelectionProperties:t})]})}},694908:(e,t,n)=>{n.d(t,{h:()=>x,t:()=>f});var o=n(104076),i=n(716976),r=n(903927),a=n(803126),l=n(511570),s=n.n(l),c=n(641518),d=n(352630),p=n(192075),u=n(241421),_=n(951770),h=n(506192),m=n(278052),y=n(405223),g=n(167151),v=n(660838),I=n(294044);let x=e=>`interaction-panel-create-action-${e}`;function f(e){let t=x(e.recordingKey);var{showing:n,toggle:l,hide:f}=(0,h.BK)(t);let N=(0,i.useRef)(null),{recordingKey:T,addButtonPressed:E,presetInteractions:A,isLayoutNodeSelected:b}=e,{shouldShowAdvancedPrototypingPaywall:O,showAdvancedPrototypinglMultipleActionsModal:P}=(0,v.zt)(),j=(0,i.useCallback)(()=>{!e.skipPaywall&&O?P():l()},[e.skipPaywall,O,P,l]),S=(0,v.YT)()===v.Oz.TWO_COL,C=(0,v.hP)(),D=(0,g.cJ)(),k=(0,v.He)({showVideoActions:C,isNestedInConditional:e.isNestedInConditional,isSites:D,isUI3:!0,showPresetActions:!!e.presetInteractions,isLayoutNodeSelected:b}),w=(0,r.wA)(),R=(0,i.useCallback)(e=>{E((0,v.Bs)(e)),f()},[E,f]),L=s()({[I.x1]:e.renderButton,[I.xm]:!e.renderButton&&!S,[I.U3]:!e.renderButton&&S}),M=[];k.forEach(e=>{(0,v.vc)(e)?M.push(m.w):e===v.Xk&&A?.length?M.push(...A,m.w):M.push(function({actionType:e,clickCb:t,recordingKey:n,isUI3:o}){let i=(0,_.av)(e),r=new u.Z6(o),a=e?r.format(e):"Undefined";return{type:e,className:I.BP,callback:()=>t(e),icon:i,displayText:a,recordingKey:c.Pt(n,"createActionOption",e),"data-onboarding-key":`create-action-${e}`}}({clickCb:R,recordingKey:T,actionType:e,isUI3:!0}))});let U=e.isNestedInConditional?(0,p.t)("proto.prototype_panel.add_nested_action"):D?(0,p.t)("sites.panel.add_interaction"):(0,p.t)("proto.prototype_panel.add");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.e6,{ref:N,recordingKey:c.Pt(T,"createActionDropdown"),className:L,onClick:j,"aria-label":(0,p.t)("proto.prototype_panel.create_action_button"),htmlAttributes:{"data-tooltip":U,"data-tooltip-type":"text"},children:e.renderButton?(0,o.jsx)(a.e,{}):(0,p.tx)("fullscreen.properties_panel.click_plus_to_add_new_action")}),n&&N.current&&(0,o.jsx)(y.j,{dataTestId:e.dataTestId,dispatch:w,hidePointWhenContentOffScreen:!0,items:M,lean:"center",minWidth:130,onSelectItem:e=>e.callback?.(),parentRect:N.current.getBoundingClientRect(),recordingKey:"actionDropdown",showPoint:!0})]})}},682944:(e,t,n)=>{n.d(t,{Z0:()=>e8});var o=n(104076),i=n(716976),r=n(903927),a=n(951002),l=n(662812),s=n(264993),c=n(641518),d=n(836982),p=n(192075),u=n(244205),_=n(111297),h=n(406954),m=n(354114),y=n(968169),g=n(772523),v=n(553065),I=n(754446),x=n(205088),f=n(563554),N=n(546547),T=n(369049),E=n(240347),A=n(224781),b=n(902892),O=n(816299),P=n(623411);let j=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M15 5H9a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1M9 4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z",clipRule:"evenodd"})})}),S=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M18 8H6a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1M6 7a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z",clipRule:"evenodd"})})});var C=n(795033),D=n(337059),k=n(41076),w=n(894210),R=n(950241),L=n(501883),M=n(361170),U=n(850701),K=n(278491),B=n(386958),V=n(391145),F=n(239395),Y=n(813371),H=n(788613);function G(e){let t=i.useRef(null),{dispatch:n,pickerShown:r,prototypeBackgroundColor:a}=e,l=i.useCallback(()=>{let e=t.current;if(r&&r.id===K.$T)n(U.XE());else if(e&&e instanceof HTMLElement){let t=(0,B.cn)(e);n(U.u1({id:K.$T,initialX:t.x,initialY:t.y}))}},[n,r]),s=i.useCallback((e,t)=>{n((0,x._P)({name:"Prototype Background Modified"})),m.Y5.updateSelectionProperties({prototypeBackgroundColor:e},{shouldCommit:t})},[n]),d=(0,v._W)(a,{r:0,g:0,b:0,a:1}),u=(0,o.jsxs)("div",{className:"prototype_background_panel--colorValueContainer--CEbzl paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",children:[(0,o.jsx)(V.J,{onClick:l,color:d,opacity:d.a,recordingKey:c.Pt(e,"chit"),className:"prototype_background_panel--chit--F--d0 paint_panels--chit--twQEy"}),(0,o.jsx)(P.h,{htmlFor:"prototype-background-color-picker",children:(0,p.t)("presets.device_panel.background_color")}),(0,o.jsx)(Y.AN,{id:"prototype-background-color-picker",className:"prototype_background_panel--color--e5Pc8 paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:k.TI,property:d,onChange:s,recordingKey:c.Pt(e,"colorInput"),noBorderOnFocus:!0})]});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(H.TN,{ref:t,children:u}),r&&r.id===K.$T&&(0,o.jsx)(F.h,{disabledVariableIds:new Set,initialPosition:new M.Mi(r.initialX??0,r.initialY??0),color:d,boundVariable:null,onChange:s,recordingKey:c.Pt(e,"colorPicker")})]})}var z=n(737139),W=n(152783),J=n(423006);let X="prototype_device_panel--deviceOption--rvW-q",$="prototype_device_panel--inactiveLabel--UEKyk raw_components--iconInsideBorderFocusWithin--2g7fO",Z="prototype_device_panel--labelInactive--pv4Sf";class q extends i.PureComponent{constructor(){super(...arguments),this.deviceInfo=()=>D.hY[this.props.prototypeDevice.presetIdentifier],this.shouldShowModelDropdown=()=>{let e=this.deviceInfo();return D.yr[e?.deviceName||""].length>1},this.onModelChange=e=>{if(!this.deviceInfo())return;let t=D.hY[e];if(!t)return;let n=this.props.prototypeDevice.rotation;m.Y5.updateSelectionProperties({prototypeDevice:{type:"PRESET",size:t.framePresetSize,presetIdentifier:e,rotation:n}})},this.renderModelDropdown=(e,t,n)=>{if(!e)return;let i=(0,o.jsx)(et,{presetIdentifier:this.deviceInfo().presetIdentifier,onChange:this.onModelChange,recordingKey:c.Pt(this.props,"modelDropdown")}),r=t?(0,o.jsx)(H.dx,{left:i,right:n}):(0,o.jsx)(H.TN,{children:i});return(0,o.jsxs)("div",{children:[!this.props.isUI3&&(0,o.jsx)(z.hl,{children:(0,o.jsx)(z.nV,{className:Z,children:(0,p.tx)("presets.device_panel.model")})}),this.props.isUI3?r:(0,o.jsx)(z.fI,{children:i})]})},this.cssForCurrentDeviceRotation=()=>{if("NONE"===this.props.prototypeDevice.type)return;let e="";switch("MICROSOFT_SURFACE_PRO_4"===this.props.prototypeDevice.presetIdentifier&&(e="scale(0.65)"),this.props.prototypeDevice.rotation){case"NONE":default:return;case"CCW_90":return`rotate(-90deg) ${e}`}},this.renderDevicePreview=()=>{let e=this.deviceInfo();if(!e)return;let t=(0,v._W)(this.props.prototypeBackgroundColor,{r:0,g:0,b:0,a:0}),n=k.z5.format(t),i=t.r>.9&&t.g>.9&&t.b>.9,r=`1px solid ${i?"#EFEFEF":"transparent"}`,a=(0,o.jsx)("div",{className:"prototype_device_panel--devicePreview--T2Tzn",style:{backgroundColor:n,border:r},children:(0,o.jsx)("img",{className:"prototype_device_panel--deviceImage--Wpr8Y",src:e.thumbnailUrl,style:{transform:this.cssForCurrentDeviceRotation()},alt:`${e.getI18nDeviceName()}`})});return(0,o.jsxs)("div",{children:[!this.props.isUI3&&(0,o.jsx)(z.hl,{children:(0,o.jsx)(z.nV,{className:Z,children:(0,p.tx)("presets.device_panel.preview")})}),this.props.isUI3?(0,o.jsx)(H.TN,{appendedClassName:J.Rk,children:a}):(0,o.jsx)("div",{className:"prototype_device_panel--devicePreviewContainer--pC-H4",children:a})]})},this.onChangeOrientation=e=>{let t=this.props.prototypeDevice;if("NONE"===t.type)return;let n=t.size.y>t.size.x,o=t.rotation;o=n?"PORTRAIT"===e?"NONE":"CCW_90":"PORTRAIT"===e?"CCW_90":"NONE",m.Y5.updateSelectionProperties({prototypeDevice:{...t,rotation:o}})},this.currentDeviceOrientation=()=>{let e=this.props.prototypeDevice;return"NONE"===e.type?"PORTRAIT":e.size.y>e.size.x?"NONE"===e.rotation?"PORTRAIT":"LANDSCAPE":"NONE"===e.rotation?"LANDSCAPE":"PORTRAIT"}}render(){let e=this.props.prototypeDevice,t=(0,o.jsx)(ee,{dispatch:this.props.dispatch,prototypeDevice:this.props.prototypeDevice,isUI3:this.props.isUI3,recordingKey:c.Pt(this.props,"deviceDropdown")}),n=(0,o.jsxs)(A.bL,{onChange:this.onChangeOrientation,recordingKey:c.Pt(this.props,"orientationControl"),value:this.currentDeviceOrientation(),legend:(0,o.jsx)(b.q,{children:(0,p.t)("presets.device_panel.rotation")}),children:[(0,o.jsx)(A.c$,{"aria-label":(0,p.t)("presets.device_panel.rotation.portrait"),value:"PORTRAIT",icon:(0,o.jsx)(j,{})}),(0,o.jsx)(A.c$,{"aria-label":(0,p.t)("presets.device_panel.rotation.landscape"),value:"LANDSCAPE",icon:(0,o.jsx)(S,{})})]}),i=(0,D.$X)(e.type||"NONE",e.presetIdentifier),r=(0,o.jsxs)(z.fI,{children:[t,i&&n]}),a=this.deviceInfo()&&this.shouldShowModelDropdown(),l=i&&!a?(0,o.jsx)(H.dx,{left:t,right:n}):(0,o.jsx)(H.TN,{children:t}),s=(0,o.jsx)(Q,{prototypeDevice:this.props.prototypeDevice,dispatch:this.props.dispatch,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:c.Pt(this.props,"deviceSizeInputs")});return(0,o.jsxs)(z.Zk,{children:[(0,o.jsx)(z.fI,{className:"prototype_device_panel--panelTitleRowOuter--wkKKy collapsible_property_panel--panelTitleRowOuter--i5K0R",children:(0,o.jsx)(L.Q,{innerRef:this.props.titleRef,extended:this.props.isUI3,doNotReserveSpaceForChevron:!0,forceNoChevron:!0,children:this.props.isUI3?(0,p.tx)("presets.device_panel.prototype_settings"):(0,p.tx)("presets.device_panel.device")})}),this.props.isUI3?l:r,this.renderModelDropdown(!!a,i,n),this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s,this.props.isUI3&&(0,o.jsx)(G,{pickerShown:this.props.pickerShown,dispatch:this.props.dispatch,prototypeBackgroundColor:this.props.prototypeBackgroundColor,recordingKey:c.Pt(this.props,"backgroundPanel")}),this.renderDevicePreview(),!this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s]})}}function Q(e){let t=i.useCallback(t=>{m.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:t,y:e.prototypeDevice.size.y},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.y,e.prototypeDevice.rotation]),n=i.useCallback(t=>{m.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:e.prototypeDevice.size.x,y:t},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.x,e.prototypeDevice.rotation]),r=(0,o.jsx)(R.$j,{bigNudgeAmount:e.bigNudgeAmount,className:"prototype_device_panel--scrubbableInputLeftCol--P2T66 prototype_device_panel--scrubbableInput--0TFVb","data-tooltip":(0,p.t)("presets.device_panel.device_width_tooltip"),"data-tooltip-type":w.Ib.TEXT,dispatch:e.dispatch,inputClassName:"prototype_device_panel--leftColInput--pAJSy prototype_device_panel--input--vNirJ",onValueChange:t,recordingKey:c.Pt(e,"deviceWidth"),smallNudgeAmount:e.smallNudgeAmount,tooltipForScreenReadersOnly:!0,value:e.prototypeDevice.size.x,children:(0,o.jsx)("span",{className:$,children:(0,p.tx)("proto.device_panel.width")})}),a=(0,o.jsx)(R.$j,{bigNudgeAmount:e.bigNudgeAmount,className:"prototype_device_panel--scrubbableInput--0TFVb","data-tooltip":(0,p.t)("presets.device_panel.device_height_tooltip"),"data-tooltip-type":w.Ib.TEXT,dispatch:e.dispatch,inputClassName:"prototype_device_panel--input--vNirJ",onValueChange:n,recordingKey:c.Pt(e,"deviceHeight"),smallNudgeAmount:e.smallNudgeAmount,tooltipForScreenReadersOnly:!0,value:e.prototypeDevice.size.y,children:(0,o.jsx)("span",{className:$,children:(0,p.tx)("proto.device_panel.height")})});return(0,o.jsx)(H.dx,{left:r,right:a})}q.displayName="PrototypeDevicePanel";class ee extends c.o6{constructor(){super(...arguments),this.formatter={format:e=>"NONE"===e?this.props.isUI3?(0,p.t)("proto.frame_preset_panel.no_device"):(0,p.t)("proto.frame_preset_panel.none"):"CUSTOM"===e?(0,p.t)("proto.frame_preset_panel.custom_size"):"PRESENTATION"===e?(0,p.t)("proto.frame_preset_panel.presentation"):e.getI18nDeviceName(),isEqual:(e,t)=>"NONE"===e||"CUSTOM"===e||"PRESENTATION"===e||"NONE"===t||"CUSTOM"===t||"PRESENTATION"===t?e===t:e.presetIdentifier===t.presetIdentifier},this.onChange=e=>{(0,x.$J)(e,this.props.prototypeDevice);let t=this.props.prototypeDevice.type,n=t;n="NONE"===e?"NONE":"PRESENTATION"===e?"PRESENTATION":"CUSTOM"===e?"CUSTOM":"PRESET",this.props.dispatch((0,x._P)({name:"Prototype Device Type Changed",params:{oldType:this.props.prototypeDevice.presetIdentifier||t,newType:e.presetIdentifier||n,isInlinePreviewOpened:C.zl.get(W.hg).modalStatus===W.bi.OPEN}}))},this.renderPresetOption=(e,t)=>{let n=(0,D.Fh)(e,this.props.prototypeDevice);if(null===n)return null;let i=n.framePresetSize;return(0,o.jsx)(O.c$,{value:n.presetIdentifier,children:(0,o.jsxs)("div",{className:X,children:[(0,o.jsx)("span",{children:n.getI18nDeviceName()}),(0,o.jsxs)("span",{children:[i.x,"\u200A\xd7\u200A",i.y]})," "]})},t)}}render(){let e;let t="string"==typeof(e="NONE"===this.props.prototypeDevice.type?"NONE":"PRESENTATION"===this.props.prototypeDevice.type?"PRESENTATION":"CUSTOM"===this.props.prototypeDevice.type?"CUSTOM":D.hY[this.props.prototypeDevice.presetIdentifier]||"NONE")?e:e.presetIdentifier;return(0,o.jsxs)(O.bL,{onChange:e=>{"NONE"===e||"PRESENTATION"===e||"CUSTOM"===e?this.onChange(e):this.onChange((0,D.Fh)(e,this.props.prototypeDevice))},recordingKey:c.Pt(this.props,"select"),value:t,children:[(0,o.jsx)(O.l9,{label:(0,o.jsx)(P.h,{children:(0,p.tx)("proto.frame_preset_panel.device")}),width:"fill",children:this.formatter.format(e)}),(0,o.jsxs)(O.mc,{children:[(0,o.jsx)(O.c$,{value:"NONE",children:(0,p.tx)("proto.frame_preset_panel.no_device")}),(0,o.jsx)(O.wv,{}),D.r6.map(this.renderPresetOption),(0,o.jsx)(O.wv,{}),D.J_.map(this.renderPresetOption),(0,o.jsx)(O.wv,{}),D.AG.map(this.renderPresetOption),(0,o.jsx)(O.wv,{}),D.$w.map(this.renderPresetOption),(0,o.jsx)(O.wv,{}),(0,o.jsx)(O.c$,{value:"CUSTOM",children:(0,o.jsxs)("div",{className:X,children:[(0,o.jsx)("span",{children:(0,p.tx)("proto.frame_preset_panel.custom_size")}),(0,o.jsx)("span",{children:(0,p.tx)("proto.frame_preset_panel.fit")})]})}),(0,o.jsx)(O.c$,{value:"PRESENTATION",children:(0,o.jsxs)("div",{className:X,children:[(0,o.jsx)("span",{children:(0,p.tx)("proto.frame_preset_panel.presentation")}),(0,o.jsx)("span",{children:(0,p.tx)("proto.frame_preset_panel.fill")})]})}),(0,o.jsx)(O.wv,{}),D.dr.map(this.renderPresetOption)]})]})}}ee.displayName="DeviceDropdown";class et extends c.o6{constructor(){super(...arguments),this.formatter={format:e=>{let t=D.hY[e];return t?t.getI18nStyleName():(0,p.t)("proto.frame_preset_panel.missing")},isEqual:(e,t)=>e===t},this.renderStyleOption=(e,t)=>{let n=e.presetIdentifier;return(0,o.jsx)(O.c$,{value:n,children:D.hY[n].getI18nStyleName()},t)}}render(){let e=D.hY[this.props.presetIdentifier];if(!e)return null;let t=D.yr[e.deviceName],n=this.props.presetIdentifier;return(0,o.jsxs)(O.bL,{onChange:this.props.onChange,recordingKey:c.Pt(this.props,"select"),value:n,children:[(0,o.jsx)(O.l9,{label:(0,o.jsx)(P.h,{children:(0,p.tx)("proto.frame_preset_panel.device.model")}),width:"fill",children:this.formatter.format(n)}),(0,o.jsx)(O.mc,{children:t.map(this.renderStyleOption)})]})}}et.displayName="ModelDropdown";var en=n(325751),eo=n(474575),ei=n(341887),er=n(989941),ea=n(4921);let el=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M9.146 6.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9H9a3 3 0 1 0 0 6h.5a.5.5 0 0 1 0 1H9a4 4 0 0 1 0-8h1.293L9.146 6.854a.5.5 0 0 1 0-.708M14 8.5a.5.5 0 0 1 .5-.5h.5a4 4 0 0 1 0 8h-1.293l1.147 1.146a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708l2-2a.5.5 0 0 1 .708.708L13.707 15H15a3 3 0 1 0 0-6h-.5a.5.5 0 0 1-.5-.5",clipRule:"evenodd"})})}),es=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M17.854 6.854a.5.5 0 0 0-.708-.708l-11 11a.5.5 0 0 0 .708.708zm-8.708-.708a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9H9a3 3 0 0 0-2.143 5.1.5.5 0 0 1-.714.7A4 4 0 0 1 9 8h1.293L9.146 6.854a.5.5 0 0 1 0-.708m8.004 3.047a.5.5 0 0 1 .707.008A4 4 0 0 1 15 16h-1.293l1.147 1.145a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708l2-2a.5.5 0 0 1 .708.708L13.707 15H15a3 3 0 0 0 2.143-5.1.5.5 0 0 1 .007-.707",clipRule:"evenodd"})})});var ec=n(325087);let ed=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M14 18a1 1 0 0 1-1.707.707l-2.44-2.44.707-.707L13 18v-4.88l1-1zm3.146-11.854a.5.5 0 0 1 .707.707l-11 11a.5.5 0 0 1-.707-.707zm-4.853-.853A1 1 0 0 1 14 6v1.879l-1 1v-2.88l-3 3H7.5a.5.5 0 0 0-.5.5v5c0 .108.034.207.09.288l-.71.71A1.5 1.5 0 0 1 6 14.5v-5A1.5 1.5 0 0 1 7.5 8h2.086zm4.483 4.05a3.5 3.5 0 0 1-1.215 5.991c-.29.093-.56-.143-.561-.447v-.029c0-.238.17-.437.393-.522a2.501 2.501 0 0 0 .674-4.283zM15 11.294c0-.344.35-.576.588-.325a1.494 1.494 0 0 1 0 2.063c-.238.25-.588.019-.588-.326z"})})});var ep=n(652539),eu=n(596763),e_=n(145060),eh=n(983040),em=n(621897);function ey({videoPlayback:{mediaLoop:e,muted:t}}){let n=null;return(0,v.gl)(e)&&(0,v.gl)(t)?n=(0,p.tx)("proto.prototype_panel.replace_mixed_muted_and_loop_video_playback",{loopSvg:(0,o.jsx)(ep.B,{svg:eh.A,className:e_.eT}),speakerSvg:(0,o.jsx)(ep.B,{svg:em.A,className:e_.To})}):(0,v.gl)(e)?n=(0,p.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:(0,o.jsx)(ep.B,{svg:eh.A,className:e_.eT})}):(0,v.gl)(t)&&(n=(0,p.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:(0,o.jsx)(ep.B,{svg:em.A,className:e_.To})})),n?(0,o.jsx)(z.fI,{children:(0,o.jsx)(z.nV,{className:e_.pc,children:n})}):null}let eg=e=>(0,v.gl)(e)?"mixed":e,ev=e=>!0===e,eI=function(e){let t=(0,o.jsx)("span",{children:(0,o.jsx)(er.S,{label:(0,o.jsx)(P.J,{htmlAttributes:{"data-tooltip":(0,p.t)("proto.prototype_panel.default_video_playback_state"),"data-tooltip-type":w.Ib.TEXT},children:(0,p.tx)("proto.prototype_panel.autoplay")}),onChange:t=>{e.updateSelectionProperties({videoAutoplay:t}),e.dispatch((0,x._P)({name:"Node video autoplay Changed",params:{newAutoplay:t,oldAutoplay:eg(e.videoPlayback.autoplay),numVideosSelected:e.videoPlayback.numVideosSelected}}))},checked:ev(e.videoPlayback.autoplay),mixed:(0,v.gl)(e.videoPlayback.autoplay),recordingKey:c.Pt(e,"autoPlayToggle")})}),n=(0,o.jsx)(ea.f,{checked:ev(e.videoPlayback.mediaLoop),mixed:(0,v.gl)(e.videoPlayback.mediaLoop),onIcon:(0,o.jsx)(el,{}),offIcon:(0,o.jsx)(es,{}),onChange:()=>{let t=!ev(e.videoPlayback.mediaLoop);e.updateSelectionProperties({videoMediaLoop:t}),e.dispatch((0,x._P)({name:"Node video loop changed",params:{newLoop:t,oldLoop:eg(e.videoPlayback.mediaLoop),numVideosSelected:e.videoPlayback.numVideosSelected}}))},"data-testid":"videoLoopToggle",recordingKey:c.Pt(e,"videoLoopToggle"),"aria-label":(0,p.t)("proto.prototype_panel.loop"),htmlAttributes:{"data-tooltip":(0,p.t)("proto.prototype_panel.loop"),"data-tooltip-type":w.Ib.TEXT}}),i=(0,o.jsx)(ea.f,{checked:ev(!e.videoPlayback.muted),mixed:(0,v.gl)(e.videoPlayback.muted),onIcon:(0,o.jsx)(ec.L,{}),offIcon:(0,o.jsx)(ed,{}),onChange:()=>{let t=!e.videoPlayback.muted;e.updateSelectionProperties({videoMuted:t}),e.dispatch((0,x._P)({name:"Node video muted changed",params:{newMuteValue:t,oldMuteValue:eg(e.videoPlayback.muted),numVideosSelected:e.videoPlayback.numVideosSelected}}))},"data-testid":"videoSoundToggle",recordingKey:c.Pt(e,"videoSoundToggle"),"aria-label":(0,p.t)("proto.prototype_panel.sound"),htmlAttributes:{"data-tooltip":(0,p.t)("proto.prototype_panel.sound"),"data-tooltip-type":w.Ib.TEXT}}),r=(0,o.jsx)(eu.pG,{input:t,leftIcon:n,rightIcon:i,label:null});return(0,o.jsxs)(z.Zk,{children:[(0,o.jsx)(z.fI,{children:(0,o.jsx)(L.Q,{extended:!0,children:(0,p.tx)("proto.prototype_panel.video")})}),r,(0,o.jsx)(ey,{videoPlayback:e.videoPlayback})]})};var ex=n(170907),ef=n(382629),eN=n(958440),eT=n(266808),eE=n(170627),eA=n(812714),eb=n(437540),eO=n(241421),eP=n(331497),ej=n(954741),eS=n(572427),eC=n(236631),eD=n(560201),ek=n(94747),ew=n(330785);function eR(e){let{type:t}=e;return(0,o.jsxs)("div",{className:eC.s.flex.justifyCenter.itemsCenter.$,children:[(0,o.jsx)(ep.B,{className:eC.s.flexGrow1.mx12.$,useOriginalSrcFills_DEPRECATED:!0,svg:"horizontal"===t?ek.A:ew.A}),(0,o.jsx)("span",{className:eC.s.flexGrow1.m6.$,style:{maxWidth:144},children:(0,p.tx)("proto.prototype_panel.content_needs_to_be_bigger_than_the_frame_tooltip")})]})}let eL=(0,eD.ex)("prototype_scroll_horizontal_info",eR,()=>({type:"horizontal",unconstrainWidth:!0})),eM=(0,eD.ex)("prototype_scroll_vertical_info",eR,()=>({type:"vertical",unconstrainWidth:!0})),eU=(0,eD.ex)("prototype_scroll_marquee_info",function(){return(0,o.jsx)("div",{className:eC.s.flex.justifyCenter.itemsCenter.$,children:(0,o.jsx)("span",{className:eC.s.flexGrow1.m6.$,style:{maxWidth:144},children:(0,p.tx)("proto.prototype_panel.overflow_scrolling_not_available_for_frames_with_marquee")})})},()=>({}));var eK=n(167151);let eB="scroll_behavior_panel--rowContainer--H2KeC",eV="scroll_behavior_panel--scrollPosition--YAyUM",eF="scroll_behavior_panel--labelContainer--EQ4zs";function eY(e){let{disableOverflowBehaviorItem:t,disableScrollBehaviorItem:n,dropdownShown:r}=e,[a,l]=function(){let e=(0,eP.ut)(eT.Ez5?.propertiesPanelState().shownPropertiesPanels,[])[eT.ibQ.OVERFLOW_ITEM],t=(0,eK.cJ)(),n=(0,I.kl)("isSection"),o=(0,I.kl)("anyTopLevelFramesInSelection");return[e,!t&&!n&&!o]}(),s=i.useId(),u=(0,o.jsx)(eS.iE,{titleTx:(0,p.tx)("proto.scroll_panel.scroll_behavior_title")});return a||l?(0,o.jsx)(d.k,{name:"scroll_behavior_panel",children:(0,o.jsxs)(z.Zk,{children:[u,l&&(0,o.jsx)(o.Fragment,{children:(0,eA.kc)().ce_tv_fpl_select?(0,o.jsx)(eJ,{disabled:n,recordingKey:c.Pt(e,"scrollBehavior")}):(0,o.jsxs)("div",{className:eB,children:[(0,o.jsx)("div",{className:"scroll_behavior_panel--inactiveLabelContainer--lQjAi",children:(0,o.jsx)("span",{id:s,className:"scroll_behavior_panel--inactiveLabel--IexW8",children:(0,p.tx)("proto.scroll_panel.position_dropdown.position")})}),(0,o.jsx)(eX,{ariaLabelledBy:s,recordingKey:c.Pt(e,"scrollBehavior"),dropdownShown:r,disabled:n})]})}),a&&(0,o.jsx)(eG,{disabled:t,recordingKey:c.Pt(e,"scrollDirection")})]})}):null}let eH=["NONE","HORIZONTAL","VERTICAL","BOTH"];function eG({disabled:e,recordingKey:t}){let n=(0,r.wA)(),[a]=(0,I.lJ)("showWontScrollWarning"),[l]=(0,I.lJ)("scrollDirection"),s=e$(),c=i.useCallback(()=>s?eU:"HORIZONTAL"===l?eL:eM,[s,l]),d=i.useId(),u=i.useCallback(e=>{n((0,x._P)({name:"Overflow Behavior changed",params:{newDirection:e,oldDirection:(0,v._W)(l,"MIXED")}})),m.Y5.updateSelectionProperties({scrollDirection:e})},[n,l]);return i.useMemo(()=>(0,o.jsxs)("div",{className:eB,children:[(0,o.jsx)(P.J,{variant:"secondary",htmlFor:d,className:eF,children:(0,p.tx)("proto.scroll_panel.overflow_dropdown.overflow")}),a&&(0,o.jsx)("div",{className:"scroll_behavior_panel--infoIcon--FeXbf","data-tooltip-type":w.Ib.SPECIAL,"data-tooltip":c(),"data-tooltip-show-immediately":!0,children:(0,o.jsx)(eN.r,{})}),(0,o.jsx)("div",{className:a?"scroll_behavior_panel--scrollDirectionShort--w6iSo":"scroll_behavior_panel--scrollDirection--XSmzK",children:(0,o.jsxs)(O.bL,{onChange:u,value:l||"NONE",recordingKey:t,children:[(0,o.jsx)(O.DZ,{"data-testid":"scroll-direction-dropdown",disabled:e||s,id:d,width:"fill"}),(0,o.jsx)(O.mc,{children:eH.map(e=>(0,o.jsx)(O.c$,{value:e,children:eO.Rk.format(e)},e))})]})})]}),[d,a,c,u,l,t,e,s])}let ez=ej.l6,eW=ej.c$;function eJ({disabled:e,recordingKey:t}){let n=(0,r.wA)(),a=(0,I.kl)("scrollBehavior")||"SCROLLS",l=i.useCallback(e=>{let t;switch(n((0,x._P)({name:"Node Scroll Behavior Changed",params:{newValue:e}})),e){case"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME":t=eT.KjJ.FIXED;break;case"STICKY_SCROLLS":t=eT.KjJ.STICKY_SCROLLS;break;case"SCROLLS":t=eT.KjJ.SCROLLS}eE.l7.user("set-scroll-behavior",()=>eT.X3B&&eT.X3B.aggressivelySetScrollBehaviorOfSelection(t)),m.Y5.commit()},[n]),{fixedScrollingDisabled:s}=eZ(),c=i.useId();return i.useMemo(()=>(0,o.jsxs)("div",{className:eB,children:[(0,o.jsx)(P.J,{variant:"secondary",htmlFor:c,className:eF,children:(0,p.tx)("proto.scroll_panel.position_dropdown.position")}),(0,o.jsx)("div",{className:eV,children:(0,o.jsxs)(O.bL,{onChange:l,value:a,recordingKey:t,children:[(0,o.jsx)(O.DZ,{"data-testid":"scroll-behavior-dropdown",disabled:e,id:c,width:"fill"}),(0,o.jsxs)(O.mc,{children:[(0,o.jsx)(O.c$,{value:"SCROLLS",children:eO.Ge.format("SCROLLS")}),(0,o.jsx)(O.c$,{value:"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME",disabled:s,children:eO.Ge.format("FIXED_WHEN_CHILD_OF_SCROLLING_FRAME")}),(0,o.jsx)(O.c$,{value:"STICKY_SCROLLS",children:eO.Ge.format("STICKY_SCROLLS")})]})]})})]}),[c,l,a,t,e,s])}function eX(e){let t=(0,r.wA)(),n=(0,I.kl)("scrollBehavior"),{fixedScrollingDisabled:i}=eZ(),a="scroll-behavior-select",l=e.dropdownShown&&e.dropdownShown.type===a?eO.Ge:eO.wi;return(0,o.jsxs)(ez,{ariaLabelledBy:e.ariaLabelledBy,className:eV,dataTestId:"scroll-behavior-dropdown",disabled:e.disabled,dispatch:t,dropdownClassName:"scroll_behavior_panel--fullWidth--reSmx",dropdownShown:e.dropdownShown,formatter:l,id:a,onChange:e=>{t((0,x._P)({name:"Node Scroll Behavior Changed",params:{newValue:e}}));let n="FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"===e?eT.KjJ.FIXED:"STICKY_SCROLLS"===e?eT.KjJ.STICKY_SCROLLS:eT.KjJ.SCROLLS;eE.l7.user("set-scroll-behavior",()=>eT.X3B?.aggressivelySetScrollBehaviorOfSelection(n)),m.Y5.commit()},property:n||"SCROLLS",recordingKey:e.recordingKey,children:[(0,o.jsx)(eW,{value:"SCROLLS"}),(0,o.jsx)(eW,{value:"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME",disabled:i}),(0,o.jsx)(eW,{value:"STICKY_SCROLLS"})]})}let e$=()=>{let[e]=(0,I.lJ)("marquee");return!!(0,ef.EA)(e)},eZ=()=>(0,eb.R)(e=>{let t=e.mirror.selectionProperties;return{fixedScrollingDisabled:!t.nodesAreAllNotInStacksOrAbsolutePositioned||!t.allHaveScrollableFrameAsParent}});var eq=n(691201),eQ=n(328437),e0=n(201898),e1=n(903582),e7=n(380641),e4=n(691234);function e5(){return(0,o.jsx)(T.u,{idForTests:"create-connection-hint",title:(0,p.t)("proto.onboarding.creating_a_connection"),userFlag:"dismissed_create_connection_hint",icon_DEPRECATED:e1.A,iconFallback:e7.A,hintText:(0,p.t)("proto.onboarding.select_a_frame_or_object_hint")})}function e2(){return(0,o.jsx)(T.u,{idForTests:"delete-connection-hint",title:(0,p.t)("proto.onboarding.removing_a_connection"),userFlag:"dismissed_delete_connection_hint",icon_DEPRECATED:eQ.A,iconFallback:e0.A,hintText:(0,p.t)("proto.onboarding.to_delete_a_connection_click_and_drag_on_either_end")})}function e3(){return(0,o.jsx)(T.u,{idForTests:"play-button-hint",title:(0,p.t)("proto.onboarding.running_your_prototype"),userFlag:"dismissed_play_button_hint",icon_DEPRECATED:e4.A,hintText:(0,p.t)("proto.onboarding.use_the_play_button_hint")})}function e6({dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:r}){let a=0===r&&!e,l=0!==r&&!t,s=!n,c=i.useMemo(()=>a?u.c.CREATING_A_CONNECTION:l?u.c.REMOVING_A_CONNECTION:s?u.c.RUNNING_YOUR_PROTOTYPE:null,[a,l,s]);return c?(0,o.jsx)(_.fu,{name:"Prototype Onboarding Hint Panel V1",properties:{trackingDescriptor:c},children:(0,o.jsx)(z.Zk,{children:(0,o.jsxs)("div",{children:[a&&(0,o.jsx)(e5,{}),l&&(0,o.jsx)(e2,{}),s&&(0,o.jsx)(e3,{})]})})}):null}let e8=(0,_.kp)(function(e){let{dropdownShown:t,pickerShown:n,shouldUseSelectedStyleProperties:u,userFlags:_}=e,{isInstanceSelected:f,isInstanceSublayerSelected:T,isCodeInstanceSelected:A,isSectionSelected:b,isTopLevelFrameAndValidPrototypeSourceSelected:O,isValidPrototypingSourceSelected:P,numSelected:j,numTransitionsOnCurrentPage:S,numVideosSelected:C,prototypeBackgroundColor:D,prototypeDevice:k,prototypeStartingPointsInfo:w,transitionNodeID:R}=function(e){let t=e?I.pw:I.zj,n=e?I.DQ:I.fC;return{...t("prototypeDevice","prototypeBackgroundColor","numSelected","numVideosSelected","transitionNodeID","isInstanceSublayerSelected","isInstanceSelected","isCodeInstanceSelected","isValidPrototypingSourceSelected","isTopLevelFrameAndValidPrototypeSourceSelected"),...n("isSectionSelected","numTransitionsOnCurrentPage","prototypeStartingPointsInfo")}}(u),L=(0,eK.cJ)(),{bigNudgeAmount:M,smallNudgeAmount:U}=(0,y.sT)(),K=function(e){let t=(0,I.Gt)("videoMediaLoop"),n=(0,I.Gt)("videoAutoplay"),o=(0,I.Gt)("videoMuted"),i=(0,I.Gt)("numVideosSelected");if(e)return(0,a.B1)(t),(0,a.B1)(n),(0,a.B1)(o),(0,a.B1)(i),{autoplay:n,muted:o,mediaLoop:t,numVideosSelected:i}}(!!C),B=(0,v.E7)(j),V=null!==B&&B>0,F=(0,r.wA)(),Y=i.useCallback(()=>{F((0,x._P)({name:"Show Prototype Settings Clicked"})),g.wr()},[F]),H=i.useRef(!1),G=i.useRef(!1),W=i.useCallback(()=>{G.current=!0},[]),J=i.useCallback(()=>{G.current=!1},[]),X=i.useRef(null),$=i.useRef(null);i.useEffect(()=>{if(!G.current)return;if(H.current&&X.current){X.current.focus();return}let e=(0,h.xv)($.current);e&&e.focus()},[V]);let Z=!(0,v.hS)(R)||s.fn((0,v.E7)(R)),Q=!L&&!!C,ee=!L&&w&&w.length>0,et=L||Z?null:(0,o.jsx)(e6,{dismissedCreateConnectionHint:!!_.dismissed_create_connection_hint,dismissedDeleteConnectionHint:!!_.dismissed_delete_connection_hint,dismissedPlayButtonHint:!!_.dismissed_play_button_hint,numTransitionsOnCurrentPage:S}),er=!L&&((P??!0)||b&&(0,E.YR)()),ea=!L;return(0,a.KF)(V||L||(0,v.hS)(k),"should not have mixed device selection"),(0,o.jsxs)("div",{ref:$,onBlur:J,onFocus:W,onPointerDown:e=>{H.current=(0,l.n4)(e.nativeEvent)},children:[ea&&(0,o.jsx)(N.Mw,{panelName:N.ON.PROTOTYPE}),V?(0,o.jsxs)(o.Fragment,{children:[!L&&O&&(0,o.jsx)(ei.Ay,{recordingKey:c.Pt(e,"startingPointPanel")}),er&&(0,o.jsx)(eo.y7,{}),!A&&(0,o.jsx)(eY,{dropdownShown:t,disableOverflowBehaviorItem:!!(f||T),disableScrollBehaviorItem:!!T,recordingKey:c.Pt(e,"scrollBehaviorPanel")}),Q&&(0,o.jsx)(eI,{updateSelectionProperties:m.Y5.updateSelectionProperties,dispatch:F,videoPlayback:K,recordingKey:c.Pt(e,"prototypeVideoPlaybackPanel")}),!L&&(0,o.jsx)(d.k,{name:"show_prototype_settings_panel",children:(0,o.jsx)(z.Zk,{className:eq.rq,children:(0,o.jsx)(ex.z,{onClick:Y,recordingKey:c.Pt(e,"prototypeSettingsButton"),children:(0,p.tx)("proto.menu.show_prototype_settings")})})})]}):(0,o.jsxs)(o.Fragment,{children:[!L&&(0,o.jsx)(q,{bigNudgeAmount:M,dispatch:F,isUI3:!0,pickerShown:n,prototypeBackgroundColor:D,prototypeDevice:(0,x.Qx)(k),recordingKey:"devicePanel",smallNudgeAmount:U,titleRef:X},"device-panel"),ee&&(0,o.jsx)(en.A,{})]}),et,V&&(0,o.jsx)("div",{})]})},f.e0.PROTOTYPE_PANEL)},506426:(e,t,n)=>{n.d(t,{I:()=>w,b:()=>k});var o=n(104076),i=n(716976),r=n(903927),a=n(816299),l=n(623411),s=n(491488),c=n(387092),d=n(266808),p=n(784414),u=n.n(p),_=n(783728),h=n.n(_),m=n(977738),y=n.n(m),g=n(492221),v=n.n(g),I=n(641518),x=n(246144),f=n(192075),N=n(553065),T=n(371952),E=n(243690),A=n(205088),b=n(660838),O=n(818706),P=n(664320),j=n(355009);let S="missing",C="MIXED",D={};function k(){let e=(0,T.h6)()||D,t=(0,P.iR)(),n=i.useMemo(()=>{let n=y()(t,(e,t)=>({collectionID:e.node_id,collectionName:e.name,modeOptions:e.modes?.map(t=>({modeId:{guid:t.id,collectionKey:e.key,extendedCollectionId:null},name:t.name,sortPosition:t.sortPosition,isCompatible:!0,collectionName:e.name}))||[],explicitMode:null,inheritMode:null,libraryKey:e.library_key}));return u()({},e,n)},[t,e]),o=i.useMemo(()=>Object.entries(n).map(([e,t])=>({setKey:e,modeData:t,isLocal:void 0===t.libraryKey})),[n]),a=i.useMemo(()=>Object.values(o).filter(e=>e.modeData?.modeOptions&&e.modeData?.modeOptions.length>1),[o]),l=i.useMemo(()=>v()(a.map(e=>e.modeData.libraryKey??j.CC)),[a]),s=(0,E.U)(l),[p,_]=i.useMemo(()=>{let{_local:e,_unknownFile:t,...n}=h()(a,e=>e.isLocal?"_local":e.modeData.libraryKey&&s.data?.[e.modeData.libraryKey]===void 0?"_unknownFile":e.modeData.libraryKey),o=Object.entries(n).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>[{libraryKey:e,fileName:s.data?.[e]??""},...t]).flat(1);return t&&(o.push({libraryKey:j.CC,fileName:(0,f.t)("variables.mode_properties_panel.used_variables.subheading")}),o.push(...t)),[e??[],o]},[s,a]),m=(0,P.d2)(),g=i.useCallback(e=>{let t=m[(0,c.yG)(e)],n=a.find(t=>t.setKey===e);if(n)return(e=>{if(e)return void 0===t&&(t=e.modeData.modeOptions[0].modeId.guid),e.modeData.modeOptions.find(e=>e.modeId.guid!==t&&(t=e.modeId.guid,!0))?.modeId.guid})(n)},[m,a]),I=a.length>0?a[0]:void 0,x=I?.setKey,N=I?.modeData.collectionID,b=i.useMemo(()=>x&&g(x),[x,g]),O=(0,r.wA)();return{localVariableSets:p,allVariableSets:a,firstVariableSet:I,firstVariableSetID:N,firstVariableSetMode:b,getDefaultNewModeForVariableCollectionKey:g,reportAnalyticsEventWhenSelected:e=>{let t=d.mSn.getVariableSetInfoForSetModeAnalytics(e);O((0,A.Zh)({name:"prototype.set_mode_select_variable_set",params:{...t}}))},subscribedVariableSetsWithSections:_}}function w({targetVariableSetID:e,targetVariableModeID:t,deprecatedTargetVariableSetKey:n,updateSelectionProperties:r,actionIndexPath:a}){let{getDefaultNewModeForVariableCollectionKey:l,allVariableSets:c,reportAnalyticsEventWhenSelected:d}=k(),{shouldShowAdvancedPrototypingPaywall:p,showAdvancedPrototypingVariablesModal:u}=(0,b.zt)();i.useEffect(()=>{if(!n||(0,N.gl)(n))return;let e=c.find(e=>e.setKey===n);e?((0,x.Lo)("SetVariableModeControls","updating variable set key to non-deprecated id value"),r({targetVariableSetKey:void 0,targetVariableSetID:e?.modeData.collectionID})):((0,x.Lo)("SetVariableModeControls","attempted to update variable set key to non-deprecated id value, but could not find it in the list of variable sets, will just clear out the bad data."),r({targetVariableSetKey:void 0}))},[n,c,r]);let[_,h]=i.useMemo(()=>{let t=(0,N.gl)(e)||void 0===e?e:function(e,t){let n=e.find(e=>e.modeData.collectionID===t);if(n)return n;let o=s.gr.toRefIfSubscribed(t);if(o)return e.find(e=>e.setKey===o.key)}(c,e)||S,n=(()=>{if(!(0,N.gl)(t)&&void 0!==t&&t!==S)return t})();return[t,n]},[e,c]),m=i.useId(),y=(0,o.jsx)(R,{selectedVariableSet:_,onChange:e=>{p?u():(d(e.modeData.collectionID),r({targetVariableSetID:e.modeData.collectionID,targetVariableModeID:l(e.setKey)}))},actionIndexPath:a}),g=(0,o.jsx)(O.A,{input:y,label:(0,f.t)("proto.set_variable_mode.collection_label"),labelId:m}),v=i.useId(),I=(0,o.jsx)(M,{ariaLabelledBy:v,selectedVariableSetKey:h&&h.setKey,selectedVariableModeID:t,onChange:e=>{p?u():r({targetVariableModeID:e})},actionIndexPath:a}),T=(0,o.jsx)(O.A,{input:I,label:(0,f.t)("proto.set_variable_mode.mode_label"),labelId:v});return(0,o.jsxs)("div",{children:[g,h&&T]})}function R({selectedVariableSet:e,onChange:t,actionIndexPath:n}){let r="set-variable-mode--select-variable-set-"+n,{localVariableSets:s,allVariableSets:c,subscribedVariableSetsWithSections:d}=k(),p=i.useMemo(()=>{if(!(0,N.gl)(e)&&void 0!==e&&e!==S)return e.setKey},[e]),u=i.useMemo(()=>{let e=[];s.length>0&&e.push({headerText:(0,f.t)("variables.mode_properties_panel.assets_created_in_file.subheading"),values:s});let t={values:[]},n=()=>{t.values&&t.values.length>0&&e.push({headerText:t.headerText??"",values:t.values??[],libraryKey:t.libraryKey}),t={values:[]}};for(let e of d)"libraryKey"in e?(n(),t={headerText:e.fileName,values:[],libraryKey:e.libraryKey}):t.values?.push(e);return n(),e},[s,d]),_=i.useMemo(()=>(0,N.gl)(e)?C:p,[e,p]);return(0,o.jsxs)(a.bL,{value:_,onChange:e=>{if((0,N.gl)(e)||void 0===e||e===S)return;let n=c.find(t=>t.setKey===e);n&&t(n)},recordingKey:I.Pt(r,"select"),children:[(0,o.jsx)(a.l9,{label:(0,o.jsx)(l.h,{children:(0,f.t)("proto.set_variable_mode.collection_label")}),width:"fill",children:(0,N.gl)(e)?(0,f.t)("common.mixed"):void 0}),(0,o.jsxs)(a.mc,{children:[(0,N.gl)(e)&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(a.c$,{value:C,disabled:!0,children:(0,f.t)("common.mixed")})}),u.map((e,t)=>(0,o.jsx)(a.YJ,{title:(0,o.jsx)(a.hE,{children:e.headerText}),children:e.values.map(e=>(0,o.jsx)(a.c$,{value:e.setKey,children:void 0===e?(0,f.t)("proto.prototype_panel.edit_set_mode.none"):e===S?(0,f.t)("proto.prototype_panel.edit_set_mode.missing_collection"):e.modeData.collectionName},e.setKey))},I.Pt(r,"group",t)))]})]})}function L(e){return void 0===e?(0,f.t)("proto.prototype_panel.edit_set_mode.none"):e===C?(0,f.t)("common.mixed"):e===S?(0,f.t)("proto.prototype_panel.edit_set_mode.missing_mode"):e?.name??""}function M({selectedVariableSetKey:e,selectedVariableModeID:t,onChange:n,actionIndexPath:r}){let{allVariableSets:s}=k(),c=i.useMemo(()=>s.find(t=>t.setKey===e)?.modeData.modeOptions,[e,s]),d=i.useMemo(()=>{if((0,N.gl)(t))return C;if(void 0===t)return;let e=c?.find(e=>e.modeId.guid===t);return e?e.modeId.guid:S},[t,c]);return(0,o.jsxs)(a.bL,{value:d,onChange:e=>{e&&e!==S&&e!==C&&n(e)},recordingKey:I.Pt("set-variable-mode--select-variable-mode-"+r,"select"),children:[(0,o.jsx)(a.l9,{label:(0,o.jsx)(l.h,{children:(0,f.t)("proto.set_variable_mode.mode_label")}),width:"fill",children:d===C?(0,f.t)("common.mixed"):void 0}),(0,o.jsxs)(a.mc,{children:[d===C&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(a.c$,{value:C,disabled:!0,children:L(C)})}),d===S&&(0,o.jsx)(a.c$,{value:S,disabled:!0,children:L(S)}),c?.map(e=>o.jsx(a.c$,{value:e.modeId.guid,children:L(e)},e.modeId.guid))]})]})}},465471:(e,t,n)=>{n.d(t,{B:()=>I});var o=n(104076),i=n(716976),r=n(903927),a=n(454851),l=n(995639),s=n(674524),c=n(933688),d=n(836982),p=n(192075),u=n(371952),_=n(384068),h=n(894210),m=n(501883),y=n(737139),g=n(638274);function v(e){return e.modalShown?.type===g.y.type||e.modalShown?.prevModal?.type===g.y.type}function I(){let e=(0,_.n)({type:g.y}),t=(0,i.useCallback)(()=>{e()},[e]),n=(0,r.d4)(v),I=0===(0,u.Rb)().length&&!n;return(0,o.jsx)(d.k,{name:"local_variables_panel",children:(0,o.jsx)(y.Zk,{children:(0,o.jsxs)(y.fI,{className:I?"local_variables_panel--localVariablesPanelRowFaded--atToe local_variables_panel--localVariablesPanelRow--zR8nJ draggable_list--panelHeaderRowFaded--kETRR":"local_variables_panel--localVariablesPanelRow--zR8nJ",children:[(0,o.jsx)(m.x,{className:"local_variables_panel--titleText--7rdD7 draggable_list--panelTitleText--SwKez",onClick:t,"data-onboarding-key":"local-variables-panel-title",children:(0,p.tx)("variables.local_variables_panel.local_variables_title")}),(0,o.jsx)(c.E,{name:"variables_modal_button",children:(0,o.jsx)(a.d,{onClick:t,recordingKey:(0,s.Pt)("localVariablesPanel","variablesModalButton"),"aria-expanded":n,"aria-label":(0,p.t)("variables.local_variables_panel.open_variables_button_tooltip"),htmlAttributes:{"data-tooltip":(0,p.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":h.Ib.TEXT},children:(0,o.jsx)(l.A,{})})})]})})})}},239077:(e,t,n)=>{n.d(t,{r:()=>ee});var o=n(104076),i=n(716976),r=n(903927),a=n(420680),l=n(989941),s=n(623411),c=n(90757),d=n(7688),p=n(812714),u=n(795033);n(120440);var _=n(641518),h=n(192075),m=n(40903),y=n(952460),g=n(111297),v=n(553065),I=n(252677),x=n(637499),f=n(737139),N=n(900701),T=n(788613),E=n(754446),A=n(748624),b=n(664320),O=n(118523),P=n(382629),j=n(266808),S=n(170627),C=n(264993),D=n(980852),k=n(166887),w=n(308424),R=n(58212),L=n(275033),M=n(980471),U=n(239004),K=n(354114),B=n(74620),V=n(116553),F=n(660838),Y=n(641099),H=n(947507);let G=(0,u.eU)(null),z=(e,t)=>{try{W(e,t)}catch{}try{J(e,t)}catch{}},W=(e,t)=>{let n=(0,M.Bv)(t);if(n){K.Y5.triggerActionEnumInUserEditScope(j.rcl.UNBIND_SELECTION,{fieldSchemaId:n,fieldType:L._j.LINK,removeBoundData:!0});return}S.l7.user(H.Tl,()=>{for(let n of Object.keys(t)){let t=e.get(n);t&&(0,H.RZ)(t)&&(0,H.Ve)(t)}K.Y5.commit()})},J=(e,t)=>{let n=(0,M.X6)(t);if(n){K.Y5.triggerActionEnumInUserEditScope(j.rcl.UNBIND_SELECTION,{fieldSchemaId:n,fieldType:L._j.LINK,removeBoundData:!0});return}S.l7.user(H.Tl,()=>{j.glU?.setHyperlinkOnCurrentSelection("",null),X(e,t),K.Y5.commit()})},X=(e,t)=>{for(let n of Object.keys(t)){let t=e.get(n);t&&(0,H.RZ)(t)&&(t.prototypeInteractions=(0,H.eF)(t.prototypeInteractions))}};function $(){let e=(0,B.eY)(),t=(0,B.KH)(),n=function(){let e=(0,k.U)();return(0,i.useCallback)(t=>{let n=(0,O.zX)(t);if(n)switch(n.type){case"back":e("sites_add_link",{linkType:"BACK_LINK_PRESET"});return;case"anchor_link":e("sites_add_link",{linkType:"ANCHOR_LINK_PRESET"});return;case"url":e("sites_add_link",{linkType:"URL"});return;case"internal":e("sites_add_link",{linkType:"INTERNAL_NODE"});return}},[e])}(),o=o=>{S.l7.user(H.Tl,()=>{for(let n of Object.keys(t)){let t=e.get(n);t&&(0,H.qe)(t,o)}K.Y5.commit()}),n(o)};return{addBackLinkPreset:()=>{o({...(0,F.Bs)("GO_BACK"),simpleLink:!0})},addAnchorLinkPreset:()=>{o({...(0,F.Bs)("SCROLL_TO"),transitionNodeID:C.Hr,simpleLink:!0})},addLinkAction:o,addCMSAliasLinkAction:(n,o,i)=>{S.l7.user("dakota-set-link-binding",()=>{for(let r of Object.keys(t)){let t=e.get(r);t&&t.getNodesForCmsBinding(n).forEach(e=>e.setDakotaLinkFieldBindingOnPrototypeAction(o,i))}})},setDakotaRepeaterChildrenToItemPageHyperlink:(n,o)=>{n&&S.l7.user("dakota-set-repeater-item-page-binding",()=>{for(let i of Object.keys(t)){let t=e.get(i);t&&t.getNodesForCmsBinding(n).forEach(e=>{e.setDakotaItemPageLinkBindingOnHyperlink(o)})}})},addCMSRepeaterToItemPageBindingForPrototypeInteractions:(n,o)=>{n&&S.l7.user("dakota-set-repeater-item-page-binding",()=>{for(let i of Object.keys(t)){let t=e.get(i);t&&t.getNodesForCmsBinding(n).forEach(e=>{e.setRepeaterToItemPageLinkOnPrototypeInteraction(o)})}})},setCmsItemPageLinkOnHyperlink:(n,o,i)=>{S.l7.user("dakota-set-cms-item-page-link-binding",()=>{for(let r of Object.keys(t)){let t=e.get(r);t&&t.setCmsItemPageLinkOnHyperlink(n,o,i)}})},setCmsItemPageLinkOnPrototypeInteractions:(n,o,i)=>{S.l7.user("dakota-set-cms-item-page-link-binding",()=>{for(let r of Object.keys(t)){let t=e.get(r);t&&t.setCmsItemPageLinkOnPrototypeInteraction(n,o,i)}})},setPropertiesForAnchorLink:({transitionNodeID:n,extraScrollOffset:o})=>{S.l7.user(H.Tl,()=>{for(let i of Object.keys(t)){let t=e.get(i);if(t){let e=t.prototypeInteractions,i=H.Nw.getClickInteraction(e),r=H.Nw.getMatchingAction(i);r&&(n&&(r.transitionNodeID=n),o&&(r.extraScrollOffset=o));let a=(0,H.l4)(e),l={prototypeInteractions:(i?[...a,i]:[...e]).map(e=>({...e,sourceNodeID:{sessionID:t.sessionID,localID:t.localID}}))};K.Y5.updateSelectionProperties(l)}}})},removeAllLinks:()=>{z(e,t)},removeHyperlink:()=>{J(e,t)},removeEmptyInteractions:()=>{X(e,t)}}}function Z({shouldLinkPanelSetHyperlink:e}){let{addBackLinkPreset:t,addAnchorLinkPreset:n,addLinkAction:o,addCMSAliasLinkAction:a,setDakotaRepeaterChildrenToItemPageHyperlink:l,addCMSRepeaterToItemPageBindingForPrototypeInteractions:s,setCmsItemPageLinkOnHyperlink:c,setCmsItemPageLinkOnPrototypeInteractions:d,removeHyperlink:_,removeEmptyInteractions:m}=$(),{setVariableConsumptionMap:y}=(0,b.R1)(),g=(0,B.eY)(),v=(0,B.KH)(),I=(0,r.d4)(A.Cy),x=function(){let e=(0,r.wA)(),t=(0,u.Xr)(G);return(0,i.useCallback)((n,o)=>{let i=(0,O.aE)(n);if(!i||0===i.length)return;let r=(0,D.UN)(),a=[];for(let e of i)for(let t of o){let n=r.get(t);if(n?.prototypeInteractions){let o=n.prototypeInteractions.find(t=>!!t.id&&!!e.id&&C.aI(t.id,e.id));if(o){a.push({interaction:o,sourceNodeGuid:t});break}}}t({deletedInteractions:a,selectedNodeIDs:o});let l=a.filter(({interaction:e})=>!!e.id).map(({interaction:e,sourceNodeGuid:t})=>w.d({nodeID:C.sH(t)??C.Hr,interactionID:e.id??C.Hr}));S.l7.user("delete-prototype-interaction-for-link",()=>{j.glU?.deleteInteractions(l)}),e(R.F.enqueue({message:(0,h.t)("sites.panel.link_panel.replace_click_interaction_bell.message",{numInteractions:i.length}),button:{text:(0,h.t)("sites.panel.link_panel.replace_click_interaction_bell.cta"),action:()=>{let e=u.zl.get(G);e&&(function(e){let t=(0,D.UN)(),n={};for(let t of e.selectedNodeIDs)n[t]=!0;S.l7.user(H.Tl,()=>{for(let{interaction:o,sourceNodeGuid:i}of(z(t,n),e.deletedInteractions)){let e=t.get(i);if(!e)continue;let n=[...e.prototypeInteractions||[],o];e.prototypeInteractions=n}K.Y5.commit()})}(e),u.zl.set(G,null))}}}))},[e,t])}(),f=(0,k.U)();return e?e=>{if((0,p.kc)().sts_links_v2&&x(I,Object.keys(v)),e?.type==="internal_cms_item_page")l(e.collectionId,e.id);else if(e?.type==="cms_link_field_alias"){if(!e.collectionId)return;S.l7.user("dakota-set-link-binding",()=>{let t={type:j.Z_n.CMS_ALIAS,resolvedType:j.rXF.LINK,value:{collectionId:e.collectionId,fieldSchemaId:e.fieldId}},n=[];for(let t of Object.keys(v)){let o=g.get(t);o&&n.push(...o.getNodesForCmsBinding(e.collectionId))}let o=1===n.length?n[0]:null;if(0===n.length||o&&o.id===Object.keys(v)[0]){let e={};e.HYPERLINK=t,y(e)}else n.forEach(e=>{e.updateVariableConsumption("HYPERLINK",t)})})}else e?.type==="internal_cms_item_page_item"?c(e.id,e.itemId,e.fieldSchemaId):e?.type==="back"?(((0,Y.FD)()||(0,Y.nh)())&&_(),t()):e?.type==="anchor_link"?n():S.l7.user(H.Tl,()=>{null===e?j.glU?.setHyperlinkOnCurrentSelection("",null):"url"===e.type?(j.glU?.setHyperlinkOnCurrentSelection(V.xT(e.url),e.openInNewTab??null),m&&m(),f("sites_add_link",{linkType:"URL"})):"internal"===e.type&&(j.glU?.setHyperlinkOnCurrentSelection(K.Y5.generateLinkToNode(e.id),null),m&&m(),f("sites_add_link",{linkType:"INTERNAL_NODE"})),j.glU?.hideHyperlinkEditor()})}:e=>{if(_&&((0,Y.FD)()||(0,Y.nh)())&&_(),(0,p.kc)().sts_links_v2&&x(I,Object.keys(v)),null===e)o({connectionType:"NONE"});else if("url"===e.type){o({connectionType:"URL",connectionURL:(0,V.xT)(e.url),openUrlInNewTab:e.openInNewTab});return}else if("internal"===e.type){o({connectionType:"INTERNAL_NODE",transitionNodeID:C.sH(e.id)??C.Hr,navigationType:"NAVIGATE"});return}else"cms_link_field_alias"===e.type?a(e.collectionId,{type:j.Z_n.CMS_ALIAS,resolvedType:j.rXF.LINK,value:{collectionId:e.collectionId,fieldSchemaId:e.fieldId}},e.openInNewTab):"internal_cms_item_page"===e.type?s(e.collectionId,e.id):"internal_cms_item_page_item"===e.type?d(e.id,e.itemId,e.fieldSchemaId):"back"===e.type?t():"anchor_link"===e.type&&n()}}var q=n(556936),Q=n(596763);function ee({isInteractionModal:e=!1,recordingKey:t}){let n=(0,r.d4)(O.C7),a=(0,u.Xr)(O.ZB),{setPropertiesForAnchorLink:l,removeAllLinks:s}=$(),c=function(){let e=(0,r.d4)(A.Cy),t=(0,B.eY)();return Object.keys((0,B.KH)()).every(n=>{let o=t.get(n);return o?.type==="TEXT"&&!(0,q.ol)(e)})}(),d=function(){let e=(0,B.eY)(),t=(0,B.KH)();return(0,r.d4)(O.C7)&&Object.keys(t).every(t=>{let n=e.get(t);return n&&(0,H.RZ)(n)})}(),_=Z({shouldLinkPanelSetHyperlink:c}),h=function({shouldLinkPanelSetHyperlink:e}){let[t,n]=(0,E.lJ)("hyperlink"),{variableConsumptionMap:o}=(0,b.R1)(),i=(0,O.kE)(t,(0,O.H1)(o));return!!e&&((0,v.gl)(i)||(0,v.gl)(t))}({shouldLinkPanelSetHyperlink:c}),m=function({shouldLinkPanelSetHyperlink:e}){let t=(0,B.KH)(),n=(0,r.d4)(A.Cy),o=(0,O.bW)(n),i=(0,O.GH)(o),{variableConsumptionMap:a,setVariableConsumptionMap:l}=(0,b.R1)(),s=(0,O.w0)(i),c=Z({shouldLinkPanelSetHyperlink:e}),[d,u]=(0,E.lJ)("hyperlink"),_=(0,O.kE)(d,(0,O.H1)(a));return e?e=>{if(!(0,v.gl)(_)){if(_?.type==="cms_link_field_alias"){if((0,P.uy)(j.Egt)){(0,U.sD)("SceneGraphHelpers is nullish when it should be defined");return}let n=Object.keys(t),o=(0,D.UN)();for(let n of Object.keys(t)){let t=o.get(n);if(t)for(let n of t.getNodesForCmsBinding(_.collectionId))null!==n.hyperlink&&"mixed"!==n.hyperlink&&"URL"===n.hyperlink.type&&(j.Egt.replaceSelection([n.id],!1),u({url:n.hyperlink.value,openInNewTab:e}))}j.Egt.replaceSelection(n,!1),(0,p.kc)().ds_enable_pdmo||l({HYPERLINK:{type:j.Z_n.CMS_ALIAS,resolvedType:j.rXF.LINK,value:{collectionId:_.collectionId,fieldSchemaId:_.fieldId}}})}else u({..._,openInNewTab:e})}}:e=>{switch(s?.type){case"url":case"cms_link_field_alias":c({...s,openInNewTab:e})}}}({shouldLinkPanelSetHyperlink:c}),{link:y,linkAction:g,cmsAliasData:I}=function({shouldLinkPanelSetHyperlink:e}){let t=(0,r.d4)(A.Cy),n=(0,O.bW)(t),o=(0,O.GH)(n),i=(0,O.w0)(o),[a]=(0,E.lJ)("hyperlink"),{variableConsumptionMap:l}=(0,b.R1)(),s=(0,O.kE)(a,(0,O.H1)(l)),{collectionId:c,fieldSchemaId:d}=(0,O.L4)(o,l),p={collectionId:c,fieldSchemaId:d};return e?{link:s,linkAction:void 0,cmsAliasData:p}:{link:i,linkAction:o??void 0,cmsAliasData:p}}({shouldLinkPanelSetHyperlink:c}),x=function(){let e=(0,r.d4)(A.Cy);return!!(0,O.fI)(e.filter(e=>e.event?.interactionType==="ON_CLICK"))}();if(i.useEffect(()=>{if(!d){a(!1);return}if(y||x){a(!0);return}a(!1)},[d,y,a,x]),!d)return null;let f=c?(0,O.Si)(y):(0,O.Q6)(g??null,y);return(0,o.jsx)(et,{cmsAliasData:I,disableOpenInNewTabCheckbox:h,disabled:!n,isInteractionModal:e,isLinkInternal:f,link:y,linkAction:g,onAddLink:()=>{a(!0)},onLinkChange:_,onOpenInNewTabChange:m,onRemoveLink:()=>{a(!1),s()},recordingKey:t,setPropertiesForAnchorLink:l})}function et({link:e,linkAction:t,cmsAliasData:n,isLinkInternal:E,onLinkChange:A,onAddLink:b,onRemoveLink:P,onOpenInNewTabChange:j,setPropertiesForAnchorLink:S,disableOpenInNewTabCheckbox:C,disabled:D,isInteractionModal:k,recordingKey:w}){let R=(0,u.md)(O.ZB),L=(0,r.wA)(),M=e&&!(0,v.gl)(e)&&("url"===e.type||"cms_link_field_alias"===e.type&&null!=e.openInNewTab&&!E),U=e&&!(0,v.gl)(e)&&e?.type==="url"&&(e?.url.startsWith("mailto:")||e?.url.startsWith("tel:")),K=(0,i.useCallback)(t=>{!e||(0,v.gl)(e)||e?.type!=="url"||(U?(0,I.UA)(L,e.url,"sites-link-panel"):L((0,y.RK)({rawInput:e.url,event:t})))},[L,U,e]),B=()=>!e||(0,v.gl)(e)||e?.type!=="url"?null:(0,o.jsx)(a.K,{onClick:K,children:U?(0,o.jsx)(c.a,{}):(0,o.jsx)(d.V,{}),"aria-label":U?(0,h.t)("sites.panel.copy_link"):(0,h.t)("sites.panel.open_link_new_tab")}),V=()=>(0,o.jsxs)(m.Uk,{collectionId:n.collectionId,fieldSchemaId:n.fieldSchemaId,type:"link",children:[(0,o.jsx)(Q.DE,{label:null,input:(0,o.jsx)(Y.MO,{id:k?"interaction_modal":"link_panel",disabled:D,recordingKey:w,link:e,onLinkChange:A,showCMSLinkFields:(0,p.kc)().dakota,showCMSItemPages:(0,p.kc)().dakota,showLinkPresets:!0}),icon:B()}),M&&(0,o.jsx)(T.TN,{children:(0,o.jsx)(l.S,{label:(0,o.jsx)(s.J,{children:(0,h.tx)("proto.action_open_url_in_new_tab")}),onChange:j,recordingKey:_.Pt(w,"open-url-in-new-tab-check"),checked:e.openInNewTab,disabled:C})}),t&&!(0,v.gl)(e)&&e?.type==="anchor_link"&&(0,o.jsx)(x.k,{action:t,recordingKey:w,interactionType:"ON_CLICK",setPropertiesForAnchorLink:S,hideXOffset:!0,renderWithIconSpacing:!0})]});return(0,o.jsx)(g.fu,{name:"Link panel",children:(0,o.jsx)(f.Zk,{children:k?(0,o.jsx)("div",{className:"xz9dl7a",children:V()}):(0,o.jsx)(N.u,{title:(0,h.t)("sites.panel.link"),addProperty:b,removeProperty:P,contentsVisibleOrMixed:R,recordingKey:w,plusButtonLabel:(0,h.t)("sites.panel.create_link"),minusButtonLabel:(0,h.t)("sites.panel.remove_link"),children:V()})})})}},947507:(e,t,n)=>{n.d(t,{Nw:()=>o,RZ:()=>p,Tl:()=>h,Ve:()=>c,eF:()=>_,l4:()=>u,qe:()=>d});var o,i=n(382629),r=n(266808),a=n(264993),l=n(919778);function s(e){return e?e.filter(e=>"NONE"!==e.connectionType&&"URL"!==e.connectionType&&!("INTERNAL_NODE"===e.connectionType&&"NAVIGATE"===e.navigationType)&&!(0,l.cn)(e)&&!e.linkParam):[]}function c(e){let t=o.getClickInteraction(e.prototypeInteractions);if(!t)return;let n=s(t.actions);if(0===n.length)e.prototypeInteractions=u(e.prototypeInteractions);else{t.actions=n;let o=u(e.prototypeInteractions);e.prototypeInteractions=o.concat(t)}}function d(e,t){let n;if(!p(e))return;let l=o.getClickInteraction(e.prototypeInteractions),c=o.getMatchingAction(l),d=c?.openUrlInNewTab;if(t?.connectionType==="URL"&&c?.connectionType==="URL"&&(0,i.uy)(t.openUrlInNewTab)&&(0,i.Vq)(d)&&(t.openUrlInNewTab=d),l){let e=s(l.actions);l.actions=e.concat(t?[t]:[]),n=l}else n=function({id:e,action:t}){let n=e??null;if(!e){let e=r.glU.generateUniqueID();if(!e)throw Error("Failed to generate a unique id");n=a.sH(e)}if(!n)throw Error("No interaction ID");return{id:n,event:{interactionType:"ON_CLICK"},stateManagementVersion:1,actions:[t]}}({action:t});let _=u(e.prototypeInteractions);e.prototypeInteractions=_.concat(n)}function p(e){return!!(e&&!(e.isResponsiveSet||e.isBreakpointFrame||e.isStateGroup||e.isSection||e.isHTMLWidget))}function u(e){return e.filter(e=>e.event?.interactionType!=="ON_CLICK")}function _(e){return e.filter(e=>!e.actions?.find(e=>"NONE"===e.connectionType))}(e=>{e.getClickInteraction=function(e){return e.find(e=>e.event?.interactionType==="ON_CLICK")??null},e.getMatchingAction=function(e){return e?.actions?.find(e=>"URL"===e.connectionType||"NAVIGATE"===e.navigationType||l.cn(e))??null}})(o||(o={}));let h="sites-link-panel"},702043:(e,t,n)=>{n.d(t,{qd:()=>i});var o=n(716976);n(327033),n(962301),n(307352),n(556936),n(118098),n(269535),n(75644),n(947507),n(657058),n(800403),n(542653),n(732741),n(201733),n(825543),n(135308);let i=o.createContext(void 0)},152917:(e,t,n)=>{n.d(t,{Y:()=>i});var o=n(104076);let i=(0,n(716976).memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0m1 0a7 7 0 1 1-14 0 7 7 0 0 1 14 0m-6.5-3.5a.5.5 0 0 0-1 0V12a.5.5 0 0 0 .146.354l2 2a.5.5 0 0 0 .708-.708L12.5 11.793z",clipRule:"evenodd"})})})}}]);

//# debugId=61201240-ed8c-5e24-84f8-cd0227e9e4bd

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/ca180a4a1e7cf0b0cece4d936226f0120c28fa05/362-cb5b0c4590b06391.min.js.map