"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="101c52e2-2414-5264-9dd4-d8b35b0e889c")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[5545],{968486:(e,t,r)=>{r.d(t,{f:()=>S});var o=r(104076),i=r(716976),n=r(420680),a=r(516604),s=r(476775),l=r(812714),d=r(795033),u=r(192075),c=r(748128),p=r(307829),f=r(17933),v=r(827695),x=(r(781767),r(260619));r(120440);var k=r(949701),g=r(449572),y=(r(276800),r(115989)),m=r(657878),h=r(59849),O=r(635729);function b({_threadId:e}){let{getTriggerProps:t,manager:r}=p.b();return null}function j({isOpen:e,onOpenChange:t,onSelectThread:r,currentThreadId:n,trigger:a}){let{getTriggerProps:s,getContainerProps:d}=f.fP({isOpen:e,onOpenChange:t,type:"menu",placement:"bottom",softDismiss:!0}),c=(0,m.Td)(),p=i.useCallback(e=>e.metadata&&"object"==typeof e.metadata&&e.metadata.title?e.metadata.title:(0,u.t)("ai_assistant.chat.history.new_chat_title"),[]),j=i.useCallback(e=>{if(!e.latestUserMessage?.parts?.length)return(0,u.t)("ai_assistant.chat.history.no_messages");let t=(0,O.t)(e.latestUserMessage).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===t.length)return(0,u.t)("ai_assistant.chat.history.no_messages");let r=t.join(" ").trim();return r.length>100?`${r.slice(0,100)}...`:r},[]),{data:S,status:N}=(0,g.Rs)((0,h.r3i)(c?{ownerId:c}:null)),w=(0,k.oA)(S?.fileAiChatThreads),I=w?.map(e=>({...e,title:p(e),preview:j(e)})),E=e=>{let t={},r=new Date;return e.forEach(e=>{let o=new Date(e.createdAt),i=Math.floor((r.getTime()-o.getTime())/864e5),n=(0,u.t)("ai_assistant.chat.history.earlier");t[n=0===i?(0,u.t)("ai_assistant.chat.history.today"):i<7?(0,u.t)("ai_assistant.chat.history.this_week"):i<14?(0,u.t)("ai_assistant.chat.history.last_week"):(0,u.t)("ai_assistant.chat.history.earlier")]||(t[n]=[]),t[n].push(e)}),t},_=i.useMemo(()=>E(I??[]),[I]),C=e=>{if(e===n){t(!1);return}r&&r(e),t(!1)};function J({id:e,isSelected:t,title:r,preview:i,createdAt:n}){return(0,o.jsxs)("button",{...{0:{className:"x78zum5 x1af02g3 x1cy8zhl xe8ttls x4zv5z4 x1sxf85j x1ypdohk xh8yej3 xeuugli x9f619"},4:{className:"x78zum5 x1af02g3 x1cy8zhl xe8ttls x1sxf85j x1ypdohk xh8yej3 xeuugli x9f619 xv2f06h"},2:{className:"x78zum5 x1af02g3 x1cy8zhl xe8ttls x1sxf85j x1ypdohk xh8yej3 xeuugli x9f619 xnj5wec"},6:{className:"x78zum5 x1af02g3 x1cy8zhl xe8ttls x1sxf85j x1ypdohk xh8yej3 xeuugli x9f619 xnj5wec"},1:{className:"x78zum5 x1af02g3 x1cy8zhl xe8ttls x1sxf85j x1ypdohk xh8yej3 xeuugli x9f619 xdkpnqj"},5:{className:"x78zum5 x1af02g3 x1cy8zhl xe8ttls x1sxf85j x1ypdohk xh8yej3 xeuugli x9f619 xdkpnqj"},3:{className:"x78zum5 x1af02g3 x1cy8zhl xe8ttls x1sxf85j x1ypdohk xh8yej3 xeuugli x9f619 xdkpnqj"},7:{className:"x78zum5 x1af02g3 x1cy8zhl xe8ttls x1sxf85j x1ypdohk xh8yej3 xeuugli x9f619 xdkpnqj"}}[!t<<2|!!t<<1|!!t<<0],onClick:()=>C(e),tabIndex:0,style:{cursor:"pointer"},children:[(0,o.jsx)("div",{className:"x1n2onr6 x1691je0 x90ne7k x2lah0s",children:(0,o.jsx)("div",{className:"x1691je0 x90ne7k x1yrfp1h x1sxf85j x78zum5 x6s0dn4 xl56j7k xmkeg23 x1y0btm7 x1i4klmm",children:(0,o.jsx)(x.l,{})})}),(0,o.jsxs)("div",{className:"x78zum5 xdt5ytf x195vfkc x1iyjqo2 xeuugli xnalus7",children:[(0,o.jsxs)("div",{className:"x78zum5 x167g77z x6s0dn4 xh8yej3 xeuugli",children:[(0,o.jsx)("div",{className:"x122x9cr x1j6dyjg xh88oxj x1d3mw78 xqp8s7e xiuzu7u x1iyjqo2 xeuugli xb3r6kr xlyipyv xuxw1ft xdpxx8g",children:r||(0,u.t)("ai_assistant.chat.history.new_chat_title")}),(0,o.jsx)("div",{className:"x122x9cr x1j6dyjg xo1l8bm x1d3mw78 xqp8s7e xv1l7n4 x2lah0s xuxw1ft xirqqd8 xb3r6kr xlyipyv",children:(0,y.JD)(n,"short")}),(0,o.jsx)(b,{_threadId:e})]}),(0,o.jsx)("div",{className:"x122x9cr x1j6dyjg xk50ysn x1d3mw78 xqp8s7e xv1l7n4 xh8yej3 x104kibb x1h7i4cw x1ua5tub xb3r6kr xlyipyv xdpxx8g",children:i||"Chat conversation"})]})]},e)}return(0,l.kc)().ai_assistant_server_side_chat?(0,o.jsxs)(o.Fragment,{children:[i.cloneElement(a,s()),e&&(0,o.jsx)(f.mc,{className:"x1yjdb4r xmkeg23 x1y0btm7 x7z60cl x9h44rk xch7sbz x1m258z3 x16nrsnc x1bifzbx x6ikm8r x1717udv x78zum5 xdt5ytf",...d({}),children:(0,o.jsxs)("div",{className:"xe8ttls x78zum5 xdt5ytf x1jnr06f x1iyjqo2 x1odjw0f x2lwn1j",children:["loading"===N&&(0,o.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4 x1o8uwn5 x1iyjqo2",children:(0,o.jsx)(v.k,{})}),"errors"===N&&(0,o.jsx)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k x62rkhy x4l9tsp x2b8uid",children:(0,o.jsx)("div",{className:"xif65rj xv1l7n4",children:(0,u.t)("ai_assistant.chat.history.error_loading_threads")})}),"loaded"===N&&(0,o.jsxs)("div",{className:"x78zum5 xdt5ytf x1jnr06f x1iyjqo2",children:[(!I?.length||0===I.length)&&(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("div",{className:"x78zum5 x6s0dn4 xl56j7k x1y1aw1k xy13l1i xjkvuk6 x163pfp",children:(0,o.jsx)("div",{className:"x122x9cr x1j6dyjg x10p5zqr x1d3mw78 xqp8s7e xv1l7n4 x1sdyfia",children:(0,u.t)("ai_assistant.chat.history.today")})}),(0,o.jsx)(J,{id:n??"",isSelected:!0,title:(0,u.t)("ai_assistant.chat.history.new_chat_title"),preview:(0,u.t)("ai_assistant.chat.history.not_started"),createdAt:new Date})]},(0,u.t)("ai_assistant.chat.history.today")),(I?.length??0)>0&&Object.entries(_).map(([e,t])=>(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("div",{className:"x78zum5 x6s0dn4 xl56j7k x1y1aw1k xy13l1i xjkvuk6 x163pfp",children:(0,o.jsx)("div",{className:"x122x9cr x1j6dyjg x10p5zqr x1d3mw78 xqp8s7e xv1l7n4 x1sdyfia",children:e})}),t.map(e=>{let t=e.id===n;return(0,o.jsx)(J,{id:e.id,isSelected:t,title:e.title,preview:e.preview,createdAt:e.createdAt},e.id)})]},e))]})]})})]}):a}function S(){let e=(0,l.kc)().ai_assistant_server_side_chat??!1,t=(0,l.kc)().ai_assistant_chat_history??!1,r=((0,l.kc)().ai_assistant_header??!1)&&e,p=(0,d.Xr)(c.qA),[f,v]=(0,d.fp)(c.D_),x=(0,d.Xr)(c.hM),k=(0,d.md)(c.G1),g=i.useCallback(()=>{p(e=>"idle"===e?"shouldCreate":e),x(null)},[p,x]),y=i.useCallback(e=>{x(e)},[x]);return r?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.K,{onClick:g,"aria-label":(0,u.t)("ai_assistant.chat.new_chat"),children:(0,o.jsx)(a.x,{})}),t&&(0,o.jsx)(j,{isOpen:f,onOpenChange:e=>v(e),onSelectThread:y,currentThreadId:k,trigger:(0,o.jsx)(n.K,{"aria-label":(0,u.t)("ai_assistant.chat.previous_chats"),children:(0,o.jsx)(s.d,{})})})]}):null}},635729:(e,t,r)=>{r.d(t,{t:()=>ey,D:()=>eg});var o=r(716976),i=r(420394);function n(){return{selectedNodeIds:[]}}let a={encode(e,t=new i.fI){for(let r of e.selectedNodeIds)t.uint32(10).string(r);return t},decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,a=n();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;a.selectedNodeIds.push(r.string());continue}if((7&e)==4||0===e)break;r.skip(7&e)}return a},fromJSON:e=>({selectedNodeIds:s.Array.isArray(e?.selectedNodeIds)?e.selectedNodeIds.map(e=>s.String(e)):[]}),toJSON(e){let t={};return e.selectedNodeIds?.length&&(t.selectedNodeIds=e.selectedNodeIds),t},create:e=>a.fromPartial(e??{}),fromPartial(e){let t=n();return t.selectedNodeIds=e.selectedNodeIds?.map(e=>e)||[],t}},s=(()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function l(){return{text:"",providerOptions:{}}}let d={encode:(e,t=new i.fI)=>(""!==e.text&&t.uint32(10).string(e.text),Object.entries(e.providerOptions).forEach(([e,r])=>{c.encode({key:e,value:r},t.uint32(18).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=l();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.text=r.string();continue;case 2:{if(18!==e)break;let t=c.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({text:ee(e.text)?W.String(e.text):"",providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.text&&(t.text=e.text),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>d.fromPartial(e??{}),fromPartial(e){let t=l();return t.text=e.text??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=W.String(r)),e),{}),t}};function u(){return{key:"",value:""}}let c={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=u();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:ee(e.key)?W.String(e.key):"",value:ee(e.value)?W.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>c.fromPartial(e??{}),fromPartial(e){let t=u();return t.key=e.key??"",t.value=e.value??"",t}};function p(){return{textBlobstoreKey:"",providerOptions:{}}}let f={encode:(e,t=new i.fI)=>(""!==e.textBlobstoreKey&&t.uint32(10).string(e.textBlobstoreKey),Object.entries(e.providerOptions).forEach(([e,r])=>{x.encode({key:e,value:r},t.uint32(18).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=p();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.textBlobstoreKey=r.string();continue;case 2:{if(18!==e)break;let t=x.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({textBlobstoreKey:ee(e.textBlobstoreKey)?W.String(e.textBlobstoreKey):"",providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.textBlobstoreKey&&(t.textBlobstoreKey=e.textBlobstoreKey),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>f.fromPartial(e??{}),fromPartial(e){let t=p();return t.textBlobstoreKey=e.textBlobstoreKey??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=W.String(r)),e),{}),t}};function v(){return{key:"",value:""}}let x={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=v();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:ee(e.key)?W.String(e.key):"",value:ee(e.value)?W.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>x.fromPartial(e??{}),fromPartial(e){let t=v();return t.key=e.key??"",t.value=e.value??"",t}};function k(){return{mimeType:void 0,providerOptions:{}}}let g={encode:(e,t=new i.fI)=>(void 0!==e.mimeType&&t.uint32(18).string(e.mimeType),Object.entries(e.providerOptions).forEach(([e,r])=>{m.encode({key:e,value:r},t.uint32(26).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=k();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 2:if(18!==e)break;n.mimeType=r.string();continue;case 3:{if(26!==e)break;let t=m.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({mimeType:ee(e.mimeType)?W.String(e.mimeType):void 0,providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(void 0!==e.mimeType&&(t.mimeType=e.mimeType),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>g.fromPartial(e??{}),fromPartial(e){let t=k();return t.mimeType=e.mimeType??void 0,t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=W.String(r)),e),{}),t}};function y(){return{key:"",value:""}}let m={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=y();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:ee(e.key)?W.String(e.key):"",value:ee(e.value)?W.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>m.fromPartial(e??{}),fromPartial(e){let t=y();return t.key=e.key??"",t.value=e.value??"",t}};function h(){return{text:"",signature:void 0,providerOptions:{}}}let O={encode:(e,t=new i.fI)=>(""!==e.text&&t.uint32(10).string(e.text),void 0!==e.signature&&t.uint32(18).string(e.signature),Object.entries(e.providerOptions).forEach(([e,r])=>{j.encode({key:e,value:r},t.uint32(26).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=h();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.text=r.string();continue;case 2:if(18!==e)break;n.signature=r.string();continue;case 3:{if(26!==e)break;let t=j.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({text:ee(e.text)?W.String(e.text):"",signature:ee(e.signature)?W.String(e.signature):void 0,providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.text&&(t.text=e.text),void 0!==e.signature&&(t.signature=e.signature),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>O.fromPartial(e??{}),fromPartial(e){let t=h();return t.text=e.text??"",t.signature=e.signature??void 0,t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=W.String(r)),e),{}),t}};function b(){return{key:"",value:""}}let j={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=b();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:ee(e.key)?W.String(e.key):"",value:ee(e.value)?W.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>j.fromPartial(e??{}),fromPartial(e){let t=b();return t.key=e.key??"",t.value=e.value??"",t}};function S(){return{providerOptions:{}}}let N={encode:(e,t=new i.fI)=>(Object.entries(e.providerOptions).forEach(([e,r])=>{I.encode({key:e,value:r},t.uint32(18).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=S();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 2:{if(18!==e)break;let t=I.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>N.fromPartial(e??{}),fromPartial(e){let t=S();return t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=W.String(r)),e),{}),t}};function w(){return{key:"",value:""}}let I={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=w();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:ee(e.key)?W.String(e.key):"",value:ee(e.value)?W.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>I.fromPartial(e??{}),fromPartial(e){let t=w();return t.key=e.key??"",t.value=e.value??"",t}};function E(){return{data:"",providerOptions:{}}}let _={encode:(e,t=new i.fI)=>(""!==e.data&&t.uint32(10).string(e.data),Object.entries(e.providerOptions).forEach(([e,r])=>{J.encode({key:e,value:r},t.uint32(18).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=E();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.data=r.string();continue;case 2:{if(18!==e)break;let t=J.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({data:ee(e.data)?W.String(e.data):"",providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.data&&(t.data=e.data),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>_.fromPartial(e??{}),fromPartial(e){let t=E();return t.data=e.data??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=W.String(r)),e),{}),t}};function C(){return{key:"",value:""}}let J={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=C();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:ee(e.key)?W.String(e.key):"",value:ee(e.value)?W.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>J.fromPartial(e??{}),fromPartial(e){let t=C();return t.key=e.key??"",t.value=e.value??"",t}};function P(){return{providerOptions:{}}}let T={encode:(e,t=new i.fI)=>(Object.entries(e.providerOptions).forEach(([e,r])=>{A.encode({key:e,value:r},t.uint32(18).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=P();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 2:{if(18!==e)break;let t=A.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>T.fromPartial(e??{}),fromPartial(e){let t=P();return t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=W.String(r)),e),{}),t}};function V(){return{key:"",value:""}}let A={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=V();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:ee(e.key)?W.String(e.key):"",value:ee(e.value)?W.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>A.fromPartial(e??{}),fromPartial(e){let t=V();return t.key=e.key??"",t.value=e.value??"",t}};function z(){return{toolCallId:"",toolName:"",providerOptions:{}}}let $={encode:(e,t=new i.fI)=>(""!==e.toolCallId&&t.uint32(10).string(e.toolCallId),""!==e.toolName&&t.uint32(18).string(e.toolName),Object.entries(e.providerOptions).forEach(([e,r])=>{D.encode({key:e,value:r},t.uint32(34).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=z();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.toolCallId=r.string();continue;case 2:if(18!==e)break;n.toolName=r.string();continue;case 4:{if(34!==e)break;let t=D.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({toolCallId:ee(e.toolCallId)?W.String(e.toolCallId):"",toolName:ee(e.toolName)?W.String(e.toolName):"",providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.toolCallId&&(t.toolCallId=e.toolCallId),""!==e.toolName&&(t.toolName=e.toolName),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>$.fromPartial(e??{}),fromPartial(e){let t=z();return t.toolCallId=e.toolCallId??"",t.toolName=e.toolName??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=W.String(r)),e),{}),t}};function q(){return{key:"",value:""}}let D={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=q();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:ee(e.key)?W.String(e.key):"",value:ee(e.value)?W.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>D.fromPartial(e??{}),fromPartial(e){let t=q();return t.key=e.key??"",t.value=e.value??"",t}};function B(){return{toolCallId:"",toolName:"",isError:void 0,providerOptions:{}}}let U={encode:(e,t=new i.fI)=>(""!==e.toolCallId&&t.uint32(10).string(e.toolCallId),""!==e.toolName&&t.uint32(18).string(e.toolName),void 0!==e.isError&&t.uint32(32).bool(e.isError),Object.entries(e.providerOptions).forEach(([e,r])=>{M.encode({key:e,value:r},t.uint32(42).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=B();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.toolCallId=r.string();continue;case 2:if(18!==e)break;n.toolName=r.string();continue;case 4:if(32!==e)break;n.isError=r.bool();continue;case 5:{if(42!==e)break;let t=M.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({toolCallId:ee(e.toolCallId)?W.String(e.toolCallId):"",toolName:ee(e.toolName)?W.String(e.toolName):"",isError:ee(e.isError)?W.Boolean(e.isError):void 0,providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.toolCallId&&(t.toolCallId=e.toolCallId),""!==e.toolName&&(t.toolName=e.toolName),void 0!==e.isError&&(t.isError=e.isError),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>U.fromPartial(e??{}),fromPartial(e){let t=B();return t.toolCallId=e.toolCallId??"",t.toolName=e.toolName??"",t.isError=e.isError??void 0,t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=W.String(r)),e),{}),t}};function K(){return{key:"",value:""}}let M={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=K();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:ee(e.key)?W.String(e.key):"",value:ee(e.value)?W.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>M.fromPartial(e??{}),fromPartial(e){let t=K();return t.key=e.key??"",t.value=e.value??"",t}};function R(){return{toolCallId:"",toolName:"",argsJson:"",providerOptions:{}}}let F={encode:(e,t=new i.fI)=>(""!==e.toolCallId&&t.uint32(10).string(e.toolCallId),""!==e.toolName&&t.uint32(18).string(e.toolName),""!==e.argsJson&&t.uint32(26).string(e.argsJson),Object.entries(e.providerOptions).forEach(([e,r])=>{H.encode({key:e,value:r},t.uint32(34).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=R();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.toolCallId=r.string();continue;case 2:if(18!==e)break;n.toolName=r.string();continue;case 3:if(26!==e)break;n.argsJson=r.string();continue;case 4:{if(34!==e)break;let t=H.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({toolCallId:ee(e.toolCallId)?W.String(e.toolCallId):"",toolName:ee(e.toolName)?W.String(e.toolName):"",argsJson:ee(e.argsJson)?W.String(e.argsJson):"",providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.toolCallId&&(t.toolCallId=e.toolCallId),""!==e.toolName&&(t.toolName=e.toolName),""!==e.argsJson&&(t.argsJson=e.argsJson),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>F.fromPartial(e??{}),fromPartial(e){let t=R();return t.toolCallId=e.toolCallId??"",t.toolName=e.toolName??"",t.argsJson=e.argsJson??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=W.String(r)),e),{}),t}};function G(){return{key:"",value:""}}let H={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=G();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:ee(e.key)?W.String(e.key):"",value:ee(e.value)?W.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>H.fromPartial(e??{}),fromPartial(e){let t=G();return t.key=e.key??"",t.value=e.value??"",t}};function L(){return{toolCallId:"",toolName:"",resultJson:"",isError:void 0,providerOptions:{}}}let Y={encode:(e,t=new i.fI)=>(""!==e.toolCallId&&t.uint32(10).string(e.toolCallId),""!==e.toolName&&t.uint32(18).string(e.toolName),""!==e.resultJson&&t.uint32(26).string(e.resultJson),void 0!==e.isError&&t.uint32(32).bool(e.isError),Object.entries(e.providerOptions).forEach(([e,r])=>{Q.encode({key:e,value:r},t.uint32(42).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=L();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.toolCallId=r.string();continue;case 2:if(18!==e)break;n.toolName=r.string();continue;case 3:if(26!==e)break;n.resultJson=r.string();continue;case 4:if(32!==e)break;n.isError=r.bool();continue;case 5:{if(42!==e)break;let t=Q.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({toolCallId:ee(e.toolCallId)?W.String(e.toolCallId):"",toolName:ee(e.toolName)?W.String(e.toolName):"",resultJson:ee(e.resultJson)?W.String(e.resultJson):"",isError:ee(e.isError)?W.Boolean(e.isError):void 0,providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.toolCallId&&(t.toolCallId=e.toolCallId),""!==e.toolName&&(t.toolName=e.toolName),""!==e.resultJson&&(t.resultJson=e.resultJson),void 0!==e.isError&&(t.isError=e.isError),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>Y.fromPartial(e??{}),fromPartial(e){let t=L();return t.toolCallId=e.toolCallId??"",t.toolName=e.toolName??"",t.resultJson=e.resultJson??"",t.isError=e.isError??void 0,t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=W.String(r)),e),{}),t}};function X(){return{key:"",value:""}}let Q={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=X();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:ee(e.key)?W.String(e.key):"",value:ee(e.value)?W.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>Q.fromPartial(e??{}),fromPartial(e){let t=X();return t.key=e.key??"",t.value=e.value??"",t}},W=(()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function Z(e){return"object"==typeof e&&null!==e}function ee(e){return null!=e}let et={encode:(e,t=new i.fI)=>(""!==e.foo&&t.uint32(10).string(e.foo),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n={foo:""};for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.foo=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({foo:null!=e.foo?er.String(e.foo):""}),toJSON(e){let t={};return""!==e.foo&&(t.foo=e.foo),t},create:e=>et.fromPartial(e??{}),fromPartial(e){let t={foo:""};return t.foo=e.foo??"",t}},er=(()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})(),eo=["selected-node-ids","text","text-ref","image-ref","reasoning","reasoning-ref","redacted-reasoning","redacted-reasoning-ref","tool-call-ref","tool-result-ref","tool-call-json-DO-NOT-USE-IN-PROD","tool-result-json-DO-NOT-USE-IN-PROD","figmake-test-part"],ei={"selected-node-ids":a,text:d,"text-ref":f,"image-ref":g,reasoning:O,"reasoning-ref":N,"redacted-reasoning":_,"redacted-reasoning-ref":T,"tool-call-ref":$,"tool-result-ref":U,"tool-call-json-DO-NOT-USE-IN-PROD":F,"tool-result-json-DO-NOT-USE-IN-PROD":Y,"figmake-test-part":et};function en(e,t){let r=(function(e){let t=ei[e];if(null==t)throw Error(`Unknown message part type: ${e}. Did you add a new message part type to a proto file? Run \`pnpm --filter @figma/synapse-global generate-ai-chat-proto\` to regenerate Typescript bindings.`);return t})(e).decode(t);return{type:e,...r}}var ea=r(723584);let es=e=>e.map((e,t)=>{let r=ea.Fd.safeParse(e);if(!r.success)throw Error(`Failed to parse user message part ${t}: ${r.error.message}`);return r.data}),el=e=>e.map((e,t)=>{let r=ea.G4.safeParse(e);if(!r.success)throw Error(`Failed to parse assistant message part ${t}: ${r.error.message}`);return r.data}),ed=e=>e.map((e,t)=>{let r=ea.iS.safeParse(e);if(!r.success)throw Error(`Failed to parse tool message part ${t}: ${r.error.message}`);return r.data}),eu=e=>e.map((e,t)=>{let r=ea.jV.safeParse(e);if(!r.success)throw Error(`Failed to parse system message part ${t}: ${r.error.message}`);return r.data});var ec=r(812714),ep=r(949701),ef=r(146283),ev=r(755444),ex=r(449572),ek=r(59849);function eg(e,t,r,i){let n=(0,ec.kc)().ai_assistant_server_side_chat,[a,s]=o.useState(null),{status:l,data:d}=(0,ex.Rs)((0,ek.r3i)(n&&e&&null==a?{ownerId:e}:null)),u=a??ep.oA(d?.fileAiChatThreads)?.[0]?.id??null,c=n&&e&&u?{ownerId:e,id:u}:null,{data:p}=(0,ex.Rs)((0,ek.A6w)(c)),f=(0,ep.oA)(p?.activeAiChatThread);return o.useEffect(()=>{if(!f||!u||i)return;let e=f.messages.map(ey);s(u),r(r=>e.length>r.length+t?(function(e,...t){(0,ec.kc)().ai_assistant_server_side_chat&&ef.k.log(`[server-side-chat] ${e}`,...t)}("LiveGraph ActiveAiChatThread updating =>",f),e):r)},[f,r,u,t,i,s]),{threadId:i?null:u,setThreadId:s,isLoadingThreadId:"loading"===l}}function ey(e){let t=e.parts.map(({partType:t,contentPb:r})=>{try{let{type:e,...o}=function(e,t){try{return en(e,function(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}(t))}catch(r){return en(e,function(e){let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let o=e.slice(r,r+2);t[r/2]=parseInt(o,16)}return t}(t))}}(t,r);return function({type:e,contentJson:t}){if(!eo.includes(e))throw Error(`Unknown message part type: ${e}`);let r=ei[e].fromJSON(t),o={type:e,...r};switch(o.type){case"text":case"reasoning":case"redacted-reasoning":case"selected-node-ids":return o;case"tool-call-json-DO-NOT-USE-IN-PROD":{let{toolCallId:e,toolName:t,argsJson:o}=r;return{type:"tool-call",toolCallId:e,toolName:t,argsJSON:o}}case"tool-result-json-DO-NOT-USE-IN-PROD":{let{toolCallId:e,toolName:t,resultJson:o,isError:i}=r;return{type:"tool-result",toolCallId:e,toolName:t,resultJSON:o,isError:i}}default:throw Error(`Not implemented: Conversion from pb MessagePart type ${o.type} to AnyPart not implemented`)}}({type:e,contentJson:o})}catch(r){let t=`Error decoding message part: ${e.id}`;return(0,ev.IX)()&&console.error(t,r),{type:"text",text:(0,ev.IX)()?`${t}
Error: ${r.message}`:t}}});return function({role:e,content:t,...r}){return{...(()=>{switch(e){case"user":return{role:e,content:es(t)};case"assistant":return{role:e,content:el(t)};case"tool":return{role:e,content:ed(t)};case"system":return{role:e,content:eu(t)};default:throw Error(`Unknown message role: ${e}`)}})(),...r}}({role:e.role,content:t,createdAtMs:e.createdAt.getTime(),clientId:e.clientId??void 0})}},998873:(e,t,r)=>{r.d(t,{K:()=>g});var o=r(104076),i=r(795033),n=r(511570),a=r.n(n),s=r(983500),l=r(451837),d=r(278491),u=r(819851),c=r(375627),p=r(968169),f=r(331497),v=r(176203),x=r(948311),k=r(404343);function g(e){let t;let r=(0,l.lz)(),n=(0,p.qw)(),g=(0,u.E3)(),{isPropertiesPanelCollapsed:y}=(0,c.iT)(),m=(0,i.md)(x.Ds),h=(0,f.J2)((0,p.UK)().renderRulers);return t={right:`calc(${g===v.nT.DevHandoff?r:n}px + ${(0,s.jz)(k.M$q)}px)`,top:`${(0,s.jz)(k.M$q)}px`},y&&(t={...t,right:`calc(${m}px + ${(0,s.jz)(k.M$q)}px)`}),h&&(t={...t,top:`calc(${(0,s.jz)(k.M$q)}px + ${(0,s.jz)(k.y9S)}px)`}),(0,o.jsx)("div",{style:t,className:a()("nav_container--flexContainer--3Us-2 nav_container--baseContainer--QideS overflow--overflowYAuto--nfK38 overflow--momentumScroll--qtsu7",d.Dm,e.className),children:e.children})}},980931:(e,t,r)=>{r.d(t,{n:()=>l});var o=r(104076),i=r(903927),n=r(835307),a=r(714714),s=r(589337);function l(){let e=function(){let e=(0,i.d4)(e=>e.mirror.appModel.onCanvasPillInfo);return(0,n.Fk)((e,t)=>t&&0!==t.length?t.map(t=>{let r=e.get(t.guid);if(!r||"-1:-1"===r.guid)return null;let o={guid:r.guid,name:r.name,type:r.type,boundingBox:r.absoluteBoundingBox,isFigmaPurple:t.isFigmaPurple,hasEnabledStaticImagePaint:r.hasEnabledStaticImagePaint,isState:r.isState,isStateGroup:r.isStateGroup,stackCounterAlignItems:r.stackCounterAlignItems,stackMode:r.stackMode,isGroup:r.isGroup,canHaveStatus:r.canHaveStatus,hasStatus:r.hasStatus,objectsPanelThumbnailId:r.objectsPanelThumbnailId};if(o.isState&&t.symbolId){let r=e.get(t.symbolId);o.symbolName=r?.name}return o}):null,e)}()?.[0];return e?(0,o.jsx)(a.MO,{node:e,offsetX:-3,children:(0,o.jsxs)("div",{className:s.nM,children:[(0,o.jsx)(a.Tq,{node:e}),(0,o.jsx)("span",{className:s.dK,children:e.symbolName?e.symbolName:e.name})]})}):null}},234312:(e,t,r)=>{r.d(t,{ay:()=>k,n8:()=>g,FV:()=>m,eG:()=>h,BN:()=>O});var o=r(104076),i=r(716976),n=r(132760),a=r(266808),s=r(812714),l=r(641518),d=r(192075),u=r(819851),c=r(657878),p=r(85598),f=r(337726),v=r(167151),x=r(314416);let k=a.xae.ASSETS.toString(),g=a.xae.CHAT.toString(),y=a.xae.CODE.toString(),m=a.xae.LAYERS.toString();function h({tabManager:e,tabPropsMap:t}){let r=(0,p.HY)();return(0,o.jsx)("div",{className:"ui3_tabs--tabStrip--zypFK",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},children:(0,o.jsxs)(n.t.TabStrip,{manager:e,children:[(0,o.jsx)(n.t.Tab,{...t[m],htmlAttributes:{"data-testid":f.pk},children:(0,d.tx)("fullscreen.pages_panel.file_tab")}),(0,o.jsx)(n.t.Tab,{...t[y],children:(0,d.tx)("fullscreen.pages_panel.code_tab")}),!r&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.t.Tab,{...t[k],onboardingKey:f.Qr,children:(0,d.tx)("fullscreen.pages_panel.assets_tab")}),(0,o.jsx)(n.t.Tab,{...t[g],children:(0,d.tx)("fullscreen.pages_panel.chat_tab")})]})]})})}function O(e,t){let r=(0,c._6)(),{showPublish:o,showLayersPanel:d,showCodePanel:p,showChat:f}=(0,x.U)(),h=(0,v.Vj)(r),O=!!(0,s.kc)().sts_code,b=(0,u.ow)(),j=(0,u.Em)(),S=(0,s.kc)().ai_assistant||!1,N=i.useCallback(e=>{switch(parseInt(e)){case a.xae.LAYERS:d();break;case a.xae.CODE:p();break;case a.xae.ASSETS:o();break;case a.xae.CHAT:f();break;default:(t=>{throw Error("Unhandled tab behavior: "+e)})(0)}},[d,p,o,f]);return n.t.useManagedTabs({[m]:!0,[y]:h&&O,[k]:!b,[g]:j&&S&&!1},e.toString(),N,{recordingKey:l.Pt(t,"tabs")})}},236099:(e,t,r)=>{r.d(t,{I:()=>v});var o=r(104076),i=r(266808),n=r(968486),a=r(819851),s=r(48469),l=r(85598),d=r(539607),u=r(10019),c=r(288054),p=r(342053),f=r(234312);function v({activeTab:e,onCanvasSearch:t,recordingKey:r,...v}){let x=(0,u.M)(),k=(0,l.HY)(),g=(0,a.Em)(),y=(0,a.cJ)(),m=e===i.xae.LAYERS,h=e===i.xae.CHAT,O=x&&(g||y)&&(e===i.xae.ASSETS||m);return(0,o.jsxs)(p.y,{withBorder:!0,children:[(0,o.jsx)(f.eG,{...v}),(0,o.jsxs)("div",{className:"ui3_tabs_row--iconContainer--a0sRl",children:[m&&!k&&(0,o.jsx)(s._,{onClick:t}),h&&(0,o.jsx)(n.f,{}),O&&(0,o.jsx)(d.b,{recordingKey:r,entrypoint:e===i.xae.ASSETS?c.r6.ASSETS_PANEL_BUTTON:c.r6.LAYERS_TAB_BUTTON,hideIfNoUpdates:e===i.xae.LAYERS})]})]})}},476775:(e,t,r)=>{r.d(t,{d:()=>i});var o=r(104076);let i=(0,r(716976).memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M8 9a5 5 0 1 1-.975 3.499A.54.54 0 0 0 6.5 12a.47.47 0 0 0-.48.5A6 6 0 1 0 7 8.682V6.5a.5.5 0 0 0-1 0v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 0-1zm4 0a.5.5 0 0 1 .5.5v2.293l1.354 1.353a.5.5 0 0 1-.707.707l-1.5-1.499A.5.5 0 0 1 11.5 12V9.5A.5.5 0 0 1 12 9",clipRule:"evenodd"})})})}}]);

//# debugId=101c52e2-2414-5264-9dd4-d8b35b0e889c

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/ca180a4a1e7cf0b0cece4d936226f0120c28fa05/5545-a478a2033d7049e9.min.js.map